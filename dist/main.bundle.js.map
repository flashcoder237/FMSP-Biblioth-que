{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://bibliotheque-app/./src/renderer/App.tsx","webpack://bibliotheque-app/./src/renderer/components/About.tsx","webpack://bibliotheque-app/./src/renderer/components/AddDocument.tsx","webpack://bibliotheque-app/./src/renderer/components/AnimatedBackground.tsx","webpack://bibliotheque-app/./src/renderer/components/AppPasswordScreen.tsx","webpack://bibliotheque-app/./src/renderer/components/AppSettings.tsx","webpack://bibliotheque-app/./src/renderer/components/BackupManager.tsx","webpack://bibliotheque-app/./src/renderer/components/BorrowDocument.tsx","webpack://bibliotheque-app/./src/renderer/components/BorrowHistory.tsx","webpack://bibliotheque-app/./src/renderer/components/BorrowedDocuments.tsx","webpack://bibliotheque-app/./src/renderer/components/Borrowers.tsx","webpack://bibliotheque-app/./src/renderer/components/Dashboard.tsx","webpack://bibliotheque-app/./src/renderer/components/DocumentList.tsx","webpack://bibliotheque-app/./src/renderer/components/Donation.tsx","webpack://bibliotheque-app/./src/renderer/components/EnhancedAuthentication.tsx","webpack://bibliotheque-app/./src/renderer/components/EnhancedStats.tsx","webpack://bibliotheque-app/./src/renderer/components/ExportDialog.tsx","webpack://bibliotheque-app/./src/renderer/components/InitialSetup.tsx","webpack://bibliotheque-app/./src/renderer/components/InstitutionSetup.tsx","webpack://bibliotheque-app/./src/renderer/components/KeyboardShortcuts.tsx","webpack://bibliotheque-app/./src/renderer/components/MicroInteractions.tsx","webpack://bibliotheque-app/./src/renderer/components/PrintManager.tsx","webpack://bibliotheque-app/./src/renderer/components/Settings.tsx","webpack://bibliotheque-app/./src/renderer/components/Sidebar.tsx","webpack://bibliotheque-app/./src/renderer/components/SmartSearch.tsx","webpack://bibliotheque-app/./src/renderer/components/TitleBar.tsx","webpack://bibliotheque-app/./src/renderer/components/ToastSystem.tsx","webpack://bibliotheque-app/./src/renderer/components/UserProfile.tsx","webpack://bibliotheque-app/./src/renderer/index.tsx","webpack://bibliotheque-app/./src/renderer/services/ConfigService.ts","webpack://bibliotheque-app/./src/renderer/services/LocalAuthService.ts","webpack://bibliotheque-app/./src/renderer/services/SupabaseClient.ts","webpack://bibliotheque-app/./src/renderer/types/UnifiedTypes.ts","webpack://bibliotheque-app/webpack/bootstrap","webpack://bibliotheque-app/webpack/runtime/chunk loaded","webpack://bibliotheque-app/webpack/runtime/compat get default export","webpack://bibliotheque-app/webpack/runtime/define property getters","webpack://bibliotheque-app/webpack/runtime/hasOwnProperty shorthand","webpack://bibliotheque-app/webpack/runtime/make namespace object","webpack://bibliotheque-app/webpack/runtime/node module decorator","webpack://bibliotheque-app/webpack/runtime/jsonp chunk loading","webpack://bibliotheque-app/webpack/before-startup","webpack://bibliotheque-app/webpack/startup","webpack://bibliotheque-app/webpack/after-startup"],"sourcesContent":["// src/renderer/App.tsx - Version modifie pour Supabase\r\nimport React, { useState, useEffect } from 'react';\r\nimport { TitleBar } from './components/TitleBar';\r\nimport { Sidebar } from './components/Sidebar';\r\nimport { Dashboard } from './components/Dashboard';\r\nimport { DocumentList } from './components/DocumentList';\r\nimport { BorrowedDocuments } from './components/BorrowedDocuments';\r\nimport { AddDocument } from './components/AddDocument';\r\nimport { BorrowDocument } from './components/BorrowDocument';\r\nimport Borrowers from './components/Borrowers';\r\nimport { BorrowHistory } from './components/BorrowHistory';\r\nimport { Settings } from './components/Settings';\r\nimport { Donation } from './components/Donation';\r\nimport { About } from './components/About';\r\nimport { EnhancedAuthentication } from './components/EnhancedAuthentication';\r\nimport { InstitutionSetup } from './components/InstitutionSetup';\r\nimport { InitialSetup, AppMode } from './components/InitialSetup';\r\nimport { AppPasswordScreen } from './components/AppPasswordScreen';\r\nimport { Document, Author, Category, Stats, Borrower, BorrowHistory as BorrowHistoryType } from '../types';\r\nimport { SupabaseRendererService, Institution, User } from './services/SupabaseClient';\r\nimport { ConfigService } from './services/ConfigService';\r\nimport { LocalAuthService } from './services/LocalAuthService';\r\nimport { AppSettings } from './components/AppSettings';\r\nimport { UserProfile } from './components/UserProfile';\r\nimport { BackupManager } from './components/BackupManager';\r\nimport { ToastProvider, useQuickToast } from './components/ToastSystem';\r\nimport { KeyboardShortcutsProvider } from './components/KeyboardShortcuts';\r\nimport { UnifiedUser, UnifiedInstitution, convertToUnifiedUser, convertToUnifiedInstitution } from './types/UnifiedTypes';\r\n\r\ntype ViewType = 'initial_setup' | 'dashboard' | 'documents' | 'borrowed' | 'add-document' | 'borrowers' | 'history' | 'settings' | 'app-settings' | 'user-profile' | 'backup-manager' | 'donation' | 'about' | 'auth' | 'institution_setup';\r\n\r\nexport const App: React.FC = () => {\r\n  const [currentView, setCurrentView] = useState<ViewType>('initial_setup');\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\r\n  const [currentInstitution, setCurrentInstitution] = useState<Institution | null>(null);\r\n  const [unifiedUser, setUnifiedUser] = useState<UnifiedUser | null>(null);\r\n  const [unifiedInstitution, setUnifiedInstitution] = useState<UnifiedInstitution | null>(null);\r\n  const [institutionCode, setInstitutionCode] = useState<string>('');\r\n  const [isDemoMode, setIsDemoMode] = useState(false);\r\n  const [appMode, setAppMode] = useState<AppMode>('offline');\r\n  const [isAppConfigured, setIsAppConfigured] = useState(false);\r\n  \r\n  // App security states\r\n  const [isAppLocked, setIsAppLocked] = useState(true);\r\n  const [needsPasswordSetup, setNeedsPasswordSetup] = useState(false);\r\n  \r\n  // Data states\r\n  const [documents, setDocuments] = useState<Document[]>([]);\r\n  const [authors, setAuthors] = useState<Author[]>([]);\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [borrowers, setBorrowers] = useState<Borrower[]>([]);\r\n  const [borrowedDocuments, setBorrowedDocuments] = useState<BorrowHistoryType[]>([]);\r\n  const [recentActivity, setRecentActivity] = useState<any[]>([]);\r\n  const [stats, setStats] = useState<Stats>({\r\n    totalDocuments: 0,\r\n    borrowedDocuments: 0,\r\n    availableDocuments: 0,\r\n    totalAuthors: 0,\r\n    totalCategories: 0,\r\n    totalBorrowers: 0,\r\n    totalStudents: 0,\r\n    totalStaff: 0,\r\n    overdueDocuments: 0\r\n  });\r\n\r\n  // Services\r\n  const [supabaseService] = useState(() => new SupabaseRendererService());\r\n  const [showBorrowModal, setShowBorrowModal] = useState(false);\r\n  const [selectedDocumentForBorrow, setSelectedDocumentForBorrow] = useState<Document | null>(null);\r\n  const [editingDocument, setEditingDocument] = useState<Document | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    checkAppSecurity();\r\n  }, []);\r\n\r\n  const checkAppSecurity = async () => {\r\n    try {\r\n      // Vrifier si un mot de passe d'application est requis\r\n      const appSettings = LocalAuthService.getAppSettings();\r\n      \r\n      if (appSettings.requireAppPassword) {\r\n        setIsAppLocked(true);\r\n        setNeedsPasswordSetup(false);\r\n      } else {\r\n        setIsAppLocked(false);\r\n        await checkInitialConfiguration();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la vrification de scurit:', error);\r\n      setIsAppLocked(false);\r\n      await checkInitialConfiguration();\r\n    }\r\n  };\r\n\r\n  const handleAppUnlock = async () => {\r\n    setIsAppLocked(false);\r\n    await checkInitialConfiguration();\r\n  };\r\n\r\n  const handlePasswordSetup = async () => {\r\n    setNeedsPasswordSetup(false);\r\n    setIsAppLocked(false);\r\n    await checkInitialConfiguration();\r\n  };\r\n\r\n  const checkInitialConfiguration = async () => {\r\n    try {\r\n      // Vrifier si l'application a t configure\r\n      const configured = ConfigService.isConfigured();\r\n      const mode = ConfigService.getMode();\r\n      \r\n      setIsAppConfigured(configured);\r\n      setAppMode(mode);\r\n\r\n      // Charger les informations de dernire connexion si disponibles\r\n      const lastLogin = LocalAuthService.getLastLoginInfo();\r\n      \r\n      if (configured) {\r\n        console.log(`Application configure en mode: ${mode}`);\r\n        \r\n        // Si auto-login activ et informations disponibles\r\n        if (lastLogin && lastLogin.password && LocalAuthService.getAppSettings().autoLogin) {\r\n          console.log('Tentative de connexion automatique...');\r\n          try {\r\n            await handleAuthentication({\r\n              email: lastLogin.email,\r\n              password: lastLogin.password,\r\n              institutionCode: lastLogin.institutionCode,\r\n              mode: 'login'\r\n            });\r\n            return;\r\n          } catch (error) {\r\n            console.log('chec de la connexion automatique:', error);\r\n          }\r\n        }\r\n        \r\n        setCurrentView('auth');\r\n        await checkAuthStatus();\r\n      } else {\r\n        console.log('Premire excution - configuration ncessaire');\r\n        setCurrentView('initial_setup');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la vrification de la configuration:', error);\r\n      setCurrentView('initial_setup');\r\n    }\r\n  };\r\n\r\n  const handleInitialSetup = async (mode: AppMode) => {\r\n    try {\r\n      console.log(`Configuration initiale: mode ${mode}`);\r\n      \r\n      // Sauvegarder la configuration\r\n      ConfigService.configureApp(mode);\r\n      \r\n      // Mettre  jour l'tat local\r\n      setAppMode(mode);\r\n      setIsAppConfigured(true);\r\n      \r\n      // Rediriger vers l'authentification\r\n      setCurrentView('auth');\r\n      \r\n      // Si mode offline, charger les donnes de dmo par dfaut\r\n      if (mode === 'offline') {\r\n        setIsDemoMode(false); // Mode offline avec vraies donnes locales\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Erreur lors de la configuration initiale:', error);\r\n      setError('Erreur lors de la sauvegarde de la configuration');\r\n    }\r\n  };\r\n\r\n  const checkAuthStatus = async () => {\r\n    try {\r\n      // En mode offline, on utilise uniquement l'authentification locale\r\n      if (appMode === 'offline') {\r\n        setCurrentView('auth');\r\n        return;\r\n      }\r\n      \r\n      const user = supabaseService.getCurrentUser();\r\n      const institution = supabaseService.getCurrentInstitution();\r\n      \r\n      if (user && institution) {\r\n        setCurrentUser(user);\r\n        setCurrentInstitution(institution);\r\n        setIsAuthenticated(true);\r\n        setCurrentView('dashboard');\r\n        await loadData();\r\n      } else {\r\n        setCurrentView('auth');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la vrification de l\\'authentification:', error);\r\n      setCurrentView('auth');\r\n    }\r\n  };\r\n\r\n  const loadData = async () => {\r\n    if (appMode === 'online' && !supabaseService.isAuthenticated()) return;\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      \r\n      if (appMode === 'offline') {\r\n        // Mode offline - charger les donnes depuis SQLite via electronAPI\r\n        const [\r\n          documentsData, \r\n          authorsData, \r\n          categoriesData, \r\n          borrowersData,\r\n          borrowedDocumentsData,\r\n          recentActivityData\r\n        ] = await Promise.all([\r\n          window.electronAPI.getDocuments(),\r\n          window.electronAPI.getAuthors(),\r\n          window.electronAPI.getCategories(),\r\n          window.electronAPI.getBorrowers(),\r\n          window.electronAPI.getBorrowHistory(),\r\n          window.electronAPI.getRecentActivity(5)\r\n        ]);\r\n\r\n        setDocuments(documentsData || []);\r\n        setAuthors(authorsData || []);\r\n        setCategories(categoriesData || []);\r\n        setBorrowers(borrowersData || []);\r\n        setBorrowedDocuments(borrowedDocumentsData || []);\r\n        setRecentActivity(recentActivityData || []);\r\n        \r\n        // Calculer les statistiques manuellement pour le mode offline\r\n        const totalDocuments = documentsData?.length || 0;\r\n        const borrowedCount = borrowedDocumentsData?.filter(bh => bh.status === 'active').length || 0;\r\n        const availableDocuments = totalDocuments - borrowedCount;\r\n        const totalAuthors = authorsData?.length || 0;\r\n        const totalCategories = categoriesData?.length || 0;\r\n        const totalBorrowers = borrowersData?.length || 0;\r\n        const totalStudents = borrowersData?.filter(b => b.type === 'student').length || 0;\r\n        const totalStaff = borrowersData?.filter(b => b.type === 'staff').length || 0;\r\n        const overdueDocuments = borrowedDocumentsData?.filter(bh => {\r\n          if (bh.status !== 'active') return false;\r\n          const expectedReturnDate = new Date(bh.expectedReturnDate);\r\n          return expectedReturnDate < new Date();\r\n        }).length || 0;\r\n        \r\n        setStats({\r\n          totalDocuments,\r\n          borrowedDocuments: borrowedCount,\r\n          availableDocuments,\r\n          totalAuthors,\r\n          totalCategories,\r\n          totalBorrowers,\r\n          totalStudents,\r\n          totalStaff,\r\n          overdueDocuments\r\n        });\r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        const [\r\n          documentsData, \r\n          authorsData, \r\n          categoriesData, \r\n          borrowersData,\r\n          borrowedDocumentsData,\r\n          statsData\r\n        ] = await Promise.all([\r\n          supabaseService.getDocuments(),\r\n          supabaseService.getAuthors(),\r\n          supabaseService.getCategories(),\r\n          supabaseService.getBorrowers(),\r\n          supabaseService.getBorrowedDocuments(),\r\n          supabaseService.getStats()\r\n        ]);\r\n\r\n        setDocuments(documentsData);\r\n        setAuthors(authorsData);\r\n        setCategories(categoriesData);\r\n        setBorrowers(borrowersData);\r\n        setBorrowedDocuments(borrowedDocumentsData);\r\n        setStats(statsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des donnes:', error);\r\n      setError('Erreur lors du chargement des donnes');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadDemoData = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      \r\n      // Donnes de dmonstration\r\n      const demoDocuments: Document[] = [\r\n        {\r\n          id: 1,\r\n          titre: \"L'Art de la Programmation\",\r\n          auteur: \"Donald Knuth\",\r\n          editeur: \"Addison-Wesley\",\r\n          lieuEdition: \"Reading, MA\",\r\n          annee: \"1968\",\r\n          descripteurs: \"Informatique, Programmation\",\r\n          cote: \"004.01 KNU\",\r\n          couverture: \"\",\r\n          estEmprunte: false,\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        {\r\n          id: 2,\r\n          titre: \"Clean Code\",\r\n          auteur: \"Robert C. Martin\",\r\n          editeur: \"Prentice Hall\",\r\n          lieuEdition: \"Upper Saddle River, NJ\",\r\n          annee: \"2008\",\r\n          descripteurs: \"Dveloppement, Bonnes pratiques\",\r\n          cote: \"005.1 MAR\",\r\n          couverture: \"\",\r\n          estEmprunte: false,\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        {\r\n          id: 3,\r\n          titre: \"Design Patterns\",\r\n          auteur: \"Gang of Four\",\r\n          editeur: \"Addison-Wesley\",\r\n          lieuEdition: \"Reading, MA\",\r\n          annee: \"1994\",\r\n          descripteurs: \"Architecture logicielle\",\r\n          cote: \"005.1 GAM\",\r\n          couverture: \"\",\r\n          estEmprunte: false,\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        }\r\n      ];\r\n\r\n      const demoAuthors: Author[] = [\r\n        { \r\n          id: 1, \r\n          name: \"Donald Knuth\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Robert C. Martin\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        { \r\n          id: 3, \r\n          name: \"Gang of Four\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        }\r\n      ];\r\n\r\n      const demoCategories: Category[] = [\r\n        { \r\n          id: 1, \r\n          name: \"Informatique\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Programmation\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        { \r\n          id: 3, \r\n          name: \"Architecture logicielle\",\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        }\r\n      ];\r\n\r\n      const demoBorrowers: Borrower[] = [\r\n        {\r\n          id: 1,\r\n          type: 'student',\r\n          firstName: 'Jean',\r\n          lastName: 'Dupont',\r\n          matricule: 'ETU001',\r\n          classe: 'Master 2 Info',\r\n          cniNumber: '',\r\n          position: '',\r\n          email: 'jean.dupont@demo.local',\r\n          phone: '+33 6 12 34 56 78',\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        },\r\n        {\r\n          id: 2,\r\n          type: 'staff',\r\n          firstName: 'Marie',\r\n          lastName: 'Martin',\r\n          matricule: 'PROF001',\r\n          classe: '',\r\n          cniNumber: '',\r\n          position: 'Professeur',\r\n          email: 'marie.martin@demo.local',\r\n          phone: '+33 6 87 65 43 21',\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        }\r\n      ];\r\n\r\n      const demoStats: Stats = {\r\n        totalDocuments: demoDocuments.length,\r\n        borrowedDocuments: 0,\r\n        availableDocuments: demoDocuments.length,\r\n        totalAuthors: demoAuthors.length,\r\n        totalCategories: demoCategories.length,\r\n        totalBorrowers: demoBorrowers.length,\r\n        totalStudents: 1,\r\n        totalStaff: 1,\r\n        overdueDocuments: 0\r\n      };\r\n\r\n      setDocuments(demoDocuments);\r\n      setAuthors(demoAuthors);\r\n      setCategories(demoCategories);\r\n      setBorrowers(demoBorrowers);\r\n      setBorrowedDocuments([]);\r\n      setStats(demoStats);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des donnes dmo:', error);\r\n      setError('Erreur lors du chargement des donnes dmo');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAuthentication = async (credentials: {\r\n    email: string;\r\n    password: string;\r\n    institutionCode?: string;\r\n    mode: 'login' | 'register' | 'create_institution';\r\n    userData?: any;\r\n  }) => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError('');\r\n\r\n      if (credentials.mode === 'login') {\r\n        // En mode offline, utiliser le nouveau service d'authentification\r\n        if (appMode === 'offline') {\r\n          console.log('Mode offline - authentification avec LocalAuthService');\r\n          \r\n          // Utiliser le service d'authentification local\r\n          const authResult = LocalAuthService.authenticate(\r\n            credentials.email,\r\n            credentials.password,\r\n            credentials.institutionCode || ''\r\n          );\r\n          \r\n          if (!authResult.success) {\r\n            throw new Error(authResult.message || 'chec de l\\'authentification');\r\n          }\r\n          \r\n          const localUser = authResult.user!;\r\n          \r\n          // Sauvegarder les informations de connexion si demand\r\n          LocalAuthService.saveLastLoginInfo(\r\n            credentials.email,\r\n            credentials.institutionCode || '',\r\n            true, // Toujours mmoriser le mot de passe en mode offline\r\n            credentials.password\r\n          );\r\n          \r\n          if (localUser) {\r\n            // Convertir l'utilisateur local au format User\r\n            const appUser: User = {\r\n              id: localUser.id,\r\n              firstName: localUser.firstName,\r\n              lastName: localUser.lastName,\r\n              email: localUser.email,\r\n              role: localUser.role as 'super_admin' | 'admin' | 'librarian' | 'user'\r\n            };\r\n\r\n            // Chercher l'institution correspondante ou crer une par dfaut\r\n            const institution = LocalAuthService.findInstitutionByCode(localUser.institutionCode);\r\n            const appInstitution: Institution = institution ? {\r\n              id: institution.id,\r\n              name: institution.name,\r\n              code: institution.code,\r\n              address: institution.address,\r\n              city: institution.city,\r\n              country: institution.country,\r\n              phone: institution.phone,\r\n              email: institution.email,\r\n              website: institution.website,\r\n              logo: institution.logo,\r\n              description: institution.description,\r\n              type: institution.type as 'school' | 'university' | 'library' | 'other',\r\n              status: 'active',\r\n              subscription_plan: 'basic',\r\n              max_books: 10000,\r\n              max_users: 100,\r\n              created_at: institution.created_at,\r\n              updated_at: new Date().toISOString()\r\n            } : {\r\n              id: 'default-offline',\r\n              name: 'Ma Bibliothque',\r\n              code: localUser.institutionCode,\r\n              address: '',\r\n              city: '',\r\n              country: '',\r\n              phone: '',\r\n              email: '',\r\n              website: '',\r\n              logo: '',\r\n              description: 'Institution locale par dfaut',\r\n              type: 'library',\r\n              status: 'active',\r\n              subscription_plan: 'basic',\r\n              max_books: 10000,\r\n              max_users: 100,\r\n              created_at: new Date().toISOString(),\r\n              updated_at: new Date().toISOString()\r\n            };\r\n\r\n            setCurrentUser(appUser);\r\n            setCurrentInstitution(appInstitution);\r\n            \r\n            // Crer les versions unifies\r\n            setUnifiedUser(convertToUnifiedUser(localUser, 'offline'));\r\n            setUnifiedInstitution(convertToUnifiedInstitution(institution || {\r\n              id: 'default-offline',\r\n              name: 'Ma Bibliothque',\r\n              code: localUser.institutionCode,\r\n              address: '',\r\n              city: '',\r\n              country: '',\r\n              phone: '',\r\n              email: '',\r\n              website: '',\r\n              logo: '',\r\n              description: 'Bibliothque locale',\r\n              type: 'library',\r\n              adminEmail: localUser.email,\r\n              created_at: new Date().toISOString()\r\n            }, 'offline'));\r\n            \r\n            setIsAuthenticated(true);\r\n            setIsDemoMode(false);\r\n            setCurrentView('dashboard');\r\n            await loadData();\r\n            return;\r\n          }\r\n        }\r\n\r\n        // Mode online (dsactiv pour cette version)\r\n        throw new Error('Le mode en ligne n\\'est pas encore disponible dans cette version.');\r\n\r\n      } else if (credentials.mode === 'register') {\r\n        // Inscription avec code d'tablissement\r\n        const result = await supabaseService.signUp(\r\n          credentials.email, \r\n          credentials.password, \r\n          {\r\n            firstName: credentials.userData.firstName,\r\n            lastName: credentials.userData.lastName,\r\n            institutionCode: credentials.institutionCode || 'DEFAULT'\r\n          }\r\n        );\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.error);\r\n        }\r\n\r\n        // Afficher un message de succs et rediriger vers login\r\n        alert('Compte cr avec succs ! Veuillez vrifier votre email et vous connecter.');\r\n        \r\n      } else if (credentials.mode === 'create_institution') {\r\n        // Cration d'institution locale\r\n        const institutionData = credentials.userData.institution;\r\n        \r\n        // Crer l'institution avec le service local\r\n        const newInstitution = LocalAuthService.createInstitution({\r\n          name: institutionData.name,\r\n          address: institutionData.address || '',\r\n          city: institutionData.city || '',\r\n          country: institutionData.country || '',\r\n          phone: institutionData.phone || '',\r\n          email: institutionData.email || '',\r\n          website: institutionData.website || '',\r\n          logo: institutionData.logo || '',\r\n          description: institutionData.description || '',\r\n          type: institutionData.type || 'library',\r\n          adminEmail: credentials.email\r\n        });\r\n        \r\n        setInstitutionCode(newInstitution.code);\r\n        \r\n        // Crer le compte administrateur local\r\n        const adminUser = LocalAuthService.addUser({\r\n          email: credentials.email,\r\n          password: credentials.password,\r\n          firstName: credentials.userData.admin.firstName,\r\n          lastName: credentials.userData.admin.lastName,\r\n          role: 'admin',\r\n          institutionCode: newInstitution.code,\r\n          preferences: {\r\n            rememberMe: true,\r\n            autoLogin: false,\r\n            theme: 'light'\r\n          }\r\n        });\r\n\r\n        if (!adminUser) {\r\n          throw new Error('Erreur lors de la cration du compte administrateur');\r\n        }\r\n\r\n        setCurrentView('institution_setup');\r\n      }\r\n\r\n    } catch (error: any) {\r\n      setError(error.message || 'Erreur d\\'authentification');\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await supabaseService.signOut();\r\n      setIsAuthenticated(false);\r\n      setCurrentUser(null);\r\n      setCurrentInstitution(null);\r\n      setCurrentView('auth');\r\n      \r\n      // Rinitialiser les donnes\r\n      setDocuments([]);\r\n      setAuthors([]);\r\n      setCategories([]);\r\n      setBorrowers([]);\r\n      setBorrowedDocuments([]);\r\n      setStats({\r\n        totalDocuments: 0,\r\n        borrowedDocuments: 0,\r\n        availableDocuments: 0,\r\n        totalAuthors: 0,\r\n        totalCategories: 0,\r\n        totalBorrowers: 0,\r\n        totalStudents: 0,\r\n        totalStaff: 0,\r\n        overdueDocuments: 0\r\n      });\r\n    } catch (error) {\r\n      console.error('Erreur lors de la dconnexion:', error);\r\n    }\r\n  };\r\n\r\n  const handleUserUpdate = (updatedUser: UnifiedUser) => {\r\n    setUnifiedUser(updatedUser);\r\n    \r\n    // Mettre  jour aussi currentUser pour la compatibilit\r\n    if (appMode === 'offline') {\r\n      const appUser: User = {\r\n        id: updatedUser.id as string,\r\n        firstName: updatedUser.firstName || '',\r\n        lastName: updatedUser.lastName || '',\r\n        email: updatedUser.email,\r\n        role: updatedUser.role as 'super_admin' | 'admin' | 'librarian' | 'user'\r\n      };\r\n      setCurrentUser(appUser);\r\n    }\r\n  };\r\n\r\n  const handleAddDocument = async (document: Omit<Document, 'id'>) => {\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - utiliser l'API lectron pour SQLite\r\n        if (editingDocument) {\r\n          // Modification d'un document existant\r\n          const documentToUpdate = { ...document, id: editingDocument.id } as Document;\r\n          await window.electronAPI.updateDocument(documentToUpdate);\r\n          console.log('Document modifi en mode offline:', editingDocument.id);\r\n        } else {\r\n          // Ajout d'un nouveau document\r\n          const documentId = await window.electronAPI.addDocument(document);\r\n          console.log('Document ajout en mode offline avec ID:', documentId);\r\n        }\r\n        \r\n        // Ajouter l'auteur s'il n'existe pas\r\n        if (!authors.find(a => a.name === document.auteur)) {\r\n          await window.electronAPI.addAuthor({\r\n            name: document.auteur,\r\n            biography: '',\r\n            birthDate: '',\r\n            nationality: '',\r\n            syncStatus: 'pending',\r\n            lastModified: new Date().toISOString(),\r\n            version: 1,\r\n            createdAt: new Date().toISOString()\r\n          });\r\n        }\r\n        \r\n        // Ajouter la catgorie si elle n'existe pas (base sur les descripteurs)\r\n        const categoryName = document.descripteurs.split(',')[0]?.trim();\r\n        if (categoryName && !categories.find(c => c.name === categoryName)) {\r\n          await window.electronAPI.addCategory({\r\n            name: categoryName,\r\n            description: `Catgorie cre automatiquement pour ${categoryName}`,\r\n            color: '#3E5C49',\r\n            syncStatus: 'pending',\r\n            lastModified: new Date().toISOString(),\r\n            version: 1,\r\n            createdAt: new Date().toISOString()\r\n          });\r\n        }\r\n        \r\n        // Recharger les donnes pour mettre  jour l'interface\r\n        await loadData();\r\n        \r\n      } else if (isDemoMode) {\r\n        // Mode dmo - ajouter localement en mmoire\r\n        const newId = Math.max(...documents.map(d => d.id || 0)) + 1;\r\n        const newDocument: Document = {\r\n          ...document,\r\n          id: newId,\r\n          syncStatus: 'synced',\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        };\r\n        \r\n        const updatedDocuments = [...documents, newDocument];\r\n        setDocuments(updatedDocuments);\r\n        \r\n        // Mettre  jour les statistiques\r\n        setStats(prev => ({\r\n          ...prev,\r\n          totalDocuments: updatedDocuments.length,\r\n          availableDocuments: updatedDocuments.length - prev.borrowedDocuments\r\n        }));\r\n        \r\n        // Ajouter l'auteur s'il n'existe pas\r\n        if (!authors.find(a => a.name === document.auteur)) {\r\n          const newAuthorId = Math.max(...authors.map(a => a.id || 0)) + 1;\r\n          const newAuthor: Author = {\r\n            id: newAuthorId, \r\n            name: document.auteur,\r\n            syncStatus: 'synced',\r\n            lastModified: new Date().toISOString(),\r\n            version: 1,\r\n            createdAt: new Date().toISOString()\r\n          };\r\n          setAuthors(prev => [...prev, newAuthor]);\r\n          setStats(prev => ({ ...prev, totalAuthors: prev.totalAuthors + 1 }));\r\n        }\r\n        \r\n        console.log('Document ajout en mode dmo:', newDocument);\r\n        \r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        await supabaseService.addDocument(document);\r\n        await loadData();\r\n      }\r\n      \r\n      // Nettoyer l'tat d'dition et retourner  la liste des documents\r\n      setEditingDocument(null);\r\n      setCurrentView('documents');\r\n    } catch (error: any) {\r\n      console.error('Erreur lors de l\\'ajout du document:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n\r\n  const handleReturnDocument = async (borrowHistoryId: number, notes?: string) => {\r\n    if (borrowHistoryId === undefined) {\r\n      console.error('Invalid argument for returnBook:', { borrowHistoryId });\r\n      return;\r\n    }\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - utiliser l'API lectron pour SQLite\r\n        await window.electronAPI.returnBook(borrowHistoryId, notes);\r\n        console.log('Document retourn en mode offline:', borrowHistoryId);\r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        await supabaseService.returnBook(borrowHistoryId.toString(), notes);\r\n      }\r\n      await loadData();\r\n    } catch (error: any) {\r\n      console.error('Erreur lors du retour:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleDeleteDocument = async (documentId: number) => {\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - utiliser l'API lectron pour SQLite\r\n        await window.electronAPI.deleteDocument(documentId);\r\n        console.log('Document supprim en mode offline:', documentId);\r\n        \r\n        // Recharger les donnes pour mettre  jour l'interface\r\n        await loadData();\r\n        \r\n      } else if (isDemoMode) {\r\n        // Mode dmo - supprimer localement en mmoire\r\n        const updatedDocuments = documents.filter(d => d.id !== documentId);\r\n        setDocuments(updatedDocuments);\r\n        \r\n        // Mettre  jour les statistiques\r\n        setStats(prev => ({\r\n          ...prev,\r\n          totalDocuments: updatedDocuments.length,\r\n          availableDocuments: updatedDocuments.length - prev.borrowedDocuments\r\n        }));\r\n        \r\n        console.log('Document supprim en mode dmo:', documentId);\r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        await supabaseService.deleteDocument(documentId.toString());\r\n        await loadData();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Erreur lors de la suppression:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleEditDocument = (document: Document) => {\r\n    setEditingDocument(document);\r\n    setCurrentView('add-document');\r\n  };\r\n\r\n  const handleBorrowDocument = (document: Document) => {\r\n    setSelectedDocumentForBorrow(document);\r\n    setShowBorrowModal(true);\r\n  };\r\n\r\n  const closeBorrowModal = () => {\r\n    setSelectedDocumentForBorrow(null);\r\n    setShowBorrowModal(false);\r\n  };\r\n\r\n  const handleBorrow = async (documentId: number, borrowerId: number, returnDate: string) => {\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - utiliser l'API lectron pour SQLite\r\n        await window.electronAPI.borrowDocument(documentId, borrowerId, returnDate);\r\n        console.log('Document emprunt en mode offline:', { documentId, borrowerId, returnDate });\r\n      } else if (isDemoMode) {\r\n        // Mode dmo - simuler l'emprunt\r\n        const updatedDocuments = documents.map(doc => \r\n          doc.id === documentId \r\n            ? { ...doc, estEmprunte: true, syncStatus: 'synced' as const }\r\n            : doc\r\n        );\r\n        setDocuments(updatedDocuments);\r\n        \r\n        // Crer l'entre d'historique d'emprunt\r\n        const borrower = borrowers.find(b => b.id === borrowerId);\r\n        const document = documents.find(d => d.id === documentId);\r\n        \r\n        if (borrower && document) {\r\n          const newBorrowHistory: typeof borrowedDocuments[0] = {\r\n            id: Math.max(...borrowedDocuments.map(b => b.id || 0)) + 1,\r\n            documentId: documentId,\r\n            borrowerId,\r\n            borrowDate: new Date().toISOString(),\r\n            expectedReturnDate: returnDate,\r\n            actualReturnDate: undefined,\r\n            status: 'active' as const,\r\n            document: document,\r\n            borrower,\r\n            syncStatus: 'synced' as const,\r\n            lastModified: new Date().toISOString(),\r\n            version: 1,\r\n            createdAt: new Date().toISOString()\r\n          };\r\n          \r\n          setBorrowedDocuments(prev => [...prev, newBorrowHistory]);\r\n          \r\n          // Mettre  jour les statistiques\r\n          setStats(prev => ({\r\n            ...prev,\r\n            borrowedDocuments: prev.borrowedDocuments + 1,\r\n            availableDocuments: prev.availableDocuments - 1\r\n          }));\r\n        }\r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        await supabaseService.borrowDocument({\r\n          documentId: documentId.toString(),\r\n          borrowerId: borrowerId.toString(),\r\n          expectedReturnDate: returnDate\r\n        });\r\n      }\r\n      \r\n      // Recharger les donnes aprs l'opration\r\n      await loadData();\r\n      closeBorrowModal();\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'emprunt:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleReturn = async (documentId: number) => {\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - trouver l'emprunt actif et le retourner\r\n        const activeBorrow = borrowedDocuments.find(bh => \r\n          bh.documentId === documentId && bh.status === 'active'\r\n        );\r\n        \r\n        if (activeBorrow && activeBorrow.id) {\r\n          await window.electronAPI.returnBook(activeBorrow.id);\r\n          console.log('Document retourn en mode offline:', documentId);\r\n        } else {\r\n          console.error('Aucun emprunt actif trouv pour le document:', documentId);\r\n          return;\r\n        }\r\n      } else if (isDemoMode) {\r\n        // Mode dmo - simuler le retour\r\n        const updatedDocuments = documents.map(doc => \r\n          doc.id === documentId \r\n            ? { ...doc, estEmprunte: false, syncStatus: 'synced' as const }\r\n            : doc\r\n        );\r\n        setDocuments(updatedDocuments);\r\n        \r\n        // Marquer comme retourn dans l'historique\r\n        const updatedBorrowHistory = borrowedDocuments.map(bh => \r\n          bh.documentId === documentId && bh.status === 'active'\r\n            ? { ...bh, actualReturnDate: new Date().toISOString(), status: 'returned' as const }\r\n            : bh\r\n        );\r\n        setBorrowedDocuments(updatedBorrowHistory);\r\n        \r\n        // Mettre  jour les statistiques\r\n        setStats(prev => ({\r\n          ...prev,\r\n          borrowedDocuments: prev.borrowedDocuments - 1,\r\n          availableDocuments: prev.availableDocuments + 1\r\n        }));\r\n      } else {\r\n        // Mode online - utiliser Supabase\r\n        await supabaseService.returnDocument(documentId.toString());\r\n      }\r\n      \r\n      // Recharger les donnes aprs l'opration\r\n      await loadData();\r\n      closeBorrowModal();\r\n    } catch (error) {\r\n      console.error('Erreur lors du retour:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const refreshData = async () => {\r\n    if (isDemoMode) {\r\n      await loadDemoData();\r\n    } else {\r\n      await loadData();\r\n    }\r\n  };\r\n\r\n  // Grer l'affichage avec TitleBar toujours visible\r\n  const renderAuthenticatedContent = () => {\r\n    // cran de configuration initiale\r\n    if (currentView === 'initial_setup') {\r\n      return <InitialSetup onComplete={handleInitialSetup} />;\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n      if (currentView === 'institution_setup') {\r\n        return (\r\n          <InstitutionSetup\r\n            institutionCode={institutionCode}\r\n            institution={currentInstitution}\r\n            onComplete={() => {\r\n              setCurrentView('auth');\r\n              alert('Votre tablissement a t cr avec succs ! Vous pouvez maintenant vous connecter.');\r\n            }}\r\n          />\r\n        );\r\n      }\r\n      \r\n      return <EnhancedAuthentication onLogin={handleAuthentication} />;\r\n    }\r\n\r\n    return renderCurrentView();\r\n  };\r\n\r\n  const renderCurrentView = () => {\r\n    switch (currentView) {\r\n      case 'dashboard':\r\n        return (\r\n          <Dashboard \r\n            stats={stats} \r\n            onNavigate={setCurrentView}\r\n            documents={documents}\r\n            categories={categories}\r\n            recentActivity={recentActivity}\r\n          />\r\n        );\r\n      case 'documents':\r\n        return (\r\n          <DocumentList\r\n            documents={documents}\r\n            onAdd={() => setCurrentView('add-document')}\r\n            onEdit={handleEditDocument}\r\n            onBorrow={handleBorrowDocument}\r\n            onDelete={handleDeleteDocument}\r\n            onRefresh={refreshData}\r\n            syncStatus={{} as any}\r\n            networkStatus={{} as any}\r\n          />\r\n        );\r\n      case 'borrowed':\r\n        return (\r\n          <BorrowedDocuments\r\n            documents={borrowedDocuments\r\n              .filter(bh => bh.status === 'active') // Seulement les emprunts actifs\r\n              .map(bh => ({\r\n                ...bh.document!,\r\n                nomEmprunteur: `${bh.borrower?.firstName} ${bh.borrower?.lastName}`,\r\n                dateEmprunt: bh.borrowDate,\r\n                dateRetourPrevu: bh.expectedReturnDate\r\n              }))}\r\n            onReturn={(documentId) => {\r\n              const borrowHistory = borrowedDocuments.find(bh => bh.documentId === documentId && bh.status === 'active');\r\n              if (borrowHistory) {\r\n                handleReturnDocument(borrowHistory.id!, undefined);\r\n              }\r\n            }}\r\n          />\r\n        );\r\n      case 'add-document':\r\n        return (\r\n          <AddDocument\r\n            onAdd={handleAddDocument}\r\n            onCancel={() => {\r\n              setEditingDocument(null);\r\n              setCurrentView('documents');\r\n            }}\r\n            editingDocument={editingDocument || undefined}\r\n          />\r\n        );\r\n      case 'borrowers':\r\n        return (\r\n          <Borrowers \r\n            onClose={() => setCurrentView('dashboard')} \r\n            onRefreshData={refreshData}\r\n          />\r\n        );\r\n      case 'history':\r\n        return (\r\n          <BorrowHistory \r\n            onClose={() => setCurrentView('dashboard')}\r\n            supabaseService={supabaseService}\r\n          />\r\n        );\r\n      case 'settings':\r\n        return (\r\n          <Settings \r\n            onClose={() => setCurrentView('dashboard')}\r\n            onLogout={handleLogout}\r\n            currentUser={currentUser}\r\n            currentInstitution={currentInstitution}\r\n            supabaseService={supabaseService}\r\n          />\r\n        );\r\n      case 'donation':\r\n        return (\r\n          <Donation onClose={() => setCurrentView('dashboard')} />\r\n        );\r\n      case 'about':\r\n        return (\r\n          <About onClose={() => setCurrentView('dashboard')} />\r\n        );\r\n      case 'app-settings':\r\n        return (\r\n          <AppSettings onClose={() => setCurrentView('dashboard')} />\r\n        );\r\n      case 'user-profile':\r\n        return (\r\n          <UserProfile \r\n            currentUser={unifiedUser}\r\n            currentInstitution={unifiedInstitution}\r\n            appMode={appMode}\r\n            onClose={() => setCurrentView('dashboard')}\r\n            onUserUpdate={handleUserUpdate}\r\n          />\r\n        );\r\n      case 'backup-manager':\r\n        return (\r\n          <BackupManager \r\n            onClose={() => setCurrentView('dashboard')}\r\n          />\r\n        );\r\n      default:\r\n        return (\r\n          <Dashboard \r\n            stats={stats} \r\n            onNavigate={setCurrentView}\r\n            documents={documents}\r\n            categories={categories}\r\n            recentActivity={recentActivity}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  // Rendu des crans de scurit\r\n  if (isAppLocked || needsPasswordSetup) {\r\n    return (\r\n      <AppPasswordScreen\r\n        onUnlock={handleAppUnlock}\r\n        onSkip={needsPasswordSetup ? handlePasswordSetup : undefined}\r\n        onClose={() => window.electronAPI?.closeWindow?.()}\r\n        isSetup={needsPasswordSetup}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ToastProvider>\r\n      <KeyboardShortcutsProvider\r\n        onNavigate={setCurrentView}\r\n        onOpenAddDocument={() => setCurrentView('add-document')}\r\n        onOpenSettings={() => setCurrentView('settings')}\r\n      >\r\n        <div className=\"app\">\r\n          <TitleBar onRefresh={refreshData} isAuthenticated={isAuthenticated} />\r\n          <div className=\"app-container\">\r\n            {isAuthenticated ? (\r\n              <AppContent \r\n                isDemoMode={isDemoMode}\r\n                currentView={currentView}\r\n                setCurrentView={setCurrentView}\r\n                isLoading={isLoading}\r\n                error={error}\r\n                setError={setError}\r\n                renderCurrentView={renderCurrentView}\r\n                showBorrowModal={showBorrowModal}\r\n                selectedDocumentForBorrow={selectedDocumentForBorrow}\r\n                closeBorrowModal={closeBorrowModal}\r\n                handleBorrow={handleBorrow}\r\n                handleReturn={handleReturn}\r\n                refreshData={refreshData}\r\n                supabaseService={supabaseService}\r\n                borrowers={borrowers}\r\n                stats={stats}\r\n                currentUser={currentUser}\r\n                currentInstitution={currentInstitution}\r\n                unifiedUser={unifiedUser}\r\n                unifiedInstitution={unifiedInstitution}\r\n                isAuthenticated={isAuthenticated}\r\n                onLogout={handleLogout}\r\n              />\r\n            ) : (\r\n              <div className=\"auth-container\">\r\n                {renderAuthenticatedContent()}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </KeyboardShortcutsProvider>\r\n    </ToastProvider>\r\n  );\r\n};\r\n\r\ninterface AppContentProps {\r\n  isDemoMode: boolean;\r\n  currentView: ViewType;\r\n  setCurrentView: (view: ViewType) => void;\r\n  isLoading: boolean;\r\n  error: string;\r\n  setError: (error: string) => void;\r\n  renderCurrentView: () => React.ReactNode;\r\n  showBorrowModal: boolean;\r\n  selectedDocumentForBorrow: Document | null;\r\n  closeBorrowModal: () => void;\r\n  handleBorrow: (documentId: number, borrowerId: number, returnDate: string) => Promise<void>;\r\n  handleReturn: (documentId: number) => Promise<void>;\r\n  refreshData: () => Promise<void>;\r\n  supabaseService: SupabaseRendererService;\r\n  borrowers: Borrower[];\r\n  stats: Stats;\r\n  currentUser: User | null;\r\n  currentInstitution: Institution | null;\r\n  unifiedUser: UnifiedUser | null;\r\n  unifiedInstitution: UnifiedInstitution | null;\r\n  isAuthenticated: boolean;\r\n  onLogout: () => Promise<void>;\r\n}\r\n\r\nconst AppContent: React.FC<AppContentProps> = ({\r\n  isDemoMode,\r\n  currentView,\r\n  setCurrentView,\r\n  isLoading,\r\n  error,\r\n  setError,\r\n  renderCurrentView,\r\n  showBorrowModal,\r\n  selectedDocumentForBorrow,\r\n  closeBorrowModal,\r\n  handleBorrow,\r\n  handleReturn,\r\n  refreshData,\r\n  supabaseService,\r\n  borrowers,\r\n  stats,\r\n  currentUser,\r\n  currentInstitution,\r\n  unifiedUser,\r\n  unifiedInstitution,\r\n  isAuthenticated,\r\n  onLogout\r\n}) => {\r\n  const { info } = useQuickToast();\r\n  const [demoNotificationShown, setDemoNotificationShown] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (isDemoMode && !demoNotificationShown) {\r\n      // Afficher une notification pour informer que c'est le mode dmo\r\n      setTimeout(() => {\r\n        info(\r\n          \"Mode Dmonstration\",\r\n          \"Vous tes en mode dmo. Toutes les modifications sont temporaires et ne seront pas sauvegardes.\"\r\n        );\r\n        setDemoNotificationShown(true);\r\n      }, 1000);\r\n    }\r\n  }, [isDemoMode, demoNotificationShown, info]);\r\n\r\n  return (\r\n    <>\r\n      <Sidebar\r\n        currentView={currentView}\r\n        onNavigate={setCurrentView}\r\n        stats={stats}\r\n        currentUser={unifiedUser}\r\n        currentInstitution={unifiedInstitution}\r\n        onLogout={onLogout}\r\n      />\r\n      <main className=\"main-content\">\r\n        <div className=\"content-wrapper\">\r\n          {isLoading && (\r\n            <div className=\"loading-overlay\">\r\n              <div className=\"loading-spinner\"></div>\r\n              <span>Chargement...</span>\r\n            </div>\r\n          )}\r\n          {error && (\r\n            <div className=\"error-banner\">\r\n              <span>{error}</span>\r\n              <button onClick={() => setError('')}></button>\r\n            </div>\r\n          )}\r\n          {renderCurrentView()}\r\n        </div>\r\n      </main>\r\n\r\n      {/* Beautiful Borrow Modal */}\r\n      {showBorrowModal && selectedDocumentForBorrow && (\r\n        <BorrowDocument\r\n          document={selectedDocumentForBorrow}\r\n          borrowers={borrowers}\r\n          onBorrow={handleBorrow}\r\n          onReturn={handleReturn}\r\n          onCancel={closeBorrowModal}\r\n        />\r\n      )}\r\n      \r\n      <style>{`\r\n        .app {\r\n          height: 100vh;\r\n          display: flex;\r\n          flex-direction: column;\r\n          background: #FAF9F6;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .app-container {\r\n          flex: 1;\r\n          display: flex;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .main-content {\r\n          flex: 1;\r\n          display: flex;\r\n          flex-direction: column;\r\n          background: #FAF9F6;\r\n          overflow: hidden;\r\n          position: relative;\r\n        }\r\n        \r\n        .content-wrapper {\r\n          flex: 1;\r\n          overflow: hidden;\r\n          border-radius: 12px 0 0 0;\r\n          background: #FAF9F6;\r\n          box-shadow: -2px 0 8px rgba(0, 0, 0, 0.08);\r\n        }\r\n\r\n        .loading-overlay {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(255, 255, 255, 0.9);\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          gap: 16px;\r\n        }\r\n\r\n        .loading-spinner {\r\n          width: 40px;\r\n          height: 40px;\r\n          border: 4px solid #E5DCC2;\r\n          border-top: 4px solid #3E5C49;\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n        }\r\n\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n\r\n        .error-banner {\r\n          background: #FEF2F2;\r\n          border: 1px solid #FECACA;\r\n          color: #DC2626;\r\n          padding: 12px 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .error-banner button {\r\n          background: none;\r\n          border: none;\r\n          color: #DC2626;\r\n          cursor: pointer;\r\n          font-size: 18px;\r\n          padding: 0;\r\n          margin-left: 12px;\r\n        }\r\n\r\n        /* Enhanced Borrow Modal */\r\n        .borrow-modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(46, 46, 46, 0.75);\r\n          backdrop-filter: blur(12px);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          animation: fadeIn 0.3s ease-out;\r\n        }\r\n        \r\n        @keyframes fadeIn {\r\n          from { opacity: 0; backdrop-filter: blur(0px); }\r\n          to { opacity: 1; backdrop-filter: blur(12px); }\r\n        }\r\n        \r\n        .borrow-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 24px;\r\n          width: 100%;\r\n          max-width: 700px;\r\n          max-height: 90vh;\r\n          overflow-y: auto;\r\n          box-shadow: \r\n            0 32px 64px rgba(62, 92, 73, 0.25),\r\n            0 16px 32px rgba(62, 92, 73, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n        \r\n        @keyframes slideUp {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(32px) scale(0.95);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n        \r\n        .modal-header {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          justify-content: space-between;\r\n          padding: 32px 32px 24px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .modal-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          width: 200px;\r\n          height: 100%;\r\n          background: linear-gradient(90deg, transparent, rgba(243, 238, 217, 0.1));\r\n          transform: skewX(-15deg);\r\n          transform-origin: top;\r\n        }\r\n        \r\n        .header-content {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 20px;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .header-icon {\r\n          width: 48px;\r\n          height: 48px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 14px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          backdrop-filter: blur(10px);\r\n          border: 1px solid rgba(243, 238, 217, 0.3);\r\n        }\r\n        \r\n        .header-text h3 {\r\n          font-size: 22px;\r\n          font-weight: 700;\r\n          color: #F3EED9;\r\n          margin: 0 0 6px 0;\r\n          letter-spacing: -0.3px;\r\n        }\r\n        \r\n        .header-text p {\r\n          font-size: 14px;\r\n          color: rgba(243, 238, 217, 0.9);\r\n          margin: 0;\r\n          line-height: 1.4;\r\n        }\r\n        \r\n        .modal-close {\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n          cursor: pointer;\r\n          padding: 12px;\r\n          border-radius: 12px;\r\n          color: #F3EED9;\r\n          font-size: 24px;\r\n          width: 44px;\r\n          height: 44px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .modal-close:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n          transform: scale(1.05);\r\n        }\r\n        \r\n        .modal-close:active {\r\n          transform: scale(0.95);\r\n        }\r\n        \r\n        /* Responsive enhancements */\r\n        @media (max-width: 768px) {\r\n          .app-container {\r\n            flex-direction: column;\r\n          }\r\n          \r\n          .content-wrapper {\r\n            border-radius: 0;\r\n            box-shadow: none;\r\n          }\r\n          \r\n          .borrow-modal {\r\n            margin: 12px;\r\n            border-radius: 20px;\r\n            max-height: calc(100vh - 24px);\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 24px 20px 20px;\r\n          }\r\n          \r\n          .header-content {\r\n            flex-direction: column;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .header-icon {\r\n            align-self: center;\r\n          }\r\n          \r\n         .header-text {\r\n            text-align: center;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .borrow-modal-overlay {\r\n            padding: 8px;\r\n          }\r\n          \r\n          .borrow-modal {\r\n            border-radius: 16px;\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 20px 16px 16px;\r\n          }\r\n          \r\n          .header-text h3 {\r\n            font-size: 20px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\n// Enhanced Borrow Form Component avec Supabase\r\ninterface EnhancedBorrowFormProps {\r\n  document: Document;\r\n  borrowers: Borrower[];\r\n  onSubmit: (documentId: number, borrowerId: number, expectedReturnDate: string) => Promise<void>;\r\n  onCancel: () => void;\r\n  onRefreshBorrowers: () => Promise<void>;\r\n  supabaseService: SupabaseRendererService;\r\n}\r\n\r\nconst EnhancedBorrowForm: React.FC<EnhancedBorrowFormProps> = ({ \r\n  document, \r\n  borrowers, \r\n  onSubmit, \r\n  onCancel, \r\n  onRefreshBorrowers,\r\n  supabaseService \r\n}) => {\r\n  const [selectedBorrower, setSelectedBorrower] = useState<number | null>(null);\r\n  const [expectedReturnDate, setExpectedReturnDate] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filterType, setFilterType] = useState<'all' | 'student' | 'staff'>('all');\r\n  const [borrowDuration, setBorrowDuration] = useState<'1week' | '2weeks' | '1month' | 'custom'>('2weeks');\r\n  const [showAddBorrower, setShowAddBorrower] = useState(false);\r\n\r\n  const [newBorrowerData, setNewBorrowerData] = useState<{\r\n    type: 'student' | 'staff';\r\n    firstName: string;\r\n    lastName: string;\r\n    matricule: string;\r\n    classe: string;\r\n    cniNumber: string;\r\n    position: string;\r\n    email: string;\r\n    phone: string;\r\n  }>({\r\n    type: 'student',\r\n    firstName: '',\r\n    lastName: '',\r\n    matricule: '',\r\n    classe: '',\r\n    cniNumber: '',\r\n    position: '',\r\n    email: '',\r\n    phone: ''\r\n  });\r\n\r\n  // Calculate default date (in 2 weeks)\r\n  React.useEffect(() => {\r\n    updateDateFromDuration(borrowDuration);\r\n  }, [borrowDuration]);\r\n\r\n  const updateDateFromDuration = (duration: string) => {\r\n    const today = new Date();\r\n    let targetDate = new Date(today);\r\n    \r\n    switch (duration) {\r\n      case '1week':\r\n        targetDate.setDate(today.getDate() + 7);\r\n        break;\r\n      case '2weeks':\r\n        targetDate.setDate(today.getDate() + 14);\r\n        break;\r\n      case '1month':\r\n        targetDate.setMonth(today.getMonth() + 1);\r\n        break;\r\n      default:\r\n        return; // For 'custom', don't change\r\n    }\r\n    \r\n    setExpectedReturnDate(targetDate.toISOString().split('T')[0]);\r\n  };\r\n\r\n  const handleAddBorrower = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const newId = await supabaseService.addBorrower({\r\n        ...newBorrowerData,\r\n        syncStatus: 'pending',\r\n        lastModified: new Date().toISOString(),\r\n        version: 1,\r\n        createdAt: new Date().toISOString()\r\n      });\r\n      setSelectedBorrower(newId);\r\n      setShowAddBorrower(false);\r\n      await onRefreshBorrowers(); // Refresh the borrowers list\r\n      setNewBorrowerData({\r\n        type: 'student',\r\n        firstName: '',\r\n        lastName: '',\r\n        matricule: '',\r\n        classe: '',\r\n        cniNumber: '',\r\n        position: '',\r\n        email: '',\r\n        phone: ''\r\n      });\r\n    } catch (error: any) {\r\n      alert(error.message || 'Erreur lors de l\\'ajout de l\\'emprunteur');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredBorrowers = borrowers.filter(borrower => {\r\n    // Filter by type\r\n    if (filterType !== 'all' && borrower.type !== filterType) return false;\r\n    \r\n    // Filter by search\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      return (\r\n        borrower.firstName.toLowerCase().includes(query) ||\r\n        borrower.lastName.toLowerCase().includes(query) ||\r\n        borrower.matricule.toLowerCase().includes(query) ||\r\n        (borrower.classe && borrower.classe.toLowerCase().includes(query)) ||\r\n        (borrower.position && borrower.position.toLowerCase().includes(query))\r\n      );\r\n    }\r\n    \r\n    return true;\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedBorrower || !expectedReturnDate) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await onSubmit(document.id!, selectedBorrower, expectedReturnDate);\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedBorrowerData = borrowers.find(b => b.id === selectedBorrower);\r\n\r\n  return (\r\n    <div className=\"enhanced-borrow-form\">\r\n      {/* Document Info Enhanced */}\r\n      <div className=\"document-info-section\">\r\n        <div className=\"document-cover\">\r\n          {document.couverture ? (\r\n            <img src={document.couverture} alt={document.titre} />\r\n          ) : (\r\n            <div className=\"document-placeholder\">\r\n              <svg viewBox=\"0 0 24 24\" width=\"32\" height=\"32\" fill=\"currentColor\">\r\n                <path d=\"M18 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2ZM18 20H6V4H18V20Z\"/>\r\n              </svg>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"document-details\">\r\n          <h4 className=\"document-title\">\"{document.titre}\"</h4>\r\n          <p className=\"document-author\">par {document.auteur}</p>\r\n          <div className=\"document-meta\">\r\n            <span className=\"document-category\">{document.descripteurs}</span>\r\n            {document.annee && <span className=\"document-year\">{document.annee}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Duration Selection */}\r\n      <div className=\"form-section\">\r\n        <label className=\"form-label\">Dure d'emprunt</label>\r\n        <div className=\"duration-selector\">\r\n          {[\r\n            { id: '1week', label: '1 semaine', recommended: false },\r\n            { id: '2weeks', label: '2 semaines', recommended: true },\r\n            { id: '1month', label: '1 mois', recommended: false },\r\n            { id: 'custom', label: 'Personnalis', recommended: false }\r\n          ].map((duration) => (\r\n            <button\r\n              key={duration.id}\r\n              type=\"button\"\r\n              className={`duration-button ${borrowDuration === duration.id ? 'selected' : ''} ${duration.recommended ? 'recommended' : ''}`}\r\n              onClick={() => setBorrowDuration(duration.id as any)}\r\n            >\r\n              {duration.label}\r\n              {duration.recommended && <span className=\"recommended-badge\">Recommand</span>}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Return Date */}\r\n      <div className=\"form-section\">\r\n        <label className=\"form-label\">Date de retour prvue *</label>\r\n        <input\r\n          type=\"date\"\r\n          value={expectedReturnDate}\r\n          onChange={(e) => {\r\n            setExpectedReturnDate(e.target.value);\r\n            setBorrowDuration('custom');\r\n          }}\r\n          className=\"date-input\"\r\n          min={new Date().toISOString().split('T')[0]}\r\n          required\r\n        />\r\n        <small className=\"form-hint\">\r\n          {borrowDuration !== 'custom' && `Dure slectionne : ${\r\n            borrowDuration === '1week' ? '7 jours' : \r\n            borrowDuration === '2weeks' ? '14 jours' : '1 mois'\r\n          }`}\r\n        </small>\r\n      </div>\r\n\r\n      {/* Enhanced Borrower Selection */}\r\n      <div className=\"form-section\">\r\n        <div className=\"section-header\">\r\n          <label className=\"form-label\">Emprunteur *</label>\r\n          <button\r\n            type=\"button\"\r\n            className=\"add-borrower-button\"\r\n            onClick={() => setShowAddBorrower(true)}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n              <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/>\r\n            </svg>\r\n            Ajouter emprunteur\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Filters */}\r\n        <div className=\"borrower-filters\">\r\n          <div className=\"search-container\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Rechercher un emprunteur...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"search-input\"\r\n            />\r\n            <svg className=\"search-icon\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\r\n              <path d=\"M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3S3 5.91 3 9.5S5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14Z\"/>\r\n            </svg>\r\n          </div>\r\n          \r\n          <div className=\"type-filter\">\r\n            <select \r\n              value={filterType} \r\n              onChange={(e) => setFilterType(e.target.value as any)}\r\n              className=\"filter-select\"\r\n            >\r\n              <option value=\"all\">Tous</option>\r\n              <option value=\"student\">tudiants</option>\r\n              <option value=\"staff\">Personnel</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Borrowers List */}\r\n        <div className=\"borrowers-list\">\r\n          <div className=\"list-header\">\r\n            <span>Nom</span>\r\n            <span>Type</span>\r\n            <span>Matricule</span>\r\n            <span>Classe/Poste</span>\r\n          </div>\r\n          \r\n          <div className=\"list-content\">\r\n            {filteredBorrowers.length > 0 ? (\r\n              filteredBorrowers.map((borrower) => (\r\n                <div\r\n                  key={borrower.id}\r\n                  className={`borrower-row ${selectedBorrower === borrower.id ? 'selected' : ''}`}\r\n                  onClick={() => setSelectedBorrower(borrower.id!)}\r\n                >\r\n                  <div className=\"borrower-name\">\r\n                    <div className=\"name-main\">{borrower.firstName} {borrower.lastName}</div>\r\n                    <div className=\"name-sub\">{borrower.email}</div>\r\n                  </div>\r\n                  <div className=\"borrower-type\">\r\n                    <span className={`type-badge ${borrower.type}`}>\r\n                      {borrower.type === 'student' ? 'tudiant' : 'Personnel'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"borrower-matricule\">{borrower.matricule}</div>\r\n                  <div className=\"borrower-extra\">\r\n                    {borrower.type === 'student' ? borrower.classe : borrower.position}\r\n                  </div>\r\n                  <div className=\"selection-indicator\">\r\n                    {selectedBorrower === borrower.id && (\r\n                      <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\r\n                        <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\r\n                      </svg>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"no-borrowers\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"48\" height=\"48\" fill=\"currentColor\">\r\n                  <path d=\"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.89 23 5 23H19C20.1 23 21 22.1 21 21V9Z\"/>\r\n                </svg>\r\n                <p>Aucun emprunteur trouv</p>\r\n                <small>{searchQuery ? `pour \"${searchQuery}\"` : 'Essayez de modifier les filtres'}</small>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Borrower Summary Enhanced */}\r\n      {selectedBorrowerData && (\r\n        <div className=\"selected-summary\">\r\n          <h4>Rcapitulatif de l'emprunt</h4>\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-section\">\r\n              <div className=\"summary-icon book-icon\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\r\n                  <path d=\"M18 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2Z\"/>\r\n                </svg>\r\n              </div>\r\n              <div className=\"summary-content\">\r\n                <div className=\"summary-label\">Document</div>\r\n                <div className=\"summary-value\">{document.titre}</div>\r\n                <div className=\"summary-sub\">par {document.auteur}</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"summary-section\">\r\n              <div className=\"summary-icon user-icon\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\r\n                  <path d=\"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z\"/>\r\n                </svg>\r\n              </div>\r\n              <div className=\"summary-content\">\r\n                <div className=\"summary-label\">Emprunteur</div>\r\n                <div className=\"summary-value\">\r\n                  {selectedBorrowerData.firstName} {selectedBorrowerData.lastName}\r\n                </div>\r\n                <div className=\"summary-sub\">\r\n                  {selectedBorrowerData.matricule}  {selectedBorrowerData.type === 'student' ? 'tudiant' : 'Personnel'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"summary-section\">\r\n              <div className=\"summary-icon date-icon\">\r\n                <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\r\n                  <path d=\"M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3.01 3.9 3.01 5L3 19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19ZM7 10H12V15H7V10Z\"/>\r\n                </svg>\r\n              </div>\r\n              <div className=\"summary-content\">\r\n                <div className=\"summary-label\">Retour prvu</div>\r\n                <div className=\"summary-value\">\r\n                  {new Date(expectedReturnDate).toLocaleDateString('fr-FR', {\r\n                    weekday: 'long',\r\n                    year: 'numeric',\r\n                    month: 'long',\r\n                    day: 'numeric'\r\n                  })}\r\n                </div>\r\n                <div className=\"summary-sub\">\r\n                  Dans {Math.ceil((new Date(expectedReturnDate).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))} jour(s)\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Form Actions Enhanced */}\r\n      <div className=\"form-actions\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn-secondary\"\r\n          onClick={onCancel}\r\n          disabled={isLoading}\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\r\n            <path d=\"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z\"/>\r\n          </svg>\r\n          Annuler\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn-primary\"\r\n          disabled={!selectedBorrower || !expectedReturnDate || isLoading}\r\n          onClick={handleSubmit}\r\n        >\r\n          {isLoading ? (\r\n            <>\r\n              <div className=\"loading-spinner\"></div>\r\n              Traitement...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\r\n                <path d=\"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.58L9 16.17Z\"/>\r\n              </svg>\r\n              Confirmer l'emprunt\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Add Borrower Modal */}\r\n      {showAddBorrower && (\r\n        <div className=\"add-borrower-overlay\" onClick={() => setShowAddBorrower(false)}>\r\n          <div className=\"add-borrower-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"add-borrower-header\">\r\n              <h3>Ajouter un emprunteur</h3>\r\n              <button\r\n                className=\"modal-close-small\"\r\n                onClick={() => setShowAddBorrower(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"add-borrower-content\">\r\n              <div className=\"type-selector\">\r\n                <button\r\n                  type=\"button\"\r\n                  className={`type-button ${newBorrowerData.type === 'student' ? 'active' : ''}`}\r\n                  onClick={() => setNewBorrowerData(prev => ({ ...prev, type: 'student' }))}\r\n                >\r\n                   tudiant\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`type-button ${newBorrowerData.type === 'staff' ? 'active' : ''}`}\r\n                  onClick={() => setNewBorrowerData(prev => ({ ...prev, type: 'staff' }))}\r\n                >\r\n                   Personnel\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"form-grid-compact\">\r\n                <div className=\"form-group-compact\">\r\n                  <label>Prnom *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newBorrowerData.firstName}\r\n                    onChange={(e) => setNewBorrowerData(prev => ({ ...prev, firstName: e.target.value }))}\r\n                    className=\"form-input-compact\"\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group-compact\">\r\n                  <label>Nom *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newBorrowerData.lastName}\r\n                    onChange={(e) => setNewBorrowerData(prev => ({ ...prev, lastName: e.target.value }))}\r\n                    className=\"form-input-compact\"\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group-compact\">\r\n                  <label>Matricule *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newBorrowerData.matricule}\r\n                    onChange={(e) => setNewBorrowerData(prev => ({ ...prev, matricule: e.target.value }))}\r\n                    className=\"form-input-compact\"\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                {newBorrowerData.type === 'student' ? (\r\n                  <div className=\"form-group-compact\">\r\n                    <label>Classe</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newBorrowerData.classe}\r\n                      onChange={(e) => setNewBorrowerData(prev => ({ ...prev, classe: e.target.value }))}\r\n                      className=\"form-input-compact\"\r\n                      placeholder=\"ex: Terminale C\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"form-group-compact\">\r\n                    <label>Poste</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newBorrowerData.position}\r\n                      onChange={(e) => setNewBorrowerData(prev => ({ ...prev, position: e.target.value }))}\r\n                      className=\"form-input-compact\"\r\n                      placeholder=\"ex: Professeur\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"form-group-compact span-full\">\r\n                  <label>Email</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={newBorrowerData.email}\r\n                    onChange={(e) => setNewBorrowerData(prev => ({ ...prev, email: e.target.value }))}\r\n                    className=\"form-input-compact\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"add-borrower-actions\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-secondary-small\"\r\n                onClick={() => setShowAddBorrower(false)}\r\n              >\r\n                Annuler\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-primary-small\"\r\n                onClick={handleAddBorrower}\r\n                disabled={!newBorrowerData.firstName || !newBorrowerData.lastName || !newBorrowerData.matricule || isLoading}\r\n              >\r\n                {isLoading ? 'Ajout...' : 'Ajouter'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Styles pour le formulaire d'emprunt */}\r\n      <style>{`\r\n        /* Tous les styles CSS du formulaire d'emprunt ici */\r\n        /* Le CSS est identique  celui du fichier prcdent */\r\n        /* ... (insrer ici tous les styles CSS de EnhancedBorrowForm) */\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\nimport { \n  Info, \n  X, \n  User, \n  Mail, \n  Phone, \n  MapPin,\n  GraduationCap,\n  Briefcase,\n  Code,\n  Star,\n  Award,\n  ExternalLink,\n  ArrowLeft,\n  Github,\n  Linkedin,\n  Globe,\n  Heart,\n  BookOpen,\n  Zap,\n  Users,\n  Trophy,\n  Sparkles\n} from 'lucide-react';\n\ninterface AboutProps {\n  onClose: () => void;\n}\n\nexport const About: React.FC<AboutProps> = ({ onClose }) => {\n  const [activeTab, setActiveTab] = useState<'developer' | 'project' | 'technologies'>('developer');\n\n  const developerInfo = {\n    name: 'CHEUDJEU TEFOYE CDRIC BASILIO',\n    title: 'Expert en Dveloppement Informatique & Intelligence Artificielle',\n    location: 'Douala, Cameroun',\n    phone: '+237 652 761 931',\n    email: 'cedrictefoye@gmail.com',\n    currentPosition: 'Responsable Cellule Informatique - Facult de Mdecine, Universit de Douala',\n    experience: '4+ ans d\\'exprience',\n    avatar: ''\n  };\n\n  const education = [\n    {\n      degree: 'Master en Intelligence Artificielle',\n      institution: 'Universit de Dschang, Facult des Sciences',\n      year: '2022-2023',\n      mention: 'Mention obtenue',\n      specialization: 'Machine Learning, NLP, Computer Vision'\n    },\n    {\n      degree: 'Licence en Informatique Fondamentale',\n      institution: 'Universit de Dschang, Facult des Sciences',\n      year: '2020-2021',\n      specialization: 'Gnie Logiciel et Systmes d\\'Information'\n    }\n  ];\n\n  const experience = [\n    {\n      title: 'Responsable Cellule Informatique',\n      company: 'Facult de Mdecine - Universit de Douala',\n      period: 'Jan. 2024 - Prsent',\n      description: 'Administration des systmes, dveloppement d\\'applications de gestion acadmique, implmentation de solutions d\\'IA'\n    },\n    {\n      title: 'Co-fondateur',\n      company: 'OVERBRAND',\n      period: 'Aot 2021 - Prsent',\n      description: 'Direction stratgique et technique, supervision de projets web/mobile'\n    },\n    {\n      title: 'Designer - Projet Help to Win',\n      company: 'VISIBILITY CAM SARL',\n      period: 'Mars 2023 - Prsent',\n      description: 'Conception UI/UX d\\'application mobile ducative'\n    }\n  ];\n\n  const technologies = {\n    frontend: ['React.js', 'Vue.js', 'HTML5/CSS3', 'JavaScript', 'TypeScript'],\n    backend: ['Node.js', 'PHP/Laravel', 'Python', 'Express.js'],\n    mobile: ['React Native', 'Flutter'],\n    ai: ['TensorFlow', 'PyTorch', 'Scikit-Learn', 'Machine Learning', 'NLP'],\n    design: ['Figma', 'Adobe XD', 'Photoshop', 'Illustrator'],\n    database: ['MySQL', 'PostgreSQL', 'MongoDB', 'Firebase'],\n    tools: ['Git/GitHub', 'Docker', 'AWS']\n  };\n\n  const projectFeatures = [\n    {\n      icon: BookOpen,\n      title: 'Gestion complte',\n      description: 'Systme complet de gestion de bibliothque avec emprunteurs, livres et historique'\n    },\n    {\n      icon: Users,\n      title: 'Multi-utilisateurs',\n      description: 'Support pour tudiants et personnel avec diffrents types d\\'accs'\n    },\n    {\n      icon: Zap,\n      title: 'Interface moderne',\n      description: 'Design contemporain avec animations fluides et exprience utilisateur optimise'\n    },\n    {\n      icon: Heart,\n      title: 'Open Source',\n      description: 'Code source libre et gratuit pour toute la communaut ducative'\n    }\n  ];\n\n  const achievements = [\n    {\n      icon: Trophy,\n      title: 'Halkaton 2022',\n      description: 'Hackathon de 24 heures'\n    },\n    {\n      icon: Award,\n      title: 'MountainHack 2020',\n      description: 'Hackathon de 24 heures, Dschang'\n    },\n    {\n      icon: Star,\n      title: 'Master avec mention',\n      description: 'Intelligence Artificielle - 2023'\n    }\n  ];\n\n  const tabs = [\n    { id: 'developer' as const, label: 'Dveloppeur', icon: User },\n    { id: 'project' as const, label: 'Le Projet', icon: BookOpen },\n    { id: 'technologies' as const, label: 'Technologies', icon: Code }\n  ];\n\n  return (\n    <div className=\"about-page\">\n      {/* Hero Section */}\n      <div className=\"hero-section\">\n        <div className=\"hero-background\">\n          <div className=\"hero-pattern\"></div>\n        </div>\n        <div className=\"hero-content\">\n          <button className=\"back-button\" onClick={onClose}>\n            <ArrowLeft size={20} />\n            <span>Retour</span>\n          </button>\n          \n          <div className=\"hero-main\">\n            <div className=\"hero-icon\">\n              <Info size={48} />\n            </div>\n            <div className=\"hero-text\">\n              <h1 className=\"hero-title\"> propos du projet</h1>\n              <p className=\"hero-subtitle\">\n                Dcouvrez l'histoire, les technologies et l'quipe derrire ce systme de gestion de bibliothque\n              </p>\n            </div>\n          </div>\n          \n          {/* Project Stats */}\n          <div className=\"project-stats\">\n            <div className=\"stat-item\">\n              <Sparkles size={24} />\n              <div className=\"stat-content\">\n                <span className=\"stat-number\">2024</span>\n                <span className=\"stat-label\">Anne de cration</span>\n              </div>\n            </div>\n            <div className=\"stat-item\">\n              <Code size={24} />\n              <div className=\"stat-content\">\n                <span className=\"stat-number\">100%</span>\n                <span className=\"stat-label\">TypeScript</span>\n              </div>\n            </div>\n            <div className=\"stat-item\">\n              <Heart size={24} />\n              <div className=\"stat-content\">\n                <span className=\"stat-number\">MIT</span>\n                <span className=\"stat-label\">Licence libre</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"about-content\">\n        {/* Navigation Tabs */}\n        <div className=\"tabs-navigation\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              className={`tab-button ${activeTab === tab.id ? 'active' : ''}`}\n              onClick={() => setActiveTab(tab.id)}\n            >\n              <tab.icon size={20} />\n              <span>{tab.label}</span>\n            </button>\n          ))}\n        </div>\n\n        {/* Developer Tab */}\n        {activeTab === 'developer' && (\n          <div className=\"tab-content\">\n            <div className=\"developer-hero\">\n              <div className=\"developer-avatar\">\n                <span className=\"avatar-emoji\">{developerInfo.avatar}</span>\n              </div>\n              <div className=\"developer-info\">\n                <h2 className=\"developer-name\">{developerInfo.name}</h2>\n                <p className=\"developer-title\">{developerInfo.title}</p>\n                <div className=\"developer-meta\">\n                  <div className=\"meta-item\">\n                    <MapPin size={16} />\n                    <span>{developerInfo.location}</span>\n                  </div>\n                  <div className=\"meta-item\">\n                    <Briefcase size={16} />\n                    <span>{developerInfo.experience}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"content-grid\">\n              {/* Contact */}\n              <div className=\"info-card\">\n                <h3 className=\"card-title\">Contact</h3>\n                <div className=\"contact-list\">\n                  <a href={`mailto:${developerInfo.email}`} className=\"contact-item\">\n                    <Mail size={20} />\n                    <span>{developerInfo.email}</span>\n                    <ExternalLink size={16} />\n                  </a>\n                  <a href={`tel:${developerInfo.phone}`} className=\"contact-item\">\n                    <Phone size={20} />\n                    <span>{developerInfo.phone}</span>\n                    <ExternalLink size={16} />\n                  </a>\n                </div>\n              </div>\n\n              {/* Current Position */}\n              <div className=\"info-card\">\n                <h3 className=\"card-title\">Poste actuel</h3>\n                <div className=\"position-info\">\n                  <div className=\"position-title\">{developerInfo.currentPosition}</div>\n                  <p className=\"position-description\">\n                    Administration des systmes informatiques, dveloppement d'applications de gestion \n                    acadmique et implmentation de solutions d'IA pour l'optimisation des processus.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Education */}\n            <div className=\"section\">\n              <h3 className=\"section-title\">\n                <GraduationCap size={24} />\n                Formation\n              </h3>\n              <div className=\"timeline\">\n                {education.map((edu, index) => (\n                  <div key={index} className=\"timeline-item\">\n                    <div className=\"timeline-marker\"></div>\n                    <div className=\"timeline-content\">\n                      <h4 className=\"timeline-title\">{edu.degree}</h4>\n                      <p className=\"timeline-subtitle\">{edu.institution}</p>\n                      <div className=\"timeline-meta\">\n                        <span className=\"timeline-year\">{edu.year}</span>\n                        {edu.mention && <span className=\"timeline-mention\">{edu.mention}</span>}\n                      </div>\n                      <p className=\"timeline-description\">{edu.specialization}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Experience */}\n            <div className=\"section\">\n              <h3 className=\"section-title\">\n                <Briefcase size={24} />\n                Exprience professionnelle\n              </h3>\n              <div className=\"experience-grid\">\n                {experience.map((exp, index) => (\n                  <div key={index} className=\"experience-card\">\n                    <div className=\"experience-header\">\n                      <h4 className=\"experience-title\">{exp.title}</h4>\n                      <span className=\"experience-period\">{exp.period}</span>\n                    </div>\n                    <p className=\"experience-company\">{exp.company}</p>\n                    <p className=\"experience-description\">{exp.description}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Achievements */}\n            <div className=\"section\">\n              <h3 className=\"section-title\">\n                <Award size={24} />\n                Ralisations\n              </h3>\n              <div className=\"achievements-grid\">\n                {achievements.map((achievement, index) => (\n                  <div key={index} className=\"achievement-card\">\n                    <div className=\"achievement-icon\">\n                      <achievement.icon size={24} />\n                    </div>\n                    <h4 className=\"achievement-title\">{achievement.title}</h4>\n                    <p className=\"achievement-description\">{achievement.description}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Project Tab */}\n        {activeTab === 'project' && (\n          <div className=\"tab-content\">\n            <div className=\"project-intro\">\n              <h2 className=\"intro-title\">Systme de Gestion de Bibliothque</h2>\n              <p className=\"intro-description\">\n                Une solution moderne et complte pour la gestion des bibliothques, dveloppe avec les \n                dernires technologies web. Ce projet vise  simplifier et moderniser la gestion des \n                collections de livres, des emprunteurs et des transactions dans les tablissements ducatifs.\n              </p>\n            </div>\n\n            <div className=\"features-grid\">\n              {projectFeatures.map((feature, index) => (\n                <div key={index} className=\"feature-card\">\n                  <div className=\"feature-icon\">\n                    <feature.icon size={24} />\n                  </div>\n                  <h3 className=\"feature-title\">{feature.title}</h3>\n                  <p className=\"feature-description\">{feature.description}</p>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"project-details\">\n              <div className=\"detail-card\">\n                <h3 className=\"detail-title\">Objectifs du projet</h3>\n                <ul className=\"detail-list\">\n                  <li>Moderniser la gestion des bibliothques scolaires et universitaires</li>\n                  <li>Simplifier les processus d'emprunt et de retour de livres</li>\n                  <li>Fournir des statistiques et analyses en temps rel</li>\n                  <li>Offrir une interface intuitive et accessible</li>\n                  <li>Garantir la gratuit et l'open source pour l'ducation</li>\n                </ul>\n              </div>\n\n              <div className=\"detail-card\">\n                <h3 className=\"detail-title\">Fonctionnalits principales</h3>\n                <ul className=\"detail-list\">\n                  <li>Gestion complte des livres (ajout, modification, suppression)</li>\n                  <li>Systme d'emprunteurs avec diffrents types (tudiants, personnel)</li>\n                  <li>Processus d'emprunt et de retour simplifis</li>\n                  <li>Historique dtaill des transactions</li>\n                  <li>Gnration de rapports et exports CSV</li>\n                  <li>Interface responsive adapte  tous les appareils</li>\n                </ul>\n              </div>\n            </div>\n\n            <div className=\"project-mission\">\n              <div className=\"mission-icon\">\n                <Heart size={32} />\n              </div>\n              <div className=\"mission-content\">\n                <h3 className=\"mission-title\">Notre mission</h3>\n                <p className=\"mission-description\">\n                  Dmocratiser l'accs aux outils de gestion modernes pour les bibliothques, \n                  en particulier dans les tablissements ducatifs. Nous croyons que chaque \n                  institution, quelle que soit sa taille ou ses ressources, devrait avoir accs \n                   des solutions technologiques de qualit pour amliorer l'exprience de ses utilisateurs.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Technologies Tab */}\n        {activeTab === 'technologies' && (\n          <div className=\"tab-content\">\n            <div className=\"tech-intro\">\n              <h2 className=\"intro-title\">Stack Technologique</h2>\n              <p className=\"intro-description\">\n                Ce projet utilise des technologies modernes et prouves pour garantir performance, \n                scurit et maintenabilit. Voici un aperu des outils et frameworks utiliss.\n              </p>\n            </div>\n\n            <div className=\"tech-categories\">\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Frontend</h3>\n                <div className=\"tech-tags\">\n                  {technologies.frontend.map((tech, index) => (\n                    <span key={index} className=\"tech-tag frontend\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Backend</h3>\n                <div className=\"tech-tags\">\n                  {technologies.backend.map((tech, index) => (\n                    <span key={index} className=\"tech-tag backend\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Mobile</h3>\n                <div className=\"tech-tags\">\n                  {technologies.mobile.map((tech, index) => (\n                    <span key={index} className=\"tech-tag mobile\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Intelligence Artificielle</h3>\n                <div className=\"tech-tags\">\n                  {technologies.ai.map((tech, index) => (\n                    <span key={index} className=\"tech-tag ai\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Design</h3>\n                <div className=\"tech-tags\">\n                  {technologies.design.map((tech, index) => (\n                    <span key={index} className=\"tech-tag design\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Base de donnes</h3>\n                <div className=\"tech-tags\">\n                  {technologies.database.map((tech, index) => (\n                    <span key={index} className=\"tech-tag database\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"tech-category\">\n                <h3 className=\"tech-title\">Outils & DevOps</h3>\n                <div className=\"tech-tags\">\n                  {technologies.tools.map((tech, index) => (\n                    <span key={index} className=\"tech-tag tools\">{tech}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"architecture-info\">\n              <h3 className=\"architecture-title\">Architecture</h3>\n              <div className=\"architecture-description\">\n                <p>\n                  Le systme est construit avec une architecture moderne sparant clairement \n                  les couches de prsentation, logique mtier et donnes. L'interface utilisateur \n                  est dveloppe en React avec TypeScript pour une meilleure maintenabilit.\n                </p>\n                <p>\n                  L'application utilise Electron pour offrir une exprience desktop native \n                  tout en conservant la flexibilit du web. La base de donnes SQLite garantit \n                  une installation simple et une portabilit maximale.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <style>{`\n        .about-page {\n          height: 100%;\n          overflow-y: auto;\n          background: #FAF9F6;\n        }\n        \n        .hero-section {\n          position: relative;\n          background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);\n          color: #F3EED9;\n          padding: 48px 32px;\n          overflow: hidden;\n        }\n        \n        .hero-background {\n          position: absolute;\n          inset: 0;\n          overflow: hidden;\n        }\n        \n        .hero-pattern {\n          position: absolute;\n          inset: 0;\n          background-image: \n            radial-gradient(circle at 25% 25%, rgba(243, 238, 217, 0.1) 0%, transparent 50%),\n            radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);\n          animation: drift 20s ease-in-out infinite;\n        }\n        \n        @keyframes drift {\n          0%, 100% { transform: translate(0, 0) rotate(0deg); }\n          33% { transform: translate(30px, -30px) rotate(1deg); }\n          66% { transform: translate(-20px, 20px) rotate(-1deg); }\n        }\n        \n        .hero-content {\n          position: relative;\n          z-index: 1;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n        \n        .back-button {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: rgba(243, 238, 217, 0.15);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          color: #F3EED9;\n          padding: 12px 20px;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          font-size: 14px;\n          font-weight: 500;\n          margin-bottom: 32px;\n          width: fit-content;\n        }\n        \n        .back-button:hover {\n          background: rgba(243, 238, 217, 0.25);\n          transform: translateX(-4px);\n        }\n        \n        .hero-main {\n          display: flex;\n          align-items: center;\n          gap: 24px;\n          margin-bottom: 40px;\n          text-align: center;\n          flex-direction: column;\n        }\n        \n        .hero-icon {\n          width: 96px;\n          height: 96px;\n          background: rgba(243, 238, 217, 0.2);\n          border-radius: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n        }\n        \n        .hero-title {\n          font-size: 42px;\n          font-weight: 800;\n          margin: 0 0 16px 0;\n          line-height: 1.2;\n          letter-spacing: -0.5px;\n        }\n        \n        .hero-subtitle {\n          font-size: 20px;\n          opacity: 0.9;\n          margin: 0;\n          line-height: 1.5;\n          max-width: 600px;\n        }\n        \n        .project-stats {\n          display: flex;\n          justify-content: center;\n          gap: 40px;\n          flex-wrap: wrap;\n        }\n        \n        .stat-item {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          background: rgba(243, 238, 217, 0.1);\n          padding: 20px 24px;\n          border-radius: 16px;\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(243, 238, 217, 0.2);\n        }\n        \n        .stat-number {\n          font-size: 24px;\n          font-weight: 800;\n          color: #F3EED9;\n          display: block;\n          line-height: 1;\n        }\n        \n        .stat-label {\n          font-size: 14px;\n          color: rgba(243, 238, 217, 0.9);\n          margin-top: 4px;\n        }\n        \n        .about-content {\n          padding: 0 32px 48px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n        \n        .tabs-navigation {\n          display: flex;\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 8px;\n          margin-bottom: 32px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          position: sticky;\n          top: 20px;\n          z-index: 10;\n        }\n        \n        .tab-button {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          padding: 16px 20px;\n          border: none;\n          background: transparent;\n          color: #4A4A4A;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          font-size: 14px;\n          font-weight: 600;\n        }\n        \n        .tab-button:hover {\n          background: rgba(96, 125, 139, 0.1);\n          color: #607D8B;\n        }\n        \n        .tab-button.active {\n          background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);\n          color: #F3EED9;\n          box-shadow: 0 4px 12px rgba(96, 125, 139, 0.3);\n        }\n        \n        .tab-content {\n          animation: fadeIn 0.3s ease-out;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .developer-hero {\n          display: flex;\n          align-items: center;\n          gap: 24px;\n          background: #FFFFFF;\n          border-radius: 20px;\n          padding: 32px;\n          margin-bottom: 32px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .developer-avatar {\n          width: 80px;\n          height: 80px;\n          background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 32px;\n          flex-shrink: 0;\n        }\n        \n        .developer-name {\n          font-size: 28px;\n          font-weight: 800;\n          color: #2E2E2E;\n          margin: 0 0 8px 0;\n          letter-spacing: -0.3px;\n        }\n        \n        .developer-title {\n          font-size: 16px;\n          color: #607D8B;\n          margin: 0 0 16px 0;\n          font-weight: 600;\n        }\n        \n        .developer-meta {\n          display: flex;\n          gap: 24px;\n          flex-wrap: wrap;\n        }\n        \n        .meta-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          color: #4A4A4A;\n          font-size: 14px;\n        }\n        \n        .content-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 24px;\n          margin-bottom: 48px;\n        }\n        \n        .info-card {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .card-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 20px 0;\n        }\n        \n        .contact-list {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        \n        .contact-item {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 12px 16px;\n          background: rgba(96, 125, 139, 0.05);\n          border-radius: 12px;\n          color: #2E2E2E;\n          text-decoration: none;\n          transition: all 0.2s ease;\n        }\n        \n        .contact-item:hover {\n          background: rgba(96, 125, 139, 0.1);\n          transform: translateY(-1px);\n        }\n        \n        .position-title {\n          font-size: 16px;\n          font-weight: 700;\n          color: #607D8B;\n          margin-bottom: 8px;\n        }\n        \n        .position-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n        }\n        \n        .section {\n          margin-bottom: 48px;\n        }\n        \n        .section-title {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          font-size: 24px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 24px 0;\n        }\n        \n        .timeline {\n          position: relative;\n          padding-left: 32px;\n        }\n        \n        .timeline::before {\n          content: '';\n          position: absolute;\n          left: 16px;\n          top: 0;\n          bottom: 0;\n          width: 2px;\n          background: linear-gradient(to bottom, #607D8B, #455A64);\n        }\n        \n        .timeline-item {\n          position: relative;\n          margin-bottom: 32px;\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .timeline-marker {\n          position: absolute;\n          left: -40px;\n          top: 24px;\n          width: 12px;\n          height: 12px;\n          background: #607D8B;\n          border-radius: 50%;\n          border: 3px solid #FFFFFF;\n          box-shadow: 0 0 0 2px #607D8B;\n        }\n        \n        .timeline-title {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 4px 0;\n        }\n        \n        .timeline-subtitle {\n          font-size: 14px;\n          color: #607D8B;\n          margin: 0 0 8px 0;\n          font-weight: 600;\n        }\n        \n        .timeline-meta {\n          display: flex;\n          gap: 16px;\n          margin-bottom: 8px;\n        }\n        \n        .timeline-year {\n          background: rgba(96, 125, 139, 0.1);\n          color: #607D8B;\n          padding: 4px 8px;\n          border-radius: 8px;\n          font-size: 12px;\n          font-weight: 600;\n        }\n        \n        .timeline-mention {\n          background: #4CAF50;\n          color: #FFFFFF;\n          padding: 4px 8px;\n          border-radius: 8px;\n          font-size: 12px;\n          font-weight: 600;\n        }\n        \n        .timeline-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n        }\n        \n        .experience-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 24px;\n        }\n        \n        .experience-card {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          transition: all 0.3s ease;\n        }\n        \n        .experience-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 8px 24px rgba(96, 125, 139, 0.15);\n        }\n        \n        .experience-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 8px;\n        }\n        \n        .experience-title {\n          font-size: 16px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0;\n          flex: 1;\n        }\n        \n        .experience-period {\n          background: rgba(96, 125, 139, 0.1);\n          color: #607D8B;\n          padding: 4px 8px;\n          border-radius: 8px;\n          font-size: 11px;\n          font-weight: 600;\n          white-space: nowrap;\n        }\n        \n        .experience-company {\n          font-size: 14px;\n          color: #607D8B;\n          font-weight: 600;\n          margin: 0 0 12px 0;\n        }\n        \n        .experience-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n        }\n        \n        .achievements-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 20px;\n        }\n        \n        .achievement-card {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 20px;\n          text-align: center;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          transition: all 0.3s ease;\n        }\n        \n        .achievement-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 8px 24px rgba(96, 125, 139, 0.15);\n        }\n        \n        .achievement-icon {\n          width: 48px;\n          height: 48px;\n          background: rgba(96, 125, 139, 0.1);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #607D8B;\n          margin: 0 auto 16px;\n        }\n        \n        .achievement-title {\n          font-size: 16px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 8px 0;\n        }\n        \n        .achievement-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin: 0;\n        }\n        \n        .project-intro {\n          background: #FFFFFF;\n          border-radius: 20px;\n          padding: 32px;\n          margin-bottom: 32px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          text-align: center;\n        }\n        \n        .intro-title {\n          font-size: 32px;\n          font-weight: 800;\n          color: #2E2E2E;\n          margin: 0 0 16px 0;\n          letter-spacing: -0.3px;\n        }\n        \n        .intro-description {\n          font-size: 16px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n          max-width: 800px;\n          margin: 0 auto;\n        }\n        \n        .features-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 24px;\n          margin-bottom: 48px;\n        }\n        \n        .feature-card {\n          background: #FFFFFF;\n          border-radius: 20px;\n          padding: 28px;\n          text-align: center;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          transition: all 0.3s ease;\n        }\n        \n        .feature-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 8px 24px rgba(96, 125, 139, 0.15);\n        }\n        \n        .feature-icon {\n          width: 56px;\n          height: 56px;\n          background: rgba(96, 125, 139, 0.1);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #607D8B;\n          margin: 0 auto 20px;\n        }\n        \n        .feature-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 12px 0;\n        }\n        \n        .feature-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n        }\n        \n        .project-details {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 24px;\n          margin-bottom: 48px;\n        }\n        \n        .detail-card {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .detail-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 16px 0;\n        }\n        \n        .detail-list {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        \n        .detail-list li {\n          padding: 8px 0;\n          border-bottom: 1px solid #F3EED9;\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          position: relative;\n          padding-left: 20px;\n        }\n        \n        .detail-list li::before {\n          content: '';\n          color: #607D8B;\n          position: absolute;\n          left: 0;\n          font-weight: bold;\n        }\n        \n        .detail-list li:last-child {\n          border-bottom: none;\n        }\n        \n        .project-mission {\n          display: flex;\n          gap: 24px;\n          background: linear-gradient(135deg, rgba(96, 125, 139, 0.05) 0%, rgba(69, 90, 100, 0.05) 100%);\n          border: 1px solid rgba(96, 125, 139, 0.2);\n          border-radius: 20px;\n          padding: 32px;\n        }\n        \n        .mission-icon {\n          width: 64px;\n          height: 64px;\n          background: #607D8B;\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #FFFFFF;\n          flex-shrink: 0;\n        }\n        \n        .mission-title {\n          font-size: 24px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 12px 0;\n        }\n        \n        .mission-description {\n          font-size: 16px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0;\n        }\n        \n        .tech-intro {\n          background: #FFFFFF;\n          border-radius: 20px;\n          padding: 32px;\n          margin-bottom: 32px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n          text-align: center;\n        }\n        \n        .tech-categories {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 24px;\n          margin-bottom: 48px;\n        }\n        \n        .tech-category {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .tech-title {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 16px 0;\n        }\n        \n        .tech-tags {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 8px;\n        }\n        \n        .tech-tag {\n          padding: 6px 12px;\n          border-radius: 12px;\n          font-size: 12px;\n          font-weight: 600;\n          color: #FFFFFF;\n        }\n        \n        .tech-tag.frontend { background: #3E5C49; }\n        .tech-tag.backend { background: #C2571B; }\n        .tech-tag.mobile { background: #E91E63; }\n        .tech-tag.ai { background: #9C27B0; }\n        .tech-tag.design { background: #FF9800; }\n        .tech-tag.database { background: #607D8B; }\n        .tech-tag.tools { background: #6E6E6E; }\n        \n        .architecture-info {\n          background: #FFFFFF;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(96, 125, 139, 0.1);\n          border: 1px solid #E5DCC2;\n        }\n        \n        .architecture-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 16px 0;\n        }\n        \n        .architecture-description p {\n          font-size: 14px;\n          color: #4A4A4A;\n          line-height: 1.6;\n          margin: 0 0 16px 0;\n        }\n        \n        .architecture-description p:last-child {\n          margin-bottom: 0;\n        }\n        \n        /* Responsive Design */\n        @media (max-width: 768px) {\n          .hero-section {\n            padding: 32px 16px;\n          }\n          \n          .hero-title {\n            font-size: 32px;\n          }\n          \n          .hero-subtitle {\n            font-size: 18px;\n          }\n          \n          .project-stats {\n            flex-direction: column;\n            gap: 16px;\n          }\n          \n          .stat-item {\n            justify-content: center;\n          }\n          \n          .about-content {\n            padding: 0 16px 32px;\n          }\n          \n          .tabs-navigation {\n            flex-direction: column;\n            gap: 8px;\n          }\n          \n          .tab-button {\n            justify-content: flex-start;\n          }\n          \n          .developer-hero {\n            flex-direction: column;\n            text-align: center;\n            gap: 20px;\n          }\n          \n          .developer-meta {\n            justify-content: center;\n          }\n          \n          .content-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .timeline {\n            padding-left: 24px;\n          }\n          \n          .timeline-marker {\n            left: -32px;\n          }\n          \n          .experience-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .achievements-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .features-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .project-details {\n            grid-template-columns: 1fr;\n          }\n          \n          .project-mission {\n            flex-direction: column;\n            text-align: center;\n          }\n          \n          .tech-categories {\n            grid-template-columns: 1fr;\n          }\n        }\n        \n        @media (max-width: 480px) {\n          .hero-main {\n            gap: 16px;\n          }\n          \n          .hero-icon {\n            width: 72px;\n            height: 72px;\n          }\n          \n          .hero-title {\n            font-size: 28px;\n          }\n          \n          .intro-title {\n            font-size: 28px;\n          }\n          \n          .developer-name {\n            font-size: 24px;\n          }\n          \n          .experience-header {\n            flex-direction: column;\n            gap: 8px;\n          }\n          \n          .experience-period {\n            align-self: flex-start;\n          }\n          \n          .timeline-item {\n            padding: 20px;\n          }\n          \n          .feature-card,\n          .achievement-card {\n            padding: 20px;\n          }\n          \n          .project-mission {\n            padding: 24px;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\nimport { Save, X, Plus, BookOpen, User, Building, MapPin, Calendar, Tag, Hash, FileText, Image, Sparkles, ChevronRight } from 'lucide-react';\nimport { Document } from '../../types';\n\ninterface Author {\n  id: string;\n  name: string;\n}\n\ninterface Category {\n  id: string;\n  name: string;\n}\n\ninterface AddDocumentProps {\n  onAdd: (document: Omit<Document, 'id'>) => Promise<void>;\n  onCancel: () => void;\n  editingDocument?: Document;\n}\n\nexport const AddDocument: React.FC<AddDocumentProps> = ({ onAdd, onCancel, editingDocument }) => {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState({\n    auteur: '',\n    titre: '',\n    editeur: '',\n    lieuEdition: '',\n    annee: new Date().getFullYear().toString(),\n    descripteurs: '',\n    cote: '',\n    isbn: '',\n    description: '',\n    couverture: '',\n    estEmprunte: false,\n    syncStatus: 'pending' as 'synced' | 'pending' | 'conflict' | 'error',\n    lastModified: new Date().toISOString(),\n    version: 1\n  });\n\n  const [authors, setAuthors] = useState<Author[]>([\n    { id: '1', name: 'Victor Hugo' },\n    { id: '2', name: 'Marcel Proust' },\n    { id: '3', name: 'Simone de Beauvoir' }\n  ]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  useEffect(() => {\n    if (editingDocument) {\n      setFormData({\n        auteur: editingDocument.auteur,\n        titre: editingDocument.titre,\n        editeur: editingDocument.editeur,\n        lieuEdition: editingDocument.lieuEdition,\n        annee: editingDocument.annee,\n        descripteurs: editingDocument.descripteurs,\n        cote: editingDocument.cote,\n        isbn: editingDocument.isbn || '',\n        description: editingDocument.description || '',\n        couverture: editingDocument.couverture || '',\n        estEmprunte: editingDocument.estEmprunte,\n        syncStatus: editingDocument.syncStatus,\n        lastModified: editingDocument.lastModified,\n        version: editingDocument.version\n      });\n    }\n  }, [editingDocument]);\n\n  const generateCote = () => {\n    if (formData.descripteurs && formData.auteur && formData.annee) {\n      const category = formData.descripteurs.split(',')[0].trim().toUpperCase();\n      const authorCode = formData.auteur.split(' ').map(name => name.substring(0, 3).toUpperCase()).join('-');\n      const yearCode = formData.annee.substring(2);\n      const randomNum = Math.floor(Math.random() * 999).toString().padStart(3, '0');\n      \n      const generatedCote = `${category.substring(0, 3)}-${authorCode}-${yearCode}${randomNum}`;\n      setFormData(prev => ({ ...prev, cote: generatedCote }));\n    }\n  };\n\n  const validateStep = (step: number) => {\n    const newErrors: Record<string, string> = {};\n\n    if (step === 1) {\n      if (!formData.auteur.trim()) newErrors.auteur = 'L\\'auteur est obligatoire';\n      if (!formData.titre.trim()) newErrors.titre = 'Le titre est obligatoire';\n      if (!formData.editeur.trim()) newErrors.editeur = 'L\\'diteur est obligatoire';\n    }\n\n    if (step === 2) {\n      if (!formData.lieuEdition.trim()) newErrors.lieuEdition = 'Le lieu d\\'dition est obligatoire';\n      if (!formData.annee.trim()) newErrors.annee = 'L\\'anne est obligatoire';\n      const year = parseInt(formData.annee);\n      if (isNaN(year) || year < 1000 || year > new Date().getFullYear() + 10) {\n        newErrors.annee = 'Anne invalide';\n      }\n    }\n\n    if (step === 3) {\n      if (!formData.descripteurs.trim()) newErrors.descripteurs = 'Les descripteurs sont obligatoires';\n      if (!formData.cote.trim()) newErrors.cote = 'La cote est obligatoire';\n      if (formData.isbn && !/^(978|979)?[0-9]{9}[0-9X]$/.test(formData.isbn.replace(/-/g, ''))) {\n        newErrors.isbn = 'Format ISBN invalide';\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    if (validateStep(currentStep)) {\n      setCurrentStep(prev => Math.min(prev + 1, 3));\n    }\n  };\n\n  const handlePrev = () => {\n    setCurrentStep(prev => Math.max(prev - 1, 1));\n  };\n\n  const handleSubmit = async () => {\n    if (!validateStep(3)) {\n      return;\n    }\n\n    setIsLoading(true);\n    \n    try {\n      const documentData: Omit<Document, 'id'> = {\n        ...formData,\n        estEmprunte: false,\n        syncStatus: 'pending' as 'synced' | 'pending' | 'conflict' | 'error',\n        lastModified: new Date().toISOString(),\n        version: editingDocument ? editingDocument.version + 1 : 1\n      };\n\n      await onAdd(documentData);\n      \n      if (!editingDocument) {\n        setFormData({\n          auteur: '',\n          titre: '',\n          editeur: '',\n          lieuEdition: '',\n          annee: new Date().getFullYear().toString(),\n          descripteurs: '',\n          cote: '',\n          isbn: '',\n          description: '',\n          couverture: '',\n          estEmprunte: false,\n          syncStatus: 'pending' as 'synced' | 'pending' | 'conflict' | 'error',\n          lastModified: new Date().toISOString(),\n          version: 1\n        });\n        setCurrentStep(1);\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du document:', error);\n      setErrors({ submit: 'Erreur lors de l\\'enregistrement du document' });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    \n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const getStepTitle = (step: number) => {\n    switch(step) {\n      case 1: return 'Informations principales';\n      case 2: return 'Publication';\n      case 3: return 'Classification';\n      default: return '';\n    }\n  };\n\n  const getStepDescription = (step: number) => {\n    switch(step) {\n      case 1: return 'Identifiez l\\'uvre et son auteur';\n      case 2: return 'Dtails de publication';\n      case 3: return 'Organisation et mtadonnes';\n      default: return '';\n    }\n  };\n\n  const getStepIcon = (step: number) => {\n    switch(step) {\n      case 1: return BookOpen;\n      case 2: return Calendar;\n      case 3: return Tag;\n      default: return BookOpen;\n    }\n  };\n\n  const renderStepContent = () => {\n    switch(currentStep) {\n      case 1:\n        return (\n          <div className=\"step-content\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <User size={18} />\n                Auteur *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.auteur}\n                onChange={(e) => handleInputChange('auteur', e.target.value)}\n                className={`form-input ${errors.auteur ? 'error' : ''}`}\n                placeholder=\"Nom complet de l'auteur\"\n                list=\"authors-list\"\n                autoFocus\n              />\n              <datalist id=\"authors-list\">\n                {authors.map(author => (\n                  <option key={author.id} value={author.name} />\n                ))}\n              </datalist>\n              {errors.auteur && <p className=\"error-message\">{errors.auteur}</p>}\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <BookOpen size={18} />\n                Titre du document *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.titre}\n                onChange={(e) => handleInputChange('titre', e.target.value)}\n                className={`form-input ${errors.titre ? 'error' : ''}`}\n                placeholder=\"Titre complet de l'uvre\"\n              />\n              {errors.titre && <p className=\"error-message\">{errors.titre}</p>}\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <Building size={18} />\n                diteur *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.editeur}\n                onChange={(e) => handleInputChange('editeur', e.target.value)}\n                className={`form-input ${errors.editeur ? 'error' : ''}`}\n                placeholder=\"Nom de la maison d'dition\"\n              />\n              {errors.editeur && <p className=\"error-message\">{errors.editeur}</p>}\n            </div>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className=\"step-content\">\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label className=\"form-label\">\n                  <MapPin size={18} />\n                  Lieu d'dition *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.lieuEdition}\n                  onChange={(e) => handleInputChange('lieuEdition', e.target.value)}\n                  className={`form-input ${errors.lieuEdition ? 'error' : ''}`}\n                  placeholder=\"Ville de publication\"\n                />\n                {errors.lieuEdition && <p className=\"error-message\">{errors.lieuEdition}</p>}\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">\n                  <Calendar size={18} />\n                  Anne de publication *\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.annee}\n                  onChange={(e) => handleInputChange('annee', e.target.value)}\n                  className={`form-input ${errors.annee ? 'error' : ''}`}\n                  placeholder=\"YYYY\"\n                  min=\"1000\"\n                  max={new Date().getFullYear() + 10}\n                />\n                {errors.annee && <p className=\"error-message\">{errors.annee}</p>}\n              </div>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                ISBN (optionnel)\n              </label>\n              <input\n                type=\"text\"\n                value={formData.isbn}\n                onChange={(e) => handleInputChange('isbn', e.target.value)}\n                className={`form-input ${errors.isbn ? 'error' : ''}`}\n                placeholder=\"978-2-123456-78-9\"\n              />\n              {errors.isbn && <p className=\"error-message\">{errors.isbn}</p>}\n              <p className=\"form-help\">Format standard ISBN-13 ou ISBN-10</p>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <Image size={18} />\n                Image de couverture (optionnel)\n              </label>\n              <div className=\"file-input-group\">\n                <input\n                  type=\"text\"\n                  value={formData.couverture}\n                  onChange={(e) => handleInputChange('couverture', e.target.value)}\n                  className=\"form-input\"\n                  placeholder=\"Chemin vers l'image ou URL\"\n                  readOnly\n                />\n                <button\n                  type=\"button\"\n                  className=\"file-browse-btn\"\n                  onClick={() => {\n                    // Simulation de slection de fichier\n                    setFormData(prev => ({ ...prev, couverture: '/path/to/cover.jpg' }));\n                  }}\n                >\n                  Parcourir\n                </button>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 3:\n        return (\n          <div className=\"step-content\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <Tag size={18} />\n                Descripteurs / Mots-cls *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.descripteurs}\n                onChange={(e) => handleInputChange('descripteurs', e.target.value)}\n                className={`form-input ${errors.descripteurs ? 'error' : ''}`}\n                placeholder=\"Fiction, Roman historique, XIXe sicle...\"\n              />\n              {errors.descripteurs && <p className=\"error-message\">{errors.descripteurs}</p>}\n              <p className=\"form-help\">Sparez les mots-cls par des virgules pour faciliter la recherche</p>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <Hash size={18} />\n                Cote de classification *\n              </label>\n              <div className=\"input-with-action\">\n                <input\n                  type=\"text\"\n                  value={formData.cote}\n                  onChange={(e) => handleInputChange('cote', e.target.value)}\n                  className={`form-input ${errors.cote ? 'error' : ''}`}\n                  placeholder=\"Code unique de classification\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={generateCote}\n                  className=\"action-btn generate-btn\"\n                  title=\"Gnrer automatiquement\"\n                  disabled={!formData.descripteurs || !formData.auteur || !formData.annee}\n                >\n                  <Sparkles size={16} />\n                  Gnrer\n                </button>\n              </div>\n              {errors.cote && <p className=\"error-message\">{errors.cote}</p>}\n              <p className=\"form-help\">La cote est gnre automatiquement base sur les descripteurs, l'auteur et l'anne</p>\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                Description dtaille (optionnel)\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => handleInputChange('description', e.target.value)}\n                className=\"form-textarea\"\n                rows={4}\n                placeholder=\"Rsum, notes personnelles, contexte historique...\"\n              />\n              <p className=\"form-help\">Ajoutez toute information utile pour identifier ou contextualiser ce document</p>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-container\">\n        {/* Header */}\n        <div className=\"modal-header\">\n          <div className=\"header-content\">\n            <div className=\"header-icon\">\n              <Plus size={24} />\n            </div>\n            <div className=\"header-text\">\n              <h1 className=\"modal-title\">\n                {editingDocument ? 'Modifier le document' : 'Nouveau document'}\n              </h1>\n              <p className=\"modal-subtitle\">\n                Enrichissez votre bibliothque\n              </p>\n            </div>\n          </div>\n          <button onClick={onCancel} className=\"close-btn\">\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Progress Steps */}\n        <div className=\"progress-container\">\n          <div className=\"progress-steps\">\n            {[1, 2, 3].map((step) => {\n              const StepIcon = getStepIcon(step);\n              const isActive = step === currentStep;\n              const isCompleted = step < currentStep;\n              \n              return (\n                <div\n                  key={step}\n                  className={`progress-step ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`}\n                >\n                  <div className=\"step-indicator\">\n                    <StepIcon size={16} />\n                  </div>\n                  <div className=\"step-info\">\n                    <span className=\"step-title\">{getStepTitle(step)}</span>\n                    <span className=\"step-description\">{getStepDescription(step)}</span>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"progress-bar\">\n            <div \n              className=\"progress-fill\" \n              style={{ width: `${(currentStep / 3) * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"modal-content\">\n          {errors.submit && (\n            <div className=\"alert alert-error\">\n              {errors.submit}\n            </div>\n          )}\n\n          <div className=\"step-container\">\n            {renderStepContent()}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"modal-actions\">\n          <div className=\"actions-left\">\n            {currentStep > 1 && (\n              <button onClick={handlePrev} className=\"btn btn-secondary\">\n                Prcdent\n              </button>\n            )}\n          </div>\n          \n          <div className=\"actions-right\">\n            {currentStep < 3 ? (\n              <button onClick={handleNext} className=\"btn btn-primary\">\n                Suivant\n                <ChevronRight size={16} />\n              </button>\n            ) : (\n              <button \n                onClick={handleSubmit} \n                disabled={isLoading}\n                className=\"btn btn-success\"\n              >\n                {isLoading ? (\n                  <>\n                    <div className=\"spinner\" />\n                    Enregistrement...\n                  </>\n                ) : (\n                  <>\n                    <Save size={16} />\n                    {editingDocument ? 'Modifier' : 'Ajouter'}\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        .modal-overlay {\n          position: fixed;\n          inset: 0;\n          background: rgba(0, 0, 0, 0.75);\n          backdrop-filter: blur(8px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 50;\n          padding: 20px;\n        }\n\n        .modal-container {\n          background: white;\n          border-radius: 20px;\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n          width: 100%;\n          max-width: 700px;\n          max-height: 90vh;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .modal-header {\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n          padding: 24px 32px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .header-content {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n        }\n\n        .header-icon {\n          width: 48px;\n          height: 48px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          backdrop-filter: blur(10px);\n        }\n\n        .header-text {\n          flex: 1;\n        }\n\n        .modal-title {\n          font-size: 24px;\n          font-weight: 700;\n          margin: 0 0 4px 0;\n          line-height: 1.2;\n        }\n\n        .modal-subtitle {\n          font-size: 14px;\n          opacity: 0.8;\n          margin: 0;\n        }\n\n        .close-btn {\n          width: 40px;\n          height: 40px;\n          border: none;\n          background: rgba(255, 255, 255, 0.1);\n          color: white;\n          border-radius: 10px;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n        }\n\n        .close-btn:hover {\n          background: rgba(255, 255, 255, 0.2);\n          transform: scale(1.05);\n        }\n\n        .progress-container {\n          padding: 24px 32px 0;\n          background: #FAF9F6;\n          border-bottom: 1px solid rgba(229, 220, 194, 0.4);\n        }\n\n        .progress-steps {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 16px;\n        }\n\n        .progress-step {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          flex: 1;\n          opacity: 0.5;\n          transition: all 0.3s ease;\n        }\n\n        .progress-step.active,\n        .progress-step.completed {\n          opacity: 1;\n        }\n\n        .step-indicator {\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          background: rgba(229, 220, 194, 0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #6E6E6E;\n          transition: all 0.3s ease;\n          flex-shrink: 0;\n        }\n\n        .progress-step.active .step-indicator {\n          background: #3E5C49;\n          color: #F3EED9;\n        }\n\n        .progress-step.completed .step-indicator {\n          background: #C2571B;\n          color: #F3EED9;\n        }\n\n        .step-info {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n          min-width: 0;\n        }\n\n        .step-title {\n          font-size: 14px;\n          font-weight: 600;\n          color: #2E2E2E;\n          line-height: 1.2;\n        }\n\n        .step-description {\n          font-size: 12px;\n          color: #4A4A4A;\n          line-height: 1.2;\n        }\n\n        .progress-bar {\n          height: 4px;\n          background: rgba(229, 220, 194, 0.3);\n          border-radius: 2px;\n          overflow: hidden;\n          margin-bottom: 24px;\n        }\n\n        .progress-fill {\n          height: 100%;\n          background: linear-gradient(90deg, #3E5C49 0%, #C2571B 100%);\n          transition: width 0.3s ease;\n          border-radius: 2px;\n        }\n\n        .modal-content {\n          flex: 1;\n          overflow-y: auto;\n          padding: 32px;\n        }\n\n        .alert {\n          padding: 16px;\n          border-radius: 12px;\n          margin-bottom: 24px;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          font-size: 14px;\n          font-weight: 500;\n        }\n\n        .alert-error {\n          background: #fef2f2;\n          color: #dc2626;\n          border: 1px solid #fecaca;\n        }\n\n        .step-container {\n          min-height: 300px;\n        }\n\n        .step-content {\n          display: flex;\n          flex-direction: column;\n          gap: 24px;\n          animation: slideIn 0.3s ease-out;\n        }\n\n        @keyframes slideIn {\n          from {\n            opacity: 0;\n            transform: translateX(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(0);\n          }\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 20px;\n        }\n\n        .form-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 14px;\n          font-weight: 600;\n          color: #2E2E2E;\n        }\n\n        .form-input,\n        .form-textarea {\n          width: 100%;\n          padding: 12px 16px;\n          border: 2px solid rgba(229, 220, 194, 0.4);\n          border-radius: 10px;\n          font-size: 14px;\n          background: white;\n          color: #2E2E2E;\n          transition: all 0.2s ease;\n          box-sizing: border-box;\n        }\n\n        .form-input:focus,\n        .form-textarea:focus {\n          outline: none;\n          border-color: #3E5C49;\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\n        }\n\n        .form-input.error {\n          border-color: #dc2626;\n          background: #fef2f2;\n        }\n\n        .form-textarea {\n          resize: vertical;\n          min-height: 100px;\n          font-family: inherit;\n        }\n\n        .file-input-group,\n        .input-with-action {\n          display: flex;\n          gap: 12px;\n          align-items: flex-start;\n        }\n\n        .file-input-group .form-input,\n        .input-with-action .form-input {\n          flex: 1;\n        }\n\n        .file-browse-btn,\n        .action-btn {\n          padding: 12px 16px;\n          border: none;\n          border-radius: 10px;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          white-space: nowrap;\n        }\n\n        .file-browse-btn {\n          background: #6E6E6E;\n          color: #F3EED9;\n        }\n\n        .file-browse-btn:hover {\n          background: #5A5A5A;\n          transform: translateY(-1px);\n        }\n\n        .generate-btn {\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\n          color: #F3EED9;\n        }\n\n        .generate-btn:hover:not(:disabled) {\n          background: linear-gradient(135deg, #A8481A 0%, #8A3C18 100%);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(194, 87, 27, 0.3);\n        }\n\n        .generate-btn:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        .form-help {\n          font-size: 12px;\n          color: #4A4A4A;\n          margin: 0;\n          line-height: 1.4;\n        }\n\n        .error-message {\n          color: #dc2626;\n          font-size: 12px;\n          font-weight: 500;\n          margin: 0;\n          padding: 4px 8px;\n          background: #fef2f2;\n          border-radius: 6px;\n          border-left: 3px solid #dc2626;\n        }\n\n        .modal-actions {\n          padding: 24px 32px;\n          background: #FAF9F6;\n          border-top: 1px solid rgba(229, 220, 194, 0.4);\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .actions-left,\n        .actions-right {\n          display: flex;\n          gap: 12px;\n        }\n\n        .btn {\n          padding: 12px 20px;\n          border: none;\n          border-radius: 10px;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          min-width: 120px;\n          justify-content: center;\n        }\n\n        .btn-secondary {\n          background: #F3EED9;\n          color: #2E2E2E;\n          border: 1px solid rgba(229, 220, 194, 0.4);\n        }\n\n        .btn-secondary:hover {\n          background: #E5DCC2;\n          transform: translateY(-1px);\n        }\n\n        .btn-primary {\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n        }\n\n        .btn-primary:hover {\n          background: linear-gradient(135deg, #2E453A 0%, #1F2F25 100%);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.3);\n        }\n\n        .btn-success {\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\n          color: #F3EED9;\n        }\n\n        .btn-success:hover:not(:disabled) {\n          background: linear-gradient(135deg, #A8481A 0%, #8A3C18 100%);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(194, 87, 27, 0.3);\n        }\n\n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        .spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          border-top: 2px solid white;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          to {\n            transform: rotate(360deg);\n          }\n        }\n\n        @media (max-width: 768px) {\n          .modal-overlay {\n            padding: 16px;\n          }\n\n          .modal-container {\n            max-height: 95vh;\n          }\n\n          .modal-header {\n            padding: 20px 24px;\n          }\n\n          .header-content {\n            gap: 12px;\n          }\n\n          .header-icon {\n            width: 40px;\n            height: 40px;\n          }\n\n          .modal-title {\n            font-size: 20px;\n          }\n\n          .progress-container {\n            padding: 20px 24px 0;\n          }\n\n          .progress-steps {\n            flex-direction: column;\n            gap: 16px;\n            margin-bottom: 20px;\n          }\n\n          .progress-step {\n            flex-direction: row;\n            gap: 12px;\n          }\n\n          .step-info {\n            flex: 1;\n          }\n\n          .modal-content {\n            padding: 24px;\n          }\n\n          .form-row {\n            grid-template-columns: 1fr;\n            gap: 16px;\n          }\n\n          .file-input-group,\n          .input-with-action {\n            flex-direction: column;\n            gap: 8px;\n          }\n\n          .file-browse-btn,\n          .action-btn {\n            width: 100%;\n            justify-content: center;\n          }\n\n          .modal-actions {\n            padding: 20px 24px;\n            flex-direction: column;\n            gap: 12px;\n          }\n\n          .actions-left,\n          .actions-right {\n            width: 100%;\n          }\n\n          .btn {\n            width: 100%;\n            min-width: auto;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .modal-overlay {\n            padding: 12px;\n          }\n\n          .modal-header {\n            padding: 16px 20px;\n          }\n\n          .modal-title {\n            font-size: 18px;\n          }\n\n          .modal-subtitle {\n            font-size: 13px;\n          }\n\n          .progress-container {\n            padding: 16px 20px 0;\n          }\n\n          .modal-content {\n            padding: 20px;\n          }\n\n          .step-content {\n            gap: 20px;\n          }\n\n          .modal-actions {\n            padding: 16px 20px;\n          }\n        }\n\n        /* tats de focus amliors pour l'accessibilit */\n        .btn:focus-visible,\n        .form-input:focus-visible,\n        .form-textarea:focus-visible {\n          outline: 2px solid #3b82f6;\n          outline-offset: 2px;\n        }\n\n        .close-btn:focus-visible {\n          outline: 2px solid white;\n          outline-offset: 2px;\n        }\n\n        /* Animation d'entre du modal */\n        .modal-container {\n          animation: modalEnter 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n        }\n\n        @keyframes modalEnter {\n          from {\n            opacity: 0;\n            transform: scale(0.9) translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n\n        /* Amlioration des transitions entre les tapes */\n        .step-container {\n          position: relative;\n          overflow: hidden;\n        }\n\n        .step-content {\n          position: relative;\n          z-index: 1;\n        }\n\n        /* Style pour les suggestions d'autocompltion */\n        .form-input[list]::-webkit-list-button {\n          display: none;\n        }\n\n        /* Amlioration visuelle des tats d'erreur */\n        .form-input.error:focus {\n          border-color: #dc2626;\n          box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);\n        }\n\n        /* Style pour les placeholders */\n        .form-input::placeholder,\n        .form-textarea::placeholder {\n          color: #9ca3af;\n          opacity: 1;\n        }\n\n        /* Amlioration de la barre de progression */\n        .progress-fill {\n          background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #10b981 100%);\n          position: relative;\n          overflow: hidden;\n        }\n\n        .progress-fill::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n          animation: shimmer 2s infinite;\n        }\n\n        @keyframes shimmer {\n          0% {\n            left: -100%;\n          }\n          100% {\n            left: 100%;\n          }\n        }\n\n        /* Style pour les tooltips sur les boutons */\n        .action-btn[title]:hover::after {\n          content: attr(title);\n          position: absolute;\n          bottom: 100%;\n          left: 50%;\n          transform: translateX(-50%);\n          background: #1f2937;\n          color: white;\n          padding: 6px 10px;\n          border-radius: 6px;\n          font-size: 12px;\n          white-space: nowrap;\n          z-index: 100;\n          margin-bottom: 5px;\n        }\n\n        .action-btn {\n          position: relative;\n        }\n\n        /* Amlioration des focus states pour la navigation au clavier */\n        .progress-step:focus-within .step-indicator {\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n        }\n\n        /* Style pour les listes droulantes d'autocompltion */\n        datalist {\n          display: none;\n        }\n\n        /* Amlioration de l'espacement vertical */\n        .form-group + .form-group {\n          margin-top: 0;\n        }\n\n        /* Style pour les liens dans les messages d'aide */\n        .form-help a {\n          color: #3b82f6;\n          text-decoration: none;\n        }\n\n        .form-help a:hover {\n          text-decoration: underline;\n        }\n      `}</style>\n    </div>\n  );\n};","import React, { useEffect, useRef } from 'react';\r\n\r\ninterface AnimatedBackgroundProps {\r\n  variant?: 'books' | 'particles' | 'gradient';\r\n  intensity?: 'low' | 'medium' | 'high';\r\n}\r\n\r\nexport const AnimatedBackground: React.FC<AnimatedBackgroundProps> = ({ \r\n  variant = 'books', \r\n  intensity = 'medium' \r\n}) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n\r\n    // Floating books animation\r\n    if (variant === 'books') {\r\n      const books: Array<{\r\n        x: number;\r\n        y: number;\r\n        size: number;\r\n        speed: number;\r\n        opacity: number;\r\n        rotation: number;\r\n        rotationSpeed: number;\r\n      }> = [];\r\n\r\n      const bookCount = intensity === 'low' ? 8 : intensity === 'medium' ? 15 : 25;\r\n\r\n      // Initialize books\r\n      for (let i = 0; i < bookCount; i++) {\r\n        books.push({\r\n          x: Math.random() * canvas.width,\r\n          y: Math.random() * canvas.height,\r\n          size: Math.random() * 20 + 15,\r\n          speed: Math.random() * 0.5 + 0.2,\r\n          opacity: Math.random() * 0.3 + 0.1,\r\n          rotation: Math.random() * Math.PI * 2,\r\n          rotationSpeed: (Math.random() - 0.5) * 0.02\r\n        });\r\n      }\r\n\r\n      const animate = () => {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        books.forEach(book => {\r\n          ctx.save();\r\n          ctx.translate(book.x, book.y);\r\n          ctx.rotate(book.rotation);\r\n          ctx.globalAlpha = book.opacity;\r\n\r\n          // Draw book shape\r\n          const gradient = ctx.createLinearGradient(-book.size/2, -book.size/2, book.size/2, book.size/2);\r\n          gradient.addColorStop(0, '#3E5C49');\r\n          gradient.addColorStop(0.5, '#4A6A55');\r\n          gradient.addColorStop(1, '#2E453A');\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(-book.size/2, -book.size/1.5, book.size, book.size * 1.3);\r\n\r\n          // Book spine\r\n          ctx.fillStyle = '#2E453A';\r\n          ctx.fillRect(-book.size/2, -book.size/1.5, book.size * 0.1, book.size * 1.3);\r\n\r\n          // Book pages\r\n          ctx.fillStyle = 'rgba(243, 238, 217, 0.8)';\r\n          ctx.fillRect(-book.size/2 + book.size * 0.1, -book.size/1.5 + 2, book.size * 0.8, book.size * 1.2);\r\n\r\n          ctx.restore();\r\n\r\n          // Update position\r\n          book.y -= book.speed;\r\n          book.rotation += book.rotationSpeed;\r\n\r\n          if (book.y < -book.size) {\r\n            book.y = canvas.height + book.size;\r\n            book.x = Math.random() * canvas.width;\r\n          }\r\n        });\r\n\r\n        requestAnimationFrame(animate);\r\n      };\r\n\r\n      animate();\r\n    }\r\n\r\n    // Particle system\r\n    if (variant === 'particles') {\r\n      const particles: Array<{\r\n        x: number;\r\n        y: number;\r\n        vx: number;\r\n        vy: number;\r\n        size: number;\r\n        life: number;\r\n        maxLife: number;\r\n      }> = [];\r\n\r\n      const particleCount = intensity === 'low' ? 30 : intensity === 'medium' ? 60 : 100;\r\n\r\n      const addParticle = () => {\r\n        particles.push({\r\n          x: Math.random() * canvas.width,\r\n          y: canvas.height + 10,\r\n          vx: (Math.random() - 0.5) * 2,\r\n          vy: -Math.random() * 3 - 1,\r\n          size: Math.random() * 3 + 1,\r\n          life: 0,\r\n          maxLife: Math.random() * 200 + 100\r\n        });\r\n      };\r\n\r\n      // Initialize particles\r\n      for (let i = 0; i < particleCount; i++) {\r\n        addParticle();\r\n      }\r\n\r\n      const animate = () => {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        particles.forEach((particle, index) => {\r\n          particle.x += particle.vx;\r\n          particle.y += particle.vy;\r\n          particle.life++;\r\n\r\n          const alpha = 1 - (particle.life / particle.maxLife);\r\n          ctx.globalAlpha = alpha * 0.6;\r\n\r\n          const gradient = ctx.createRadialGradient(\r\n            particle.x, particle.y, 0,\r\n            particle.x, particle.y, particle.size\r\n          );\r\n          gradient.addColorStop(0, '#3E5C49');\r\n          gradient.addColorStop(1, 'transparent');\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.beginPath();\r\n          ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);\r\n          ctx.fill();\r\n\r\n          if (particle.life >= particle.maxLife || particle.y < -10) {\r\n            particles.splice(index, 1);\r\n            addParticle();\r\n          }\r\n        });\r\n\r\n        requestAnimationFrame(animate);\r\n      };\r\n\r\n      animate();\r\n    }\r\n\r\n    // Dynamic gradient\r\n    if (variant === 'gradient') {\r\n      let time = 0;\r\n\r\n      const animate = () => {\r\n        time += 0.005;\r\n\r\n        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);\r\n        \r\n        const hue1 = Math.sin(time) * 30 + 210; // Blue-green range\r\n        const hue2 = Math.sin(time + Math.PI/3) * 30 + 150; // Green range\r\n        const hue3 = Math.sin(time + Math.PI) * 30 + 45; // Yellow-orange range\r\n\r\n        gradient.addColorStop(0, `hsla(${hue1}, 40%, 25%, 0.1)`);\r\n        gradient.addColorStop(0.5, `hsla(${hue2}, 35%, 30%, 0.05)`);\r\n        gradient.addColorStop(1, `hsla(${hue3}, 45%, 35%, 0.1)`);\r\n\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        requestAnimationFrame(animate);\r\n      };\r\n\r\n      animate();\r\n    }\r\n\r\n    const handleResize = () => {\r\n      canvas.width = window.innerWidth;\r\n      canvas.height = window.innerHeight;\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, [variant, intensity]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        pointerEvents: 'none',\r\n        zIndex: -1,\r\n        opacity: 0.6\r\n      }}\r\n    />\r\n  );\r\n};","// src/renderer/components/AppPasswordScreen.tsx\r\nimport React, { useState } from 'react';\r\nimport { Lock, Eye, EyeOff, Shield, KeyRound, AlertCircle, X } from 'lucide-react';\r\n\r\ninterface AppPasswordScreenProps {\r\n  onUnlock: () => void;\r\n  onSkip?: () => void;\r\n  onClose?: () => void;\r\n  isSetup?: boolean;\r\n}\r\n\r\nexport const AppPasswordScreen: React.FC<AppPasswordScreenProps> = ({ \r\n  onUnlock, \r\n  onSkip, \r\n  onClose,\r\n  isSetup = false \r\n}) => {\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (isSetup) {\r\n        // Configuration d'un nouveau mot de passe\r\n        if (password.length < 4) {\r\n          throw new Error('Le mot de passe doit contenir au moins 4 caractres');\r\n        }\r\n        if (password !== confirmPassword) {\r\n          throw new Error('Les mots de passe ne correspondent pas');\r\n        }\r\n        \r\n        // Sauvegarder le mot de passe (via le service LocalAuthService)\r\n        const { LocalAuthService } = await import('../services/LocalAuthService');\r\n        LocalAuthService.setAppPassword(password);\r\n        onUnlock();\r\n      } else {\r\n        // Vrification du mot de passe existant\r\n        const { LocalAuthService } = await import('../services/LocalAuthService');\r\n        if (LocalAuthService.verifyAppPassword(password)) {\r\n          onUnlock();\r\n        } else {\r\n          throw new Error('Mot de passe incorrect');\r\n        }\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-password-screen\">\r\n      <div className=\"password-background\">\r\n        <div className=\"pattern-overlay\"></div>\r\n        <div className=\"floating-locks\">\r\n          <div className=\"floating-lock\"><Lock size={24} /></div>\r\n          <div className=\"floating-lock\"><Shield size={32} /></div>\r\n          <div className=\"floating-lock\"><KeyRound size={28} /></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"password-container\">\r\n        {onClose && (\r\n          <button className=\"close-app-btn\" onClick={onClose} title=\"Fermer l'application\">\r\n            <X size={20} />\r\n          </button>\r\n        )}\r\n        <div className=\"password-header\">\r\n          <div className=\"lock-icon\">\r\n            <Shield size={48} />\r\n          </div>\r\n          <h1>{isSetup ? 'Scuriser l\\'Application' : 'Application Verrouille'}</h1>\r\n          <p>\r\n            {isSetup \r\n              ? 'Dfinissez un mot de passe pour scuriser l\\'accs  l\\'application'\r\n              : 'Entrez le mot de passe pour dverrouiller l\\'application'\r\n            }\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"password-form\">\r\n          <div className=\"form-group\">\r\n            <label>{isSetup ? 'Nouveau mot de passe' : 'Mot de passe'}</label>\r\n            <div className=\"input-group\">\r\n              <Lock size={20} />\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder={isSetup ? 'Crez un mot de passe' : 'Entrez votre mot de passe'}\r\n                required\r\n                disabled={isLoading}\r\n                autoFocus\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                className=\"toggle-password\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n              >\r\n                {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {isSetup && (\r\n            <div className=\"form-group\">\r\n              <label>Confirmer le mot de passe</label>\r\n              <div className=\"input-group\">\r\n                <Lock size={20} />\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  placeholder=\"Confirmez votre mot de passe\"\r\n                  required\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <AlertCircle size={16} />\r\n              <span>{error}</span>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"password-actions\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"unlock-btn\"\r\n              disabled={!password || isLoading || (isSetup && !confirmPassword)}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <div className=\"spinner\"></div>\r\n                  <span>Traitement...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <KeyRound size={20} />\r\n                  <span>{isSetup ? 'Dfinir le mot de passe' : 'Dverrouiller'}</span>\r\n                </>\r\n              )}\r\n            </button>\r\n\r\n            {(isSetup || onSkip) && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"skip-btn\"\r\n                onClick={onSkip}\r\n                disabled={isLoading}\r\n              >\r\n                {isSetup ? 'Ignorer (non scuris)' : 'Rinitialiser'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {isSetup && (\r\n            <div className=\"security-notice\">\r\n              <div className=\"notice-icon\">\r\n                <Shield size={16} />\r\n              </div>\r\n              <div className=\"notice-content\">\r\n                <p><strong>Conseil de scurit :</strong></p>\r\n                <ul>\r\n                  <li>Utilisez un mot de passe unique</li>\r\n                  <li>Conservez-le en lieu sr</li>\r\n                  <li>Ne le partagez pas</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n\r\n      <style>{`\r\n        .app-password-screen {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #399b5dff 100%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 9999;\r\n        }\r\n\r\n        .password-background {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          opacity: 0.1;\r\n        }\r\n\r\n        .pattern-overlay {\r\n          width: 100%;\r\n          height: 100%;\r\n          background-image: \r\n            radial-gradient(circle at 25% 25%, white 2px, transparent 2px),\r\n            radial-gradient(circle at 75% 75%, white 2px, transparent 2px);\r\n          background-size: 60px 60px;\r\n          animation: patternMove 25s linear infinite;\r\n        }\r\n\r\n        .floating-locks {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n        }\r\n\r\n        .floating-lock {\r\n          position: absolute;\r\n          color: rgba(255, 255, 255, 0.15);\r\n          animation: float 8s ease-in-out infinite;\r\n        }\r\n\r\n        .floating-lock:nth-child(1) {\r\n          top: 15%;\r\n          left: 15%;\r\n          animation-delay: 0s;\r\n        }\r\n\r\n        .floating-lock:nth-child(2) {\r\n          top: 25%;\r\n          right: 15%;\r\n          animation-delay: 3s;\r\n        }\r\n\r\n        .floating-lock:nth-child(3) {\r\n          bottom: 25%;\r\n          left: 25%;\r\n          animation-delay: 6s;\r\n        }\r\n\r\n        .password-container {\r\n          background: white;\r\n          border-radius: 20px;\r\n          padding: 40px;\r\n          max-width: 450px;\r\n          width: 90%;\r\n          box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n\r\n        .close-app-btn {\r\n          position: absolute;\r\n          top: 16px;\r\n          right: 16px;\r\n          width: 40px;\r\n          height: 40px;\r\n          border: none;\r\n          background: rgba(0, 0, 0, 0.1);\r\n          color: #374151;\r\n          border-radius: 10px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.3s ease;\r\n          z-index: 10;\r\n        }\r\n\r\n        .close-app-btn:hover {\r\n          background: rgba(220, 38, 38, 0.1);\r\n          color: #DC2626;\r\n          transform: scale(1.05);\r\n        }\r\n\r\n        .password-header {\r\n          text-align: center;\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .lock-icon {\r\n          display: inline-flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 80px;\r\n          height: 80px;\r\n          background: linear-gradient(135deg, #3E5C49, #399b5dff);\r\n          border-radius: 20px;\r\n          color: white;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .password-header h1 {\r\n          font-size: 2rem;\r\n          font-weight: 800;\r\n          color: #1f2937;\r\n          margin: 0 0 12px 0;\r\n        }\r\n\r\n        .password-header p {\r\n          color: #374151;\r\n          margin: 0;\r\n          line-height: 1.5;\r\n        }\r\n\r\n        .password-form {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 20px;\r\n        }\r\n\r\n        .form-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n\r\n        .form-group label {\r\n          font-weight: 600;\r\n          color: #374151;\r\n          font-size: 0.9rem;\r\n        }\r\n\r\n        .input-group {\r\n          position: relative;\r\n          display: flex;\r\n          align-items: center;\r\n          border: 2px solid #e5e7eb;\r\n          border-radius: 12px;\r\n          padding: 0 16px;\r\n          transition: border-color 0.3s ease;\r\n        }\r\n\r\n        .input-group:focus-within {\r\n          border-color: #399b5dff;\r\n          box-shadow: 0 0 0 3px rgba(55, 48, 163, 0.1);\r\n        }\r\n\r\n        .input-group svg {\r\n          color: #9ca3af;\r\n          margin-right: 12px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .input-group input {\r\n          flex: 1;\r\n          border: none;\r\n          padding: 16px 0;\r\n          font-size: 1rem;\r\n          outline: none;\r\n          background: transparent;\r\n        }\r\n\r\n        .toggle-password {\r\n          background: none;\r\n          border: none;\r\n          color: #9ca3af;\r\n          cursor: pointer;\r\n          padding: 4px;\r\n          margin-left: 8px;\r\n          border-radius: 4px;\r\n          transition: color 0.3s ease;\r\n        }\r\n\r\n        .toggle-password:hover {\r\n          color: #6b7280;\r\n        }\r\n\r\n        .error-message {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          color: #dc2626;\r\n          background: #fef2f2;\r\n          padding: 12px 16px;\r\n          border-radius: 8px;\r\n          font-size: 0.9rem;\r\n          border: 1px solid #fecaca;\r\n        }\r\n\r\n        .password-actions {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-top: 8px;\r\n        }\r\n\r\n        .unlock-btn {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          gap: 10px;\r\n          background: linear-gradient(135deg, #3E5C49, #399b5dff);\r\n          color: white;\r\n          border: none;\r\n          padding: 16px 24px;\r\n          border-radius: 12px;\r\n          font-size: 1.1rem;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .unlock-btn:not(:disabled):hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 10px 30px rgba(30, 138, 100, 0.3);\r\n        }\r\n\r\n        .unlock-btn:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n          transform: none;\r\n        }\r\n\r\n        .skip-btn {\r\n          background: none;\r\n          border: 2px solid #e5e7eb;\r\n          color: #374151;\r\n          padding: 12px 24px;\r\n          border-radius: 12px;\r\n          font-size: 0.9rem;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .skip-btn:hover {\r\n          border-color: #d1d5db;\r\n          background: #f9fafb;\r\n        }\r\n\r\n        .security-notice {\r\n          background: #f0f9ff;\r\n          border: 1px solid #bae6fd;\r\n          border-radius: 12px;\r\n          padding: 16px;\r\n          margin-top: 8px;\r\n        }\r\n\r\n        .notice-icon {\r\n          color: #02c78fff;\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .notice-content p {\r\n          font-weight: 600;\r\n          color: #0c6e52ff;\r\n          margin: 0 0 8px 0;\r\n          font-size: 0.9rem;\r\n        }\r\n\r\n        .notice-content ul {\r\n          margin: 0;\r\n          padding-left: 20px;\r\n          color: #078561ff;\r\n          font-size: 0.85rem;\r\n        }\r\n\r\n        .notice-content li {\r\n          margin-bottom: 4px;\r\n        }\r\n\r\n        .spinner {\r\n          width: 16px;\r\n          height: 16px;\r\n          border: 2px solid transparent;\r\n          border-top: 2px solid currentColor;\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n        }\r\n\r\n        @keyframes patternMove {\r\n          0% { transform: translateX(0) translateY(0); }\r\n          100% { transform: translateX(60px) translateY(60px); }\r\n        }\r\n\r\n        @keyframes float {\r\n          0%, 100% { transform: translateY(0px); }\r\n          50% { transform: translateY(-30px); }\r\n        }\r\n\r\n        @keyframes spin {\r\n          to { transform: rotate(360deg); }\r\n        }\r\n\r\n        @media (max-width: 500px) {\r\n          .password-container {\r\n            padding: 24px;\r\n            width: 95%;\r\n          }\r\n\r\n          .password-header h1 {\r\n            font-size: 1.6rem;\r\n          }\r\n\r\n          .lock-icon {\r\n            width: 60px;\r\n            height: 60px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Settings, \r\n  X, \r\n  Save, \r\n  Wifi, \r\n  WifiOff, \r\n  Database, \r\n  Shield,\r\n  User,\r\n  Building,\r\n  Info,\r\n  RotateCcw,\r\n  Check,\r\n  Upload,\r\n  Globe\r\n} from 'lucide-react';\r\nimport { MicroButton, MicroCard } from './MicroInteractions';\r\nimport { useQuickToast } from './ToastSystem';\r\nimport { InstitutionSettings } from '../../preload';\r\n\r\ninterface AppSettingsProps {\r\n  onClose: () => void;\r\n}\r\n\r\ninterface AppConfig {\r\n  mode: 'offline' | 'online';\r\n  autoBackup: boolean;\r\n  backupFrequency: 'daily' | 'weekly' | 'monthly';\r\n  requireAppPassword: boolean;\r\n  sessionTimeout: number;\r\n  theme: 'light' | 'dark';\r\n}\r\n\r\nexport const AppSettings: React.FC<AppSettingsProps> = ({ onClose }) => {\r\n  const { success, error } = useQuickToast();\r\n  const [activeTab, setActiveTab] = useState<'general' | 'database' | 'security' | 'institution' | 'about'>('general');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [config, setConfig] = useState<AppConfig>({\r\n    mode: 'offline',\r\n    autoBackup: false,\r\n    backupFrequency: 'weekly',\r\n    requireAppPassword: false,\r\n    sessionTimeout: 30,\r\n    theme: 'light'\r\n  });\r\n  const [appPassword, setAppPassword] = useState<string>('');\r\n  const [showPasswordSection, setShowPasswordSection] = useState<boolean>(false);\r\n  const [institutionSettings, setInstitutionSettings] = useState<InstitutionSettings>({\r\n    name: 'Bibliothque Numrique',\r\n    address: '',\r\n    city: '',\r\n    country: '',\r\n    phone: '',\r\n    email: '',\r\n    website: '',\r\n    logo: '',\r\n    description: 'Systme de gestion de bibliothque moderne'\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    checkAdminStatus();\r\n    loadAppPasswordSettings();\r\n  }, []);\r\n\r\n  const loadConfig = () => {\r\n    // Charger la configuration depuis localStorage\r\n    const storedMode = localStorage.getItem('appMode') || 'offline';\r\n    const storedConfig = localStorage.getItem('appConfig');\r\n    \r\n    if (storedConfig) {\r\n      try {\r\n        const parsed = JSON.parse(storedConfig);\r\n        setConfig({ ...config, mode: storedMode as 'offline' | 'online', ...parsed });\r\n      } catch (e) {\r\n        console.warn('Could not parse stored config:', e);\r\n      }\r\n    } else {\r\n      setConfig(prev => ({ ...prev, mode: storedMode as 'offline' | 'online' }));\r\n    }\r\n\r\n    // Charger les paramtres d'institution\r\n    const storedInstitution = localStorage.getItem('institutionSettings');\r\n    if (storedInstitution) {\r\n      try {\r\n        const parsed = JSON.parse(storedInstitution);\r\n        setInstitutionSettings(prev => ({ ...prev, ...parsed }));\r\n      } catch (e) {\r\n        console.warn('Could not parse institution settings:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const loadAppPasswordSettings = () => {\r\n    try {\r\n      const appSettings = localStorage.getItem('app_settings');\r\n      if (appSettings) {\r\n        const parsed = JSON.parse(appSettings);\r\n        setConfig(prev => ({ \r\n          ...prev, \r\n          requireAppPassword: parsed.requireAppPassword || false \r\n        }));\r\n        setShowPasswordSection(parsed.requireAppPassword || false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des paramtres de mot de passe:', error);\r\n    }\r\n  };\r\n\r\n  const checkAdminStatus = () => {\r\n    // Vrifier si l'utilisateur connect est un admin\r\n    const currentUser = localStorage.getItem('currentUser');\r\n    const appMode = localStorage.getItem('appMode');\r\n    \r\n    // En mode offline, permettre l'accs admin par dfaut si aucun utilisateur spcifique n'est dfini\r\n    if (appMode === 'offline') {\r\n      if (currentUser) {\r\n        try {\r\n          const user = JSON.parse(currentUser);\r\n          setIsAdmin(user.role === 'admin' || user.isAdmin === true);\r\n        } catch (e) {\r\n          console.warn('Could not parse current user:', e);\r\n          // En mode offline, donner accs admin par dfaut\r\n          setIsAdmin(true);\r\n        }\r\n      } else {\r\n        // Pas d'utilisateur dfini en mode offline, donner accs admin\r\n        setIsAdmin(true);\r\n      }\r\n    } else {\r\n      // Mode online, vrification stricte\r\n      if (currentUser) {\r\n        try {\r\n          const user = JSON.parse(currentUser);\r\n          setIsAdmin(user.role === 'admin' || user.isAdmin === true);\r\n        } catch (e) {\r\n          console.warn('Could not parse current user:', e);\r\n          setIsAdmin(false);\r\n        }\r\n      } else {\r\n        setIsAdmin(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveConfig = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Sauvegarder la configuration\r\n      localStorage.setItem('appMode', config.mode);\r\n      localStorage.setItem('appConfig', JSON.stringify({\r\n        autoBackup: config.autoBackup,\r\n        backupFrequency: config.backupFrequency,\r\n        requireAppPassword: config.requireAppPassword,\r\n        sessionTimeout: config.sessionTimeout,\r\n        theme: config.theme\r\n      }));\r\n\r\n      // Sauvegarder les paramtres de mot de passe d'application via LocalAuthService\r\n      if (config.requireAppPassword && appPassword.trim()) {\r\n        const appSettings = JSON.parse(localStorage.getItem('app_settings') || '{}');\r\n        appSettings.requireAppPassword = true;\r\n        appSettings.appPassword = appPassword; // En production, il faudrait hasher\r\n        localStorage.setItem('app_settings', JSON.stringify(appSettings));\r\n      } else if (!config.requireAppPassword) {\r\n        const appSettings = JSON.parse(localStorage.getItem('app_settings') || '{}');\r\n        appSettings.requireAppPassword = false;\r\n        delete appSettings.appPassword;\r\n        localStorage.setItem('app_settings', JSON.stringify(appSettings));\r\n      }\r\n\r\n      // Sauvegarder les paramtres d'institution si admin\r\n      if (isAdmin) {\r\n        localStorage.setItem('institutionSettings', JSON.stringify(institutionSettings));\r\n      }\r\n\r\n      success('Configuration sauvegarde', 'Les paramtres ont t enregistrs avec succs');\r\n      \r\n      // Redmarrer l'application si le mode a chang\r\n      if (config.mode !== localStorage.getItem('appMode')) {\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    } catch (err) {\r\n      error('Erreur de sauvegarde', 'Impossible de sauvegarder la configuration');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetToDefaults = () => {\r\n    if (window.confirm('tes-vous sr de vouloir rinitialiser tous les paramtres ?')) {\r\n      setConfig({\r\n        mode: 'offline',\r\n        autoBackup: false,\r\n        backupFrequency: 'weekly',\r\n        requireAppPassword: false,\r\n        sessionTimeout: 30,\r\n        theme: 'light'\r\n      });\r\n    }\r\n  };\r\n\r\n  const resetDatabase = async () => {\r\n    if (window.confirm(' Rinitialiser la base de donnes ?\\n\\nCela va corriger les problmes de schma mais supprimera toutes les donnes.')) {\r\n      try {\r\n        // Supprimer toutes les donnes\r\n        await window.electronAPI?.clearAllData();\r\n        \r\n        success('Base de donnes rinitialise', 'Le schma de la base de donnes a t corrig. L\\'application va redmarrer.');\r\n        \r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      } catch (err) {\r\n        error('Erreur', 'Impossible de rinitialiser la base de donnes');\r\n        console.error('Erreur de rinitialisation:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const clearAllData = async () => {\r\n    if (window.confirm(' ATTENTION: Cette action supprimera TOUTES les donnes de l\\'application. tes-vous absolument sr ?')) {\r\n      if (window.confirm('Cette action est IRRVERSIBLE. Tapez \"CONFIRMER\" dans la prochaine bote pour continuer.')) {\r\n        const confirmation = window.prompt('Tapez \"CONFIRMER\" pour supprimer toutes les donnes:');\r\n        if (confirmation === 'CONFIRMER') {\r\n          try {\r\n            // Nettoyer la base de donnes\r\n            await window.electronAPI?.clearAllData();\r\n            \r\n            // Nettoyer le localStorage\r\n            localStorage.clear();\r\n            \r\n            success('Donnes supprimes', 'Toutes les donnes ont t supprimes. L\\'application va redmarrer.');\r\n            \r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 2000);\r\n          } catch (err) {\r\n            error('Erreur', 'Impossible de supprimer les donnes');\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field: keyof AppConfig, value: any) => {\r\n    setConfig(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleInstitutionChange = (field: keyof InstitutionSettings, value: string) => {\r\n    setInstitutionSettings(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleLogoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const result = e.target?.result as string;\r\n        setInstitutionSettings(prev => ({ ...prev, logo: result }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'general' as const, label: 'Gnral', icon: Settings },\r\n    { id: 'database' as const, label: 'Base de donnes', icon: Database },\r\n    { id: 'security' as const, label: 'Scurit', icon: Shield },\r\n    ...(isAdmin ? [{ id: 'institution' as const, label: 'Institution', icon: Building }] : []),\r\n    { id: 'about' as const, label: ' propos', icon: Info }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"settings-overlay\">\r\n      <div className=\"settings-modal\">\r\n        {/* Header */}\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <Settings size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">Paramtres de l'application</h2>\r\n              <p className=\"modal-subtitle\">Configurez votre bibliothque numrique</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"settings-content\">\r\n          {/* Tabs */}\r\n          <div className=\"tabs-container\">\r\n            {tabs.map(tab => (\r\n              <button\r\n                key={tab.id}\r\n                className={`tab-button ${activeTab === tab.id ? 'active' : ''}`}\r\n                onClick={() => setActiveTab(tab.id)}\r\n              >\r\n                <tab.icon size={18} />\r\n                {tab.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Tab Content */}\r\n          <div className=\"tab-content\">\r\n            {activeTab === 'general' && (\r\n              <div className=\"tab-panel\">\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Mode de fonctionnement</h3>\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Mode de l'application</label>\r\n                      <p className=\"setting-description\">\r\n                        Choisissez entre le mode hors ligne (SQLite local) ou en ligne (Supabase)\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <select\r\n                        value={config.mode}\r\n                        onChange={(e) => handleInputChange('mode', e.target.value)}\r\n                        className=\"setting-select\"\r\n                      >\r\n                        <option value=\"offline\"> Hors ligne (SQLite)</option>\r\n                        <option value=\"online\"> En ligne (Supabase)</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Thme</h3>\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Apparence</label>\r\n                      <p className=\"setting-description\">Choisissez le thme de l'interface</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <select\r\n                        value={config.theme}\r\n                        onChange={(e) => handleInputChange('theme', e.target.value)}\r\n                        className=\"setting-select\"\r\n                      >\r\n                        <option value=\"light\"> Clair</option>\r\n                        <option value=\"dark\"> Sombre</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'database' && (\r\n              <div className=\"tab-panel\">\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Sauvegarde automatique</h3>\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Activer la sauvegarde automatique</label>\r\n                      <p className=\"setting-description\">\r\n                        Sauvegarder automatiquement la base de donnes\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <label className=\"toggle\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={config.autoBackup}\r\n                          onChange={(e) => handleInputChange('autoBackup', e.target.checked)}\r\n                        />\r\n                        <span className=\"slider\"></span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {config.autoBackup && (\r\n                    <div className=\"setting-item\">\r\n                      <div className=\"setting-info\">\r\n                        <label className=\"setting-label\">Frquence de sauvegarde</label>\r\n                        <p className=\"setting-description\"> quelle frquence sauvegarder</p>\r\n                      </div>\r\n                      <div className=\"setting-control\">\r\n                        <select\r\n                          value={config.backupFrequency}\r\n                          onChange={(e) => handleInputChange('backupFrequency', e.target.value)}\r\n                          className=\"setting-select\"\r\n                        >\r\n                          <option value=\"daily\">Quotidienne</option>\r\n                          <option value=\"weekly\">Hebdomadaire</option>\r\n                          <option value=\"monthly\">Mensuelle</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"setting-group danger\">\r\n                  <h3 className=\"group-title\">Zone de danger</h3>\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Rinitialiser la base de donnes</label>\r\n                      <p className=\"setting-description\">\r\n                         Corrige les problmes de schma de base de donnes en recrant les tables\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <button\r\n                        className=\"btn-warning\"\r\n                        onClick={resetDatabase}\r\n                      >\r\n                        Rinitialiser DB\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Supprimer toutes les donnes</label>\r\n                      <p className=\"setting-description\">\r\n                         Supprime dfinitivement tous les documents, emprunteurs et historiques\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <button\r\n                        className=\"btn-danger\"\r\n                        onClick={clearAllData}\r\n                      >\r\n                        Supprimer tout\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'security' && (\r\n              <div className=\"tab-panel\">\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Mot de passe d'application</h3>\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Exiger un mot de passe au dmarrage</label>\r\n                      <p className=\"setting-description\">\r\n                        Protgez l'accs  l'application avec un mot de passe\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <label className=\"toggle\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={config.requireAppPassword}\r\n                          onChange={(e) => {\r\n                            handleInputChange('requireAppPassword', e.target.checked);\r\n                            setShowPasswordSection(e.target.checked);\r\n                          }}\r\n                        />\r\n                        <span className=\"slider\"></span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {showPasswordSection && (\r\n                    <div className=\"setting-item\">\r\n                      <div className=\"setting-info\">\r\n                        <label className=\"setting-label\">Mot de passe de l'application</label>\r\n                        <p className=\"setting-description\">\r\n                          Dfinissez le mot de passe requis au dmarrage de l'application\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"setting-control\">\r\n                        <input\r\n                          type=\"password\"\r\n                          value={appPassword}\r\n                          onChange={(e) => setAppPassword(e.target.value)}\r\n                          className=\"setting-input password-input\"\r\n                          placeholder=\"Mot de passe\"\r\n                          required={config.requireAppPassword}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Dlai d'expiration de session (minutes)</label>\r\n                      <p className=\"setting-description\">\r\n                        Dure avant verrouillage automatique de l'application\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"5\"\r\n                        max=\"120\"\r\n                        value={config.sessionTimeout}\r\n                        onChange={(e) => handleInputChange('sessionTimeout', parseInt(e.target.value))}\r\n                        className=\"setting-input\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'institution' && isAdmin && (\r\n              <div className=\"tab-panel\">\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Informations gnrales</h3>\r\n                  \r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Logo de l'institution</label>\r\n                      <p className=\"setting-description\">\r\n                        Logo qui apparatra sur les rapports et documents officiels\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <div className=\"logo-upload-container\">\r\n                        {institutionSettings.logo && (\r\n                          <div className=\"logo-preview\">\r\n                            <img src={institutionSettings.logo} alt=\"Logo\" />\r\n                          </div>\r\n                        )}\r\n                        <div className=\"upload-actions\">\r\n                          <input\r\n                            type=\"file\"\r\n                            id=\"logo-upload\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleLogoUpload}\r\n                            style={{ display: 'none' }}\r\n                          />\r\n                          <label htmlFor=\"logo-upload\" className=\"upload-button\">\r\n                            <Upload size={16} />\r\n                            {institutionSettings.logo ? 'Changer' : 'Ajouter'}\r\n                          </label>\r\n                          {institutionSettings.logo && (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => setInstitutionSettings(prev => ({ ...prev, logo: '' }))}\r\n                              className=\"remove-button\"\r\n                            >\r\n                              Supprimer\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Nom de l'institution</label>\r\n                      <p className=\"setting-description\">Nom officiel de votre tablissement</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={institutionSettings.name}\r\n                        onChange={(e) => handleInstitutionChange('name', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Nom de l'institution\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Description</label>\r\n                      <p className=\"setting-description\">Brve description de l'institution</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <textarea\r\n                        value={institutionSettings.description}\r\n                        onChange={(e) => handleInstitutionChange('description', e.target.value)}\r\n                        className=\"setting-textarea\"\r\n                        placeholder=\"Description de l'institution\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"setting-group\">\r\n                  <h3 className=\"group-title\">Coordonnes</h3>\r\n                  \r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Adresse</label>\r\n                      <p className=\"setting-description\">Adresse postale complte</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={institutionSettings.address}\r\n                        onChange={(e) => handleInstitutionChange('address', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Adresse\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Ville</label>\r\n                      <p className=\"setting-description\">Ville et code postal</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={institutionSettings.city}\r\n                        onChange={(e) => handleInstitutionChange('city', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Ville\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Pays</label>\r\n                      <p className=\"setting-description\">Pays de l'institution</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={institutionSettings.country}\r\n                        onChange={(e) => handleInstitutionChange('country', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Pays\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Tlphone</label>\r\n                      <p className=\"setting-description\">Numro de tlphone principal</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={institutionSettings.phone}\r\n                        onChange={(e) => handleInstitutionChange('phone', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Tlphone\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Email</label>\r\n                      <p className=\"setting-description\">Adresse email officielle</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"email\"\r\n                        value={institutionSettings.email}\r\n                        onChange={(e) => handleInstitutionChange('email', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"Email\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-item\">\r\n                    <div className=\"setting-info\">\r\n                      <label className=\"setting-label\">Site web</label>\r\n                      <p className=\"setting-description\">URL du site web institutionnel</p>\r\n                    </div>\r\n                    <div className=\"setting-control\">\r\n                      <input\r\n                        type=\"url\"\r\n                        value={institutionSettings.website}\r\n                        onChange={(e) => handleInstitutionChange('website', e.target.value)}\r\n                        className=\"setting-input\"\r\n                        placeholder=\"https://www.example.com\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'about' && (\r\n              <div className=\"tab-panel\">\r\n                <div className=\"about-content\">\r\n                  <div className=\"app-info\">\r\n                    <div className=\"app-icon\">\r\n                      <Building size={48} />\r\n                    </div>\r\n                    <h3>Bibliothque Numrique</h3>\r\n                    <p className=\"version\">Version 1.0.0</p>\r\n                    <p className=\"description\">\r\n                      Systme de gestion de bibliothque moderne pour tablissements scolaires\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"info-grid\">\r\n                    <div className=\"info-item\">\r\n                      <strong>Mode actuel:</strong>\r\n                      <span className={`mode-badge ${config.mode}`}>\r\n                        {config.mode === 'offline' ? (\r\n                          <>\r\n                            <WifiOff size={14} />\r\n                            Hors ligne\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Wifi size={14} />\r\n                            En ligne\r\n                          </>\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"info-item\">\r\n                      <strong>Base de donnes:</strong>\r\n                      <span>{config.mode === 'offline' ? 'SQLite locale' : 'Supabase cloud'}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"modal-actions\">\r\n          <MicroButton\r\n            variant=\"secondary\"\r\n            onClick={resetToDefaults}\r\n            icon={RotateCcw}\r\n          >\r\n            Rinitialiser\r\n          </MicroButton>\r\n          <MicroButton\r\n            variant=\"success\"\r\n            onClick={saveConfig}\r\n            disabled={isLoading}\r\n            icon={Save}\r\n          >\r\n            {isLoading ? 'Sauvegarde...' : 'Sauvegarder'}\r\n          </MicroButton>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .settings-overlay {\r\n          position: fixed;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          backdrop-filter: blur(8px);\r\n        }\r\n\r\n        .settings-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 800px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .modal-header {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          padding: 32px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          position: relative;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n\r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .modal-subtitle {\r\n          font-size: 14px;\r\n          opacity: 0.8;\r\n          margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n          width: 44px;\r\n          height: 44px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          position: absolute;\r\n          top: 32px;\r\n          right: 32px;\r\n          z-index: 1001;\r\n        }\r\n\r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n\r\n        .settings-content {\r\n          flex: 1;\r\n          display: flex;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .tabs-container {\r\n          width: 200px;\r\n          background: #F3EED9;\r\n          border-right: 1px solid #E5DCC2;\r\n          padding: 24px 0;\r\n        }\r\n\r\n        .tab-button {\r\n          width: 100%;\r\n          padding: 16px 24px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #4A4A4A;\r\n          text-align: left;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .tab-button:hover {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .tab-button.active {\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .tab-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 32px;\r\n        }\r\n\r\n        .tab-panel {\r\n          max-width: 600px;\r\n        }\r\n\r\n        .setting-group {\r\n          margin-bottom: 32px;\r\n          padding: 24px;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border-radius: 12px;\r\n          border: 1px solid rgba(243, 238, 217, 0.3);\r\n        }\r\n\r\n        .setting-group.danger {\r\n          background: rgba(220, 38, 38, 0.05);\r\n          border-color: rgba(220, 38, 38, 0.2);\r\n        }\r\n\r\n        .group-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 20px 0;\r\n        }\r\n\r\n        .setting-item {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          justify-content: space-between;\r\n          gap: 24px;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .setting-item:last-child {\r\n          margin-bottom: 0;\r\n        }\r\n\r\n        .setting-info {\r\n          flex: 1;\r\n        }\r\n\r\n        .setting-label {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n          display: block;\r\n        }\r\n\r\n        .setting-description {\r\n          font-size: 12px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          line-height: 1.4;\r\n        }\r\n\r\n        .setting-control {\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .setting-select, .setting-input {\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          padding: 8px 12px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          font-size: 14px;\r\n        }\r\n\r\n        .setting-input {\r\n          width: 80px;\r\n          text-align: center;\r\n        }\r\n\r\n        .password-input {\r\n          width: 200px;\r\n          text-align: left;\r\n        }\r\n\r\n        .setting-textarea {\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          padding: 8px 12px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          font-size: 14px;\r\n          width: 200px;\r\n          min-height: 60px;\r\n          resize: vertical;\r\n          font-family: inherit;\r\n        }\r\n\r\n        .logo-upload-container {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          align-items: flex-start;\r\n        }\r\n\r\n        .logo-preview {\r\n          width: 80px;\r\n          height: 80px;\r\n          border-radius: 12px;\r\n          overflow: hidden;\r\n          border: 2px solid #E5DCC2;\r\n          background: #F3EED9;\r\n        }\r\n\r\n        .logo-preview img {\r\n          width: 100%;\r\n          height: 100%;\r\n          object-fit: cover;\r\n        }\r\n\r\n        .upload-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n        }\r\n\r\n        .upload-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          padding: 8px 12px;\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          border: none;\r\n          border-radius: 6px;\r\n          font-size: 12px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .upload-button:hover {\r\n          background: #2E453A;\r\n        }\r\n\r\n        .remove-button {\r\n          padding: 8px 12px;\r\n          background: #DC2626;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          font-size: 12px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .remove-button:hover {\r\n          background: #B91C1C;\r\n        }\r\n\r\n        .toggle {\r\n          position: relative;\r\n          display: inline-block;\r\n          width: 50px;\r\n          height: 24px;\r\n        }\r\n\r\n        .toggle input {\r\n          opacity: 0;\r\n          width: 0;\r\n          height: 0;\r\n        }\r\n\r\n        .slider {\r\n          position: absolute;\r\n          cursor: pointer;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background-color: #ccc;\r\n          transition: 0.4s;\r\n          border-radius: 24px;\r\n        }\r\n\r\n        .slider:before {\r\n          position: absolute;\r\n          content: \"\";\r\n          height: 18px;\r\n          width: 18px;\r\n          left: 3px;\r\n          bottom: 3px;\r\n          background-color: white;\r\n          transition: 0.4s;\r\n          border-radius: 50%;\r\n        }\r\n\r\n        input:checked + .slider {\r\n          background-color: #3E5C49;\r\n        }\r\n\r\n        input:checked + .slider:before {\r\n          transform: translateX(26px);\r\n        }\r\n\r\n        .btn-warning {\r\n          background: #F59E0B;\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .btn-warning:hover {\r\n          background: #D97706;\r\n        }\r\n\r\n        .btn-danger {\r\n          background: #DC2626;\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .btn-danger:hover {\r\n          background: #B91C1C;\r\n        }\r\n\r\n        .about-content {\r\n          text-align: center;\r\n        }\r\n\r\n        .app-info {\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .app-icon {\r\n          width: 80px;\r\n          height: 80px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-radius: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          margin: 0 auto 16px;\r\n        }\r\n\r\n        .app-info h3 {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 8px 0;\r\n        }\r\n\r\n        .version {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0 0 16px 0;\r\n        }\r\n\r\n        .description {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          line-height: 1.5;\r\n        }\r\n\r\n        .info-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 16px;\r\n          text-align: left;\r\n        }\r\n\r\n        .info-item {\r\n          background: rgba(243, 238, 217, 0.1);\r\n          padding: 16px;\r\n          border-radius: 8px;\r\n        }\r\n\r\n        .info-item strong {\r\n          display: block;\r\n          font-size: 12px;\r\n          color: #4A4A4A;\r\n          margin-bottom: 4px;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n        }\r\n\r\n        .mode-badge {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .mode-badge.offline {\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .mode-badge.online {\r\n          color: #2563EB;\r\n        }\r\n\r\n        .modal-actions {\r\n          padding: 24px 32px;\r\n          border-top: 1px solid #E5DCC2;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .settings-modal {\r\n            margin: 12px;\r\n          }\r\n\r\n          .settings-content {\r\n            flex-direction: column;\r\n          }\r\n\r\n          .tabs-container {\r\n            width: 100%;\r\n            display: flex;\r\n            overflow-x: auto;\r\n            padding: 16px 24px;\r\n          }\r\n\r\n          .tab-button {\r\n            white-space: nowrap;\r\n            padding: 12px 16px;\r\n          }\r\n\r\n          .setting-item {\r\n            flex-direction: column;\r\n            align-items: stretch;\r\n            gap: 12px;\r\n          }\r\n\r\n          .info-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Download,\r\n  Upload,\r\n  Database,\r\n  HardDrive,\r\n  RotateCcw,\r\n  Trash2,\r\n  CheckCircle,\r\n  AlertTriangle,\r\n  Clock,\r\n  FileText,\r\n  Folder,\r\n  X,\r\n  Plus,\r\n  RefreshCw,\r\n  Settings,\r\n  Shield,\r\n  Calendar,\r\n  Info\r\n} from 'lucide-react';\r\nimport { MicroButton, MicroCard } from './MicroInteractions';\r\nimport { useQuickToast } from './ToastSystem';\r\n\r\ninterface BackupInfo {\r\n  filePath: string;\r\n  fileName: string;\r\n  size: number;\r\n  createdAt: string;\r\n  metadata: {\r\n    version: string;\r\n    timestamp: string;\r\n    appVersion: string;\r\n    platform: string;\r\n    stats: {\r\n      totalDocuments: number;\r\n      totalBorrowers: number;\r\n      totalAuthors: number;\r\n      totalCategories: number;\r\n      totalBorrowHistory: number;\r\n    };\r\n    checksum: string;\r\n  };\r\n}\r\n\r\ninterface BackupStats {\r\n  totalBackups: number;\r\n  totalSize: number;\r\n  formattedSize: string;\r\n  oldestBackup: BackupInfo | null;\r\n  newestBackup: BackupInfo | null;\r\n}\r\n\r\ninterface BackupManagerProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const BackupManager: React.FC<BackupManagerProps> = ({ onClose }) => {\r\n  const { success, error, info, warning } = useQuickToast();\r\n  const [backups, setBackups] = useState<BackupInfo[]>([]);\r\n  const [stats, setStats] = useState<BackupStats | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedBackup, setSelectedBackup] = useState<BackupInfo | null>(null);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [createBackupName, setCreateBackupName] = useState('');\r\n  const [createBackupDescription, setCreateBackupDescription] = useState('');\r\n\r\n  // Charger les donnes initiales\r\n  useEffect(() => {\r\n    loadBackupData();\r\n  }, []);\r\n\r\n  const loadBackupData = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const [backupResult, statsResult] = await Promise.all([\r\n        window.electronAPI.getBackupList(),\r\n        window.electronAPI.getBackupStats()\r\n      ]);\r\n\r\n      if (backupResult.success) {\r\n        setBackups(backupResult.backups);\r\n      } else {\r\n        error('Erreur', 'Impossible de charger la liste des sauvegardes');\r\n      }\r\n\r\n      if (statsResult.success) {\r\n        setStats(statsResult.stats);\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors du chargement des donnes de sauvegarde');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateBackup = async () => {\r\n    if (!createBackupName.trim()) {\r\n      warning('Attention', 'Veuillez saisir un nom pour la sauvegarde');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.createBackup(\r\n        createBackupName.trim(),\r\n        createBackupDescription.trim() || undefined\r\n      );\r\n\r\n      if (result.success) {\r\n        success('Succs', 'Sauvegarde cre avec succs');\r\n        setShowCreateModal(false);\r\n        setCreateBackupName('');\r\n        setCreateBackupDescription('');\r\n        await loadBackupData();\r\n      } else {\r\n        error('Erreur', result.error || 'chec de la cration de la sauvegarde');\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de la cration de la sauvegarde');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRestoreBackup = async (backup: BackupInfo) => {\r\n    const confirmRestore = window.confirm(\r\n      `tes-vous sr de vouloir restaurer la sauvegarde \"${backup.fileName}\" ?\\n\\n` +\r\n      `Cette action remplacera toutes les donnes actuelles de l'application.\\n` +\r\n      `Une sauvegarde automatique sera cre avant la restauration.`\r\n    );\r\n\r\n    if (!confirmRestore) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.restoreBackup(backup.filePath);\r\n      \r\n      if (result.success) {\r\n        success('Succs', 'Sauvegarde restaure avec succs. L\\'application va se recharger.');\r\n        // Recharger l'application pour reflter les changements\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      } else {\r\n        error('Erreur', result.error || 'chec de la restauration');\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de la restauration de la sauvegarde');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBackup = async (backup: BackupInfo) => {\r\n    const confirmDelete = window.confirm(\r\n      `tes-vous sr de vouloir supprimer la sauvegarde \"${backup.fileName}\" ?\\n\\n` +\r\n      `Cette action est irrversible.`\r\n    );\r\n\r\n    if (!confirmDelete) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.deleteBackup(backup.filePath);\r\n      \r\n      if (result.success) {\r\n        success('Succs', 'Sauvegarde supprime avec succs');\r\n        await loadBackupData();\r\n      } else {\r\n        error('Erreur', result.error || 'chec de la suppression');\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de la suppression de la sauvegarde');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRestoreFromFile = async () => {\r\n    try {\r\n      const fileResult = await window.electronAPI.selectBackupFile();\r\n      \r\n      if (!fileResult.success || !fileResult.filePath) {\r\n        if (fileResult.error !== 'Slection annule') {\r\n          error('Erreur', fileResult.error || 'Impossible de slectionner le fichier');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Valider le fichier de sauvegarde\r\n      const validationResult = await window.electronAPI.validateBackup(fileResult.filePath);\r\n      \r\n      if (!validationResult.success || !validationResult.isValid) {\r\n        error('Erreur', 'Le fichier slectionn n\\'est pas une sauvegarde valide');\r\n        return;\r\n      }\r\n\r\n      // Confirmer la restauration\r\n      const confirmRestore = window.confirm(\r\n        `tes-vous sr de vouloir restaurer cette sauvegarde ?\\n\\n` +\r\n        `Cette action remplacera toutes les donnes actuelles de l'application.\\n` +\r\n        `Une sauvegarde automatique sera cre avant la restauration.`\r\n      );\r\n\r\n      if (!confirmRestore) return;\r\n\r\n      setIsLoading(true);\r\n      const result = await window.electronAPI.restoreBackup(fileResult.filePath);\r\n      \r\n      if (result.success) {\r\n        success('Succs', 'Sauvegarde restaure avec succs. L\\'application va se recharger.');\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      } else {\r\n        error('Erreur', result.error || 'chec de la restauration');\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de la restauration depuis fichier');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleExportDatabase = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.exportDatabase();\r\n      \r\n      if (result.success) {\r\n        success('Succs', `Base de donnes exporte vers: ${result.path}`);\r\n      } else {\r\n        if (result.error !== 'Export annul') {\r\n          error('Erreur', result.error || 'chec de l\\'export');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de l\\'export de la base de donnes');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleImportDatabase = async () => {\r\n    const confirmImport = window.confirm(\r\n      'tes-vous sr de vouloir importer une base de donnes ?\\n\\n' +\r\n      'Cette action remplacera la base de donnes actuelle.\\n' +\r\n      'Une sauvegarde automatique sera cre avant l\\'import.'\r\n    );\r\n\r\n    if (!confirmImport) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.importDatabase();\r\n      \r\n      if (result.success) {\r\n        success('Succs', 'Base de donnes importe avec succs. L\\'application va se recharger.');\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 2000);\r\n      } else {\r\n        if (result.error !== 'Import annul') {\r\n          error('Erreur', result.error || 'chec de l\\'import');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors de l\\'import de la base de donnes');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCleanOldBackups = async () => {\r\n    const keepCount = window.prompt('Combien de sauvegardes rcentes souhaitez-vous conserver ?', '10');\r\n    \r\n    if (!keepCount || isNaN(parseInt(keepCount))) return;\r\n\r\n    const count = parseInt(keepCount);\r\n    if (count < 1) {\r\n      warning('Attention', 'Le nombre doit tre suprieur  0');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await window.electronAPI.cleanOldBackups(count);\r\n      \r\n      if (result.success) {\r\n        success('Succs', `${result.deletedCount} anciennes sauvegardes supprimes`);\r\n        await loadBackupData();\r\n      } else {\r\n        error('Erreur', result.error || 'chec du nettoyage');\r\n      }\r\n    } catch (err) {\r\n      error('Erreur', 'Erreur lors du nettoyage des sauvegardes');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    const units = ['B', 'KB', 'MB', 'GB'];\r\n    let size = bytes;\r\n    let unitIndex = 0;\r\n    \r\n    while (size >= 1024 && unitIndex < units.length - 1) {\r\n      size /= 1024;\r\n      unitIndex++;\r\n    }\r\n    \r\n    return `${size.toFixed(1)} ${units[unitIndex]}`;\r\n  };\r\n\r\n  const formatDate = (dateString: string): string => {\r\n    return new Date(dateString).toLocaleString('fr-FR', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"backup-manager-overlay\">\r\n      <div className=\"backup-manager-modal\">\r\n        {/* Header */}\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <HardDrive size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">Gestionnaire de Sauvegardes</h2>\r\n              <p className=\"modal-subtitle\">Crez et grez vos sauvegardes de donnes</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          {/* Statistics Section */}\r\n          {stats && (\r\n            <div className=\"stats-section\">\r\n              <div className=\"stats-grid\">\r\n                <div className=\"stat-card\">\r\n                  <div className=\"stat-icon\">\r\n                    <Database size={20} />\r\n                  </div>\r\n                  <div className=\"stat-content\">\r\n                    <div className=\"stat-value\">{stats.totalBackups}</div>\r\n                    <div className=\"stat-label\">Sauvegardes</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                  <div className=\"stat-icon\">\r\n                    <HardDrive size={20} />\r\n                  </div>\r\n                  <div className=\"stat-content\">\r\n                    <div className=\"stat-value\">{stats.formattedSize}</div>\r\n                    <div className=\"stat-label\">Espace utilis</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                  <div className=\"stat-icon\">\r\n                    <Calendar size={20} />\r\n                  </div>\r\n                  <div className=\"stat-content\">\r\n                    <div className=\"stat-value\">\r\n                      {stats.newestBackup ? formatDate(stats.newestBackup.createdAt).split(' ')[0] : 'N/A'}\r\n                    </div>\r\n                    <div className=\"stat-label\">Dernire sauvegarde</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"actions-section\">\r\n            <div className=\"actions-grid\">\r\n              <MicroButton\r\n                variant=\"success\"\r\n                icon={Plus}\r\n                onClick={() => setShowCreateModal(true)}\r\n                disabled={isLoading}\r\n              >\r\n                Nouvelle Sauvegarde\r\n              </MicroButton>\r\n              \r\n              <MicroButton\r\n                variant=\"secondary\"\r\n                icon={Upload}\r\n                onClick={handleRestoreFromFile}\r\n                disabled={isLoading}\r\n              >\r\n                Restaurer depuis Fichier\r\n              </MicroButton>\r\n              \r\n              <MicroButton\r\n                variant=\"secondary\"\r\n                icon={Download}\r\n                onClick={handleExportDatabase}\r\n                disabled={isLoading}\r\n              >\r\n                Exporter Base de Donnes\r\n              </MicroButton>\r\n              \r\n              <MicroButton\r\n                variant=\"secondary\"\r\n                icon={Database}\r\n                onClick={handleImportDatabase}\r\n                disabled={isLoading}\r\n              >\r\n                Importer Base de Donnes\r\n              </MicroButton>\r\n              \r\n              <MicroButton\r\n                variant=\"secondary\"\r\n                icon={RefreshCw}\r\n                onClick={loadBackupData}\r\n                disabled={isLoading}\r\n              >\r\n                Actualiser\r\n              </MicroButton>\r\n              \r\n              <MicroButton\r\n                variant=\"danger\"\r\n                icon={Trash2}\r\n                onClick={handleCleanOldBackups}\r\n                disabled={isLoading}\r\n              >\r\n                Nettoyer Anciennes\r\n              </MicroButton>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Backups List */}\r\n          <div className=\"backups-section\">\r\n            <h3 className=\"section-title\">Sauvegardes Disponibles</h3>\r\n            \r\n            {isLoading ? (\r\n              <div className=\"loading-state\">\r\n                <RefreshCw className=\"loading-spinner\" size={24} />\r\n                <p>Chargement des sauvegardes...</p>\r\n              </div>\r\n            ) : backups.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <Database size={48} />\r\n                <p>Aucune sauvegarde trouve</p>\r\n                <small>Crez votre premire sauvegarde pour commencer</small>\r\n              </div>\r\n            ) : (\r\n              <div className=\"backups-list\">\r\n                {backups.map((backup, index) => (\r\n                  <div key={backup.filePath} className=\"backup-card\">\r\n                    <div className=\"backup-header\">\r\n                      <div className=\"backup-icon\">\r\n                        <FileText size={20} />\r\n                      </div>\r\n                      <div className=\"backup-info\">\r\n                        <h4 className=\"backup-name\">{backup.fileName}</h4>\r\n                        <p className=\"backup-date\">{formatDate(backup.createdAt)}</p>\r\n                        <p className=\"backup-size\">{formatFileSize(backup.size)}</p>\r\n                      </div>\r\n                      <div className=\"backup-actions\">\r\n                        <MicroButton\r\n                          variant=\"secondary\"\r\n                          size=\"small\"\r\n                          icon={RotateCcw}\r\n                          onClick={() => handleRestoreBackup(backup)}\r\n                          disabled={isLoading}\r\n                        >\r\n                          Restaurer\r\n                        </MicroButton>\r\n                        <MicroButton\r\n                          variant=\"danger\"\r\n                          size=\"small\"\r\n                          icon={Trash2}\r\n                          onClick={() => handleDeleteBackup(backup)}\r\n                          disabled={isLoading}\r\n                        >\r\n                          Supprimer\r\n                        </MicroButton>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {backup.metadata && (\r\n                      <div className=\"backup-metadata\">\r\n                        <div className=\"metadata-grid\">\r\n                          <div className=\"metadata-item\">\r\n                            <span className=\"metadata-label\">Documents:</span>\r\n                            <span className=\"metadata-value\">{backup.metadata.stats.totalDocuments}</span>\r\n                          </div>\r\n                          <div className=\"metadata-item\">\r\n                            <span className=\"metadata-label\">Emprunteurs:</span>\r\n                            <span className=\"metadata-value\">{backup.metadata.stats.totalBorrowers}</span>\r\n                          </div>\r\n                          <div className=\"metadata-item\">\r\n                            <span className=\"metadata-label\">Historique:</span>\r\n                            <span className=\"metadata-value\">{backup.metadata.stats.totalBorrowHistory}</span>\r\n                          </div>\r\n                          <div className=\"metadata-item\">\r\n                            <span className=\"metadata-label\">Version:</span>\r\n                            <span className=\"metadata-value\">{backup.metadata.appVersion}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Create Backup Modal */}\r\n        {showCreateModal && (\r\n          <div className=\"create-modal-overlay\">\r\n            <div className=\"create-modal\">\r\n              <div className=\"create-modal-header\">\r\n                <h3>Crer une Nouvelle Sauvegarde</h3>\r\n                <button \r\n                  className=\"close-button\"\r\n                  onClick={() => setShowCreateModal(false)}\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"create-modal-content\">\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Nom de la sauvegarde *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={createBackupName}\r\n                    onChange={(e) => setCreateBackupName(e.target.value)}\r\n                    placeholder=\"Ex: Sauvegarde mensuelle janvier 2024\"\r\n                    className=\"form-input\"\r\n                    maxLength={100}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Description (optionnel)</label>\r\n                  <textarea\r\n                    value={createBackupDescription}\r\n                    onChange={(e) => setCreateBackupDescription(e.target.value)}\r\n                    placeholder=\"Description de cette sauvegarde...\"\r\n                    className=\"form-textarea\"\r\n                    rows={3}\r\n                    maxLength={500}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"create-modal-footer\">\r\n                <MicroButton\r\n                  variant=\"secondary\"\r\n                  onClick={() => setShowCreateModal(false)}\r\n                >\r\n                  Annuler\r\n                </MicroButton>\r\n                <MicroButton\r\n                  variant=\"success\"\r\n                  onClick={handleCreateBackup}\r\n                  disabled={isLoading || !createBackupName.trim()}\r\n                  icon={isLoading ? RefreshCw : Plus}\r\n                >\r\n                  {isLoading ? 'Cration...' : 'Crer Sauvegarde'}\r\n                </MicroButton>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .backup-manager-overlay {\r\n          position: fixed;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.7);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          backdrop-filter: blur(8px);\r\n        }\r\n\r\n        .backup-manager-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 900px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n\r\n        @keyframes slideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(30px) scale(0.95);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n\r\n        .modal-header-alt {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          padding: 32px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          position: relative;\r\n          overflow: visible; /* Changer de hidden  visible */\r\n          z-index: 10;\r\n          margin-bottom: 20px; /* Ajouter une marge pour viter le chevauchement */\r\n        }\r\n\r\n        .modal-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: radial-gradient(circle at 20% 80%, rgba(243, 238, 217, 0.1) 0%, transparent 50%);\r\n          pointer-events: none;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n\r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .modal-subtitle {\r\n          font-size: 14px;\r\n          opacity: 0.8;\r\n          margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n          width: 44px;\r\n          height: 44px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          z-index: 1;\r\n          position: relative;\r\n        }\r\n\r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n\r\n        .modal-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 10px;\r\n          position: relative;\r\n          z-index: 1; /* Z-index plus bas que le header */\r\n        }\r\n\r\n        .stats-section {\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .stats-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n          gap: 20px;\r\n        }\r\n\r\n        .stat-card {\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n          border-radius: 12px;\r\n          padding: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .stat-card:hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 25px rgba(62, 92, 73, 0.15);\r\n        }\r\n\r\n        .stat-icon {\r\n          width: 44px;\r\n          height: 44px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .stat-value {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          color: #2e2e2eff !important;\r\n          margin-bottom: 4px;\r\n        }\r\n\r\n        .stat-label {\r\n          font-size: 14px;\r\n          color: #4A4A4A !important ;\r\n        }\r\n\r\n        .actions-section {\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .actions-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .section-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 20px 0;\r\n        }\r\n\r\n        .loading-state, .empty-state {\r\n          text-align: center;\r\n          padding: 60px 20px;\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .loading-spinner {\r\n          animation: spin 1s linear infinite;\r\n          margin-bottom: 16px;\r\n        }\r\n\r\n        @keyframes spin {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n\r\n        .empty-state svg {\r\n          color: #C2C2C2;\r\n          margin-bottom: 16px;\r\n        }\r\n\r\n        .backups-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 16px;\r\n        }\r\n\r\n        .backup-card {\r\n          background: #FFFFFF;\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          padding: 20px;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .backup-card:hover {\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .backup-header {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 16px;\r\n        }\r\n\r\n        .backup-icon {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n          border-radius: 10px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .backup-info {\r\n          flex: 1;\r\n        }\r\n\r\n        .backup-name {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .backup-date, .backup-size {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 2px 0;\r\n        }\r\n\r\n        .backup-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .backup-metadata {\r\n          margin-top: 16px;\r\n          padding-top: 16px;\r\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .metadata-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .metadata-item {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 4px;\r\n        }\r\n\r\n        .metadata-label {\r\n          font-size: 12px;\r\n          color: #4A4A4A;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .metadata-value {\r\n          font-size: 14px;\r\n          color: #2E2E2E;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .create-modal-overlay {\r\n          position: absolute;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.5);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1001;\r\n        }\r\n\r\n        .create-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 16px;\r\n          width: 100%;\r\n          max-width: 500px;\r\n          max-height: 80vh;\r\n          overflow: hidden;\r\n          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .create-modal-header {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          padding: 24px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n        }\r\n\r\n        .create-modal-header h3 {\r\n          margin: 0;\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .create-modal-content {\r\n          padding: 24px;\r\n        }\r\n\r\n        .form-group {\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .form-label {\r\n          display: block;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .form-input, .form-textarea {\r\n          width: 100%;\r\n          padding: 12px 16px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n          resize: vertical;\r\n        }\r\n\r\n        .form-input:focus, .form-textarea:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .create-modal-footer {\r\n          padding: 24px;\r\n          border-top: 1px solid #E5DCC2;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .backup-manager-modal {\r\n            margin: 12px;\r\n          }\r\n\r\n          .stats-grid, .actions-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .backup-header {\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n          }\r\n\r\n          .backup-actions {\r\n            align-self: flex-end;\r\n          }\r\n\r\n          .metadata-grid {\r\n            grid-template-columns: repeat(2, 1fr);\r\n          }\r\n        }\r\n\r\n        /* Scrollbar personnalis */\r\n        .modal-content::-webkit-scrollbar {\r\n          width: 8px;\r\n        }\r\n\r\n        .modal-content::-webkit-scrollbar-track {\r\n          background: #F3EED9;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .modal-content::-webkit-scrollbar-thumb {\r\n          background: #3E5C49;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .modal-content::-webkit-scrollbar-thumb:hover {\r\n          background: #2E453A;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { Document, Borrower } from '../../types';\r\nimport { \r\n  Heart, \r\n  X, \r\n  User, \r\n  BookOpen, \r\n  Calendar, \r\n  Clock, \r\n  Search, \r\n  CheckCircle,\r\n  AlertTriangle,\r\n  Sparkles,\r\n  Users,\r\n  Tag,\r\n  Building\r\n} from 'lucide-react';\r\nimport { MicroButton, MicroCard, MicroLoader } from './MicroInteractions';\r\nimport { useQuickToast } from './ToastSystem';\r\n\r\ninterface BorrowDocumentProps {\r\n  document: Document;\r\n  borrowers: Borrower[];\r\n  onBorrow: (documentId: number, borrowerId: number, returnDate: string) => Promise<void>;\r\n  onReturn: (documentId: number) => Promise<void>;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport const BorrowDocument: React.FC<BorrowDocumentProps> = ({\r\n  document,\r\n  borrowers,\r\n  onBorrow,\r\n  onReturn,\r\n  onCancel\r\n}) => {\r\n  const { success, error, info } = useQuickToast();\r\n  const [selectedBorrowerId, setSelectedBorrowerId] = useState<number | null>(null);\r\n  const [returnDate, setReturnDate] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [filteredBorrowers, setFilteredBorrowers] = useState<Borrower[]>([]);\r\n\r\n  useEffect(() => {\r\n    // Set default return date to 2 weeks from today\r\n    const defaultDate = new Date();\r\n    defaultDate.setDate(defaultDate.getDate() + 14);\r\n    setReturnDate(defaultDate.toISOString().split('T')[0]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    filterBorrowers();\r\n  }, [borrowers, searchTerm]);\r\n\r\n  const filterBorrowers = () => {\r\n    if (!searchTerm) {\r\n      setFilteredBorrowers(borrowers);\r\n      return;\r\n    }\r\n\r\n    const filtered = borrowers.filter(borrower =>\r\n      `${borrower.firstName} ${borrower.lastName}`.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      borrower.matricule.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      borrower.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (borrower.classe && borrower.classe.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      (borrower.position && borrower.position.toLowerCase().includes(searchTerm.toLowerCase()))\r\n    );\r\n    setFilteredBorrowers(filtered);\r\n  };\r\n\r\n  const handleBorrow = async () => {\r\n    if (!selectedBorrowerId || !returnDate) {\r\n      error('Informations manquantes', 'Veuillez slectionner un emprunteur et une date de retour');\r\n      return;\r\n    }\r\n\r\n    if (!document.id) {\r\n      error('Erreur document', 'ID du document manquant');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await onBorrow(document.id, selectedBorrowerId, returnDate);\r\n      const borrower = borrowers.find(b => b.id === selectedBorrowerId);\r\n      success(\r\n        'Emprunt enregistr', \r\n        `\"${document.titre}\" emprunt par ${borrower?.firstName} ${borrower?.lastName}`\r\n      );\r\n    } catch (err) {\r\n      console.error('Erreur d\\'emprunt:', err);\r\n      error('Erreur d\\'emprunt', `Impossible d'enregistrer l'emprunt: ${err instanceof Error ? err.message : 'Erreur inconnue'}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReturn = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await onReturn(document.id!);\r\n      success('Retour enregistr', `\"${document.titre}\" a t retourn avec succs`);\r\n    } catch (err) {\r\n      error('Erreur de retour', 'Impossible d\\'enregistrer le retour');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getBorrowerTypeIcon = (type: string) => {\r\n    return type === 'student' ? <User size={16} /> : <Users size={16} />;\r\n  };\r\n\r\n  const getBorrowerTypeLabel = (type: string) => {\r\n    return type === 'student' ? 'tudiant' : 'Personnel';\r\n  };\r\n\r\n  return (\r\n    <div className=\"borrow-document-overlay\">\r\n      <div className=\"borrow-document-modal\">\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <Heart size={28} />\r\n              <div className=\"icon-sparkle\">\r\n                <Sparkles size={14} />\r\n              </div>\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">\r\n                {document.estEmprunte ? 'Retourner le document' : 'Nouvel emprunt'}\r\n              </h2>\r\n              <p className=\"modal-subtitle\">\r\n                {document.estEmprunte \r\n                  ? 'Finalisez le retour de ce document' \r\n                  : 'Prtez ce document  un membre de votre institution'\r\n                }\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button onClick={onCancel} className=\"close-button\">\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          {/* Document information card */}\r\n          <MicroCard className=\"document-info-card\">\r\n            <div className=\"document-preview\">\r\n              <div className=\"document-icon\">\r\n                <BookOpen size={24} />\r\n              </div>\r\n              <div className=\"document-details\">\r\n                <h3 className=\"document-title\">{document.titre}</h3>\r\n                <p className=\"document-author\">\r\n                  <User size={14} />\r\n                  {document.auteur}\r\n                </p>\r\n                <div className=\"document-meta\">\r\n                  <span className=\"meta-item\">\r\n                    <Building size={12} />\r\n                    {document.editeur}\r\n                  </span>\r\n                  <span className=\"meta-item\">\r\n                    <Calendar size={12} />\r\n                    {document.annee}\r\n                  </span>\r\n                  <span className=\"meta-item\">\r\n                    <Tag size={12} />\r\n                    {document.cote}\r\n                  </span>\r\n                </div>\r\n                {document.estEmprunte && (\r\n                  <div className=\"borrowed-status\">\r\n                    <AlertTriangle size={14} />\r\n                    Actuellement emprunt\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </MicroCard>\r\n\r\n          {document.estEmprunte ? (\r\n            // Return form\r\n            <MicroCard className=\"return-form-card\">\r\n              <div className=\"form-section\">\r\n                <div className=\"section-header\">\r\n                  <div className=\"section-icon return-icon\">\r\n                    <CheckCircle size={20} />\r\n                  </div>\r\n                  <h3 className=\"section-title\">Confirmer le retour</h3>\r\n                </div>\r\n                \r\n                <div className=\"return-info\">\r\n                  <p className=\"return-message\">\r\n                    Ce document sera marqu comme disponible et pourra tre emprunt  nouveau.\r\n                  </p>\r\n                  <div className=\"return-date-info\">\r\n                    <Clock size={16} />\r\n                    <span>Retour effectu le {new Date().toLocaleDateString('fr-FR')}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </MicroCard>\r\n          ) : (\r\n            // Borrow form\r\n            <>\r\n              {/* Borrower selection */}\r\n              <MicroCard className=\"borrower-selection-card\">\r\n                <div className=\"form-section\">\r\n                  <div className=\"section-header\">\r\n                    <div className=\"section-icon\">\r\n                      <Users size={20} />\r\n                    </div>\r\n                    <h3 className=\"section-title\">Slectionner l'emprunteur</h3>\r\n                  </div>\r\n                  \r\n                  <div className=\"search-field\">\r\n                    <div className=\"search-input-container\">\r\n                      <Search size={16} />\r\n                      <input\r\n                        type=\"text\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"search-input\"\r\n                        placeholder=\"Rechercher par nom, matricule, email...\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"borrowers-list\">\r\n                    {filteredBorrowers.slice(0, 6).map((borrower) => (\r\n                      <div\r\n                        key={borrower.id}\r\n                        className={`borrower-item ${selectedBorrowerId === borrower.id ? 'selected' : ''}`}\r\n                        onClick={() => setSelectedBorrowerId(borrower.id!)}\r\n                      >\r\n                        <div className=\"borrower-avatar\">\r\n                          {getBorrowerTypeIcon(borrower.type)}\r\n                        </div>\r\n                        <div className=\"borrower-info\">\r\n                          <div className=\"borrower-name\">\r\n                            {borrower.firstName} {borrower.lastName}\r\n                          </div>\r\n                          <div className=\"borrower-details\">\r\n                            <span className=\"borrower-type\">\r\n                              {getBorrowerTypeLabel(borrower.type)}\r\n                            </span>\r\n                            <span className=\"borrower-matricule\">\r\n                              {borrower.matricule}\r\n                            </span>\r\n                            {(borrower.classe || borrower.position) && (\r\n                              <span className=\"borrower-class\">\r\n                                {borrower.classe || borrower.position}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"selection-indicator\">\r\n                          {selectedBorrowerId === borrower.id && (\r\n                            <CheckCircle size={20} />\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {filteredBorrowers.length === 0 && (\r\n                      <div className=\"no-borrowers\">\r\n                        <Users size={32} />\r\n                        <p>Aucun emprunteur trouv</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </MicroCard>\r\n\r\n              {/* Return date selection */}\r\n              <MicroCard className=\"date-selection-card\">\r\n                <div className=\"form-section\">\r\n                  <div className=\"section-header\">\r\n                    <div className=\"section-icon\">\r\n                      <Calendar size={20} />\r\n                    </div>\r\n                    <h3 className=\"section-title\">Date de retour prvue</h3>\r\n                  </div>\r\n                  \r\n                  <div className=\"date-field\">\r\n                    <input\r\n                      type=\"date\"\r\n                      value={returnDate}\r\n                      onChange={(e) => setReturnDate(e.target.value)}\r\n                      className=\"date-input\"\r\n                      min={new Date().toISOString().split('T')[0]}\r\n                    />\r\n                    <div className=\"date-help\">\r\n                      <Clock size={14} />\r\n                      <span>Dure d'emprunt recommande: 14 jours</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </MicroCard>\r\n            </>\r\n          )}\r\n\r\n          {/* Action buttons */}\r\n          <div className=\"modal-actions\">\r\n            <MicroButton\r\n              variant=\"secondary\"\r\n              onClick={onCancel}\r\n              icon={X}\r\n            >\r\n              Annuler\r\n            </MicroButton>\r\n            \r\n            {document.estEmprunte ? (\r\n              <MicroButton\r\n                variant=\"success\"\r\n                onClick={handleReturn}\r\n                disabled={isLoading}\r\n                icon={CheckCircle}\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <MicroLoader size={16} color=\"white\" />\r\n                    Traitement...\r\n                  </>\r\n                ) : (\r\n                  'Confirmer le retour'\r\n                )}\r\n              </MicroButton>\r\n            ) : (\r\n              <MicroButton\r\n                variant=\"primary\"\r\n                onClick={handleBorrow}\r\n                disabled={isLoading || !selectedBorrowerId || !returnDate}\r\n                icon={Heart}\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <MicroLoader size={16} color=\"white\" />\r\n                    Enregistrement...\r\n                  </>\r\n                ) : (\r\n                  'Confirmer l\\'emprunt'\r\n                )}\r\n              </MicroButton>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <style>{`\r\n        .borrow-document-overlay {\r\n          position: fixed;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.7);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 60;\r\n          padding: 16px;\r\n          backdrop-filter: blur(12px);\r\n        }\r\n        \r\n        .borrow-document-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 24px;\r\n          box-shadow: \r\n            0 32px 64px rgba(0, 0, 0, 0.2),\r\n            0 0 0 1px rgba(229, 220, 194, 0.3);\r\n          width: 100%;\r\n          max-width: 800px;\r\n          max-height: 95vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          position: relative;\r\n          animation: modalSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n        \r\n        @keyframes modalSlideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(40px) scale(0.95);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n        \r\n        .modal-header {\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          color: #F3EED9;\r\n          padding: 40px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .modal-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: -50%;\r\n          right: -50%;\r\n          width: 200%;\r\n          height: 200%;\r\n          background: radial-gradient(circle, rgba(243, 238, 217, 0.15) 0%, transparent 70%);\r\n          animation: headerGlow 8s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes headerGlow {\r\n          0%, 100% { transform: rotate(0deg) scale(1); }\r\n          50% { transform: rotate(180deg) scale(1.1); }\r\n        }\r\n        \r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 24px;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .header-icon {\r\n          width: 72px;\r\n          height: 72px;\r\n          background: linear-gradient(135deg, rgba(243, 238, 217, 0.2) 0%, rgba(243, 238, 217, 0.1) 100%);\r\n          border-radius: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          position: relative;\r\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n        }\r\n        \r\n        .icon-sparkle {\r\n          position: absolute;\r\n          top: -4px;\r\n          right: -4px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-radius: 50%;\r\n          width: 24px;\r\n          height: 24px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          animation: sparkle 2s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes sparkle {\r\n          0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }\r\n          50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }\r\n        }\r\n        \r\n        .header-text {\r\n          flex: 1;\r\n        }\r\n        \r\n        .modal-title {\r\n          font-size: 28px;\r\n          font-weight: 700;\r\n          margin: 0 0 8px 0;\r\n          line-height: 1.2;\r\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        .modal-subtitle {\r\n          font-size: 16px;\r\n          opacity: 0.9;\r\n          margin: 0;\r\n          line-height: 1.4;\r\n        }\r\n        \r\n        .close-button {\r\n          width: 48px;\r\n          height: 48px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .modal-content {\r\n          padding: 32px;\r\n          overflow-y: auto;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 24px;\r\n          flex: 1;\r\n        }\r\n        \r\n        .document-info-card {\r\n          border: 2px solid rgba(194, 87, 27, 0.1);\r\n          background: linear-gradient(135deg, rgba(194, 87, 27, 0.05) 0%, rgba(243, 238, 217, 0.1) 100%);\r\n        }\r\n        \r\n        .document-preview {\r\n          padding: 24px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n        \r\n        .document-icon {\r\n          width: 64px;\r\n          height: 64px;\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          box-shadow: 0 8px 32px rgba(194, 87, 27, 0.3);\r\n        }\r\n        \r\n        .document-details {\r\n          flex: 1;\r\n        }\r\n        \r\n        .document-title {\r\n          font-size: 20px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 8px 0;\r\n          line-height: 1.3;\r\n        }\r\n        \r\n        .document-author {\r\n          font-size: 16px;\r\n          color: #4A4A4A;\r\n          margin: 0 0 12px 0;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .document-meta {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: 16px;\r\n        }\r\n        \r\n        .meta-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          padding: 4px 12px;\r\n          border-radius: 20px;\r\n        }\r\n        \r\n        .borrowed-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          color: #C2571B;\r\n          background: rgba(194, 87, 27, 0.1);\r\n          padding: 8px 16px;\r\n          border-radius: 12px;\r\n          font-weight: 600;\r\n          margin-top: 12px;\r\n          width: fit-content;\r\n        }\r\n        \r\n        .form-section {\r\n          padding: 24px;\r\n        }\r\n        \r\n        .section-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          margin-bottom: 24px;\r\n        }\r\n        \r\n        .section-icon {\r\n          width: 48px;\r\n          height: 48px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-radius: 14px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          box-shadow: 0 6px 20px rgba(62, 92, 73, 0.3);\r\n        }\r\n        \r\n        .section-icon.return-icon {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          box-shadow: 0 6px 20px rgba(62, 92, 73, 0.3);\r\n        }\r\n        \r\n        .section-title {\r\n          font-size: 20px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n        \r\n        .search-input-container {\r\n          position: relative;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          background: #FFFFFF;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          padding: 16px 20px;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .search-input-container:focus-within {\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.15);\r\n        }\r\n        \r\n        .search-input {\r\n          flex: 1;\r\n          border: none;\r\n          outline: none;\r\n          font-size: 16px;\r\n          color: #2E2E2E;\r\n          background: transparent;\r\n        }\r\n        \r\n        .search-input::placeholder {\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .borrowers-list {\r\n          max-height: 300px;\r\n          overflow-y: auto;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n          margin-top: 16px;\r\n        }\r\n        \r\n        .borrower-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          padding: 16px 20px;\r\n          background: #FFFFFF;\r\n          border: 2px solid transparent;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n        \r\n        .borrower-item:hover {\r\n          border-color: rgba(62, 92, 73, 0.2);\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        .borrower-item.selected {\r\n          border-color: #3E5C49;\r\n          background: linear-gradient(135deg, rgba(62, 92, 73, 0.05) 0%, rgba(62, 92, 73, 0.1) 100%);\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 25px rgba(62, 92, 73, 0.2);\r\n        }\r\n        \r\n        .borrower-avatar {\r\n          width: 48px;\r\n          height: 48px;\r\n          background: linear-gradient(135deg, #E5DCC2 0%, #F3EED9 100%);\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .borrower-item.selected .borrower-avatar {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .borrower-info {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n        \r\n        .borrower-name {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin-bottom: 4px;\r\n        }\r\n        \r\n        .borrower-details {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: 12px;\r\n          font-size: 14px;\r\n        }\r\n        \r\n        .borrower-type,\r\n        .borrower-matricule,\r\n        .borrower-class {\r\n          color: #4A4A4A;\r\n          background: rgba(110, 110, 110, 0.1);\r\n          padding: 2px 8px;\r\n          border-radius: 6px;\r\n          font-size: 12px;\r\n        }\r\n        \r\n        .selection-indicator {\r\n          color: #3E5C49;\r\n          opacity: 0;\r\n          transition: opacity 0.3s ease;\r\n        }\r\n        \r\n        .borrower-item.selected .selection-indicator {\r\n          opacity: 1;\r\n        }\r\n        \r\n        .no-borrowers {\r\n          text-align: center;\r\n          padding: 40px 20px;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .no-borrowers svg {\r\n          margin: 0 auto 16px;\r\n          opacity: 0.5;\r\n        }\r\n        \r\n        .date-field {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n        \r\n        .date-input {\r\n          padding: 16px 20px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          font-size: 16px;\r\n          color: #2E2E2E;\r\n          background: #FFFFFF;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .date-input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.15);\r\n        }\r\n        \r\n        .date-help {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          background: rgba(62, 92, 73, 0.05);\r\n          padding: 8px 16px;\r\n          border-radius: 8px;\r\n        }\r\n        \r\n        .return-form-card {\r\n          border: 2px solid rgba(62, 92, 73, 0.2);\r\n          background: linear-gradient(135deg, rgba(62, 92, 73, 0.05) 0%, #FFFFFF 100%);\r\n        }\r\n        \r\n        .return-info {\r\n          background: rgba(62, 92, 73, 0.05);\r\n          border-radius: 12px;\r\n          padding: 20px;\r\n        }\r\n        \r\n        .return-message {\r\n          font-size: 16px;\r\n          color: #2E2E2E;\r\n          margin: 0 0 16px 0;\r\n          line-height: 1.5;\r\n        }\r\n        \r\n        .return-date-info {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          font-size: 14px;\r\n          color: #3E5C49;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .modal-actions {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n          padding-top: 24px;\r\n          border-top: 2px solid rgba(229, 220, 194, 0.3);\r\n          margin-top: auto;\r\n        }\r\n        \r\n        @media (max-width: 768px) {\r\n          .borrow-document-modal {\r\n            max-width: 100%;\r\n            margin: 8px;\r\n            border-radius: 20px;\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 24px;\r\n          }\r\n          \r\n          .header-content {\r\n            flex-direction: column;\r\n            text-align: center;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .modal-title {\r\n            font-size: 24px;\r\n          }\r\n          \r\n          .modal-content {\r\n            padding: 20px;\r\n            gap: 20px;\r\n          }\r\n          \r\n          .document-preview {\r\n            flex-direction: column;\r\n            text-align: center;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .document-meta {\r\n            justify-content: center;\r\n          }\r\n          \r\n          .modal-actions {\r\n            flex-direction: column;\r\n            gap: 12px;\r\n          }\r\n          \r\n          .borrowers-list {\r\n            max-height: 200px;\r\n          }\r\n          \r\n          .borrower-item {\r\n            padding: 12px 16px;\r\n          }\r\n          \r\n          .borrower-details {\r\n            flex-direction: column;\r\n            gap: 4px;\r\n          }\r\n        }\r\n        \r\n        /* Amlioration de l'accessibilit */\r\n        .borrower-item:focus-visible {\r\n          outline: 2px solid #3E5C49;\r\n          outline-offset: 2px;\r\n        }\r\n        \r\n        .close-button:focus-visible {\r\n          outline: 2px solid #F3EED9;\r\n          outline-offset: 2px;\r\n        }\r\n        \r\n        /* Scrollbar personnalis */\r\n        .borrowers-list::-webkit-scrollbar {\r\n          width: 6px;\r\n        }\r\n        \r\n        .borrowers-list::-webkit-scrollbar-track {\r\n          background: #F3EED9;\r\n          border-radius: 3px;\r\n        }\r\n        \r\n        .borrowers-list::-webkit-scrollbar-thumb {\r\n          background: #3E5C49;\r\n          border-radius: 3px;\r\n        }\r\n        \r\n        .borrowers-list::-webkit-scrollbar-thumb:hover {\r\n          background: #2E453A;\r\n        }\r\n        \r\n        /* Prfrences de mouvement rduit */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .borrow-document-modal,\r\n          .borrower-item,\r\n          .close-button,\r\n          .icon-sparkle,\r\n          .modal-header::before {\r\n            animation: none;\r\n            transition: none;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\nimport { \n  History, \n  Calendar,\n  Filter,\n  Download,\n  Printer,\n  Search,\n  X,\n  Clock,\n  CheckCircle,\n  AlertTriangle,\n  User,\n  Book,\n  GraduationCap,\n  Briefcase,\n  TrendingUp,\n  BarChart3\n} from 'lucide-react';\nimport { BorrowHistory as BorrowHistoryType, HistoryFilter } from '../../types';\nimport { ExportDialog, ExportConfig } from './ExportDialog';\n\nimport { SupabaseRendererService as SupabaseService } from '../services/SupabaseClient';\n\ninterface BorrowHistoryProps {\n  onClose: () => void;\n  supabaseService: SupabaseService;\n}\n\nexport const BorrowHistory: React.FC<BorrowHistoryProps> = ({ onClose }) => {\n  const [history, setHistory] = useState<BorrowHistoryType[]>([]);\n  const [filteredHistory, setFilteredHistory] = useState<BorrowHistoryType[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  const [filters, setFilters] = useState<HistoryFilter>({\n    startDate: '',\n    endDate: '',\n    borrowerType: 'all',\n    status: 'all'\n  });\n  \n  const [searchQuery, setSearchQuery] = useState('');\n  const [showExportDialog, setShowExportDialog] = useState(false);\n\n  useEffect(() => {\n    loadHistory();\n  }, []);\n\n  useEffect(() => {\n    applyFilters();\n  }, [history, filters, searchQuery]);\n\n  const loadHistory = async () => {\n    setIsLoading(true);\n    try {\n      const data = await window.electronAPI.getBorrowHistory();\n      setHistory(data);\n    } catch (error) {\n      console.error('Erreur lors du chargement de l\\'historique:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const applyFilters = () => {\n    let filtered = [...history];\n\n    // Appliquer les filtres de date\n    if (filters.startDate) {\n      filtered = filtered.filter(item => \n        new Date(item.borrowDate) >= new Date(filters.startDate!)\n      );\n    }\n    \n    if (filters.endDate) {\n      filtered = filtered.filter(item => \n        new Date(item.borrowDate) <= new Date(filters.endDate! + ' 23:59:59')\n      );\n    }\n\n    // Filtre par type d'emprunteur\n    if (filters.borrowerType !== 'all') {\n      filtered = filtered.filter(item => \n        item.borrower?.type === filters.borrowerType\n      );\n    }\n\n    // Filtre par statut\n    if (filters.status !== 'all') {\n      filtered = filtered.filter(item => item.status === filters.status);\n    }\n\n    // Recherche textuelle\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(item =>\n        item.document?.titre.toLowerCase().includes(query) ||\n        item.document?.auteur.toLowerCase().includes(query) ||\n        `${item.borrower?.firstName} ${item.borrower?.lastName}`.toLowerCase().includes(query) ||\n        item.borrower?.matricule.toLowerCase().includes(query)\n      );\n    }\n\n    setFilteredHistory(filtered);\n  };\n\n  const handleFilterChange = (key: keyof HistoryFilter, value: any) => {\n    setFilters(prev => ({ ...prev, [key]: value }));\n  };\n\n  const resetFilters = () => {\n    setFilters({\n      startDate: '',\n      endDate: '',\n      borrowerType: 'all',\n      status: 'all'\n    });\n    setSearchQuery('');\n  };\n\n  const handlePrint = async () => {\n    try {\n      const printData = {\n        history: filteredHistory,\n        filters,\n        stats: getFilteredStats()\n      };\n      await window.electronAPI.printBorrowHistory(printData);\n    } catch (error) {\n      console.error('Erreur lors de l\\'impression:', error);\n    }\n  };\n\n  const handleExport = async (config: ExportConfig) => {\n    try {\n      const result = await window.electronAPI.exportAdvanced(config);\n      if (result.success && result.path) {\n        const fileName = result.path.split(/[/\\\\]/).pop();\n        alert(`Fichier export avec succs : ${fileName}`);\n      } else if (result.cancelled) {\n        return;\n      } else {\n        alert(`Erreur lors de l'export : ${result.error || 'Erreur inconnue'}`);\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'export:', error);\n      alert('Erreur lors de l\\'export des donnes');\n    }\n  };\n\n  const getFilteredStats = () => {\n    const total = filteredHistory.length;\n    const active = filteredHistory.filter(h => h.status === 'active').length;\n    const returned = filteredHistory.filter(h => h.status === 'returned').length;\n    const overdue = filteredHistory.filter(h => h.status === 'overdue').length;\n    const students = filteredHistory.filter(h => h.borrower?.type === 'student').length;\n    const staff = filteredHistory.filter(h => h.borrower?.type === 'staff').length;\n    \n    return { total, active, returned, overdue, students, staff };\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'active':\n        return <Clock size={16} className=\"text-blue-500\" />;\n      case 'returned':\n        return <CheckCircle size={16} className=\"text-green-500\" />;\n      case 'overdue':\n        return <AlertTriangle size={16} className=\"text-red-500\" />;\n      default:\n        return <Clock size={16} />;\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'active':\n        return 'En cours';\n      case 'returned':\n        return 'Rendu';\n      case 'overdue':\n        return 'En retard';\n      default:\n        return status;\n    }\n  };\n\n  const stats = getFilteredStats();\n\n  return (\n    <div className=\"history-overlay\">\n      <div className=\"history-modal\">\n        {/* Header avec navigation amliore */}\n        <div className=\"modal-header\">\n          <div className=\"header-left\">\n            <div className=\"header-icon\">\n              <History size={28} />\n            </div>\n            <div className=\"header-text\">\n              <h2 className=\"modal-title\">Historique des Emprunts</h2>\n              <div className=\"header-stats\">\n                <span className=\"stat-pill\">\n                  <BarChart3 size={14} />\n                  {stats.total} emprunts\n                </span>\n                <span className=\"stat-pill active\">\n                  <Clock size={14} />\n                  {stats.active} actifs\n                </span>\n                <span className=\"stat-pill returned\">\n                  <CheckCircle size={14} />\n                  {stats.returned} rendus\n                </span>\n                {stats.overdue > 0 && (\n                  <span className=\"stat-pill overdue\">\n                    <AlertTriangle size={14} />\n                    {stats.overdue} en retard\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n          <button className=\"close-button\" onClick={onClose} title=\"Fermer\">\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Barre de contrles principale */}\n        <div className=\"controls-bar\">\n          {/* Recherche globale */}\n          <div className=\"search-section\">\n            <div className=\"search-input-wrapper\">\n              <Search className=\"search-icon\" size={20} />\n              <input\n                type=\"text\"\n                placeholder=\"Rechercher par document, auteur, emprunteur ou matricule...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"search-input\"\n              />\n              {searchQuery && (\n                <button \n                  className=\"clear-search\"\n                  onClick={() => setSearchQuery('')}\n                  title=\"Effacer la recherche\"\n                >\n                  <X size={16} />\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Actions rapides */}\n          <div className=\"quick-actions\">\n            <button \n              className=\"action-btn secondary\" \n              onClick={() => setShowExportDialog(true)}\n              title=\"Exporter les donnes\"\n            >\n              <Download size={18} />\n              <span className=\"action-text\">Exporter</span>\n            </button>\n            <button \n              className=\"action-btn primary\" \n              onClick={handlePrint}\n              title=\"Imprimer l'historique\"\n            >\n              <Printer size={18} />\n              <span className=\"action-text\">Imprimer</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Filtres compacts */}\n        <div className=\"filters-bar\">\n          <div className=\"filters-group\">\n            <div className=\"filter-item\">\n              <Calendar size={16} className=\"filter-icon\" />\n              <input\n                type=\"date\"\n                value={filters.startDate}\n                onChange={(e) => handleFilterChange('startDate', e.target.value)}\n                className=\"filter-input date\"\n                title=\"Date de dbut\"\n              />\n              <span className=\"filter-separator\"></span>\n              <input\n                type=\"date\"\n                value={filters.endDate}\n                onChange={(e) => handleFilterChange('endDate', e.target.value)}\n                className=\"filter-input date\"\n                title=\"Date de fin\"\n              />\n            </div>\n            \n            <div className=\"filter-item\">\n              <User size={16} className=\"filter-icon\" />\n              <select \n                value={filters.borrowerType} \n                onChange={(e) => handleFilterChange('borrowerType', e.target.value)}\n                className=\"filter-input select\"\n              >\n                <option value=\"all\">Tous</option>\n                <option value=\"student\">tudiants</option>\n                <option value=\"staff\">Personnel</option>\n              </select>\n            </div>\n            \n            <div className=\"filter-item\">\n              <Filter size={16} className=\"filter-icon\" />\n              <select \n                value={filters.status} \n                onChange={(e) => handleFilterChange('status', e.target.value)}\n                className=\"filter-input select\"\n              >\n                <option value=\"all\">Tous statuts</option>\n                <option value=\"active\">En cours</option>\n                <option value=\"returned\">Rendus</option>\n                <option value=\"overdue\">En retard</option>\n              </select>\n            </div>\n\n            {/* Indicateur de filtres actifs */}\n            {(Object.values(filters).some(f => f && f !== 'all') || searchQuery) && (\n              <button \n                className=\"reset-filters-btn\"\n                onClick={resetFilters}\n                title=\"Rinitialiser tous les filtres\"\n              >\n                <X size={16} />\n                Rinitialiser\n              </button>\n            )}\n          </div>\n\n          <div className=\"results-counter\">\n            <span className=\"results-text\">\n              {filteredHistory.length} rsultat{filteredHistory.length > 1 ? 's' : ''}\n              {history.length !== filteredHistory.length && (\n                <span className=\"total-count\"> sur {history.length}</span>\n              )}\n            </span>\n          </div>\n        </div>\n\n        {/* Contenu principal */}\n        <div className=\"history-content\">\n          {isLoading ? (\n            <div className=\"loading-state\">\n              <div className=\"loading-spinner\"></div>\n              <p>Chargement de l'historique...</p>\n            </div>\n          ) : filteredHistory.length > 0 ? (\n            <div className=\"history-list\">\n              {filteredHistory.map((item) => (\n                <div key={item.id} className={`history-item ${item.status}`}>\n                  {/* En-tte de la carte */}\n                  <div className=\"item-header\">\n                    <div className=\"status-badge\">\n                      {getStatusIcon(item.status)}\n                      <span className=\"status-text\">{getStatusLabel(item.status)}</span>\n                    </div>\n                    \n                    <div className=\"item-dates\">\n                      <div className=\"date-info\">\n                        <span className=\"date-label\">Emprunt</span>\n                        <span className=\"date-value\">\n                          {new Date(item.borrowDate).toLocaleDateString('fr-FR')}\n                        </span>\n                      </div>\n                      {item.actualReturnDate && (\n                        <div className=\"date-info returned\">\n                          <span className=\"date-label\">Rendu</span>\n                          <span className=\"date-value\">\n                            {new Date(item.actualReturnDate).toLocaleDateString('fr-FR')}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Contenu principal de la carte */}\n                  <div className=\"item-body\">\n                    {/* Section document */}\n                    <div className=\"document-section\">\n                      <div className=\"document-cover\">\n                        {item.document?.couverture ? (\n                          <img src={item.document?.couverture} alt={item.document?.titre} />\n                        ) : (\n                          <Book size={24} />\n                        )}\n                      </div>\n                      \n                      <div className=\"document-info\">\n                        <h4 className=\"document-title\">{item.document?.titre}</h4>\n                        <p className=\"document-author\">par {item.document?.auteur}</p>\n                        {item.document?.descripteurs && (\n                          <span className=\"document-category\">{item.document?.descripteurs}</span>\n                        )}\n                      </div>\n                    </div>\n                    \n                    {/* Section emprunteur */}\n                    <div className=\"borrower-section\">\n                      <div className=\"borrower-header\">\n                        <div className=\"borrower-type-badge\">\n                          {item.borrower?.type === 'student' ? (\n                            <GraduationCap size={16} />\n                          ) : (\n                            <Briefcase size={16} />\n                          )}\n                          <span>{item.borrower?.type === 'student' ? 'tudiant' : 'Personnel'}</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"borrower-details\">\n                        <h4 className=\"borrower-name\">\n                          {item.borrower?.firstName} {item.borrower?.lastName}\n                        </h4>\n                        <div className=\"borrower-meta\">\n                          <span className=\"borrower-id\">{item.borrower?.matricule}</span>\n                          {item.borrower?.type === 'student' && item.borrower.classe && (\n                            <span className=\"borrower-extra\">{item.borrower.classe}</span>\n                          )}\n                          {item.borrower?.type === 'staff' && item.borrower.position && (\n                            <span className=\"borrower-extra\">{item.borrower.position}</span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Timeline simplifie */}\n                    <div className=\"timeline-section\">\n                      <div className=\"timeline-compact\">\n                        <div className=\"timeline-point start\">\n                          <div className=\"point-dot\"></div>\n                          <div className=\"point-info\">\n                            <span className=\"point-date\">\n                              {new Date(item.borrowDate).toLocaleDateString('fr-FR', { \n                                day: 'numeric', \n                                month: 'short' \n                              })}\n                            </span>\n                            <span className=\"point-label\">Dbut</span>\n                          </div>\n                        </div>\n                        \n                        <div className=\"timeline-line\"></div>\n                        \n                        <div className=\"timeline-point expected\">\n                          <div className=\"point-dot\"></div>\n                          <div className=\"point-info\">\n                            <span className=\"point-date\">\n                              {new Date(item.expectedReturnDate).toLocaleDateString('fr-FR', { \n                                day: 'numeric', \n                                month: 'short' \n                              })}\n                            </span>\n                            <span className=\"point-label\">Prvu</span>\n                          </div>\n                        </div>\n                        \n                        {item.actualReturnDate && (\n                          <>\n                            <div className=\"timeline-line\"></div>\n                            <div className=\"timeline-point end\">\n                              <div className=\"point-dot\"></div>\n                              <div className=\"point-info\">\n                                <span className=\"point-date\">\n                                  {new Date(item.actualReturnDate).toLocaleDateString('fr-FR', { \n                                    day: 'numeric', \n                                    month: 'short' \n                                  })}\n                                </span>\n                                <span className=\"point-label\">Rendu</span>\n                              </div>\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Notes (si prsentes) */}\n                  {item.notes && (\n                    <div className=\"item-notes\">\n                      <div className=\"notes-content\">\n                        <strong>Notes :</strong> {item.notes}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"empty-state\">\n              <div className=\"empty-icon\">\n                <History size={64} />\n              </div>\n              <h3 className=\"empty-title\">\n                {Object.values(filters).some(f => f && f !== 'all') || searchQuery\n                  ? 'Aucun rsultat trouv'\n                  : 'Aucun historique'\n                }\n              </h3>\n              <p className=\"empty-description\">\n                {Object.values(filters).some(f => f && f !== 'all') || searchQuery\n                  ? 'Essayez de modifier vos critres de recherche ou filtres'\n                  : 'L\\'historique des emprunts apparatra ici au fur et  mesure'\n                }\n              </p>\n              {(Object.values(filters).some(f => f && f !== 'all') || searchQuery) && (\n                <button className=\"action-btn primary\" onClick={resetFilters}>\n                  <X size={16} />\n                  Effacer les filtres\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <style>{`\n        .history-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(15, 23, 42, 0.6);\n          backdrop-filter: blur(12px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 40px 20px;\n          animation: fadeIn 0.3s ease-out;\n        }\n\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        .history-modal {\n          background: #FFFFFF;\n          border-radius: 24px;\n          width: 100%;\n          max-width: 1400px;\n          max-height: 90vh;\n          overflow: hidden;\n          display: flex;\n          flex-direction: column;\n          box-shadow: \n            0 25px 50px rgba(0, 0, 0, 0.25),\n            0 0 0 1px rgba(255, 255, 255, 0.1);\n          animation: slideUp 0.4s ease-out;\n        }\n\n        @keyframes slideUp {\n          from { \n            opacity: 0;\n            transform: translateY(30px) scale(0.95);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n        \n        /* HEADER AMLIOR */\n        .modal-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 28px 40px;\n          background: linear-gradient(135deg, #2E453A 0%, #1f2e26 100%);\n          color: #f8fafc;\n          border-bottom: 1px solid rgba(46, 69, 58, 0.3);\n          flex-shrink: 0;\n          min-height: auto;\n        }\n        \n        .header-left {\n          display: flex;\n          align-items: center;\n          gap: 24px;\n          flex: 1;\n        }\n        \n        .header-icon {\n          width: 56px;\n          height: 56px;\n          background: rgba(248, 250, 252, 0.15);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          backdrop-filter: blur(10px);\n          flex-shrink: 0;\n        }\n        \n        .header-text {\n          flex: 1;\n        }\n        \n        .modal-title {\n          font-size: 24px;\n          font-weight: 800;\n          margin: 0 0 10px 0;\n          letter-spacing: -0.025em;\n          line-height: 1.2;\n        }\n        \n        .header-stats {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          flex-wrap: wrap;\n        }\n        \n        .stat-pill {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 6px 12px;\n          background: rgba(248, 250, 252, 0.1);\n          border: 1px solid rgba(248, 250, 252, 0.15);\n          border-radius: 20px;\n          font-size: 13px;\n          font-weight: 500;\n          backdrop-filter: blur(10px);\n        }\n        \n        .stat-pill.active { \n          background: rgba(194, 87, 27, 0.2);\n          border-color: rgba(194, 87, 27, 0.3);\n          color: #f97316;\n        }\n        .stat-pill.returned { \n          background: rgba(46, 69, 58, 0.2);\n          border-color: rgba(46, 69, 58, 0.3);\n          color: #4ade80;\n        }\n        .stat-pill.overdue { \n          background: rgba(220, 38, 38, 0.2);\n          border-color: rgba(220, 38, 38, 0.3);\n          color: #fca5a5;\n        }\n        \n        .close-button {\n          background: rgba(248, 250, 252, 0.1);\n          border: 1px solid rgba(248, 250, 252, 0.15);\n          color: #f8fafc;\n          padding: 12px;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          backdrop-filter: blur(10px);\n        }\n        \n        .close-button:hover {\n          background: rgba(248, 250, 252, 0.2);\n          transform: scale(1.05);\n        }\n\n        /* BARRE DE CONTRLES */\n        .controls-bar {\n          display: flex;\n          align-items: center;\n          gap: 24px;\n          padding: 20px 40px;\n          background: #fafafa;\n          border-bottom: 1px solid #e5e7eb;\n          flex-shrink: 0;\n        }\n\n        .search-section {\n          flex: 1;\n          max-width: 500px;\n        }\n\n        .search-input-wrapper {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .search-icon {\n          position: absolute;\n          left: 16px;\n          color: #6b7280;\n          z-index: 2;\n        }\n\n        .search-input {\n          width: 100%;\n          height: 48px;\n          padding: 0 48px 0 48px;\n          border: 2px solid #e5e7eb;\n          border-radius: 12px;\n          font-size: 16px;\n          background: #ffffff;\n          color: #1f2937;\n          transition: all 0.2s ease;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        .search-input:focus {\n          outline: none;\n          border-color: #2E453A;\n          box-shadow: 0 0 0 3px rgba(46, 69, 58, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        .clear-search {\n          position: absolute;\n          right: 16px;\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: #6b7280;\n          padding: 4px;\n          border-radius: 4px;\n          transition: all 0.2s ease;\n        }\n\n        .clear-search:hover {\n          color: #1f2937;\n          background: #f3f4f6;\n        }\n\n        .quick-actions {\n          display: flex;\n          gap: 12px;\n        }\n\n        .action-btn {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 12px 20px;\n          border-radius: 12px;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          border: none;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        .action-btn.secondary {\n          background: #ffffff;\n          color: #374151;\n          border: 2px solid #e5e7eb;\n        }\n\n        .action-btn.secondary:hover {\n          background: #f9fafb;\n          border-color: #d1d5db;\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n\n        .action-btn.primary {\n          background: linear-gradient(135deg, #2E453A 0%, #1f2e26 100%);\n          color: #ffffff;\n          border: 2px solid transparent;\n        }\n\n        .action-btn.primary:hover {\n          background: linear-gradient(135deg, #1f2e26 0%, #0f1712 100%);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(46, 69, 58, 0.4);\n        }\n\n        .action-text {\n          display: inline;\n        }\n\n        /* BARRE DE FILTRES */\n        .filters-bar {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 14px 40px;\n          background: #ffffff;\n          border-bottom: 1px solid #e5e7eb;\n          gap: 24px;\n          flex-shrink: 0;\n        }\n\n        .filters-group {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          flex-wrap: wrap;\n        }\n\n        .filter-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: #f8fafc;\n          padding: 8px 12px;\n          border-radius: 8px;\n          border: 1px solid #e2e8f0;\n        }\n\n        .filter-icon {\n          color: #64748b;\n          flex-shrink: 0;\n        }\n\n        .filter-input {\n          border: none;\n          background: transparent;\n          color: #1e293b;\n          font-size: 14px;\n          min-width: 0;\n        }\n\n        .filter-input:focus {\n          outline: none;\n        }\n\n        .filter-input.date {\n          width: 130px;\n        }\n\n        .filter-input.select {\n          cursor: pointer;\n          min-width: 120px;\n        }\n\n        .filter-separator {\n          margin: 0 4px;\n          color: #64748b;\n          font-size: 14px;\n        }\n\n        .reset-filters-btn {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 8px 12px;\n          background: #fef3f2;\n          border: 1px solid #fecaca;\n          border-radius: 8px;\n          color: #dc2626;\n          font-size: 12px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .reset-filters-btn:hover {\n          background: #fee2e2;\n          color: #b91c1c;\n        }\n\n        .results-counter {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .results-text {\n          font-size: 14px;\n          color: #64748b;\n          font-weight: 500;\n        }\n\n        .total-count {\n          color: #94a3b8;\n        }\n\n        /* CONTENU PRINCIPAL */\n        .history-content {\n          flex: 1;\n          overflow-y: auto;\n          padding: 24px 40px;\n          background: #fafafa;\n        }\n\n        .loading-state {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 80px 32px;\n          text-align: center;\n          color: #64748b;\n        }\n\n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid #e2e8f0;\n          border-top: 3px solid #2E453A;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-bottom: 16px;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .history-list {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        /* CARTES D'HISTORIQUE AMLIORES */\n        .history-item {\n          background: #ffffff;\n          border: 1px solid #e5e7eb;\n          border-radius: 16px;\n          overflow: hidden;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          position: relative;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        .history-item::before {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          width: 4px;\n          background: #64748b;\n          transition: all 0.3s ease;\n        }\n\n        .history-item.active::before { background: #C2571B; }\n        .history-item.returned::before { background: #2E453A; }\n        .history-item.overdue::before { background: #dc2626; }\n\n        .history-item:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n          border-color: #d1d5db;\n        }\n\n        .item-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 24px 16px 24px;\n          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n          border-bottom: 1px solid #e2e8f0;\n        }\n\n        .status-badge {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 6px 12px;\n          background: rgba(255, 255, 255, 0.8);\n          border: 1px solid #e2e8f0;\n          border-radius: 20px;\n          backdrop-filter: blur(10px);\n        }\n\n        .status-text {\n          font-size: 12px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .item-dates {\n          display: flex;\n          gap: 16px;\n          align-items: center;\n        }\n\n        .date-info {\n          text-align: right;\n        }\n\n        .date-label {\n          display: block;\n          font-size: 11px;\n          color: #64748b;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n          margin-bottom: 2px;\n        }\n\n        .date-value {\n          display: block;\n          font-size: 13px;\n          font-weight: 600;\n          color: #1e293b;\n        }\n\n        .date-info.returned .date-value {\n          color: #2E453A;\n        }\n\n        .item-body {\n          padding: 24px;\n          display: grid;\n          grid-template-columns: 2fr 1.5fr 1fr;\n          gap: 32px;\n          align-items: start;\n        }\n\n        /* SECTION DOCUMENT */\n        .document-section {\n          display: flex;\n          align-items: flex-start;\n          gap: 16px;\n        }\n\n        .document-cover {\n          width: 56px;\n          height: 72px;\n          background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #64748b;\n          flex-shrink: 0;\n          overflow: hidden;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n\n        .document-cover img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .document-info {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .document-title {\n          font-size: 18px;\n          font-weight: 700;\n          color: #1e293b;\n          margin: 0 0 6px 0;\n          line-height: 1.4;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n\n        .document-author {\n          font-size: 14px;\n          color: #64748b;\n          margin: 0 0 12px 0;\n          font-style: italic;\n        }\n\n        .document-category {\n          display: inline-block;\n          background: linear-gradient(135deg, #2E453A 0%, #1f2e26 100%);\n          color: #f8fafc;\n          padding: 4px 10px;\n          border-radius: 12px;\n          font-size: 11px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        /* SECTION EMPRUNTEUR */\n        .borrower-section {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        .borrower-header {\n          display: flex;\n          align-items: center;\n          justify-content: flex-start;\n        }\n\n        .borrower-type-badge {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 6px 12px;\n          background: #f8fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 16px;\n          font-size: 11px;\n          font-weight: 600;\n          color: #475569;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .borrower-details {\n          flex: 1;\n        }\n\n        .borrower-name {\n          font-size: 16px;\n          font-weight: 700;\n          color: #1e293b;\n          margin: 0 0 8px 0;\n          line-height: 1.3;\n        }\n\n        .borrower-meta {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .borrower-id {\n          font-size: 13px;\n          color: #C2571B;\n          font-weight: 600;\n          font-family: 'Monaco', 'Menlo', monospace;\n        }\n\n        .borrower-extra {\n          font-size: 13px;\n          color: #64748b;\n        }\n\n        /* TIMELINE COMPACTE */\n        .timeline-section {\n          display: flex;\n          justify-content: center;\n        }\n\n        .timeline-compact {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          padding: 16px;\n          background: #f8fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          max-width: fit-content;\n        }\n\n        .timeline-point {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 8px;\n          position: relative;\n        }\n\n        .point-dot {\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n          background: #64748b;\n          position: relative;\n          z-index: 2;\n        }\n\n        .timeline-point.start .point-dot { background: #C2571B; }\n        .timeline-point.expected .point-dot { background: #f59e0b; }\n        .timeline-point.end .point-dot { background: #2E453A; }\n\n        .point-info {\n          text-align: center;\n        }\n\n        .point-date {\n          display: block;\n          font-size: 12px;\n          font-weight: 600;\n          color: #1e293b;\n          margin-bottom: 2px;\n        }\n\n        .point-label {\n          display: block;\n          font-size: 10px;\n          color: #64748b;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .timeline-line {\n          height: 2px;\n          width: 24px;\n          background: #e2e8f0;\n          position: relative;\n          top: -14px;\n        }\n\n        /* NOTES */\n        .item-notes {\n          padding: 16px 24px;\n          background: #fffbeb;\n          border-top: 1px solid #fed7aa;\n        }\n\n        .notes-content {\n          font-size: 13px;\n          color: #92400e;\n          line-height: 1.5;\n        }\n\n        /* TAT VIDE */\n        .empty-state {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 80px 32px;\n          text-align: center;\n        }\n\n        .empty-icon {\n          color: #cbd5e1;\n          margin-bottom: 24px;\n        }\n\n        .empty-title {\n          font-size: 24px;\n          font-weight: 700;\n          margin: 0 0 12px 0;\n          color: #1e293b;\n        }\n\n        .empty-description {\n          margin: 0 0 32px 0;\n          font-size: 16px;\n          color: #64748b;\n          max-width: 400px;\n          line-height: 1.6;\n        }\n\n        /* CLASSES UTILITAIRES */\n        .text-blue-500 { color: #C2571B; }\n        .text-green-500 { color: #2E453A; }\n        .text-red-500 { color: #dc2626; }\n\n        /* RESPONSIVE DESIGN */\n        @media (max-width: 1200px) {\n          .item-body {\n            grid-template-columns: 1fr 1fr;\n            gap: 24px;\n          }\n          \n          .timeline-section {\n            grid-column: 1 / -1;\n            justify-content: flex-start;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .history-modal {\n            margin: 16px;\n            max-height: calc(100vh - 32px);\n            border-radius: 20px;\n          }\n\n          .history-overlay {\n            padding: 16px;\n          }\n\n          .modal-header {\n            padding: 20px;\n            flex-direction: column;\n            gap: 16px;\n            text-align: center;\n          }\n\n          .header-left {\n            flex-direction: column;\n            gap: 16px;\n          }\n\n          .header-stats {\n            justify-content: center;\n          }\n\n          .controls-bar {\n            padding: 16px 20px;\n            flex-direction: column;\n            gap: 16px;\n            align-items: stretch;\n          }\n\n          .search-section {\n            max-width: none;\n          }\n\n          .quick-actions {\n            justify-content: center;\n          }\n\n          .action-text {\n            display: none;\n          }\n\n          .filters-bar {\n            padding: 14px 20px;\n            flex-direction: column;\n            gap: 16px;\n            align-items: stretch;\n          }\n\n          .filters-group {\n            flex-direction: column;\n            gap: 12px;\n          }\n\n          .filter-item {\n            justify-content: space-between;\n          }\n\n          .history-content {\n            padding: 16px 20px;\n          }\n\n          .item-body {\n            grid-template-columns: 1fr;\n            gap: 20px;\n          }\n\n          .document-section {\n            flex-direction: column;\n            align-items: center;\n            text-align: center;\n          }\n\n          .timeline-compact {\n            flex-direction: column;\n            gap: 12px;\n          }\n\n          .timeline-line {\n            width: 2px;\n            height: 16px;\n            top: 0;\n          }\n\n          .item-header {\n            flex-direction: column;\n            gap: 12px;\n            text-align: center;\n          }\n\n          .item-dates {\n            flex-direction: column;\n            gap: 8px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .modal-header {\n            padding: 20px 16px;\n          }\n\n          .modal-title {\n            font-size: 24px;\n          }\n\n          .controls-bar, .filters-bar, .history-content {\n            padding-left: 16px;\n            padding-right: 16px;\n          }\n\n          .item-header, .item-body, .item-notes {\n            padding-left: 16px;\n            padding-right: 16px;\n          }\n\n          .stat-pill {\n            font-size: 12px;\n            padding: 4px 8px;\n          }\n        }\n      `}</style>\n\n      {/* Export Dialog */}\n      {showExportDialog && (\n        <ExportDialog\n          isOpen={showExportDialog}\n          onClose={() => setShowExportDialog(false)}\n          onExport={handleExport}\n          availableData={{\n            documents: false,\n            borrowers: false,\n            borrowHistory: true\n          }}\n        />\n      )}\n    </div>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { \n  Clock, \n  User, \n  Calendar, \n  CheckCircle,\n  AlertTriangle,\n  Search,\n  X,\n  RotateCcw\n} from 'lucide-react';\n\n// Types\ninterface Document {\n  id?: number;\n  titre: string;\n  auteur: string;\n  editeur: string;\n  annee: string;\n  nomEmprunteur?: string;\n  dateEmprunt?: string;\n  dateRetourPrevu?: string;\n}\n\ninterface BorrowedDocumentsProps {\n  documents: Document[];\n  onReturn: (documentId: number) => void;\n}\n\ntype SortBy = 'borrower' | 'date' | 'title' | 'status';\ntype FilterStatus = 'all' | 'normal' | 'warning' | 'overdue';\n\ninterface StatusInfo {\n  status: string;\n  label: string;\n  className: string;\n  icon: React.ComponentType<any>;\n}\n\n// Utility functions\nconst getStatusInfo = (document: Document): StatusInfo => {\n  const expectedDate = new Date(document.dateRetourPrevu!);\n  const today = new Date();\n  const diffDays = Math.floor((expectedDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n  \n  if (diffDays < 0) {\n    return {\n      status: 'overdue',\n      label: `En retard de ${Math.abs(diffDays)} jour(s)`,\n      className: 'status-overdue',\n      icon: AlertTriangle\n    };\n  } else if (diffDays <= 3) {\n    return {\n      status: 'warning', \n      label: diffDays === 0 ? ' rendre aujourd\\'hui' : `${diffDays} jour(s) restant(s)`,\n      className: 'status-warning',\n      icon: Clock\n    };\n  } else {\n    return {\n      status: 'normal',\n      label: `${diffDays} jour(s) restant(s)`,\n      className: 'status-normal', \n      icon: CheckCircle\n    };\n  }\n};\n\nconst getStatusPriority = (doc: Document): number => {\n  const expectedDate = new Date(doc.dateRetourPrevu!);\n  const today = new Date();\n  const diffDays = Math.floor((expectedDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n  if (diffDays < 0) return 3; // overdue\n  if (diffDays <= 3) return 2; // warning\n  return 1; // normal\n};\n\n// Sub-components\nconst SearchBar: React.FC<{\n  searchQuery: string;\n  onSearchChange: (query: string) => void;\n}> = ({ searchQuery, onSearchChange }) => (\n  <div className=\"search-container\">\n    <div className=\"search-input-wrapper\">\n      <Search className=\"search-icon\" size={20} />\n      <input\n        type=\"text\"\n        placeholder=\"Rechercher par document, auteur, emprunteur...\"\n        value={searchQuery}\n        onChange={(e) => onSearchChange(e.target.value)}\n        className=\"search-input\"\n      />\n      {searchQuery && (\n        <button \n          className=\"clear-search\"\n          onClick={() => onSearchChange('')}\n        >\n          <X size={18} />\n        </button>\n      )}\n    </div>\n  </div>\n);\n\nconst FilterControls: React.FC<{\n  sortBy: SortBy;\n  filterStatus: FilterStatus;\n  onSortChange: (sort: SortBy) => void;\n  onFilterChange: (filter: FilterStatus) => void;\n}> = ({ sortBy, filterStatus, onSortChange, onFilterChange }) => (\n  <div className=\"filter-controls\">\n    <select \n      value={sortBy} \n      onChange={(e) => onSortChange(e.target.value as SortBy)}\n      className=\"filter-select\"\n    >\n      <option value=\"date\">Trier par date d'emprunt</option>\n      <option value=\"title\">Trier par titre</option>\n      <option value=\"borrower\">Trier par emprunteur</option>\n      <option value=\"status\">Trier par statut</option>\n    </select>\n\n    <select \n      value={filterStatus} \n      onChange={(e) => onFilterChange(e.target.value as FilterStatus)}\n      className=\"filter-select\"\n    >\n      <option value=\"all\">Tous les statuts</option>\n      <option value=\"overdue\">En retard</option>\n      <option value=\"warning\"> rendre bientt</option>\n      <option value=\"normal\">Dans les temps</option>\n    </select>\n  </div>\n);\n\nconst DocumentCard: React.FC<{\n  document: Document;\n  onReturn: (doc: Document) => void;\n}> = ({ document, onReturn }) => {\n  const statusInfo = getStatusInfo(document);\n  const StatusIcon = statusInfo.icon;\n  \n  return (\n    <div className={`document-card ${statusInfo.className}`}>\n      <div className=\"document-header\">\n        <div className=\"document-info\">\n          <h3 className=\"document-title\">{document.titre}</h3>\n          <p className=\"document-author\">{document.auteur}</p>\n          <p className=\"document-details\">\n            {document.editeur}  {document.annee}\n          </p>\n        </div>\n        <div className=\"document-status\">\n          <StatusIcon size={20} />\n        </div>\n      </div>\n\n      <div className=\"borrower-info\">\n        <div className=\"borrower-details\">\n          <div className=\"borrower-name\">\n            <User size={16} />\n            <span>{document.nomEmprunteur}</span>\n          </div>\n          <div className=\"borrow-dates\">\n            <div className=\"date-info\">\n              <Calendar size={14} />\n              <span>Emprunt le {new Date(document.dateEmprunt!).toLocaleDateString('fr-FR')}</span>\n            </div>\n            <div className=\"date-info\">\n              <Clock size={14} />\n              <span> rendre le {new Date(document.dateRetourPrevu!).toLocaleDateString('fr-FR')}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"document-status-bar\">\n        <div className={`status-badge ${statusInfo.className}`}>\n          <StatusIcon size={16} />\n          <span>{statusInfo.label}</span>\n        </div>\n      </div>\n\n      <div className=\"document-actions\">\n        <button\n          onClick={() => onReturn(document)}\n          className=\"return-button\"\n          title=\"Marquer comme rendu\"\n        >\n          <RotateCcw size={16} />\n          Retour\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst EmptyState: React.FC<{\n  hasDocuments: boolean;\n  searchQuery: string;\n  filterStatus: FilterStatus;\n  onClearFilters: () => void;\n}> = ({ hasDocuments, searchQuery, filterStatus, onClearFilters }) => (\n  <div className=\"empty-state\">\n    <div className=\"empty-icon\">\n      {searchQuery ? (\n        <Search size={80} />\n      ) : (\n        <Clock size={80} />\n      )}\n    </div>\n    <h3 className=\"empty-title\">\n      {!hasDocuments ? 'Aucun document emprunt' : 'Aucun rsultat'}\n    </h3>\n    <p className=\"empty-description\">\n      {!hasDocuments \n        ? 'Tous les documents sont actuellement disponibles dans la bibliothque.'\n        : searchQuery \n        ? `Aucun rsultat pour \"${searchQuery}\"`\n        : 'Aucun document ne correspond aux filtres slectionns.'\n      }\n    </p>\n    {(searchQuery || filterStatus !== 'all') && (\n      <button \n        className=\"clear-filters\"\n        onClick={onClearFilters}\n      >\n        Effacer les filtres\n      </button>\n    )}\n  </div>\n);\n\n// Main Component\nexport const BorrowedDocuments: React.FC<BorrowedDocumentsProps> = ({ documents, onReturn }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortBy, setSortBy] = useState<SortBy>('date');\n  const [filterStatus, setFilterStatus] = useState<FilterStatus>('all');\n\n  const handleReturn = (document: Document) => {\n    if (window.confirm(`Confirmer le retour de \"${document.titre}\" emprunt par ${document.nomEmprunteur} ?`)) {\n      onReturn(document.id!);\n    }\n  };\n\n  const handleClearFilters = () => {\n    setSearchQuery('');\n    setFilterStatus('all');\n  };\n\n  // Mock data for demonstration\n  const mockDocuments = documents.length > 0 ? documents : [\n    {\n      id: 1,\n      titre: \"Le Petit Prince\",\n      auteur: \"Antoine de Saint-Exupry\",\n      editeur: \"Gallimard\",\n      annee: \"1943\",\n      nomEmprunteur: \"Marie Dubois\",\n      dateEmprunt: \"2025-07-15\",\n      dateRetourPrevu: \"2025-07-30\"\n    },\n    {\n      id: 2,\n      titre: \"1984\",\n      auteur: \"George Orwell\",\n      editeur: \"Secker & Warburg\",\n      annee: \"1949\",\n      nomEmprunteur: \"Jean Martin\",\n      dateEmprunt: \"2025-07-20\",\n      dateRetourPrevu: \"2025-07-22\"\n    },\n    {\n      id: 3,\n      titre: \"L'tranger\",\n      auteur: \"Albert Camus\",\n      editeur: \"Gallimard\",\n      annee: \"1942\",\n      nomEmprunteur: \"Sophie Leroy\",\n      dateEmprunt: \"2025-07-10\",\n      dateRetourPrevu: \"2025-07-20\"\n    }\n  ];\n\n  // Processed documents with memoization for performance\n  const processedDocuments = useMemo(() => {\n    return mockDocuments\n      .filter(doc => {\n        if (!searchQuery) return true;\n        const query = searchQuery.toLowerCase();\n        return (\n          doc.titre.toLowerCase().includes(query) ||\n          doc.auteur.toLowerCase().includes(query) ||\n          doc.nomEmprunteur?.toLowerCase().includes(query)\n        );\n      })\n      .filter(doc => {\n        if (filterStatus === 'all') return true;\n        \n        const expectedDate = new Date(doc.dateRetourPrevu!);\n        const today = new Date();\n        const diffDays = Math.floor((expectedDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n        \n        switch (filterStatus) {\n          case 'overdue': return diffDays < 0;\n          case 'warning': return diffDays >= 0 && diffDays <= 3;\n          case 'normal': return diffDays > 3;\n          default: return true;\n        }\n      })\n      .sort((a, b) => {\n        switch (sortBy) {\n          case 'title': return a.titre.localeCompare(b.titre);\n          case 'borrower': return (a.nomEmprunteur || '').localeCompare(b.nomEmprunteur || '');\n          case 'date': return new Date(a.dateEmprunt!).getTime() - new Date(b.dateEmprunt!).getTime();\n          case 'status': return getStatusPriority(b) - getStatusPriority(a);\n          default: return 0;\n        }\n      });\n  }, [mockDocuments, searchQuery, filterStatus, sortBy]);\n\n  return (\n    <div className=\"borrowed-documents-container\">\n      <div className=\"page-content\">\n        {/* Header Section */}\n        <div className=\"page-header\">\n          <div className=\"header-main\">\n            <div className=\"header-icon\">\n              <Clock size={36} />\n            </div>\n            <div className=\"header-text\">\n              <h1 className=\"page-title\">Documents emprunts</h1>\n              <p className=\"page-subtitle\">\n                {mockDocuments.length} document(s) actuellement en circulation\n              </p>\n            </div>\n          </div>\n          \n          {/* Controls Section */}\n          <div className=\"enhanced-controls\">\n            <div className=\"controls-row\">\n              <SearchBar \n                searchQuery={searchQuery}\n                onSearchChange={setSearchQuery}\n              />\n              <FilterControls\n                sortBy={sortBy}\n                filterStatus={filterStatus}\n                onSortChange={setSortBy}\n                onFilterChange={setFilterStatus}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Results Summary */}\n        {searchQuery && (\n          <div className=\"results-summary\">\n            <span className=\"results-count\">\n              {processedDocuments.length} rsultat(s) pour \"{searchQuery}\"\n            </span>\n          </div>\n        )}\n\n        {/* Content Section */}\n        {processedDocuments.length > 0 ? (\n          <div className=\"documents-grid\">\n            {processedDocuments.map(document => (\n              <DocumentCard\n                key={document.id}\n                document={document}\n                onReturn={handleReturn}\n              />\n            ))}\n          </div>\n        ) : (\n          <EmptyState\n            hasDocuments={mockDocuments.length > 0}\n            searchQuery={searchQuery}\n            filterStatus={filterStatus}\n            onClearFilters={handleClearFilters}\n          />\n        )}\n      </div>\n\n      <style>{`\n        /* Variables CSS pour la palette de couleurs */\n        :root {\n          --dark-green: #3E5C49;\n          --medium-green: #5A7A65;\n          --light-green: #7A9A85;\n          --warm-brown: #C2571B;\n          --medium-brown: #A04315;\n          --dark-brown: #8A3612;\n          --cream: #F8F6F0;\n          --light-cream: #FEFDFB;\n          --beige: #E5DCC2;\n          --light-beige: #F3EED9;\n          --warm-beige: #C2A678;\n          --text-dark: #2A2A2A;\n          --text-medium: #4A4A4A;\n          --text-light: #6A6A6A;\n          --white: #FFFFFF;\n          --error: #DC2626;\n          --warning: #D97706;\n          --success: #059669;\n        }\n\n        .borrowed-documents-container {\n          height: 100%;\n          overflow-y: auto;\n          background: linear-gradient(135deg, var(--cream) 0%, var(--light-beige) 100%);\n          min-height: 100vh;\n        }\n\n        .page-content {\n          padding: 32px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        /* Header Styles - Fond vert sombre */\n        .page-header {\n          background: linear-gradient(135deg, var(--dark-green) 0%, var(--medium-green) 100%);\n          border-radius: 24px;\n          padding: 0;\n          margin-bottom: 32px;\n          box-shadow: \n            0 20px 60px rgba(62, 92, 73, 0.3),\n            0 8px 32px rgba(62, 92, 73, 0.2);\n          border: 1px solid rgba(62, 92, 73, 0.3);\n          backdrop-filter: blur(20px);\n          overflow: hidden;\n          position: relative;\n        }\n\n        .page-header::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          background: linear-gradient(135deg, \n            rgba(255, 255, 255, 0.1) 0%, \n            rgba(255, 255, 255, 0.05) 50%, \n            transparent 100%);\n          pointer-events: none;\n        }\n\n        .header-main {\n          display: flex;\n          align-items: center;\n          gap: 32px;\n          padding: 40px 40px 32px 40px;\n          position: relative;\n          z-index: 2;\n        }\n\n        .header-icon {\n          width: 100px;\n          height: 100px;\n          background: linear-gradient(135deg, var(--warm-brown) 0%, var(--medium-brown) 30%, var(--dark-brown) 100%);\n          border-radius: 28px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: var(--cream);\n          box-shadow: \n            0 16px 40px rgba(194, 87, 27, 0.4),\n            inset 0 2px 4px rgba(255, 255, 255, 0.2);\n          position: relative;\n          transform: rotate(-2deg);\n          transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        }\n\n        .header-icon:hover {\n          transform: rotate(0deg) scale(1.05);\n          box-shadow: \n            0 20px 50px rgba(194, 87, 27, 0.5),\n            inset 0 2px 4px rgba(255, 255, 255, 0.3);\n        }\n\n        .header-icon::before {\n          content: '';\n          position: absolute;\n          inset: 3px;\n          background: linear-gradient(135deg, \n            rgba(255, 255, 255, 0.3) 0%, \n            rgba(255, 255, 255, 0.1) 50%, \n            transparent 100%);\n          border-radius: 25px;\n        }\n\n        .header-icon::after {\n          content: '';\n          position: absolute;\n          bottom: -2px;\n          right: -2px;\n          width: 24px;\n          height: 24px;\n          background: linear-gradient(135deg, var(--success) 0%, #047857 100%);\n          border-radius: 50%;\n          border: 3px solid var(--white);\n          box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);\n        }\n\n        .header-text {\n          flex: 1;\n        }\n\n        .page-title {\n          font-size: 36px;\n          font-weight: 900;\n          margin: 0 0 12px 0;\n          letter-spacing: -1px;\n          color: var(--cream);\n          position: relative;\n          line-height: 1.1;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        .page-title::after {\n          content: '';\n          position: absolute;\n          bottom: -4px;\n          left: 0;\n          width: 60px;\n          height: 3px;\n        }\n\n        .page-subtitle {\n          font-size: 18px;\n          color: var(--beige);\n          margin: 0;\n          font-weight: 600;\n          opacity: 0.95;\n        }\n\n        /* Controls Styles */\n        .enhanced-controls {\n          border-top: 1px solid rgba(255, 255, 255, 0.15);\n          padding: 32px 40px 40px 40px;\n          background: linear-gradient(135deg, \n            rgba(255, 255, 255, 0.1) 0%, \n            rgba(255, 255, 255, 0.05) 100%);\n          position: relative;\n          z-index: 2;\n        }\n\n        .enhanced-controls::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 40px;\n          right: 40px;\n          height: 1px;\n          background: linear-gradient(90deg, \n            transparent 0%, \n            rgba(255, 255, 255, 0.3) 20%, \n            rgba(194, 87, 27, 0.4) 50%, \n            rgba(255, 255, 255, 0.3) 80%, \n            transparent 100%);\n        }\n\n        .controls-row {\n          display: flex;\n          gap: 24px;\n          align-items: center;\n          justify-content: space-between;\n          flex-wrap: wrap;\n        }\n\n        .search-container {\n          flex: 1;\n          min-width: 320px;\n        }\n\n        .search-input-wrapper {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .search-icon {\n          position: absolute;\n          left: 18px;\n          color: var(--text-light);\n          z-index: 2;\n        }\n\n        .search-input {\n          width: 100%;\n          padding: 18px 18px 18px 52px;\n          border: 2px solid var(--beige);\n          border-radius: 16px;\n          font-size: 15px;\n          background: var(--white);\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          color: var(--text-dark);\n          font-weight: 500;\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);\n        }\n\n        .search-input::placeholder {\n          color: var(--text-light);\n          font-weight: 400;\n        }\n\n        .search-input:focus {\n          outline: none;\n          border-color: var(--warm-brown);\n          box-shadow: 0 0 0 4px rgba(194, 87, 27, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);\n          background: var(--light-cream);\n          transform: translateY(-1px);\n        }\n\n        .clear-search {\n          position: absolute;\n          right: 14px;\n          padding: 6px;\n          border: none;\n          background: var(--light-beige);\n          color: var(--text-medium);\n          cursor: pointer;\n          border-radius: 8px;\n          transition: all 0.2s ease;\n        }\n\n        .clear-search:hover {\n          background: var(--beige);\n          color: var(--text-dark);\n          transform: scale(1.05);\n        }\n\n        .filter-controls {\n          display: flex;\n          gap: 16px;\n        }\n\n        .filter-select {\n          padding: 16px 20px;\n          border: 2px solid var(--beige);\n          border-radius: 12px;\n          background: var(--white);\n          font-size: 14px;\n          color: var(--text-dark);\n          cursor: pointer;\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          min-width: 190px;\n          font-weight: 500;\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);\n        }\n\n        .filter-select:focus {\n          outline: none;\n          border-color: var(--warm-brown);\n          box-shadow: 0 0 0 4px rgba(194, 87, 27, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);\n          background: var(--light-cream);\n          transform: translateY(-1px);\n        }\n\n        /* Results Summary */\n        .results-summary {\n          background: rgba(255, 255, 255, 0.9);\n          border-radius: 16px;\n          padding: 18px 26px;\n          margin-bottom: 20px;\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);\n          border: 1px solid var(--beige);\n          backdrop-filter: blur(10px);\n        }\n\n        .results-count {\n          font-size: 15px;\n          color: var(--text-medium);\n          font-weight: 600;\n        }\n\n        /* Documents Grid */\n        .documents-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));\n          gap: 24px;\n        }\n\n        /* Document Card Styles */\n        .document-card {\n          background: var(--white);\n          border-radius: 20px;\n          padding: 28px;\n          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          border-left: 5px solid var(--beige);\n          border: 1px solid rgba(229, 220, 194, 0.3);\n          position: relative;\n          overflow: hidden;\n        }\n\n        .document-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 2px;\n          background: linear-gradient(90deg, transparent 0%, var(--beige) 50%, transparent 100%);\n        }\n\n        .document-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 20px 56px rgba(0, 0, 0, 0.12);\n        }\n\n        .document-card.status-overdue {\n          border-left-color: var(--error);\n          background: linear-gradient(135deg, #FEF2F2 0%, var(--white) 100%);\n        }\n\n        .document-card.status-overdue::before {\n          background: linear-gradient(90deg, transparent 0%, var(--error) 50%, transparent 100%);\n        }\n\n        .document-card.status-warning {\n          border-left-color: var(--warning);\n          background: linear-gradient(135deg, #FFFBEB 0%, var(--white) 100%);\n        }\n\n        .document-card.status-warning::before {\n          background: linear-gradient(90deg, transparent 0%, var(--warning) 50%, transparent 100%);\n        }\n\n        .document-card.status-normal {\n          border-left-color: var(--success);\n          background: linear-gradient(135deg, #ECFDF5 0%, var(--white) 100%);\n        }\n\n        .document-card.status-normal::before {\n          background: linear-gradient(90deg, transparent 0%, var(--success) 50%, transparent 100%);\n        }\n\n        .document-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 24px;\n        }\n\n        .document-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: var(--text-dark);\n          margin: 0 0 10px 0;\n          line-height: 1.3;\n          letter-spacing: -0.2px;\n        }\n\n        .document-author {\n          font-size: 15px;\n          color: var(--dark-green);\n          font-weight: 700;\n          margin: 0 0 6px 0;\n        }\n\n        .document-details {\n          font-size: 13px;\n          color: var(--text-light);\n          margin: 0;\n          font-weight: 500;\n        }\n\n        .document-status {\n          padding: 10px;\n          border-radius: 12px;\n          background: var(--light-beige);\n          backdrop-filter: blur(4px);\n          color: var(--dark-green);\n        }\n\n        .borrower-info {\n          padding: 20px;\n          background: var(--light-beige);\n          border-radius: 16px;\n          margin-bottom: 20px;\n          border: 1px solid var(--beige);\n          backdrop-filter: blur(4px);\n        }\n\n        .borrower-name {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          font-weight: 700;\n          color: var(--text-dark);\n          margin-bottom: 14px;\n          font-size: 15px;\n        }\n\n        .borrower-name svg {\n          color: var(--dark-green);\n        }\n\n        .borrow-dates {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .date-info {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          font-size: 13px;\n          color: var(--text-medium);\n          font-weight: 500;\n        }\n\n        .date-info svg {\n          color: var(--warm-beige);\n        }\n\n        .document-status-bar {\n          margin-bottom: 20px;\n        }\n\n        .status-badge {\n          display: inline-flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 16px;\n          border-radius: 24px;\n          font-size: 13px;\n          font-weight: 700;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n\n        .status-badge.status-overdue {\n          background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);\n          color: var(--error);\n        }\n\n        .status-badge.status-warning {\n          background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);\n          color: var(--warning);\n        }\n\n        .status-badge.status-normal {\n          background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);\n          color: var(--success);\n        }\n\n        .document-actions {\n          display: flex;\n          justify-content: flex-end;\n        }\n\n        .return-button {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          padding: 14px 24px;\n          background: linear-gradient(135deg, var(--dark-green) 0%, var(--medium-green) 100%);\n          color: var(--cream);\n          border: none;\n          border-radius: 12px;\n          font-size: 14px;\n          font-weight: 700;\n          cursor: pointer;\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          box-shadow: 0 6px 20px rgba(62, 92, 73, 0.25);\n        }\n\n        .return-button:hover {\n          background: linear-gradient(135deg, var(--medium-green) 0%, var(--light-green) 100%);\n          transform: translateY(-2px);\n          box-shadow: 0 12px 32px rgba(62, 92, 73, 0.35);\n        }\n\n        .return-button:active {\n          transform: translateY(0);\n          box-shadow: 0 4px 16px rgba(62, 92, 73, 0.3);\n        }\n\n        /* Empty State */\n        .empty-state {\n          text-align: center;\n          padding: 80px 40px;\n          background: rgba(255, 255, 255, 0.95);\n          border-radius: 20px;\n          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);\n          border: 1px solid var(--beige);\n          backdrop-filter: blur(10px);\n        }\n\n        .empty-icon {\n          margin-bottom: 28px;\n          color: var(--warm-beige);\n        }\n\n        .empty-title {\n          font-size: 26px;\n          font-weight: 800;\n          color: var(--text-dark);\n          margin: 0 0 16px 0;\n          letter-spacing: -0.4px;\n        }\n\n        .empty-description {\n          font-size: 16px;\n          color: var(--text-medium);\n          margin: 0 0 36px 0;\n          line-height: 1.6;\n          font-weight: 500;\n        }\n\n        .clear-filters {\n          padding: 14px 28px;\n          background: linear-gradient(135deg, var(--warm-brown) 0%, var(--medium-brown) 100%);\n          color: var(--cream);\n          border: none;\n          border-radius: 12px;\n          font-size: 14px;\n          font-weight: 700;\n          cursor: pointer;\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          box-shadow: 0 6px 20px rgba(194, 87, 27, 0.25);\n        }\n\n        .clear-filters:hover {\n          background: linear-gradient(135deg, var(--medium-brown) 0%, var(--dark-brown) 100%);\n          transform: translateY(-2px);\n          box-shadow: 0 12px 32px rgba(194, 87, 27, 0.35);\n        }\n\n        /* Responsive Design */\n        @media (max-width: 768px) {\n          .page-content {\n            padding: 20px;\n          }\n\n          .page-header {\n            padding: 0;\n          }\n\n          .header-main {\n            flex-direction: column;\n            text-align: center;\n            gap: 20px;\n            padding: 32px 24px;\n          }\n\n          .header-icon {\n            width: 72px;\n            height: 72px;\n          }\n\n          .page-title {\n            font-size: 28px;\n          }\n\n          .enhanced-controls {\n            padding: 24px;\n          }\n\n          .controls-row {\n            flex-direction: column;\n            gap: 16px;\n          }\n\n          .search-container {\n            min-width: unset;\n          }\n\n          .filter-controls {\n            width: 100%;\n            justify-content: space-between;\n          }\n\n          .filter-select {\n            flex: 1;\n            min-width: unset;\n          }\n\n          .documents-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .document-card {\n            padding: 24px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .page-content {\n            padding: 16px;\n          }\n\n          .header-main {\n            padding: 24px 20px;\n          }\n\n          .header-icon {\n            width: 64px;\n            height: 64px;\n          }\n\n          .page-title {\n            font-size: 24px;\n          }\n\n          .enhanced-controls {\n            padding: 20px;\n          }\n\n          .search-input {\n            padding: 16px 16px 16px 48px;\n            font-size: 14px;\n          }\n\n          .filter-select {\n            padding: 14px 16px;\n            font-size: 13px;\n            min-width: unset;\n          }\n\n          .document-card {\n            padding: 20px;\n          }\n\n          .document-title {\n            font-size: 18px;\n          }\n\n          .borrower-info {\n            padding: 16px;\n          }\n\n          .return-button {\n            padding: 12px 20px;\n            font-size: 13px;\n          }\n\n          .empty-state {\n            padding: 60px 24px;\n          }\n\n          .empty-title {\n            font-size: 22px;\n          }\n\n          .empty-description {\n            font-size: 15px;\n          }\n        }\n\n        /* Hover animations and micro-interactions */\n        @keyframes fadeInUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .document-card {\n          animation: fadeInUp 0.5s ease-out;\n        }\n\n        .document-card:nth-child(1) { animation-delay: 0.1s; }\n        .document-card:nth-child(2) { animation-delay: 0.2s; }\n        .document-card:nth-child(3) { animation-delay: 0.3s; }\n        .document-card:nth-child(4) { animation-delay: 0.4s; }\n        .document-card:nth-child(5) { animation-delay: 0.5s; }\n        .document-card:nth-child(6) { animation-delay: 0.6s; }\n\n        /* Improved accessibility */\n        .search-input:focus-visible,\n        .filter-select:focus-visible,\n        .return-button:focus-visible,\n        .clear-filters:focus-visible {\n          outline: 3px solid var(--warm-brown);\n          outline-offset: 2px;\n        }\n\n        /* Glow effects for status indicators */\n        .status-badge.status-overdue {\n          box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n        }\n\n        .status-badge.status-warning {\n          box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);\n        }\n\n        .status-badge.status-normal {\n          box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);\n        }\n\n        /* Enhanced button interactions */\n        .return-button {\n          position: relative;\n          overflow: hidden;\n        }\n\n        .return-button::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n          transition: left 0.5s;\n        }\n\n        .return-button:hover::before {\n          left: 100%;\n        }\n\n        /* Improved card hover effects */\n        .document-card {\n          position: relative;\n          overflow: hidden;\n        }\n\n        .document-card::after {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: linear-gradient(135deg, \n            rgba(62, 92, 73, 0.02) 0%, \n            rgba(194, 87, 27, 0.02) 100%);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n          pointer-events: none;\n        }\n\n        .document-card:hover::after {\n          opacity: 1;\n        }\n\n        /* Enhanced search input */\n        .search-input-wrapper::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          border-radius: 16px;\n          background: linear-gradient(135deg, \n            rgba(194, 87, 27, 0.1) 0%, \n            rgba(62, 92, 73, 0.1) 100%);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n          pointer-events: none;\n        }\n\n        .search-input:focus + .search-input-wrapper::before {\n          opacity: 1;\n        }\n\n        /* Subtle animations for status changes */\n        .status-badge {\n          transition: all 0.3s ease;\n        }\n\n        .status-badge:hover {\n          transform: scale(1.05);\n        }\n\n        /* Enhanced header gradient animation */\n        .page-header {\n          background-size: 200% 200%;\n          animation: gradientShift 8s ease infinite;\n        }\n\n        @keyframes gradientShift {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n\n        /* Improved filter controls styling */\n        .filter-controls {\n          position: relative;\n        }\n\n        .filter-select {\n          background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\");\n          background-position: right 12px center;\n          background-repeat: no-repeat;\n          background-size: 16px;\n          appearance: none;\n          padding-right: 40px;\n        }\n\n        /* Enhanced color consistency */\n        .borrower-name svg,\n        .date-info svg,\n        .document-status svg {\n          transition: color 0.3s ease;\n        }\n\n        .document-card:hover .borrower-name svg,\n        .document-card:hover .date-info svg,\n        .document-card:hover .document-status svg {\n          color: var(--warm-brown);\n        }\n\n        /* Print optimization */\n        @media print {\n          .borrowed-documents-container {\n            background: white;\n          }\n\n          .page-header {\n            background: var(--dark-green) !important;\n            box-shadow: none;\n            -webkit-print-color-adjust: exact;\n            color-adjust: exact;\n          }\n\n          .enhanced-controls,\n          .document-actions {\n            display: none;\n          }\n\n          .document-card {\n            box-shadow: none;\n            border: 1px solid #ccc;\n            break-inside: avoid;\n            margin-bottom: 20px;\n          }\n        }\n\n        /* High contrast mode enhancements */\n        @media (prefers-contrast: high) {\n          .document-card {\n            border: 2px solid var(--text-dark);\n          }\n\n          .search-input,\n          .filter-select {\n            border: 2px solid var(--text-dark);\n          }\n\n          .return-button {\n            background: var(--text-dark);\n            color: var(--white);\n            border: 2px solid var(--text-dark);\n          }\n\n          .status-badge {\n            border: 1px solid var(--text-dark);\n          }\n        }\n\n        /* Reduced motion preferences */\n        @media (prefers-reduced-motion: reduce) {\n          .document-card,\n          .return-button,\n          .clear-filters,\n          .search-input,\n          .filter-select {\n            animation: none;\n            transition: none;\n          }\n\n          .document-card:hover {\n            transform: none;\n          }\n\n          .page-header {\n            animation: none;\n          }\n        }\n\n        /* Focus improvements for better accessibility */\n        .search-input:focus,\n        .filter-select:focus,\n        .return-button:focus,\n        .clear-filters:focus {\n          position: relative;\n          z-index: 10;\n        }\n\n        /* Enhanced visual hierarchy */\n        .page-title {\n          position: relative;\n        }\n\n        .page-title::before {\n          content: '';\n          position: absolute;\n          top: -8px;\n          left: -8px;\n          right: -8px;\n          bottom: -8px;\n          background: linear-gradient(135deg, \n            rgba(255, 255, 255, 0.1) 0%, \n            rgba(255, 255, 255, 0.05) 100%);\n          border-radius: 12px;\n          z-index: -1;\n        }\n      `}</style>\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Users, \r\n  GraduationCap, \r\n  Briefcase,\r\n  Search, \r\n  Plus,\r\n  Edit,\r\n  Trash2,\r\n  X,\r\n  Save,\r\n  User,\r\n  Hash,\r\n  School,\r\n  Building,\r\n  Mail,\r\n  Phone,\r\n  Eye,\r\n  Filter\r\n} from 'lucide-react';\r\n\r\nimport { Borrower } from '../../types';\r\n\r\ninterface BorrowersProps {\r\n  onClose: () => void;\r\n  onRefreshData?: () => Promise<void>;\r\n}\r\n\r\nexport default function Borrowers({ onClose, onRefreshData }: BorrowersProps) {\r\n  const [borrowers, setBorrowers] = useState<Borrower[]>([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filterType, setFilterType] = useState<'all' | 'student' | 'staff'>('all');\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [editingBorrower, setEditingBorrower] = useState<Borrower | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [appMode, setAppMode] = useState<'offline' | 'online'>('offline');\r\n\r\n  // Charger les emprunteurs au montage du composant\r\n  useEffect(() => {\r\n    loadBorrowers();\r\n    // Dtecter le mode de l'application\r\n    const mode = localStorage.getItem('appMode') || 'offline';\r\n    setAppMode(mode as 'offline' | 'online');\r\n  }, []);\r\n\r\n  const loadBorrowers = async () => {\r\n    setDataLoading(true);\r\n    try {\r\n      const borrowersList = await window.electronAPI.getBorrowers();\r\n      setBorrowers(borrowersList || []);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des emprunteurs:', error);\r\n      setBorrowers([]);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  };\r\n\r\n  const [borrower, setBorrower] = useState<Omit<Borrower, 'id'>>({\r\n    type: 'student',\r\n    firstName: '',\r\n    lastName: '',\r\n    matricule: '',\r\n    classe: '',\r\n    cniNumber: '',\r\n    position: '',\r\n    email: '',\r\n    phone: '',\r\n    syncStatus: 'pending',\r\n    lastModified: new Date().toISOString(),\r\n    version: 1,\r\n    createdAt: new Date().toISOString()\r\n  });\r\n\r\n  const [formErrors, setFormErrors] = useState<{ [key: string]: string }>({});\r\n\r\n  const validateForm = () => {\r\n    const errors: { [key: string]: string } = {};\r\n\r\n    if (!borrower.firstName.trim()) {\r\n      errors.firstName = 'Le prnom est requis';\r\n    }\r\n    if (!borrower.lastName.trim()) {\r\n      errors.lastName = 'Le nom est requis';\r\n    }\r\n    if (!borrower.matricule.trim()) {\r\n      errors.matricule = 'Le matricule est requis';\r\n    }\r\n    if (borrower.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(borrower.email)) {\r\n      errors.email = 'Format email invalide';\r\n    }\r\n    if (borrower.phone && !/^[\\d\\s\\+\\-\\(\\)]{6,}$/.test(borrower.phone)) {\r\n      errors.phone = 'Format tlphone invalide';\r\n    }\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n\r\n  const handleSearch = (query: string) => {\r\n    setSearchQuery(query);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setBorrower({\r\n      type: 'student',\r\n      firstName: '',\r\n      lastName: '',\r\n      matricule: '',\r\n      classe: '',\r\n      cniNumber: '',\r\n      position: '',\r\n      email: '',\r\n      phone: '',\r\n      syncStatus: 'pending',\r\n      lastModified: new Date().toISOString(),\r\n      version: 1,\r\n      createdAt: new Date().toISOString()\r\n    });\r\n    setFormErrors({});\r\n    setEditingBorrower(null);\r\n  };\r\n\r\n  const handleAddBorrower = () => {\r\n    resetForm();\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const handleEditBorrower = (editBorrower: Borrower) => {\r\n    setBorrower({\r\n      type: editBorrower.type,\r\n      firstName: editBorrower.firstName,\r\n      lastName: editBorrower.lastName,\r\n      matricule: editBorrower.matricule,\r\n      classe: editBorrower.classe || '',\r\n      cniNumber: editBorrower.cniNumber || '',\r\n      position: editBorrower.position || '',\r\n      email: editBorrower.email || '',\r\n      phone: editBorrower.phone || '',\r\n      syncStatus: editBorrower.syncStatus,\r\n      lastModified: new Date().toISOString(),\r\n      version: (editBorrower.version || 1) + 1,\r\n      createdAt: editBorrower.createdAt || new Date().toISOString()\r\n    });\r\n    setFormErrors({});\r\n    setEditingBorrower(editBorrower);\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (editingBorrower) {\r\n        // Modification d'un emprunteur existant\r\n        const updatedBorrower = {\r\n          ...borrower,\r\n          id: editingBorrower.id,\r\n          lastModified: new Date().toISOString(),\r\n          version: (editingBorrower.version || 1) + 1\r\n        };\r\n        \r\n        if (appMode === 'offline') {\r\n          await window.electronAPI.updateBorrower(updatedBorrower);\r\n        }\r\n        \r\n        setBorrowers(prev => prev.map(b => \r\n          b.id === editingBorrower.id ? updatedBorrower : b\r\n        ));\r\n      } else {\r\n        // Ajout d'un nouvel emprunteur\r\n        const newBorrowerData = {\r\n          ...borrower,\r\n          syncStatus: 'pending' as const,\r\n          lastModified: new Date().toISOString(),\r\n          version: 1,\r\n          createdAt: new Date().toISOString()\r\n        };\r\n        \r\n        if (appMode === 'offline') {\r\n          const savedBorrowerId = await window.electronAPI.addBorrower(newBorrowerData);\r\n          const savedBorrower = { ...newBorrowerData, id: savedBorrowerId };\r\n          setBorrowers(prev => [...prev, savedBorrower]);\r\n        } else {\r\n          const newBorrower = { ...newBorrowerData, id: Date.now() };\r\n          setBorrowers(prev => [...prev, newBorrower]);\r\n        }\r\n      }\r\n      \r\n      setShowAddModal(false);\r\n      resetForm();\r\n      \r\n      // Rafrachir les donnes dans le composant parent si ncessaire\r\n      if (onRefreshData) {\r\n        await onRefreshData();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Erreur:', error);\r\n      alert(error.message || 'Erreur lors de l\\'opration');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (borrowerToDelete: Borrower) => {\r\n    if (window.confirm(`tes-vous sr de vouloir supprimer ${borrowerToDelete.firstName} ${borrowerToDelete.lastName} ?`)) {\r\n      try {\r\n        if (appMode === 'offline' && borrowerToDelete.id) {\r\n          await window.electronAPI.deleteBorrower(borrowerToDelete.id);\r\n        }\r\n        \r\n        setBorrowers(prev => prev.filter(b => b.id !== borrowerToDelete.id));\r\n        \r\n        // Rafrachir les donnes dans le composant parent si ncessaire\r\n        if (onRefreshData) {\r\n          await onRefreshData();\r\n        }\r\n      } catch (error: any) {\r\n        console.error('Erreur lors de la suppression:', error);\r\n        alert(error.message || 'Erreur lors de la suppression');\r\n      }\r\n    }\r\n  };\r\n\r\n  const filteredBorrowers = borrowers.filter(borrower => {\r\n    if (filterType !== 'all' && borrower.type !== filterType) return false;\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      return (\r\n        borrower.firstName.toLowerCase().includes(query) ||\r\n        borrower.lastName.toLowerCase().includes(query) ||\r\n        borrower.matricule.toLowerCase().includes(query)\r\n      );\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const studentCount = borrowers.filter(b => b.type === 'student').length;\r\n  const staffCount = borrowers.filter(b => b.type === 'staff').length;\r\n\r\n  return (\r\n    <div className=\"borrowers-overlay\">\r\n      <div className=\"borrowers-modal\">\r\n        {/* Header */}\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <Users size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">Gestion des Emprunteurs</h2>\r\n              <p className=\"modal-subtitle\">\r\n                {borrowers.length} emprunteur(s)  {studentCount} tudiant(s)  {staffCount} personnel(s)\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button \r\n            className=\"close-button\" \r\n            onClick={onClose}\r\n            type=\"button\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"stats-section\">\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon student\">\r\n              <GraduationCap size={20} />\r\n            </div>\r\n            <div className=\"stat-content\">\r\n              <span className=\"stat-value\">{studentCount}</span>\r\n              <span className=\"stat-label\">tudiants</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon staff\">\r\n              <Briefcase size={20} />\r\n            </div>\r\n            <div className=\"stat-content\">\r\n              <span className=\"stat-value\">{staffCount}</span>\r\n              <span className=\"stat-label\">Personnel</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon total\">\r\n              <Users size={20} />\r\n            </div>\r\n            <div className=\"stat-content\">\r\n              <span className=\"stat-value\">{borrowers.length}</span>\r\n              <span className=\"stat-label\">Total</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"controls-section\">\r\n          <div className=\"search-container\">\r\n            <div className=\"search-input-wrapper\">\r\n              <Search className=\"search-icon\" size={20} />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Rechercher par nom, prnom, matricule...\"\r\n                value={searchQuery}\r\n                onChange={(e) => handleSearch(e.target.value)}\r\n                className=\"search-input\"\r\n              />\r\n              {searchQuery && (\r\n                <button \r\n                  className=\"clear-search\"\r\n                  onClick={() => handleSearch('')}\r\n                  type=\"button\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"controls-right\">\r\n            <div className=\"filter-group\">\r\n              <Filter size={16} />\r\n              <select \r\n                value={filterType} \r\n                onChange={(e) => setFilterType(e.target.value as any)}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"all\">Tous</option>\r\n                <option value=\"student\">tudiants</option>\r\n                <option value=\"staff\">Personnel</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <button className=\"btn-primary\" onClick={handleAddBorrower} type=\"button\">\r\n              <Plus size={18} />\r\n              Ajouter\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Borrowers List */}\r\n        <div className=\"borrowers-content\">\r\n          {dataLoading ? (\r\n            <div className=\"loading-state\">\r\n              <div className=\"loading-spinner\"></div>\r\n              <p>Chargement des emprunteurs...</p>\r\n            </div>\r\n          ) : filteredBorrowers.length > 0 ? (\r\n            <div className=\"borrowers-grid\">\r\n              {filteredBorrowers.map((borrower) => (\r\n                <div key={borrower.id} className={`borrower-card ${borrower.type}`}>\r\n                  <div className=\"card-header\">\r\n                    <div className=\"borrower-type\">\r\n                      {borrower.type === 'student' ? (\r\n                        <GraduationCap size={20} />\r\n                      ) : (\r\n                        <Briefcase size={20} />\r\n                      )}\r\n                      <span>{borrower.type === 'student' ? 'tudiant' : 'Personnel'}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"card-actions\">\r\n                      <button \r\n                        className=\"action-btn view\"\r\n                        onClick={() => {}}\r\n                        title=\"Voir dtails\"\r\n                        type=\"button\"\r\n                      >\r\n                        <Eye size={16} />\r\n                      </button>\r\n                      <button \r\n                        className=\"action-btn edit\"\r\n                        onClick={() => handleEditBorrower(borrower)}\r\n                        title=\"Modifier\"\r\n                        type=\"button\"\r\n                      >\r\n                        <Edit size={16} />\r\n                      </button>\r\n                      <button \r\n                        className=\"action-btn delete\"\r\n                        onClick={() => handleDelete(borrower)}\r\n                        title=\"Supprimer\"\r\n                        type=\"button\"\r\n                      >\r\n                        <Trash2 size={16} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"card-content\">\r\n                    <h3 className=\"borrower-name\">\r\n                      {borrower.firstName} {borrower.lastName}\r\n                    </h3>\r\n                    \r\n                    <div className=\"borrower-details\">\r\n                      <div className=\"detail-item\">\r\n                        <Hash size={14} />\r\n                        <span>{borrower.matricule}</span>\r\n                      </div>\r\n                      \r\n                      {borrower.type === 'student' && borrower.classe && (\r\n                        <div className=\"detail-item\">\r\n                          <School size={14} />\r\n                          <span>{borrower.classe}</span>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {borrower.type === 'staff' && borrower.position && (\r\n                        <div className=\"detail-item\">\r\n                          <Building size={14} />\r\n                          <span>{borrower.position}</span>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {borrower.email && (\r\n                        <div className=\"detail-item\">\r\n                          <Mail size={14} />\r\n                          <span>{borrower.email}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"empty-state\">\r\n              <Users size={64} />\r\n              <h3>Aucun emprunteur trouv</h3>\r\n              <p>\r\n                {searchQuery || filterType !== 'all'\r\n                  ? 'Aucun rsultat pour les critres slectionns'\r\n                  : 'Commencez par ajouter des emprunteurs'\r\n                }\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Add/Edit Modal */}\r\n        {showAddModal && (\r\n          <div className=\"add-modal-overlay\" onClick={() => setShowAddModal(false)}>\r\n            <div className=\"add-modal\" onClick={(e) => e.stopPropagation()}>\r\n              <div className=\"add-modal-header\">\r\n                <h3>{editingBorrower ? 'Modifier' : 'Ajouter'} un emprunteur</h3>\r\n                <button\r\n                  className=\"modal-close\"\r\n                  onClick={() => setShowAddModal(false)}\r\n                  type=\"button\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              </div>\r\n              \r\n              <form onSubmit={handleSubmit} className=\"add-form\">\r\n                <div className=\"form-section\">\r\n                  <label className=\"form-label\">Type d'emprunteur *</label>\r\n                  <div className=\"type-selector\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`type-button ${borrower.type === 'student' ? 'active' : ''}`}\r\n                      onClick={() => setBorrower(prev => ({ ...prev, type: 'student' }))}\r\n                    >\r\n                      <GraduationCap size={20} />\r\n                      tudiant\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`type-button ${borrower.type === 'staff' ? 'active' : ''}`}\r\n                      onClick={() => setBorrower(prev => ({ ...prev, type: 'staff' }))}\r\n                    >\r\n                      <Briefcase size={20} />\r\n                      Personnel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-grid\">\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Prnom *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={borrower.firstName}\r\n                      onChange={(e) => {\r\n                        setBorrower(prev => ({ ...prev, firstName: e.target.value }));\r\n                        if (formErrors.firstName) {\r\n                          setFormErrors(prev => ({ ...prev, firstName: '' }));\r\n                        }\r\n                      }}\r\n                      className={`form-input ${formErrors.firstName ? 'error' : ''}`}\r\n                      required\r\n                    />\r\n                    {formErrors.firstName && <span className=\"error-text\">{formErrors.firstName}</span>}\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Nom *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={borrower.lastName}\r\n                      onChange={(e) => {\r\n                        setBorrower(prev => ({ ...prev, lastName: e.target.value }));\r\n                        if (formErrors.lastName) {\r\n                          setFormErrors(prev => ({ ...prev, lastName: '' }));\r\n                        }\r\n                      }}\r\n                      className={`form-input ${formErrors.lastName ? 'error' : ''}`}\r\n                      required\r\n                    />\r\n                    {formErrors.lastName && <span className=\"error-text\">{formErrors.lastName}</span>}\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Matricule *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={borrower.matricule}\r\n                      onChange={(e) => {\r\n                        setBorrower(prev => ({ ...prev, matricule: e.target.value }));\r\n                        if (formErrors.matricule) {\r\n                          setFormErrors(prev => ({ ...prev, matricule: '' }));\r\n                        }\r\n                      }}\r\n                      className={`form-input ${formErrors.matricule ? 'error' : ''}`}\r\n                      required\r\n                    />\r\n                    {formErrors.matricule && <span className=\"error-text\">{formErrors.matricule}</span>}\r\n                  </div>\r\n                  \r\n                  {borrower.type === 'student' ? (\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Classe</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={borrower.classe}\r\n                        onChange={(e) => setBorrower(prev => ({ ...prev, classe: e.target.value }))}\r\n                        className=\"form-input\"\r\n                        placeholder=\"ex: Terminale C\"\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      <div className=\"form-group\">\r\n                        <label className=\"form-label\">N CNI</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={borrower.cniNumber}\r\n                          onChange={(e) => setBorrower(prev => ({ ...prev, cniNumber: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group span-full\">\r\n                        <label className=\"form-label\">Poste</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={borrower.position}\r\n                          onChange={(e) => setBorrower(prev => ({ ...prev, position: e.target.value }))}\r\n                          className=\"form-input\"\r\n                          placeholder=\"ex: Professeur de Mathmatiques\"\r\n                        />\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Email</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={borrower.email}\r\n                      onChange={(e) => {\r\n                        setBorrower(prev => ({ ...prev, email: e.target.value }));\r\n                        if (formErrors.email) {\r\n                          setFormErrors(prev => ({ ...prev, email: '' }));\r\n                        }\r\n                      }}\r\n                      className={`form-input ${formErrors.email ? 'error' : ''}`}\r\n                    />\r\n                    {formErrors.email && <span className=\"error-text\">{formErrors.email}</span>}\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Tlphone</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={borrower.phone}\r\n                      onChange={(e) => {\r\n                        setBorrower(prev => ({ ...prev, phone: e.target.value }));\r\n                        if (formErrors.phone) {\r\n                          setFormErrors(prev => ({ ...prev, phone: '' }));\r\n                        }\r\n                      }}\r\n                      className={`form-input ${formErrors.phone ? 'error' : ''}`}\r\n                    />\r\n                    {formErrors.phone && <span className=\"error-text\">{formErrors.phone}</span>}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-actions\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn-secondary\"\r\n                    onClick={() => setShowAddModal(false)}\r\n                    disabled={isLoading}\r\n                  >\r\n                    Annuler\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn-primary\"\r\n                    disabled={isLoading}\r\n                  >\r\n                    <Save size={16} />\r\n                    {isLoading ? 'Enregistrement...' : editingBorrower ? 'Modifier' : 'Ajouter'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .borrowers-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.7);\r\n          backdrop-filter: blur(12px);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          animation: fadeIn 0.3s ease;\r\n        }\r\n        \r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        \r\n        @keyframes slideUp {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(30px) scale(0.95);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n        \r\n        .borrowers-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 1200px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n        }\r\n        \r\n        .modal-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 32px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .modal-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: radial-gradient(circle at 20% 80%, rgba(243, 238, 217, 0.1) 0%, transparent 50%);\r\n          backdrop-filter: blur(10px);\r\n        }\r\n        \r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n        \r\n        .modal-title {\r\n          font-size: 28px;\r\n          font-weight: 800;\r\n          margin: 0 0 8px 0;\r\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n        }\r\n        \r\n        .modal-subtitle {\r\n          font-size: 16px;\r\n          opacity: 0.9;\r\n          margin: 0;\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .close-button {\r\n          width: 44px;\r\n          height: 44px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .stats-section {\r\n          display: flex;\r\n          gap: 24px;\r\n          padding: 32px;\r\n          background: rgba(248, 246, 240, 0.5);\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n        \r\n        .stat-card {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          background: #FFFFFF;\r\n          padding: 24px;\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.1);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          flex: 1;\r\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n        \r\n        .stat-card:hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 25px rgba(62, 92, 73, 0.15);\r\n          border-color: rgba(62, 92, 73, 0.2);\r\n        }\r\n        \r\n        .stat-icon {\r\n          width: 48px;\r\n          height: 48px;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .stat-icon.student {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n        }\r\n        \r\n        .stat-icon.staff {\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n        }\r\n        \r\n        .stat-icon.total {\r\n          background: linear-gradient(135deg, #6E6E6E 0%, #5A5A5A 100%);\r\n        }\r\n        \r\n        .stat-content {\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        \r\n        .stat-value {\r\n          font-size: 28px;\r\n          font-weight: 800;\r\n          color: #2E2E2E;\r\n          display: block;\r\n          line-height: 1;\r\n        }\r\n        \r\n        .stat-label {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          text-transform: uppercase;\r\n          letter-spacing: 1px;\r\n          font-weight: 600;\r\n          margin-top: 4px;\r\n        }\r\n        \r\n        .controls-section {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 24px 32px;\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\r\n          background: #FFFFFF;\r\n        }\r\n        \r\n        .search-container {\r\n          flex: 1;\r\n          max-width: 400px;\r\n        }\r\n        \r\n        .search-input-wrapper {\r\n          position: relative;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        \r\n        .search-icon {\r\n          position: absolute;\r\n          left: 16px;\r\n          color: #4A4A4A;\r\n          z-index: 2;\r\n        }\r\n        \r\n        .search-input {\r\n          width: 100%;\r\n          height: 52px;\r\n          padding: 0 48px 0 48px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 16px;\r\n          font-size: 16px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .search-input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n          transform: translateY(-1px);\r\n        }\r\n        \r\n        .clear-search {\r\n          position: absolute;\r\n          right: 16px;\r\n          background: #F3EED9;\r\n          border: none;\r\n          cursor: pointer;\r\n          color: #4A4A4A;\r\n          padding: 8px;\r\n          border-radius: 8px;\r\n          transition: all 0.2s ease;\r\n        }\r\n        \r\n        .clear-search:hover {\r\n          color: #2E2E2E;\r\n          background: #E5DCC2;\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .controls-right {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n        \r\n        .filter-group {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          color: #4A4A4A;\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .filter-select {\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          padding: 12px 16px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          font-size: 14px;\r\n          cursor: pointer;\r\n          font-weight: 500;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .filter-select:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n        \r\n        .btn-primary {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          padding: 14px 24px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          border: none;\r\n          border-radius: 16px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.3);\r\n        }\r\n        \r\n        .btn-primary:hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 20px rgba(62, 92, 73, 0.4);\r\n          background: linear-gradient(135deg, #2E453A 0%, #3E5C49 100%);\r\n        }\r\n        \r\n        .borrowers-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 32px;\r\n          background: rgba(248, 246, 240, 0.3);\r\n        }\r\n        \r\n        .borrowers-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n          gap: 24px;\r\n        }\r\n        \r\n        .borrower-card {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          overflow: hidden;\r\n          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\r\n          position: relative;\r\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n        }\r\n        \r\n        .borrower-card::before {\r\n          content: '';\r\n          position: absolute;\r\n          left: 0;\r\n          top: 0;\r\n          bottom: 0;\r\n          width: 5px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .borrower-card.staff::before {\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n        }\r\n        \r\n        .borrower-card:hover {\r\n          transform: translateY(-8px) scale(1.02);\r\n          box-shadow: \r\n            0 20px 40px rgba(0, 0, 0, 0.15),\r\n            0 8px 16px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        .borrower-card:hover::before {\r\n          width: 8px;\r\n        }\r\n        \r\n        .card-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 20px 24px;\r\n          background: linear-gradient(135deg, rgba(248, 246, 240, 0.8) 0%, rgba(229, 220, 194, 0.3) 100%);\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n        \r\n        .borrower-type {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          font-size: 13px;\r\n          font-weight: 700;\r\n          color: #4A4A4A;\r\n          text-transform: uppercase;\r\n          letter-spacing: 1px;\r\n        }\r\n        \r\n        .card-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .action-btn {\r\n          width: 36px;\r\n          height: 36px;\r\n          border: none;\r\n          border-radius: 10px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .action-btn::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          width: 0;\r\n          height: 0;\r\n          border-radius: 50%;\r\n          transition: all 0.3s ease;\r\n          transform: translate(-50%, -50%);\r\n        }\r\n        \r\n        .action-btn:hover::before {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        \r\n        .action-btn.view {\r\n          background: rgba(110, 110, 110, 0.1);\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .action-btn.view:hover {\r\n          color: #F3EED9;\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .action-btn.view:hover::before {\r\n          background: #6E6E6E;\r\n        }\r\n        \r\n        .action-btn.edit {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n        \r\n        .action-btn.edit:hover {\r\n          color: #F3EED9;\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .action-btn.edit:hover::before {\r\n          background: #3E5C49;\r\n        }\r\n        \r\n        .action-btn.delete {\r\n          background: rgba(220, 38, 38, 0.1);\r\n          color: #DC2626;\r\n        }\r\n        \r\n        .action-btn.delete:hover {\r\n          color: #F3EED9;\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .action-btn.delete:hover::before {\r\n          background: #DC2626;\r\n        }\r\n        \r\n        .card-content {\r\n          padding: 24px;\r\n        }\r\n        \r\n        .borrower-name {\r\n          font-size: 20px;\r\n          font-weight: 800;\r\n          color: #2E2E2E;\r\n          margin: 0 0 20px 0;\r\n          letter-spacing: -0.5px;\r\n        }\r\n        \r\n        .borrower-details {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n        \r\n        .detail-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          font-weight: 500;\r\n          padding: 8px 0;\r\n        }\r\n        \r\n        .detail-item svg {\r\n          color: #C2571B;\r\n        }\r\n        \r\n        .empty-state {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: 80px 32px;\r\n          text-align: center;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .empty-state svg {\r\n          opacity: 0.3;\r\n          margin-bottom: 24px;\r\n        }\r\n        \r\n        .empty-state h3 {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          margin: 0 0 12px 0;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .empty-state p {\r\n          margin: 0;\r\n          font-size: 16px;\r\n          max-width: 400px;\r\n          line-height: 1.5;\r\n        }\r\n        \r\n        .loading-state {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: 80px 32px;\r\n          text-align: center;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .loading-spinner {\r\n          width: 40px;\r\n          height: 40px;\r\n          border: 3px solid #E5DCC2;\r\n          border-top: 3px solid #3E5C49;\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n          margin-bottom: 16px;\r\n        }\r\n        \r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n        \r\n        /* Add Modal */\r\n        .add-modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.8);\r\n          backdrop-filter: blur(8px);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1100;\r\n          padding: 20px;\r\n          animation: fadeIn 0.3s ease;\r\n        }\r\n        \r\n        .add-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 24px;\r\n          width: 100%;\r\n          max-width: 700px;\r\n          max-height: 90vh;\r\n          overflow-y: auto;\r\n          box-shadow: \r\n            0 32px 64px rgba(0, 0, 0, 0.3),\r\n            0 16px 32px rgba(0, 0, 0, 0.2);\r\n          animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n        }\r\n        \r\n        .add-modal-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 28px 32px;\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\r\n          background: linear-gradient(135deg, rgba(248, 246, 240, 0.8) 0%, rgba(229, 220, 194, 0.3) 100%);\r\n        }\r\n        \r\n        .add-modal-header h3 {\r\n          font-size: 24px;\r\n          font-weight: 800;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n        \r\n        .modal-close {\r\n          background: rgba(110, 110, 110, 0.1);\r\n          border: none;\r\n          cursor: pointer;\r\n          padding: 12px;\r\n          border-radius: 12px;\r\n          color: #4A4A4A;\r\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n        \r\n        .modal-close:hover {\r\n          background: rgba(110, 110, 110, 0.2);\r\n          color: #2E2E2E;\r\n          transform: scale(1.1);\r\n        }\r\n        \r\n        .add-form {\r\n          padding: 32px;\r\n        }\r\n        \r\n        .form-section {\r\n          margin-bottom: 32px;\r\n        }\r\n        \r\n        .form-label {\r\n          display: block;\r\n          font-size: 15px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin-bottom: 12px;\r\n          letter-spacing: 0.3px;\r\n        }\r\n        \r\n        .type-selector {\r\n          display: flex;\r\n          gap: 16px;\r\n        }\r\n        \r\n        .type-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 20px 24px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 16px;\r\n          background: #FFFFFF;\r\n          color: #4A4A4A;\r\n          cursor: pointer;\r\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          flex: 1;\r\n          justify-content: center;\r\n        }\r\n        \r\n        .type-button:hover {\r\n          border-color: #3E5C49;\r\n          color: #3E5C49;\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 20px rgba(62, 92, 73, 0.15);\r\n        }\r\n        \r\n        .type-button.active {\r\n          border-color: #3E5C49;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 20px rgba(62, 92, 73, 0.3);\r\n        }\r\n        \r\n        .form-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 24px;\r\n          margin-bottom: 32px;\r\n        }\r\n        \r\n        .form-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .form-group.span-full {\r\n          grid-column: 1 / -1;\r\n        }\r\n        \r\n        .form-input {\r\n          width: 100%;\r\n          padding: 16px 20px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          font-size: 15px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .form-input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n          transform: translateY(-1px);\r\n        }\r\n        \r\n        .form-input.error {\r\n          border-color: #DC2626;\r\n          background: rgba(220, 38, 38, 0.05);\r\n        }\r\n        \r\n        .error-text {\r\n          font-size: 13px;\r\n          color: #DC2626;\r\n          font-weight: 600;\r\n          margin-top: 4px;\r\n        }\r\n        \r\n        .form-actions {\r\n          display: flex;\r\n          gap: 16px;\r\n          justify-content: flex-end;\r\n          padding-top: 32px;\r\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n        \r\n        .btn-secondary {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          padding: 14px 28px;\r\n          background: rgba(248, 246, 240, 0.8);\r\n          color: #4A4A4A;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .btn-secondary:hover:not(:disabled) {\r\n          background: #E5DCC2;\r\n          color: #2E2E2E;\r\n          transform: translateY(-1px);\r\n        }\r\n        \r\n        .btn-primary:disabled,\r\n        .btn-secondary:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n          transform: none;\r\n        }\r\n        \r\n        /* Responsive */\r\n        @media (max-width: 768px) {\r\n          .borrowers-modal {\r\n            margin: 12px;\r\n            border-radius: 20px;\r\n            max-height: 95vh;\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 24px 20px;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n            text-align: center;\r\n          }\r\n          \r\n          .modal-title {\r\n            font-size: 24px;\r\n          }\r\n          \r\n          .stats-section {\r\n            padding: 20px;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .controls-section {\r\n            padding: 20px;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n            align-items: stretch;\r\n          }\r\n          \r\n          .controls-right {\r\n            justify-content: space-between;\r\n          }\r\n          \r\n          .borrowers-content {\r\n            padding: 20px;\r\n          }\r\n          \r\n          .borrowers-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: 20px;\r\n          }\r\n          \r\n          .form-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: 20px;\r\n          }\r\n          \r\n          .type-selector {\r\n            flex-direction: column;\r\n          }\r\n          \r\n          .form-actions {\r\n            flex-direction: column-reverse;\r\n          }\r\n          \r\n          .btn-primary,\r\n          .btn-secondary {\r\n            width: 100%;\r\n            justify-content: center;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .add-modal {\r\n            margin: 12px;\r\n            border-radius: 20px;\r\n          }\r\n          \r\n          .add-modal-header,\r\n          .add-form {\r\n            padding: 24px 20px;\r\n          }\r\n          \r\n          .borrower-card {\r\n            border-radius: 16px;\r\n          }\r\n          \r\n          .card-header,\r\n          .card-content {\r\n            padding: 20px;\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 20px;\r\n          }\r\n          \r\n          .stats-section,\r\n          .controls-section,\r\n          .borrowers-content {\r\n            padding: 16px;\r\n          }\r\n        }\r\n        \r\n        /* Scrollbar personnalis */\r\n        .borrowers-content::-webkit-scrollbar,\r\n        .add-modal::-webkit-scrollbar {\r\n          width: 8px;\r\n        }\r\n        \r\n        .borrowers-content::-webkit-scrollbar-track,\r\n        .add-modal::-webkit-scrollbar-track {\r\n          background: #F3EED9;\r\n          border-radius: 4px;\r\n        }\r\n        \r\n        .borrowers-content::-webkit-scrollbar-thumb,\r\n        .add-modal::-webkit-scrollbar-thumb {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-radius: 4px;\r\n        }\r\n        \r\n        .borrowers-content::-webkit-scrollbar-thumb:hover,\r\n        .add-modal::-webkit-scrollbar-thumb:hover {\r\n          background: linear-gradient(135deg, #2E453A 0%, #3E5C49 100%);\r\n        }\r\n        \r\n        /* tats de synchronisation */\r\n        .sync-status {\r\n          position: absolute;\r\n          top: 16px;\r\n          right: 16px;\r\n          padding: 4px 8px;\r\n          border-radius: 12px;\r\n          font-size: 11px;\r\n          font-weight: 600;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n        }\r\n        \r\n        .sync-status.synced {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n          border: 1px solid rgba(62, 92, 73, 0.2);\r\n        }\r\n        \r\n        .sync-status.pending {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n          border: 1px solid rgba(194, 87, 27, 0.2);\r\n        }\r\n        \r\n        .sync-status.error {\r\n          background: rgba(220, 38, 38, 0.1);\r\n          color: #DC2626;\r\n          border: 1px solid rgba(220, 38, 38, 0.2);\r\n        }\r\n        \r\n        /* Amlioration des tooltips */\r\n        .action-btn[title]:hover::after {\r\n          content: attr(title);\r\n          position: absolute;\r\n          bottom: -35px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          background: rgba(0, 0, 0, 0.8);\r\n          color: white;\r\n          padding: 6px 10px;\r\n          border-radius: 6px;\r\n          font-size: 12px;\r\n          white-space: nowrap;\r\n          z-index: 1000;\r\n          animation: fadeIn 0.2s ease;\r\n        }\r\n        \r\n        .action-btn[title]:hover::before {\r\n          content: '';\r\n          position: absolute;\r\n          bottom: -8px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          border-left: 5px solid transparent;\r\n          border-right: 5px solid transparent;\r\n          border-bottom: 5px solid rgba(0, 0, 0, 0.8);\r\n          z-index: 1000;\r\n        }\r\n        \r\n        /* Indicateur de validation */\r\n        .form-input.valid {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n        \r\n        .form-input.valid:focus {\r\n          border-color: #3E5C49;\r\n          box-shadow: \r\n            0 0 0 3px rgba(62, 92, 73, 0.1),\r\n            0 4px 12px rgba(62, 92, 73, 0.15);\r\n        }\r\n        \r\n        /* Indicateurs de statut dans les cartes */\r\n        .borrower-card {\r\n          position: relative;\r\n        }\r\n        \r\n        .borrower-card .sync-indicator {\r\n          position: absolute;\r\n          top: 20px;\r\n          right: 20px;\r\n          width: 12px;\r\n          height: 12px;\r\n          border-radius: 50%;\r\n          border: 2px solid white;\r\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        .borrower-card .sync-indicator.synced {\r\n          background: #3E5C49;\r\n        }\r\n        \r\n        .borrower-card .sync-indicator.pending {\r\n          background: #C2571B;\r\n          animation: pulse 2s infinite;\r\n        }\r\n        \r\n        .borrower-card .sync-indicator.error {\r\n          background: #DC2626;\r\n        }\r\n        \r\n        @keyframes pulse {\r\n          0% {\r\n            transform: scale(1);\r\n            opacity: 1;\r\n          }\r\n          50% {\r\n            transform: scale(1.1);\r\n            opacity: 0.7;\r\n          }\r\n          100% {\r\n            transform: scale(1);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        /* Effet de survol sur les cartes de statistiques */\r\n        .stat-card:hover .stat-icon {\r\n          transform: scale(1.1) rotate(5deg);\r\n        }\r\n        \r\n        .stat-card:hover .stat-value {\r\n          transform: scale(1.05);\r\n        }\r\n        \r\n        /* Amlioration du modal overlay */\r\n        .add-modal-overlay {\r\n          animation: fadeInBackdrop 0.3s ease;\r\n        }\r\n        \r\n        @keyframes fadeInBackdrop {\r\n          from {\r\n            opacity: 0;\r\n            backdrop-filter: blur(0px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            backdrop-filter: blur(8px);\r\n          }\r\n        }\r\n        \r\n        /* Effet de typing pour les placeholders */\r\n        .search-input::placeholder,\r\n        .form-input::placeholder {\r\n          color: #4A4A4A;\r\n          font-style: italic;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .search-input:focus::placeholder,\r\n        .form-input:focus::placeholder {\r\n          opacity: 0.7;\r\n          transform: translateX(10px);\r\n        }\r\n        \r\n        /* tat de chargement pour les boutons */\r\n        .btn-primary:disabled {\r\n          background: linear-gradient(135deg, #6E6E6E 0%, #5A5A5A 100%);\r\n          cursor: not-allowed;\r\n          transform: none;\r\n        }\r\n        \r\n        .btn-primary:disabled .loading-spinner {\r\n          margin-right: 8px;\r\n        }\r\n        \r\n        /* Responsive amlior pour trs petits crans */\r\n        @media (max-width: 360px) {\r\n          .borrowers-overlay {\r\n            padding: 8px;\r\n          }\r\n          \r\n          .borrowers-modal {\r\n            border-radius: 16px;\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 16px;\r\n          }\r\n          \r\n          .modal-title {\r\n            font-size: 20px;\r\n          }\r\n          \r\n          .header-icon {\r\n            width: 48px;\r\n            height: 48px;\r\n          }\r\n          \r\n          .stat-card {\r\n            padding: 16px;\r\n            gap: 12px;\r\n          }\r\n          \r\n          .stat-icon {\r\n            width: 40px;\r\n            height: 40px;\r\n          }\r\n          \r\n          .stat-value {\r\n            font-size: 24px;\r\n          }\r\n          \r\n          .add-modal {\r\n            border-radius: 16px;\r\n          }\r\n          \r\n          .type-button {\r\n            padding: 16px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\nimport { \n  Book, \n  BookOpen, \n  Users, \n  Tag, \n  TrendingUp, \n  Clock,\n  Plus,\n  Search,\n  Printer,\n  ArrowRight,\n  Star,\n  Activity,\n  Calendar\n} from 'lucide-react';\nimport { Stats } from '../../types';\nimport { PrintManager } from './PrintManager';\nimport { EnhancedStats } from './EnhancedStats';\nimport { SmartSearch } from './SmartSearch';\nimport { AnimatedBackground } from './AnimatedBackground';\nimport { MicroButton, MicroCard, FloatingButton } from './MicroInteractions';\n\ninterface DashboardProps {\n  stats: Stats;\n  onNavigate: (view: 'dashboard' | 'documents' | 'borrowed' | 'add-document') => void;\n  documents?: any[];\n  categories?: any[];\n  recentActivity?: any[];\n}\n\nexport const Dashboard: React.FC<DashboardProps> = ({ \n  stats, \n  onNavigate, \n  documents = [], \n  categories = [],\n  recentActivity = []\n}) => {\n  const [showPrintManager, setShowPrintManager] = useState(false);\n\n  const heroActions = [\n    {\n      title: 'Ajouter un document',\n      description: 'Enrichissez votre collection',\n      icon: Plus,\n      action: () => onNavigate('add-document'),\n      primary: true\n    },\n    {\n      title: 'Parcourir la collection',\n      description: 'Explorer tous les documents',\n      icon: Search,\n      action: () => onNavigate('documents'),\n      primary: false\n    }\n  ];\n\n  const quickActions = [\n    {\n      title: 'Collection complte',\n      description: `${stats.totalDocuments} documents disponibles`,\n      icon: Book,\n      action: () => onNavigate('documents'),\n      color: '#3E5C49'\n    },\n    {\n      title: 'Grer les emprunts',\n      description: `${stats.borrowedDocuments} document(s) emprunt(s)`,\n      icon: BookOpen,\n      action: () => onNavigate('borrowed'),\n      color: '#C2571B',\n      badge: stats.borrowedDocuments > 0\n    },\n    {\n      title: 'Rapports & Export',\n      description: 'Imprimer les inventaires',\n      icon: Printer,\n      action: () => setShowPrintManager(true),\n      color: '#6E6E6E'\n    }\n  ];\n\n  const mainStats = [\n    {\n      title: 'Total des documents',\n      value: stats.totalDocuments,\n      icon: Book,\n      color: '#3E5C49',\n      trend: '+2 ce mois'\n    },\n    {\n      title: 'Disponibles',\n      value: stats.availableDocuments,\n      icon: BookOpen,\n      color: '#3E5C49',\n      percentage: stats.totalDocuments > 0 ? ((stats.availableDocuments / stats.totalDocuments) * 100).toFixed(0) : 0\n    },\n    {\n      title: 'Emprunts',\n      value: stats.borrowedDocuments,\n      icon: Clock,\n      color: '#C2571B',\n      percentage: stats.totalDocuments > 0 ? ((stats.borrowedDocuments / stats.totalDocuments) * 100).toFixed(0) : 0\n    },\n    {\n      title: 'Auteurs',\n      value: stats.totalAuthors,\n      icon: Users,\n      color: '#6E6E6E',\n      trend: 'Actifs'\n    }\n  ];\n\n  // Fonction pour obtenir l'icne selon le type d'activit\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case 'add': return Plus;\n      case 'borrow': return BookOpen;\n      case 'return': return Activity;\n      default: return Activity;\n    }\n  };\n\n  const borrowRate = stats.totalDocuments > 0 ? (stats.borrowedDocuments / stats.totalDocuments * 100).toFixed(1) : 0;\n\n  return (\n    <div className=\"dashboard\">\n      <AnimatedBackground variant=\"books\" intensity=\"low\" />\n      \n      {/* Hero Section */}\n      <div className=\"hero-section\">\n        <div className=\"hero-content\">\n          <div className=\"hero-text\">\n            <h1 className=\"hero-title\">Bienvenue dans votre bibliothque</h1>\n            <p className=\"hero-subtitle\">\n              Grez votre collection de {stats.totalDocuments} documents avec facilit et lgance\n            </p>\n            <div className=\"hero-search\">\n              <SmartSearch \n                onSearch={(query, filters) => {\n                  console.log('Recherche:', query, filters);\n                  onNavigate('documents');\n                }}\n                data={documents}\n                placeholder=\"Rechercher un document, auteur, catgorie...\"\n              />\n            </div>\n            <div className=\"hero-actions\">\n              {heroActions.map((action, index) => (\n                <button\n                  key={index}\n                  className={`hero-button ${action.primary ? 'primary' : 'secondary'}`}\n                  onClick={action.action}\n                >\n                  <action.icon size={18} />\n                  <span>{action.title}</span>\n                  <ArrowRight size={16} />\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"hero-visual\">\n            <div className=\"floating-card\">\n              <div className=\"card-header\">\n                <BookOpen size={24} />\n                <span>Collection</span>\n              </div>\n              <div className=\"card-stats\">\n                <div className=\"stat\">\n                  <span className=\"stat-number\">{stats.totalDocuments}</span>\n                  <span className=\"stat-label\">Documents</span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-number\">{stats.borrowedDocuments}</span>\n                  <span className=\"stat-label\">Emprunts</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"dashboard-content\">\n        {/* Enhanced Stats Section */}\n        <div className=\"stats-section\">\n          <div className=\"section-header\">\n            <h2 className=\"section-title\">Vue d'ensemble</h2>\n            <div className=\"section-subtitle\">Statistiques avances de votre bibliothque</div>\n          </div>\n          \n          <EnhancedStats stats={stats} />\n        </div>\n\n        <div className=\"dashboard-grid\">\n          {/* Quick Actions */}\n          <div className=\"quick-actions-section\">\n            <div className=\"section-header\">\n              <h3 className=\"section-title\">Actions rapides</h3>\n            </div>\n            \n            <div className=\"actions-grid\">\n              {quickActions.map((action, index) => (\n                <button\n                  key={index}\n                  className=\"action-card card-elevated\"\n                  onClick={action.action}\n                >\n                  <div className=\"action-icon\" style={{ backgroundColor: action.color }}>\n                    <action.icon size={20} />\n                    {action.badge && <div className=\"action-badge\"></div>}\n                  </div>\n                  <div className=\"action-content\">\n                    <div className=\"action-title\">{action.title}</div>\n                    <div className=\"action-description\">{action.description}</div>\n                  </div>\n                  <ArrowRight size={16} className=\"action-arrow\" />\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Progress Overview */}\n          <div className=\"progress-section\">\n            <div className=\"section-header\">\n              <h3 className=\"section-title\">Utilisation</h3>\n            </div>\n            \n            <div className=\"progress-card card\">\n              <div className=\"progress-item\">\n                <div className=\"progress-header\">\n                  <span className=\"progress-label\">Taux d'emprunt</span>\n                  <span className=\"progress-value\">{borrowRate}%</span>\n                </div>\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${borrowRate}%` }}\n                  ></div>\n                </div>\n              </div>\n              \n              <div className=\"progress-metrics\">\n                <div className=\"metric\">\n                  <TrendingUp size={16} />\n                  <span>Tendance stable</span>\n                </div>\n                <div className=\"metric\">\n                  <Calendar size={16} />\n                  <span>Mis  jour maintenant</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Activity */}\n        <div className=\"activity-section\">\n          <div className=\"section-header\">\n            <h3 className=\"section-title\">Activit rcente</h3>\n            <MicroButton \n              variant=\"secondary\" \n              size=\"small\"\n              icon={ArrowRight}\n            >\n              Voir tout\n            </MicroButton>\n          </div>\n          \n          <MicroCard className=\"activity-list\">\n            {recentActivity.length > 0 ? (\n              recentActivity.map((activity, index) => {\n                const IconComponent = getActivityIcon(activity.type);\n                return (\n                  <div key={index} className=\"activity-item\">\n                    <div className=\"activity-icon\">\n                      <IconComponent size={16} />\n                    </div>\n                    <div className=\"activity-content\">\n                      <div className=\"activity-title\">{activity.title}</div>\n                      <div className=\"activity-description\">{activity.description}</div>\n                    </div>\n                    <div className=\"activity-time\">{activity.time}</div>\n                  </div>\n                );\n              })\n            ) : (\n              <div className=\"empty-activity\">\n                <Activity size={48} />\n                <p>Aucune activit rcente</p>\n                <small>Les nouvelles activits apparatront ici</small>\n              </div>\n            )}\n          </MicroCard>\n        </div>\n      </div>\n\n      {showPrintManager && (\n        <PrintManager\n          documents={documents}\n          stats={stats}\n          onClose={() => setShowPrintManager(false)}\n        />\n      )}\n\n      {/* Floating Action Button */}\n      <div className=\"floating-actions\">\n        <FloatingButton\n          icon={Plus}\n          onClick={() => onNavigate('add-document')}\n          tooltip=\"Ajouter un document\"\n          color=\"#10B981\"\n        />\n      </div>\n\n      <style>{`\n        .dashboard {\n          height: 100%;\n          overflow-y: auto;\n          background: #FAF9F6;\n        }\n        \n        .hero-section {\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n          padding: 48px 32px;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .hero-section::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          right: 0;\n          width: 50%;\n          height: 100%;\n          background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs><pattern id=\"grain\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\"><circle cx=\"20\" cy=\"20\" r=\"1\" fill=\"%23F3EED9\" opacity=\"0.05\"/><circle cx=\"60\" cy=\"40\" r=\"1\" fill=\"%23F3EED9\" opacity=\"0.03\"/><circle cx=\"80\" cy=\"80\" r=\"1\" fill=\"%23F3EED9\" opacity=\"0.04\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grain)\"/></svg>');\n          opacity: 0.3;\n        }\n        \n        .hero-content {\n          display: grid;\n          grid-template-columns: 1fr 300px;\n          gap: 48px;\n          align-items: center;\n          max-width: 1200px;\n          margin: 0 auto;\n          position: relative;\n          z-index: 1;\n        }\n        \n        .hero-title {\n          font-size: 36px;\n          font-weight: 800;\n          margin: 0 0 16px 0;\n          line-height: 1.2;\n          letter-spacing: -0.5px;\n        }\n        \n        .hero-subtitle {\n          font-size: 18px;\n          color: rgba(243, 238, 217, 0.9);\n          margin: 0 0 32px 0;\n          line-height: 1.5;\n        }\n\n        .hero-search {\n          margin: 0 0 32px 0;\n          max-width: 600px;\n        }\n        \n        .hero-actions {\n          display: flex;\n          gap: 16px;\n          flex-wrap: wrap;\n        }\n        \n        .hero-button {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px 24px;\n          border: none;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .hero-button.primary {\n          background: #C2571B;\n          color: #FFFFFF;\n          border: 2px solid #C2571B;\n        }\n        \n        .hero-button.primary:hover {\n          background: #A8481A;\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(194, 87, 27, 0.3);\n          border-color: #A8481A;\n        }\n        \n        .hero-button.secondary {\n          background: rgba(255, 255, 255, 0.1);\n          color: #FFFFFF;\n          border: 2px solid rgba(255, 255, 255, 0.5);\n          backdrop-filter: blur(10px);\n        }\n        \n        .hero-button.secondary:hover {\n          background: rgba(255, 255, 255, 0.2);\n          transform: translateY(-2px);\n          border-color: rgba(255, 255, 255, 0.8);\n        }\n        \n        .hero-visual {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n        \n        .floating-card {\n          background: rgba(243, 238, 217, 0.1);\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(243, 238, 217, 0.2);\n          border-radius: 16px;\n          padding: 24px;\n          width: 100%;\n          animation: float 6s ease-in-out infinite;\n        }\n        \n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-10px); }\n        }\n        \n        .card-header {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          margin-bottom: 20px;\n          font-weight: 600;\n          font-size: 16px;\n        }\n        \n        .card-stats {\n          display: flex;\n          justify-content: space-between;\n        }\n        \n        .stat {\n          text-align: center;\n        }\n        \n        .stat-number {\n          display: block;\n          font-size: 28px;\n          font-weight: 800;\n          line-height: 1;\n          margin-bottom: 4px;\n        }\n        \n        .stat-label {\n          font-size: 12px;\n          opacity: 0.8;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n        \n        .dashboard-content {\n          padding: 32px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n        \n        .section-header {\n          margin-bottom: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n        \n        .section-title {\n          font-size: 24px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0;\n          letter-spacing: -0.3px;\n        }\n        \n        .section-subtitle {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin-top: 4px;\n        }\n        \n        .stats-section {\n          margin-bottom: 48px;\n        }\n        \n        .stats-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n          gap: 24px;\n        }\n        \n        .stat-card {\n          padding: 24px;\n          border-radius: 16px;\n          background: #FFFFFF;\n        }\n        \n        .stat-header {\n          display: flex;\n          align-items: flex-start;\n          justify-content: space-between;\n          margin-bottom: 16px;\n        }\n        \n        .stat-icon {\n          padding: 12px;\n          background: rgba(62, 92, 73, 0.1);\n          border-radius: 12px;\n        }\n        \n        .stat-meta {\n          text-align: right;\n          font-size: 12px;\n        }\n        \n        .stat-trend {\n          color: #3E5C49;\n          font-weight: 600;\n        }\n        \n        .stat-percentage {\n          color: #4A4A4A;\n          font-weight: 600;\n        }\n        \n        .stat-value {\n          font-size: 32px;\n          font-weight: 800;\n          color: #2E2E2E;\n          line-height: 1;\n          margin-bottom: 8px;\n        }\n        \n        .stat-title {\n          font-size: 14px;\n          color: #4A4A4A;\n          font-weight: 500;\n        }\n        \n        .dashboard-grid {\n          display: grid;\n          grid-template-columns: 2fr 1fr;\n          gap: 32px;\n          margin-bottom: 48px;\n        }\n        \n        .actions-grid {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        \n        .action-card {\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          padding: 20px;\n          background: #FFFFFF;\n          border: 2px solid rgba(229, 220, 194, 0.4);\n          border-radius: 16px;\n          cursor: pointer;\n          text-align: left;\n          transition: all 0.3s ease;\n          position: relative;\n          color: #1A1A1A;\n        }\n        \n        .action-card:hover {\n          transform: translateX(4px);\n          border-color: #3E5C49;\n          box-shadow: 0 8px 24px rgba(62, 92, 73, 0.15);\n        }\n        \n        .action-icon {\n          width: 48px;\n          height: 48px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #FFFFFF;\n          flex-shrink: 0;\n          position: relative;\n        }\n        \n        .action-badge {\n          position: absolute;\n          top: -4px;\n          right: -4px;\n          width: 12px;\n          height: 12px;\n          background: #C2571B;\n          border-radius: 50%;\n          border: 2px solid #FFFFFF;\n          animation: pulse 2s infinite;\n        }\n        \n        .action-content {\n          flex: 1;\n        }\n        \n        .action-title {\n          font-size: 16px;\n          font-weight: 600;\n          color: #1A1A1A;\n          margin-bottom: 4px;\n        }\n        \n        .action-description {\n          font-size: 14px;\n          color: #4A4A4A;\n        }\n        \n        .action-arrow {\n          color: #4A4A4A;\n          transition: transform 0.2s ease;\n        }\n        \n        .action-card:hover .action-arrow {\n          transform: translateX(4px);\n          color: #3E5C49;\n        }\n        \n        .progress-card {\n          padding: 24px;\n          background: #FFFFFF;\n          border-radius: 16px;\n        }\n        \n        .progress-item {\n          margin-bottom: 20px;\n        }\n        \n        .progress-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n        }\n        \n        .progress-label {\n          font-size: 14px;\n          font-weight: 500;\n          color: #2E2E2E;\n        }\n        \n        .progress-value {\n          font-size: 18px;\n          font-weight: 700;\n          color: #3E5C49;\n        }\n        \n        .progress-bar {\n          width: 100%;\n          height: 8px;\n          background: #F3EED9;\n          border-radius: 4px;\n          overflow: hidden;\n        }\n        \n        .progress-fill {\n          height: 100%;\n          background: linear-gradient(90deg, #3E5C49, #C2571B);\n          transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n        }\n        \n        .progress-metrics {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n        \n        .metric {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 12px;\n          color: #4A4A4A;\n        }\n        \n        .activity-list {\n          background: #FFFFFF;\n          border-radius: 16px;\n          overflow: hidden;\n        }\n        \n        .activity-item {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          padding: 20px;\n          border-bottom: 1px solid #F3EED9;\n        }\n        \n        .activity-item:last-child {\n          border-bottom: none;\n        }\n        \n        .activity-icon {\n          width: 40px;\n          height: 40px;\n          background: #F3EED9;\n          border-radius: 10px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #3E5C49;\n          flex-shrink: 0;\n        }\n        \n        .activity-content {\n          flex: 1;\n        }\n        \n        .activity-title {\n          font-size: 14px;\n          font-weight: 600;\n          color: #2E2E2E;\n          margin-bottom: 4px;\n        }\n        \n        .activity-description {\n          font-size: 13px;\n          color: #4A4A4A;\n        }\n        \n        .activity-time {\n          font-size: 12px;\n          color: #4A4A4A;\n          text-align: right;\n        }\n\n        .empty-activity {\n          text-align: center;\n          padding: 40px 20px;\n          color: #4A4A4A;\n        }\n\n        .empty-activity svg {\n          color: #C2C2C2;\n          margin-bottom: 16px;\n        }\n\n        .empty-activity p {\n          font-size: 16px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n        }\n\n        .empty-activity small {\n          font-size: 14px;\n          opacity: 0.7;\n        }\n        \n        .view-all-button {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 16px;\n          background: #F3EED9;\n          border: none;\n          border-radius: 8px;\n          color: #3E5C49;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .view-all-button:hover {\n          background: #EAEADC;\n          transform: translateY(-1px);\n        }\n        \n        /* Responsive Design */\n        @media (max-width: 1024px) {\n          .hero-content {\n            grid-template-columns: 1fr;\n            gap: 32px;\n            text-align: center;\n          }\n          \n          .dashboard-grid {\n            grid-template-columns: 1fr;\n            gap: 24px;\n          }\n        }\n        \n        @media (max-width: 768px) {\n          .hero-section {\n            padding: 32px 16px;\n          }\n          \n          .hero-title {\n            font-size: 28px;\n          }\n          \n          .hero-subtitle {\n            font-size: 16px;\n          }\n          \n          .hero-actions {\n            justify-content: center;\n          }\n          \n          .dashboard-content {\n            padding: 16px;\n          }\n          \n          .stats-grid {\n            grid-template-columns: 1fr;\n            gap: 16px;\n          }\n          \n          .section-title {\n            font-size: 20px;\n          }\n          \n          .floating-card {\n            padding: 16px;\n          }\n        }\n        \n        @media (max-width: 480px) {\n          .hero-button {\n            width: 100%;\n            justify-content: center;\n          }\n          \n          .action-card {\n            padding: 16px;\n          }\n          \n          .activity-item {\n            padding: 16px;\n          }\n          \n          .stat-card {\n            padding: 16px;\n          }\n        }\n        \n        /* Floating Actions */\n        .floating-actions {\n          position: fixed;\n          bottom: 24px;\n          right: 24px;\n          z-index: 1000;\n        }\n        \n        @media (max-width: 768px) {\n          .floating-actions {\n            bottom: 80px;\n            right: 16px;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\r\nimport { Document, SyncStatus, NetworkStatus } from '../../types';\r\nimport { \r\n  Search, \r\n  Plus, \r\n  Edit, \r\n  Trash2, \r\n  BookOpen, \r\n  User, \r\n  Building, \r\n  MapPin, \r\n  Calendar, \r\n  Tag, \r\n  Hash,\r\n  Download,\r\n  Upload,\r\n  Wifi,\r\n  WifiOff,\r\n  Clock,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  Loader2,\r\n  Filter,\r\n  LayoutGrid,\r\n  Layers,\r\n  Heart,\r\n  List,\r\n  Grid,\r\n  Table,\r\n  Image,\r\n  Eye,\r\n  MoreHorizontal,\r\n  SortAsc,\r\n  SortDesc\r\n} from 'lucide-react';\r\nimport { Document3DView } from './Document3DView';\r\nimport { useQuickToast } from './ToastSystem';\r\n\r\ninterface DocumentListProps {\r\n  documents: Document[];\r\n  onAdd: () => void;\r\n  onEdit: (document: Document) => void;\r\n  onBorrow?: (document: Document) => void;\r\n  onDelete: (id: number) => void;\r\n  onRefresh: () => void;\r\n  syncStatus: SyncStatus;\r\n  networkStatus: NetworkStatus;\r\n}\r\n\r\nexport const DocumentList: React.FC<DocumentListProps> = ({\r\n  documents,\r\n  onAdd,\r\n  onEdit,\r\n  onBorrow,\r\n  onDelete,\r\n  onRefresh,\r\n  syncStatus,\r\n  networkStatus\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [selectedSyncStatus, setSelectedSyncStatus] = useState('all');\r\n  const [filteredDocuments, setFilteredDocuments] = useState<Document[]>([]);\r\n  const [viewMode, setViewMode] = useState<'grid' | 'list' | 'table' | 'mosaic' | 'cards'>('grid');\r\n  const [selectedDocument, setSelectedDocument] = useState<Document | null>(null);\r\n  const [sortBy, setSortBy] = useState<'titre' | 'auteur' | 'annee' | 'lastModified'>('titre');\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n  const toast = useQuickToast();\r\n\r\n  useEffect(() => {\r\n    filterAndSortDocuments();\r\n  }, [documents, searchTerm, selectedCategory, selectedSyncStatus, sortBy, sortOrder]);\r\n\r\n  const filterAndSortDocuments = () => {\r\n    let filtered = documents;\r\n\r\n    // Filtrage par terme de recherche\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      filtered = filtered.filter(doc =>\r\n        doc.titre.toLowerCase().includes(term) ||\r\n        doc.auteur.toLowerCase().includes(term) ||\r\n        doc.editeur.toLowerCase().includes(term) ||\r\n        doc.descripteurs.toLowerCase().includes(term) ||\r\n        doc.cote.toLowerCase().includes(term) ||\r\n        (doc.isbn && doc.isbn.toLowerCase().includes(term))\r\n      );\r\n    }\r\n\r\n    // Filtrage par catgorie (utilise les descripteurs)\r\n    if (selectedCategory !== 'all') {\r\n      filtered = filtered.filter(doc =>\r\n        doc.descripteurs.toLowerCase().includes(selectedCategory.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filtrage par statut de sync\r\n    if (selectedSyncStatus !== 'all') {\r\n      filtered = filtered.filter(doc => doc.syncStatus === selectedSyncStatus);\r\n    }\r\n\r\n    // Tri des documents\r\n    filtered.sort((a, b) => {\r\n      let valueA: string | number = '';\r\n      let valueB: string | number = '';\r\n\r\n      switch (sortBy) {\r\n        case 'titre':\r\n          valueA = a.titre.toLowerCase();\r\n          valueB = b.titre.toLowerCase();\r\n          break;\r\n        case 'auteur':\r\n          valueA = a.auteur.toLowerCase();\r\n          valueB = b.auteur.toLowerCase();\r\n          break;\r\n        case 'annee':\r\n          valueA = parseInt(a.annee) || 0;\r\n          valueB = parseInt(b.annee) || 0;\r\n          break;\r\n        case 'lastModified':\r\n          valueA = new Date(a.lastModified).getTime();\r\n          valueB = new Date(b.lastModified).getTime();\r\n          break;\r\n      }\r\n\r\n      if (valueA < valueB) return sortOrder === 'asc' ? -1 : 1;\r\n      if (valueA > valueB) return sortOrder === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n    setFilteredDocuments(filtered);\r\n  };\r\n\r\n  const getUniqueCategories = () => {\r\n    const categories = new Set<string>();\r\n    documents.forEach(doc => {\r\n      doc.descripteurs.split(',').forEach(desc => {\r\n        categories.add(desc.trim());\r\n      });\r\n    });\r\n    return Array.from(categories).sort();\r\n  };\r\n\r\n  const toggleSort = (field: typeof sortBy) => {\r\n    if (sortBy === field) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(field);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const getSyncStatusIcon = (status: Document['syncStatus']) => {\r\n    switch (status) {\r\n      case 'synced':\r\n        return <CheckCircle className=\"sync-icon synced\" />;\r\n      case 'pending':\r\n        return <Clock className=\"sync-icon pending\" />;\r\n      case 'error':\r\n        return <AlertCircle className=\"sync-icon error\" />;\r\n      case 'conflict':\r\n        return <AlertCircle className=\"sync-icon conflict\" />;\r\n      default:\r\n        return <Clock className=\"sync-icon default\" />;\r\n    }\r\n  };\r\n\r\n  const handleEdit = (document: Document) => {\r\n    onEdit(document);\r\n    toast.info('Ouverture du formulaire de modification', `Pour \"${document.titre}\"`);\r\n  };\r\n\r\n  const handleBorrow = (document: Document) => {\r\n    if (onBorrow) {\r\n      onBorrow(document);\r\n      // Ne pas afficher de notification ici - elle sera affiche aprs confirmation dans le modal\r\n    }\r\n  };\r\n\r\n  const handleDelete = (id: number) => {\r\n    const document = documents.find(d => d.id === id);\r\n    if (window.confirm('tes-vous sr de vouloir supprimer ce document ?')) {\r\n      onDelete(id);\r\n      if (document) {\r\n        toast.success('Document supprim', `\"${document.titre}\" a t retir de la collection`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleView3D = (document: Document) => {\r\n    setSelectedDocument(document);\r\n    toast.info('Vue 3D active', `Exploration de \"${document.titre}\"`);\r\n  };\r\n\r\n  const getNetworkStatusDisplay = () => {\r\n    return (\r\n      <div className=\"network-status\">\r\n        {networkStatus.isOnline ? (\r\n          <div className=\"status-item online\">\r\n            <Wifi size={16} />\r\n            En ligne\r\n          </div>\r\n        ) : (\r\n          <div className=\"status-item offline\">\r\n            <WifiOff size={16} />\r\n            Hors ligne\r\n          </div>\r\n        )}\r\n        \r\n        {syncStatus.syncInProgress && (\r\n          <div className=\"status-item syncing\">\r\n            <Loader2 size={16} className=\"animate-spin\" />\r\n            Synchronisation...\r\n          </div>\r\n        )}\r\n        \r\n        {syncStatus.pendingOperations > 0 && (\r\n          <div className=\"status-item pending-ops\">\r\n            {syncStatus.pendingOperations} en attente\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Composant de carte document rutilisable\r\n  const DocumentCard = ({ document }: { document: Document }) => (\r\n    <div className=\"document-card\">\r\n      {/* Image de couverture */}\r\n      {document.couverture && (\r\n        <div className=\"document-cover\">\r\n          <img\r\n            src={document.couverture}\r\n            alt={`Couverture de ${document.titre}`}\r\n            className=\"cover-image\"\r\n            onError={(e) => {\r\n              e.currentTarget.style.display = 'none';\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"document-content\">\r\n        {/* En-tte avec statut */}\r\n        <div className=\"document-header\">\r\n          <div className=\"document-title-section\">\r\n            <h3 className=\"document-title\" title={document.titre}>\r\n              {document.titre}\r\n            </h3>\r\n            <p className=\"document-author\" title={document.auteur}>\r\n              <User size={14} />\r\n              {document.auteur}\r\n            </p>\r\n          </div>\r\n          <div className=\"document-status\">\r\n            {getSyncStatusIcon(document.syncStatus)}\r\n            {document.estEmprunte && (\r\n              <div className=\"borrowed-indicator\" title=\"Emprunt\" />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Informations dtailles */}\r\n        <div className=\"document-details\">\r\n          <div className=\"detail-item\">\r\n            <Building size={14} />\r\n            <span className=\"detail-text\">{document.editeur}</span>\r\n          </div>\r\n          \r\n          <div className=\"detail-item\">\r\n            <MapPin size={14} />\r\n            <span className=\"detail-text\">{document.lieuEdition}</span>\r\n          </div>\r\n          \r\n          <div className=\"detail-item\">\r\n            <Calendar size={14} />\r\n            <span className=\"detail-text\">{document.annee}</span>\r\n          </div>\r\n          \r\n          <div className=\"detail-item\">\r\n            <Hash size={14} />\r\n            <span className=\"detail-text document-cote\">{document.cote}</span>\r\n          </div>\r\n          \r\n          <div className=\"detail-item tags-item\">\r\n            <Tag size={14} />\r\n            <div className=\"tags-container\">\r\n              {document.descripteurs.split(',').slice(0, 3).map((desc, index) => (\r\n                <span\r\n                  key={index}\r\n                  className=\"tag-badge\"\r\n                  title={desc.trim()}\r\n                >\r\n                  {desc.trim()}\r\n                </span>\r\n              ))}\r\n              {document.descripteurs.split(',').length > 3 && (\r\n                <span className=\"tags-more\">\r\n                  +{document.descripteurs.split(',').length - 3}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        {document.description && (\r\n          <p className=\"document-description\" title={document.description}>\r\n            {document.description}\r\n          </p>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"document-footer\">\r\n          <div className=\"document-meta\">\r\n            <span className=\"version-info\">v{document.version}</span>\r\n            <span className=\"date-info\">\r\n              {new Date(document.lastModified).toLocaleDateString('fr-FR')}\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"document-actions\">\r\n            {onBorrow && (\r\n              <button\r\n                onClick={() => handleBorrow(document)}\r\n                className=\"action-button borrow-button\"\r\n                title={document.estEmprunte ? \"Retourner\" : \"Emprunter\"}\r\n                disabled={!document.estEmprunte && document.syncStatus === 'error'}\r\n              >\r\n                <Heart size={16} />\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={() => handleEdit(document)}\r\n              className=\"action-button edit-button\"\r\n              title=\"Modifier\"\r\n            >\r\n              <Edit size={16} />\r\n            </button>\r\n            <button\r\n              onClick={() => document.id && handleDelete(document.id)}\r\n              className=\"action-button delete-button\"\r\n              title=\"Supprimer\"\r\n            >\r\n              <Trash2 size={16} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Rendu en mode grille\r\n  const renderGridView = () => (\r\n    <div className=\"documents-grid\">\r\n      {filteredDocuments.map((document) => (\r\n        <DocumentCard key={document.id} document={document} />\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  // Rendu en mode liste\r\n  const renderListView = () => (\r\n    <div className=\"documents-list\">\r\n      {filteredDocuments.map((document) => (\r\n        <div key={document.id} className=\"document-list-item\">\r\n          <div className=\"list-item-content\">\r\n            <div className=\"list-item-main\">\r\n              <div className=\"list-item-header\">\r\n                <h4 className=\"list-item-title\">{document.titre}</h4>\r\n                <div className=\"list-item-status\">\r\n                  {getSyncStatusIcon(document.syncStatus)}\r\n                  {document.estEmprunte && <div className=\"borrowed-indicator\" />}\r\n                </div>\r\n              </div>\r\n              <div className=\"list-item-details\">\r\n                <span className=\"list-detail\">\r\n                  <User size={12} />\r\n                  {document.auteur}\r\n                </span>\r\n                <span className=\"list-detail\">\r\n                  <Building size={12} />\r\n                  {document.editeur}\r\n                </span>\r\n                <span className=\"list-detail\">\r\n                  <Calendar size={12} />\r\n                  {document.annee}\r\n                </span>\r\n                <span className=\"list-detail\">\r\n                  <Hash size={12} />\r\n                  {document.cote}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"list-item-actions\">\r\n              {onBorrow && (\r\n                <button\r\n                  onClick={() => handleBorrow(document)}\r\n                  className=\"action-button borrow-button\"\r\n                  title={document.estEmprunte ? \"Retourner\" : \"Emprunter\"}\r\n                >\r\n                  <Heart size={14} />\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={() => handleEdit(document)}\r\n                className=\"action-button edit-button\"\r\n                title=\"Modifier\"\r\n              >\r\n                <Edit size={14} />\r\n              </button>\r\n              <button\r\n                onClick={() => document.id && handleDelete(document.id)}\r\n                className=\"action-button delete-button\"\r\n                title=\"Supprimer\"\r\n              >\r\n                <Trash2 size={14} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  // Rendu en mode tableau\r\n  const renderTableView = () => (\r\n    <div className=\"documents-table-container\">\r\n      <table className=\"documents-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>\r\n              <button \r\n                className={`sort-button ${sortBy === 'titre' ? 'active' : ''}`}\r\n                onClick={() => toggleSort('titre')}\r\n              >\r\n                Titre\r\n                {sortBy === 'titre' && (sortOrder === 'asc' ? <SortAsc size={14} /> : <SortDesc size={14} />)}\r\n              </button>\r\n            </th>\r\n            <th>\r\n              <button \r\n                className={`sort-button ${sortBy === 'auteur' ? 'active' : ''}`}\r\n                onClick={() => toggleSort('auteur')}\r\n              >\r\n                Auteur\r\n                {sortBy === 'auteur' && (sortOrder === 'asc' ? <SortAsc size={14} /> : <SortDesc size={14} />)}\r\n              </button>\r\n            </th>\r\n            <th>diteur</th>\r\n            <th>\r\n              <button \r\n                className={`sort-button ${sortBy === 'annee' ? 'active' : ''}`}\r\n                onClick={() => toggleSort('annee')}\r\n              >\r\n                Anne\r\n                {sortBy === 'annee' && (sortOrder === 'asc' ? <SortAsc size={14} /> : <SortDesc size={14} />)}\r\n              </button>\r\n            </th>\r\n            <th>Cote</th>\r\n            <th>Status</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filteredDocuments.map((document) => (\r\n            <tr key={document.id} className={document.estEmprunte ? 'borrowed-row' : ''}>\r\n              <td className=\"title-cell\">\r\n                <div className=\"table-title\">\r\n                  {document.titre}\r\n                  {document.estEmprunte && <span className=\"borrowed-badge\">Emprunt</span>}\r\n                </div>\r\n              </td>\r\n              <td>{document.auteur}</td>\r\n              <td>{document.editeur}</td>\r\n              <td>{document.annee}</td>\r\n              <td className=\"cote-cell\">{document.cote}</td>\r\n              <td className=\"status-cell\">\r\n                {getSyncStatusIcon(document.syncStatus)}\r\n              </td>\r\n              <td className=\"actions-cell\">\r\n                <div className=\"table-actions\">\r\n                  {onBorrow && (\r\n                    <button\r\n                      onClick={() => handleBorrow(document)}\r\n                      className=\"action-button borrow-button\"\r\n                      title={document.estEmprunte ? \"Retourner\" : \"Emprunter\"}\r\n                    >\r\n                      <Heart size={14} />\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleEdit(document)}\r\n                    className=\"action-button edit-button\"\r\n                    title=\"Modifier\"\r\n                  >\r\n                    <Edit size={14} />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => document.id && handleDelete(document.id)}\r\n                    className=\"action-button delete-button\"\r\n                    title=\"Supprimer\"\r\n                  >\r\n                    <Trash2 size={14} />\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  // Rendu en mode mosaque (images)\r\n  const renderMosaicView = () => (\r\n    <div className=\"documents-mosaic\">\r\n      {filteredDocuments.map((document) => (\r\n        <div key={document.id} className=\"mosaic-item\">\r\n          <div className=\"mosaic-image\">\r\n            {document.couverture ? (\r\n              <img\r\n                src={document.couverture}\r\n                alt={`Couverture de ${document.titre}`}\r\n                className=\"mosaic-cover\"\r\n                onError={(e) => {\r\n                  e.currentTarget.style.display = 'none';\r\n                }}\r\n              />\r\n            ) : (\r\n              <div className=\"mosaic-placeholder\">\r\n                <BookOpen size={32} />\r\n              </div>\r\n            )}\r\n            <div className=\"mosaic-overlay\">\r\n              <div className=\"mosaic-info\">\r\n                <h4 className=\"mosaic-title\">{document.titre}</h4>\r\n                <p className=\"mosaic-author\">{document.auteur}</p>\r\n              </div>\r\n              <div className=\"mosaic-actions\">\r\n                {onBorrow && (\r\n                  <button\r\n                    onClick={() => handleBorrow(document)}\r\n                    className=\"action-button borrow-button\"\r\n                    title={document.estEmprunte ? \"Retourner\" : \"Emprunter\"}\r\n                  >\r\n                    <Heart size={16} />\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => handleEdit(document)}\r\n                  className=\"action-button edit-button\"\r\n                  title=\"Modifier\"\r\n                >\r\n                  <Edit size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {document.estEmprunte && <div className=\"mosaic-borrowed-badge\">Emprunt</div>}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  // Rendu en mode cartes compactes\r\n  const renderCardsView = () => (\r\n    <div className=\"documents-cards\">\r\n      {filteredDocuments.map((document) => (\r\n        <div key={document.id} className=\"compact-card\">\r\n          <div className=\"card-header\">\r\n            <div className=\"card-icon\">\r\n              <BookOpen size={20} />\r\n            </div>\r\n            <div className=\"card-info\">\r\n              <h4 className=\"card-title\">{document.titre}</h4>\r\n              <p className=\"card-author\">{document.auteur}</p>\r\n            </div>\r\n            <div className=\"card-status\">\r\n              {getSyncStatusIcon(document.syncStatus)}\r\n              {document.estEmprunte && <div className=\"borrowed-indicator\" />}\r\n            </div>\r\n          </div>\r\n          <div className=\"card-details\">\r\n            <div className=\"card-meta\">\r\n              <span className=\"meta-item\">{document.editeur}</span>\r\n              <span className=\"meta-item\">{document.annee}</span>\r\n              <span className=\"meta-item\">{document.cote}</span>\r\n            </div>\r\n            <div className=\"card-actions\">\r\n              <button\r\n                onClick={() => handleEdit(document)}\r\n                className=\"action-button edit-button\"\r\n                title=\"Modifier\"\r\n              >\r\n                <Edit size={14} />\r\n              </button>\r\n              <button\r\n                onClick={() => document.id && handleDelete(document.id)}\r\n                className=\"action-button delete-button\"\r\n                title=\"Supprimer\"\r\n              >\r\n                <Trash2 size={14} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  // Fonction principale de rendu selon le mode\r\n  const renderDocuments = () => {\r\n    switch (viewMode) {\r\n      case 'list':\r\n        return renderListView();\r\n      case 'table':\r\n        return renderTableView();\r\n      case 'mosaic':\r\n        return renderMosaicView();\r\n      case 'cards':\r\n        return renderCardsView();\r\n      default:\r\n        return renderGridView();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"document-list-container\">\r\n      {/* En-tte principal */}\r\n      <div className=\"page-header\">\r\n        <div className=\"header-content\">\r\n          <div className=\"header-main\">\r\n            <div className=\"header-icon\">\r\n              <BookOpen size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h1 className=\"page-title\">\r\n                Bibliothque Numrique\r\n              </h1>\r\n              <p className=\"page-subtitle\">\r\n                {filteredDocuments.length} document{filteredDocuments.length !== 1 ? 's' : ''} dans votre collection\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"header-actions\">\r\n            {getNetworkStatusDisplay()}\r\n            <button onClick={onAdd} className=\"add-button\">\r\n              <Plus size={18} />\r\n              Nouveau document\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        {syncStatus.lastSync && (\r\n          <div className=\"sync-info\">\r\n            <Clock size={14} />\r\n            Dernire synchronisation: {new Date(syncStatus.lastSync).toLocaleString('fr-FR')}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Content scrollable area */}\r\n      <div className=\"scrollable-content\">\r\n        {/* Section de filtrage */}\r\n        <div className=\"filters-section\">\r\n        <div className=\"section-header\">\r\n          <div className=\"section-icon\">\r\n            <Filter size={20} />\r\n          </div>\r\n          <h3 className=\"section-title\">Filtres et recherche</h3>\r\n        </div>\r\n        \r\n        <div className=\"filters-grid\">\r\n          <div className=\"filter-field search-field\">\r\n            <label className=\"filter-label\">\r\n              <Search size={16} />\r\n              Rechercher\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"filter-input\"\r\n              placeholder=\"Titre, auteur, diteur, cote, ISBN...\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"filter-field\">\r\n            <label className=\"filter-label\">\r\n              <Tag size={16} />\r\n              Catgorie\r\n            </label>\r\n            <select\r\n              value={selectedCategory}\r\n              onChange={(e) => setSelectedCategory(e.target.value)}\r\n              className=\"filter-select\"\r\n            >\r\n              <option value=\"all\">Toutes les catgories</option>\r\n              {getUniqueCategories().map(category => (\r\n                <option key={category} value={category}>{category}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-field\">\r\n            <label className=\"filter-label\">\r\n              <CheckCircle size={16} />\r\n              Statut sync\r\n            </label>\r\n            <select\r\n              value={selectedSyncStatus}\r\n              onChange={(e) => setSelectedSyncStatus(e.target.value)}\r\n              className=\"filter-select\"\r\n            >\r\n              <option value=\"all\">Tous les statuts</option>\r\n              <option value=\"synced\">Synchronis</option>\r\n              <option value=\"pending\">En attente</option>\r\n              <option value=\"error\">Erreur</option>\r\n              <option value=\"conflict\">Conflit</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filter-field\">\r\n            <label className=\"filter-label\">\r\n              <SortAsc size={16} />\r\n              Trier par\r\n            </label>\r\n            <select\r\n              value={sortBy}\r\n              onChange={(e) => setSortBy(e.target.value as typeof sortBy)}\r\n              className=\"filter-select\"\r\n            >\r\n              <option value=\"titre\">Titre</option>\r\n              <option value=\"auteur\">Auteur</option>\r\n              <option value=\"annee\">Anne</option>\r\n              <option value=\"lastModified\">Date de modification</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Section de vues et tri */}\r\n        <div className=\"view-controls-section\">\r\n          <div className=\"section-header\">\r\n            <div className=\"section-icon\">\r\n              <Eye size={20} />\r\n            </div>\r\n            <h3 className=\"section-title\">Affichage et tri</h3>\r\n          </div>\r\n          \r\n          <div className=\"view-controls\">\r\n            <div className=\"view-mode-buttons\">\r\n              <button\r\n                className={`view-mode-btn ${viewMode === 'grid' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('grid')}\r\n                title=\"Vue en grille\"\r\n              >\r\n                <LayoutGrid size={18} />\r\n                <span>Grille</span>\r\n              </button>\r\n              <button\r\n                className={`view-mode-btn ${viewMode === 'list' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('list')}\r\n                title=\"Vue en liste\"\r\n              >\r\n                <List size={18} />\r\n                <span>Liste</span>\r\n              </button>\r\n              <button\r\n                className={`view-mode-btn ${viewMode === 'table' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('table')}\r\n                title=\"Vue en tableau\"\r\n              >\r\n                <Table size={18} />\r\n                <span>Tableau</span>\r\n              </button>\r\n              <button\r\n                className={`view-mode-btn ${viewMode === 'mosaic' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('mosaic')}\r\n                title=\"Vue mosaque\"\r\n              >\r\n                <Image size={18} />\r\n                <span>Mosaque</span>\r\n              </button>\r\n              <button\r\n                className={`view-mode-btn ${viewMode === 'cards' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('cards')}\r\n                title=\"Vue cartes compactes\"\r\n              >\r\n                <Grid size={18} />\r\n                <span>Cartes</span>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"sort-controls\">\r\n              <button\r\n                className={`sort-order-btn ${sortOrder === 'asc' ? 'active' : ''}`}\r\n                onClick={() => setSortOrder('asc')}\r\n                title=\"Tri croissant\"\r\n              >\r\n                <SortAsc size={18} />\r\n              </button>\r\n              <button\r\n                className={`sort-order-btn ${sortOrder === 'desc' ? 'active' : ''}`}\r\n                onClick={() => setSortOrder('desc')}\r\n                title=\"Tri dcroissant\"\r\n              >\r\n                <SortDesc size={18} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Affichage des documents selon le mode slectionn */}\r\n      {filteredDocuments.length > 0 ? (\r\n        renderDocuments()\r\n      ) : (\r\n        /* Message vide */\r\n        <div className=\"empty-state\">\r\n          <div className=\"empty-icon\">\r\n            <BookOpen size={64} />\r\n          </div>\r\n          <h3 className=\"empty-title\">\r\n            {searchTerm || selectedCategory !== 'all' || selectedSyncStatus !== 'all'\r\n              ? 'Aucun document trouv'\r\n              : 'Votre bibliothque est vide'\r\n            }\r\n          </h3>\r\n          <p className=\"empty-description\">\r\n            {searchTerm || selectedCategory !== 'all' || selectedSyncStatus !== 'all'\r\n              ? 'Essayez de modifier vos critres de recherche pour trouver ce que vous cherchez.'\r\n              : 'Commencez par ajouter votre premier document pour enrichir votre collection.'\r\n            }\r\n          </p>\r\n          <button onClick={onAdd} className=\"empty-action-button\">\r\n            <Plus size={18} />\r\n            Ajouter un document\r\n          </button>\r\n        </div>\r\n      )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .document-list-container {\r\n          padding: 24px;\r\n          background: linear-gradient(135deg, #F8F6F0 0%, #FFFFFF 100%);\r\n          height: 100vh;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 24px;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .scrollable-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 24px;\r\n          padding-right: 8px;\r\n          padding-bottom: 80px; /* Augmenter le padding pour une meilleure visibilit des derniers documents */\r\n          min-height: 0; /* Permettre au flex child de shrink */\r\n        }\r\n\r\n        .scrollable-content::-webkit-scrollbar {\r\n          width: 8px;\r\n        }\r\n\r\n        .scrollable-content::-webkit-scrollbar-track {\r\n          background: rgba(229, 220, 194, 0.2);\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .scrollable-content::-webkit-scrollbar-thumb {\r\n          background: rgba(62, 92, 73, 0.3);\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .scrollable-content::-webkit-scrollbar-thumb:hover {\r\n          background: rgba(62, 92, 73, 0.5);\r\n        }\r\n\r\n        /* En-tte principal */\r\n        .page-header {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-radius: 20px;\r\n          padding: 32px;\r\n          color: #F3EED9;\r\n          position: relative;\r\n          overflow: hidden;\r\n          box-shadow: 0 12px 32px rgba(62, 92, 73, 0.15);\r\n        }\r\n\r\n        .page-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: radial-gradient(circle at 80% 20%, rgba(243, 238, 217, 0.1) 0%, transparent 50%);\r\n          pointer-events: none;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          position: relative;\r\n          z-index: 1;\r\n          gap: 24px;\r\n        }\r\n\r\n        .header-main {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n\r\n        .header-icon {\r\n          width: 64px;\r\n          height: 64px;\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          border-radius: 18px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          box-shadow: 0 8px 24px rgba(194, 87, 27, 0.3);\r\n        }\r\n\r\n        .header-text {\r\n          flex: 1;\r\n        }\r\n\r\n        .page-title {\r\n          font-size: 28px;\r\n          font-weight: 700;\r\n          margin: 0 0 6px 0;\r\n          line-height: 1.2;\r\n          letter-spacing: -0.4px;\r\n        }\r\n\r\n        .page-subtitle {\r\n          font-size: 16px;\r\n          opacity: 0.9;\r\n          margin: 0;\r\n          font-weight: 400;\r\n        }\r\n\r\n        .header-actions {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n        }\r\n\r\n        .network-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          font-size: 14px;\r\n        }\r\n\r\n        .status-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          padding: 6px 12px;\r\n          border-radius: 8px;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          font-weight: 500;\r\n        }\r\n\r\n        .status-item.online { color: #10B981; }\r\n        .status-item.offline { color: #EF4444; }\r\n        .status-item.syncing { color: #3B82F6; }\r\n        .status-item.pending-ops { color: #F59E0B; }\r\n\r\n        .add-button {\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          color: #F3EED9;\r\n          border: none;\r\n          padding: 12px 20px;\r\n          border-radius: 12px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          box-shadow: 0 4px 16px rgba(194, 87, 27, 0.2);\r\n        }\r\n\r\n        .add-button:hover {\r\n          background: linear-gradient(135deg, #A8481A 0%, #8A3C18 100%);\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 24px rgba(194, 87, 27, 0.3);\r\n        }\r\n\r\n        .sync-info {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          margin-top: 16px;\r\n          font-size: 13px;\r\n          opacity: 0.8;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n\r\n        /* Section des filtres */\r\n        .filters-section {\r\n          background: #FFFFFF;\r\n          border-radius: 16px;\r\n          padding: 24px;\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);\r\n        }\r\n\r\n        .section-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .section-icon {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .section-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n\r\n        .filters-grid {\r\n          display: grid;\r\n          grid-template-columns: 2fr 1fr 1fr;\r\n          gap: 20px;\r\n        }\r\n\r\n        .filter-field {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n\r\n        .filter-field.search-field {\r\n          position: relative;\r\n        }\r\n\r\n        .filter-label {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n        }\r\n\r\n        .filter-input,\r\n        .filter-select {\r\n          padding: 12px 16px;\r\n          border: 2px solid #B8A678;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #1A1A1A;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          box-sizing: border-box;\r\n        }\r\n\r\n        .filter-input:focus,\r\n        .filter-select:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.25);\r\n          background: #FEFEFE;\r\n        }\r\n\r\n        /* Grille des documents */\r\n        .documents-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));\r\n          gap: 24px;\r\n        }\r\n\r\n        .document-card {\r\n          background: #FFFFFF;\r\n          border-radius: 16px;\r\n          overflow: hidden;\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n\r\n        .document-card:hover {\r\n          transform: translateY(-4px);\r\n          box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);\r\n          border-color: rgba(62, 92, 73, 0.2);\r\n        }\r\n\r\n        .document-cover {\r\n          height: 200px;\r\n          background: linear-gradient(135deg, #F8F6F0 0%, #E5DCC2 100%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .cover-image {\r\n          width: 100%;\r\n          height: 100%;\r\n          object-fit: cover;\r\n          transition: transform 0.3s ease;\r\n        }\r\n\r\n        .document-card:hover .cover-image {\r\n          transform: scale(1.05);\r\n        }\r\n\r\n        .document-content {\r\n          padding: 20px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 16px;\r\n          flex: 1;\r\n        }\r\n\r\n        .document-header {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          justify-content: space-between;\r\n          gap: 12px;\r\n        }\r\n\r\n        .document-title-section {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .document-title {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #1A1A1A;\r\n          margin: 0 0 6px 0;\r\n          line-height: 1.3;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          display: -webkit-box;\r\n          -webkit-line-clamp: 2;\r\n          -webkit-box-orient: vertical;\r\n        }\r\n\r\n        .document-author {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n\r\n        .document-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .sync-icon {\r\n          width: 16px;\r\n          height: 16px;\r\n        }\r\n\r\n        .sync-icon.synced { color: #10B981; }\r\n        .sync-icon.pending { color: #F59E0B; }\r\n        .sync-icon.error { color: #EF4444; }\r\n        .sync-icon.conflict { color: #F97316; }\r\n        .sync-icon.default { color: #6B7280; }\r\n\r\n        .borrowed-indicator {\r\n          width: 8px;\r\n          height: 8px;\r\n          background: #F97316;\r\n          border-radius: 50%;\r\n        }\r\n\r\n        .document-details {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 10px;\r\n        }\r\n\r\n        .detail-item {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 8px;\r\n          font-size: 13px;\r\n          color: #4A4A4A;\r\n          min-height: 20px;\r\n        }\r\n\r\n        .detail-item svg {\r\n          flex-shrink: 0;\r\n          margin-top: 1px;\r\n        }\r\n\r\n        .detail-text {\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          flex: 1;\r\n        }\r\n\r\n        .document-cote {\r\n          font-family: 'Monaco', 'Menlo', 'Consolas', monospace;\r\n          font-size: 12px;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .tags-item {\r\n          align-items: flex-start;\r\n        }\r\n\r\n        .tags-container {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: 6px;\r\n          flex: 1;\r\n        }\r\n\r\n        .tag-badge {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n          font-size: 11px;\r\n          padding: 4px 8px;\r\n          border-radius: 12px;\r\n          font-weight: 500;\r\n          max-width: 80px;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n\r\n        .tags-more {\r\n          font-size: 11px;\r\n          color: #6B7280;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .document-description {\r\n          font-size: 13px;\r\n          color: #4A4A4A;\r\n          line-height: 1.4;\r\n          margin: 0;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          display: -webkit-box;\r\n          -webkit-line-clamp: 2;\r\n          -webkit-box-orient: vertical;\r\n        }\r\n\r\n        .document-footer {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding-top: 16px;\r\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\r\n          margin-top: auto;\r\n        }\r\n\r\n        .document-meta {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          font-size: 11px;\r\n          color: #6B7280;\r\n        }\r\n\r\n        .version-info {\r\n          font-weight: 600;\r\n        }\r\n\r\n        .document-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n        }\r\n\r\n        .action-button {\r\n          width: 32px;\r\n          height: 32px;\r\n          border: none;\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n\r\n        .edit-button {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .edit-button:hover {\r\n          background: rgba(62, 92, 73, 0.2);\r\n          transform: translateY(-1px);\r\n        }\r\n\r\n        .delete-button {\r\n          background: rgba(239, 68, 68, 0.1);\r\n          color: #EF4444;\r\n        }\r\n\r\n        .delete-button:hover {\r\n          background: rgba(239, 68, 68, 0.2);\r\n          transform: translateY(-1px);\r\n        }\r\n\r\n        .borrow-button {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n        }\r\n\r\n        .borrow-button:hover:not(:disabled) {\r\n          background: rgba(194, 87, 27, 0.2);\r\n          transform: translateY(-1px);\r\n        }\r\n\r\n        .borrow-button:disabled {\r\n          opacity: 0.5;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        /* tat vide */\r\n        .empty-state {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          text-align: center;\r\n          padding: 60px 20px;\r\n          background: #FFFFFF;\r\n          border-radius: 16px;\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .empty-icon {\r\n          width: 80px;\r\n          height: 80px;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          border-radius: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #3E5C49;\r\n          margin-bottom: 24px;\r\n        }\r\n\r\n        .empty-title {\r\n          font-size: 20px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 12px 0;\r\n        }\r\n\r\n        .empty-description {\r\n          font-size: 16px;\r\n          color: #4A4A4A;\r\n          margin: 0 0 32px 0;\r\n          max-width: 480px;\r\n          line-height: 1.5;\r\n        }\r\n\r\n        .empty-action-button {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          border: none;\r\n          padding: 14px 28px;\r\n          border-radius: 12px;\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          box-shadow: 0 4px 16px rgba(62, 92, 73, 0.2);\r\n        }\r\n\r\n        .empty-action-button:hover {\r\n          background: linear-gradient(135deg, #2E453A 0%, #1E2F25 100%);\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 8px 24px rgba(62, 92, 73, 0.3);\r\n        }\r\n\r\n        /* Animation de rotation */\r\n        @keyframes spin {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n\r\n        .animate-spin {\r\n          animation: spin 1s linear infinite;\r\n        }\r\n\r\n        /* Responsive */\r\n        @media (max-width: 1024px) {\r\n          .filters-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: 16px;\r\n          }\r\n\r\n          .documents-grid {\r\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n            gap: 20px;\r\n          }\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .document-list-container {\r\n            padding: 16px;\r\n            gap: 16px;\r\n          }\r\n\r\n          .page-header {\r\n            padding: 24px;\r\n          }\r\n\r\n          .header-content {\r\n            flex-direction: column;\r\n            align-items: stretch;\r\n            gap: 20px;\r\n          }\r\n\r\n          .header-main {\r\n            flex-direction: column;\r\n            text-align: center;\r\n            gap: 16px;\r\n          }\r\n\r\n          .header-actions {\r\n            justify-content: center;\r\n            flex-wrap: wrap;\r\n          }\r\n\r\n          .network-status {\r\n            justify-content: center;\r\n            flex-wrap: wrap;\r\n          }\r\n\r\n          .filters-section {\r\n            padding: 20px;\r\n          }\r\n\r\n          .documents-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: 16px;\r\n          }\r\n\r\n          .document-card {\r\n            border-radius: 12px;\r\n          }\r\n\r\n          .document-content {\r\n            padding: 16px;\r\n            gap: 12px;\r\n          }\r\n\r\n          .document-title {\r\n            font-size: 15px;\r\n          }\r\n\r\n          .empty-state {\r\n            padding: 40px 16px;\r\n          }\r\n\r\n          .empty-title {\r\n            font-size: 18px;\r\n          }\r\n\r\n          .empty-description {\r\n            font-size: 14px;\r\n          }\r\n        }\r\n\r\n        @media (max-width: 480px) {\r\n          .document-list-container {\r\n            padding: 12px;\r\n          }\r\n\r\n          .page-header {\r\n            padding: 20px;\r\n            border-radius: 16px;\r\n          }\r\n\r\n          .header-icon {\r\n            width: 48px;\r\n            height: 48px;\r\n            border-radius: 12px;\r\n          }\r\n\r\n          .page-title {\r\n            font-size: 24px;\r\n          }\r\n\r\n          .page-subtitle {\r\n            font-size: 14px;\r\n          }\r\n\r\n          .add-button {\r\n            padding: 10px 16px;\r\n            font-size: 13px;\r\n          }\r\n\r\n          .section-title {\r\n            font-size: 16px;\r\n          }\r\n\r\n          .filters-section {\r\n            padding: 16px;\r\n          }\r\n\r\n          .document-cover {\r\n            height: 160px;\r\n          }\r\n\r\n          .document-content {\r\n            padding: 14px;\r\n          }\r\n\r\n          .document-title {\r\n            font-size: 14px;\r\n          }\r\n\r\n          .document-author {\r\n            font-size: 13px;\r\n          }\r\n\r\n          .detail-item {\r\n            font-size: 12px;\r\n          }\r\n\r\n          .tag-badge {\r\n            font-size: 10px;\r\n            padding: 3px 6px;\r\n            max-width: 60px;\r\n          }\r\n\r\n          .empty-state {\r\n            padding: 32px 12px;\r\n          }\r\n\r\n          .empty-icon {\r\n            width: 64px;\r\n            height: 64px;\r\n            border-radius: 16px;\r\n            margin-bottom: 20px;\r\n          }\r\n\r\n          .empty-title {\r\n            font-size: 16px;\r\n          }\r\n\r\n          .empty-description {\r\n            font-size: 13px;\r\n            margin-bottom: 24px;\r\n          }\r\n\r\n          .empty-action-button {\r\n            padding: 12px 20px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n\r\n        /* tats de focus pour accessibilit */\r\n        .add-button:focus-visible,\r\n        .empty-action-button:focus-visible,\r\n        .action-button:focus-visible {\r\n          outline: 2px solid #3E5C49;\r\n          outline-offset: 2px;\r\n        }\r\n\r\n        .filter-input:focus-visible,\r\n        .filter-select:focus-visible {\r\n          outline: none;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.2);\r\n        }\r\n\r\n        /* Animation d'entre pour les cartes */\r\n        @keyframes cardSlideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(20px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n\r\n        .document-card {\r\n          animation: cardSlideIn 0.4s ease-out forwards;\r\n        }\r\n\r\n        .document-card:nth-child(1) { animation-delay: 0ms; }\r\n        .document-card:nth-child(2) { animation-delay: 50ms; }\r\n        .document-card:nth-child(3) { animation-delay: 100ms; }\r\n        .document-card:nth-child(4) { animation-delay: 150ms; }\r\n        .document-card:nth-child(5) { animation-delay: 200ms; }\r\n        .document-card:nth-child(6) { animation-delay: 250ms; }\r\n\r\n        /* Animation pour les filtres */\r\n        .filters-section {\r\n          animation: cardSlideIn 0.3s ease-out;\r\n        }\r\n\r\n        /* Amlioration du contraste pour l'accessibilit */\r\n        @media (prefers-contrast: high) {\r\n          .document-card {\r\n            border: 2px solid #2E2E2E;\r\n          }\r\n\r\n          .tag-badge {\r\n            background: #3E5C49;\r\n            color: #FFFFFF;\r\n          }\r\n\r\n          .detail-item {\r\n            color: #2E2E2E;\r\n          }\r\n        }\r\n\r\n        /* Respect des prfrences de mouvement rduit */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .document-card,\r\n          .filters-section,\r\n          .add-button,\r\n          .empty-action-button,\r\n          .action-button,\r\n          .cover-image {\r\n            animation: none;\r\n            transition: none;\r\n          }\r\n\r\n          .animate-spin {\r\n            animation: none;\r\n          }\r\n        }\r\n\r\n        /* ====================================\r\n           STYLES POUR LES MODES D'AFFICHAGE\r\n           ==================================== */\r\n\r\n        /* Section contrles de vue */\r\n        .view-controls-section {\r\n          background: rgba(255, 255, 255, 0.8);\r\n          backdrop-filter: blur(10px);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          border-radius: 16px;\r\n          padding: 24px;\r\n          margin-bottom: 24px;\r\n        }\r\n\r\n        .view-controls {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          gap: 24px;\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .view-mode-buttons {\r\n          display: flex;\r\n          gap: 8px;\r\n          background: rgba(229, 220, 194, 0.2);\r\n          border-radius: 12px;\r\n          padding: 4px;\r\n        }\r\n\r\n        .view-mode-btn {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 16px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #4A4A4A;\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .view-mode-btn:hover {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .view-mode-btn.active {\r\n          background: #3E5C49;\r\n          color: #FFFFFF;\r\n          box-shadow: 0 2px 8px rgba(62, 92, 73, 0.3);\r\n        }\r\n\r\n        .sort-controls {\r\n          display: flex;\r\n          gap: 4px;\r\n          background: rgba(229, 220, 194, 0.2);\r\n          border-radius: 8px;\r\n          padding: 4px;\r\n        }\r\n\r\n        .sort-order-btn {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: 8px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #4A4A4A;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .sort-order-btn:hover {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .sort-order-btn.active {\r\n          background: #3E5C49;\r\n          color: #FFFFFF;\r\n        }\r\n\r\n        /* ====================================\r\n           MODE LISTE\r\n           ==================================== */\r\n\r\n        .documents-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n\r\n        .document-list-item {\r\n          background: #FFFFFF;\r\n          border: 1px solid rgba(229, 220, 194, 0.4);\r\n          border-radius: 12px;\r\n          padding: 20px;\r\n          transition: all 0.3s ease;\r\n          animation: cardSlideIn 0.4s ease-out forwards;\r\n        }\r\n\r\n        .document-list-item:hover {\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.1);\r\n          transform: translateY(-2px);\r\n        }\r\n\r\n        .list-item-content {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          gap: 20px;\r\n        }\r\n\r\n        .list-item-main {\r\n          flex: 1;\r\n        }\r\n\r\n        .list-item-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .list-item-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n\r\n        .list-item-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n\r\n        .list-item-details {\r\n          display: flex;\r\n          gap: 24px;\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .list-detail {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .list-item-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        /* ====================================\r\n           MODE TABLEAU\r\n           ==================================== */\r\n\r\n        .documents-table-container {\r\n          background: #FFFFFF;\r\n          border: 1px solid rgba(229, 220, 194, 0.4);\r\n          border-radius: 16px;\r\n          overflow: auto; /* Permettre le scroll complet */\r\n          animation: cardSlideIn 0.4s ease-out forwards;\r\n          max-height: 65vh; /* Limiter la hauteur pour permettre le scroll */\r\n        }\r\n\r\n        .documents-table {\r\n          width: 100%;\r\n          border-collapse: collapse;\r\n          min-width: 800px; /* Largeur minimum pour le scroll horizontal sur mobiles */\r\n        }\r\n\r\n        .documents-table thead {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n        }\r\n\r\n        .documents-table th {\r\n          padding: 16px 20px;\r\n          text-align: left;\r\n          font-weight: 600;\r\n          font-size: 14px;\r\n          border: none;\r\n        }\r\n\r\n        .sort-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          background: none;\r\n          border: none;\r\n          color: #F3EED9;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          padding: 0;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .sort-button:hover {\r\n          color: #E5DCC2;\r\n        }\r\n\r\n        .sort-button.active {\r\n          color: #FFFFFF;\r\n        }\r\n\r\n        .documents-table tbody tr {\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .documents-table tbody tr:hover {\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n\r\n        .documents-table tbody tr.borrowed-row {\r\n          background: rgba(194, 87, 27, 0.05);\r\n        }\r\n\r\n        .documents-table td {\r\n          padding: 16px 20px;\r\n          vertical-align: middle;\r\n          color: #2E2E2E;\r\n          font-size: 14px;\r\n        }\r\n\r\n        .title-cell {\r\n          font-weight: 600;\r\n        }\r\n\r\n        .table-title {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n\r\n        .borrowed-badge {\r\n          background: #C2571B;\r\n          color: #FFFFFF;\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n          font-size: 11px;\r\n          font-weight: 600;\r\n          text-transform: uppercase;\r\n        }\r\n\r\n        .cote-cell {\r\n          font-family: 'Courier New', monospace;\r\n          font-weight: 600;\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .status-cell {\r\n          text-align: center;\r\n        }\r\n\r\n        .actions-cell {\r\n          text-align: center;\r\n        }\r\n\r\n        .table-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n          justify-content: center;\r\n        }\r\n\r\n        /* ====================================\r\n           MODE MOSAQUE\r\n           ==================================== */\r\n\r\n        .documents-mosaic {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n          gap: 20px;\r\n        }\r\n\r\n        .mosaic-item {\r\n          position: relative;\r\n          border-radius: 12px;\r\n          overflow: hidden;\r\n          animation: cardSlideIn 0.4s ease-out forwards;\r\n        }\r\n\r\n        .mosaic-image {\r\n          position: relative;\r\n          aspect-ratio: 3/4;\r\n          overflow: hidden;\r\n          border-radius: 12px;\r\n          background: linear-gradient(135deg, #F3EED9 0%, #E5DCC2 100%);\r\n        }\r\n\r\n        .mosaic-cover {\r\n          width: 100%;\r\n          height: 100%;\r\n          object-fit: cover;\r\n          transition: transform 0.3s ease;\r\n        }\r\n\r\n        .mosaic-placeholder {\r\n          width: 100%;\r\n          height: 100%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .mosaic-overlay {\r\n          position: absolute;\r\n          bottom: 0;\r\n          left: 0;\r\n          right: 0;\r\n          background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));\r\n          color: white;\r\n          padding: 20px;\r\n          transform: translateY(100%);\r\n          transition: transform 0.3s ease;\r\n        }\r\n\r\n        .mosaic-item:hover .mosaic-overlay {\r\n          transform: translateY(0);\r\n        }\r\n\r\n        .mosaic-item:hover .mosaic-cover {\r\n          transform: scale(1.05);\r\n        }\r\n\r\n        .mosaic-info {\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .mosaic-title {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          margin: 0 0 4px 0;\r\n          line-height: 1.3;\r\n        }\r\n\r\n        .mosaic-author {\r\n          font-size: 14px;\r\n          opacity: 0.9;\r\n          margin: 0;\r\n        }\r\n\r\n        .mosaic-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n        }\r\n\r\n        .mosaic-borrowed-badge {\r\n          position: absolute;\r\n          top: 8px;\r\n          right: 8px;\r\n          background: #C2571B;\r\n          color: white;\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n          font-size: 11px;\r\n          font-weight: 600;\r\n          text-transform: uppercase;\r\n        }\r\n\r\n        /* ====================================\r\n           MODE CARTES COMPACTES\r\n           ==================================== */\r\n\r\n        .documents-cards {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .compact-card {\r\n          background: #FFFFFF;\r\n          border: 1px solid rgba(229, 220, 194, 0.4);\r\n          border-radius: 12px;\r\n          padding: 16px;\r\n          transition: all 0.3s ease;\r\n          animation: cardSlideIn 0.4s ease-out forwards;\r\n        }\r\n\r\n        .compact-card:hover {\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.1);\r\n          transform: translateY(-2px);\r\n        }\r\n\r\n        .card-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .card-icon {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n          border-radius: 10px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .card-info {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .card-title {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        .card-author {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        .card-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .card-details {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          gap: 12px;\r\n        }\r\n\r\n        .card-meta {\r\n          display: flex;\r\n          gap: 12px;\r\n          flex-wrap: wrap;\r\n          flex: 1;\r\n        }\r\n\r\n        .meta-item {\r\n          font-size: 12px;\r\n          color: #4A4A4A;\r\n          background: rgba(243, 238, 217, 0.5);\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n        }\r\n\r\n        .card-actions {\r\n          display: flex;\r\n          gap: 4px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        /* ====================================\r\n           RESPONSIVE DESIGN\r\n           ==================================== */\r\n\r\n        @media (max-width: 1024px) {\r\n          .view-controls {\r\n            flex-direction: column;\r\n            align-items: stretch;\r\n            gap: 16px;\r\n          }\r\n\r\n          .view-mode-buttons {\r\n            justify-content: center;\r\n          }\r\n\r\n          .documents-mosaic {\r\n            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n          }\r\n\r\n          .documents-cards {\r\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n          }\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .view-mode-buttons {\r\n            flex-wrap: wrap;\r\n          }\r\n\r\n          .view-mode-btn span {\r\n            display: none;\r\n          }\r\n\r\n          .list-item-content {\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n            gap: 16px;\r\n          }\r\n\r\n          .list-item-actions {\r\n            align-self: flex-end;\r\n          }\r\n\r\n          .documents-table-container {\r\n            overflow-x: auto;\r\n          }\r\n\r\n          .documents-table {\r\n            min-width: 600px;\r\n          }\r\n\r\n          .documents-mosaic {\r\n            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n          }\r\n\r\n          .documents-cards {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .card-meta {\r\n            flex-direction: column;\r\n            gap: 4px;\r\n          }\r\n        }\r\n\r\n        /* Dark mode support (optionnel) */\r\n        @media (prefers-color-scheme: dark) {\r\n          .document-list-container {\r\n            background: linear-gradient(135deg, #1A1A1A 0%, #2D2D2D 100%);\r\n          }\r\n\r\n          .page-header {\r\n            background: linear-gradient(135deg, #2E453A 0%, #1E2F25 100%);\r\n          }\r\n\r\n          .filters-section,\r\n          .document-card,\r\n          .empty-state {\r\n            background: #2D2D2D;\r\n            border-color: rgba(255, 255, 255, 0.1);\r\n          }\r\n\r\n          .document-title,\r\n          .section-title,\r\n          .empty-title {\r\n            color: #FFFFFF;\r\n          }\r\n\r\n          .document-author,\r\n          .detail-item,\r\n          .document-description,\r\n          .empty-description {\r\n            color: #B0B0B0;\r\n          }\r\n\r\n          .filter-input,\r\n          .filter-select {\r\n            background: #2D2D2D;\r\n            border-color: rgba(255, 255, 255, 0.2);\r\n            color: #FFFFFF;\r\n          }\r\n\r\n          .filter-label {\r\n            color: #FFFFFF;\r\n          }\r\n\r\n          .tag-badge {\r\n            background: rgba(62, 92, 73, 0.3);\r\n            color: #A8D5BA;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\nimport { \n  Heart, \n  X, \n  Coffee, \n  Gift, \n  Star,\n  CreditCard,\n  Smartphone,\n  Copy,\n  Check,\n  ArrowLeft,\n  Sparkles,\n  Users,\n  BookOpen,\n  Code\n} from 'lucide-react';\n\ninterface DonationProps {\n  onClose: () => void;\n}\n\nexport const Donation: React.FC<DonationProps> = ({ onClose }) => {\n  const [selectedAmount, setSelectedAmount] = useState<number | null>(1000);\n  const [customAmount, setCustomAmount] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState<'momo' | 'card'>('momo');\n  const [copied, setCopied] = useState<string | null>(null);\n\n  const predefinedAmounts = [\n    { value: 500, label: '500 FCFA', icon: Coffee, description: 'Un caf pour le dev' },\n    { value: 1000, label: '1 000 FCFA', icon: Heart, description: 'Petit soutien', popular: true },\n    { value: 2500, label: '2 500 FCFA', icon: Gift, description: 'Gnreux donateur' },\n    { value: 5000, label: '5 000 FCFA', icon: Star, description: 'Super supporter' }\n  ];\n\n  const paymentMethods = [\n    {\n      id: 'momo' as const,\n      name: 'Mobile Money',\n      icon: Smartphone,\n      networks: [\n        { name: 'MTN MoMo', number: '+237 652 761 931', color: '#FFCC00' },\n        { name: 'Orange Money', number: '+237 652 761 931', color: '#FF6600' }\n      ]\n    },\n    {\n      id: 'card' as const,\n      name: 'Carte bancaire',\n      icon: CreditCard,\n      description: 'Paiement scuris via PayPal ou Stripe',\n      comingSoon: true\n    }\n  ];\n\n  const handleCopy = async (text: string, type: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(type);\n      setTimeout(() => setCopied(null), 2000);\n    } catch (err) {\n      console.error('Erreur lors de la copie:', err);\n    }\n  };\n\n  const finalAmount = selectedAmount || parseInt(customAmount) || 0;\n\n  return (\n    <div className=\"donation-page\">\n      {/* Hero Section */}\n      <div className=\"hero-section\">\n        <div className=\"hero-background\">\n          <div className=\"hero-pattern\"></div>\n        </div>\n        <div className=\"hero-content\">\n          <button className=\"back-button\" onClick={onClose}>\n            <ArrowLeft size={20} />\n            <span>Retour</span>\n          </button>\n          \n          <div className=\"hero-main\">\n            <div className=\"hero-icon\">\n              <Heart size={48} />\n            </div>\n            <div className=\"hero-text\">\n              <h1 className=\"hero-title\">Soutenez le projet Bibliothque</h1>\n              <p className=\"hero-subtitle\">\n                Votre contribution aide  maintenir et amliorer ce systme de gestion de bibliothque gratuit\n              </p>\n            </div>\n          </div>\n          \n          {/* Impact Stats */}\n          <div className=\"impact-stats\">\n            <div className=\"impact-item\">\n              <Users size={24} />\n              <div className=\"impact-content\">\n                <span className=\"impact-number\">500+</span>\n                <span className=\"impact-label\">Bibliothques utilisatrices</span>\n              </div>\n            </div>\n            <div className=\"impact-item\">\n              <BookOpen size={24} />\n              <div className=\"impact-content\">\n                <span className=\"impact-number\">10K+</span>\n                <span className=\"impact-label\">Livres grs</span>\n              </div>\n            </div>\n            <div className=\"impact-item\">\n              <Code size={24} />\n              <div className=\"impact-content\">\n                <span className=\"impact-number\">100%</span>\n                <span className=\"impact-label\">Open Source</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"donation-content\">\n        {/* Amount Selection */}\n        <div className=\"section\">\n          <h2 className=\"section-title\">Choisir le montant</h2>\n          <p className=\"section-description\">\n            Chaque contribution, mme petite, fait une grande diffrence pour le dveloppement du projet\n          </p>\n          \n          <div className=\"amounts-grid\">\n            {predefinedAmounts.map((amount) => (\n              <button\n                key={amount.value}\n                className={`amount-card ${selectedAmount === amount.value ? 'selected' : ''} ${amount.popular ? 'popular' : ''}`}\n                onClick={() => {\n                  setSelectedAmount(amount.value);\n                  setCustomAmount('');\n                }}\n              >\n                {amount.popular && (\n                  <div className=\"popular-badge\">\n                    <Sparkles size={12} />\n                    Populaire\n                  </div>\n                )}\n                <div className=\"amount-icon\">\n                  <amount.icon size={24} />\n                </div>\n                <div className=\"amount-value\">{amount.label}</div>\n                <div className=\"amount-description\">{amount.description}</div>\n              </button>\n            ))}\n          </div>\n          \n          <div className=\"custom-amount\">\n            <label className=\"custom-label\">Ou entrez un montant personnalis</label>\n            <div className=\"custom-input-group\">\n              <input\n                type=\"number\"\n                value={customAmount}\n                onChange={(e) => {\n                  setCustomAmount(e.target.value);\n                  setSelectedAmount(null);\n                }}\n                placeholder=\"0\"\n                className=\"custom-input\"\n                min=\"100\"\n              />\n              <span className=\"currency\">FCFA</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Payment Methods */}\n        <div className=\"section\">\n          <h2 className=\"section-title\">Mthode de paiement</h2>\n          <p className=\"section-description\">\n            Choisissez votre mode de paiement prfr\n          </p>\n          \n          <div className=\"payment-methods\">\n            {paymentMethods.map((method) => (\n              <button\n                key={method.id}\n                className={`payment-method ${paymentMethod === method.id ? 'selected' : ''} ${method.comingSoon ? 'disabled' : ''}`}\n                onClick={() => !method.comingSoon && setPaymentMethod(method.id)}\n                disabled={method.comingSoon}\n              >\n                <div className=\"payment-icon\">\n                  <method.icon size={24} />\n                </div>\n                <div className=\"payment-content\">\n                  <div className=\"payment-name\">{method.name}</div>\n                  {method.description && (\n                    <div className=\"payment-description\">{method.description}</div>\n                  )}\n                  {method.comingSoon && (\n                    <div className=\"coming-soon-badge\">Bientt disponible</div>\n                  )}\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Payment Details */}\n        {finalAmount > 0 && paymentMethod === 'momo' && (\n          <div className=\"section\">\n            <h2 className=\"section-title\">Dtails de paiement</h2>\n            <p className=\"section-description\">\n              Utilisez les informations ci-dessous pour effectuer votre don de {finalAmount.toLocaleString()} FCFA\n            </p>\n            \n            <div className=\"payment-networks\">\n              {paymentMethods[0].networks?.map((network, index) => (\n                <div key={index} className=\"network-card\">\n                  <div className=\"network-header\">\n                    <div \n                      className=\"network-indicator\"\n                      style={{ backgroundColor: network.color }}\n                    ></div>\n                    <span className=\"network-name\">{network.name}</span>\n                  </div>\n                  \n                  <div className=\"network-details\">\n                    <div className=\"detail-item\">\n                      <span className=\"detail-label\">Numro</span>\n                      <div className=\"detail-value\">\n                        <span className=\"phone-number\">{network.number}</span>\n                        <button\n                          className=\"copy-button\"\n                          onClick={() => handleCopy(network.number.replace(/\\s/g, ''), `${network.name}-number`)}\n                        >\n                          {copied === `${network.name}-number` ? (\n                            <Check size={16} />\n                          ) : (\n                            <Copy size={16} />\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"detail-item\">\n                      <span className=\"detail-label\">Nom</span>\n                      <div className=\"detail-value\">\n                        <span>CHEUDJEU TEFOYE CEDRIC BASILIO</span>\n                        <button\n                          className=\"copy-button\"\n                          onClick={() => handleCopy('CHEUDJEU TEFOYE CEDRIC BASILIO', `${network.name}-name`)}\n                        >\n                          {copied === `${network.name}-name` ? (\n                            <Check size={16} />\n                          ) : (\n                            <Copy size={16} />\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"detail-item\">\n                      <span className=\"detail-label\">Montant</span>\n                      <div className=\"detail-value amount-highlight\">\n                        {finalAmount.toLocaleString()} FCFA\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"payment-note\">\n              <div className=\"note-icon\">\n                <Heart size={20} />\n              </div>\n              <div className=\"note-content\">\n                <h4>Merci pour votre soutien !</h4>\n                <p>\n                  Aprs votre transfert, n'hsitez pas  me contacter pour confirmer votre don et recevoir \n                  un reu si ncessaire. Votre contribution sera utilise pour amliorer et maintenir \n                  ce projet open source.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Why Donate */}\n        <div className=\"section\">\n          <h2 className=\"section-title\">Pourquoi faire un don ?</h2>\n          \n          <div className=\"why-donate-grid\">\n            <div className=\"why-card\">\n              <div className=\"why-icon\">\n                <Code size={24} />\n              </div>\n              <h3>Dveloppement continu</h3>\n              <p>Financer de nouvelles fonctionnalits et l'amlioration du systme</p>\n            </div>\n            \n            <div className=\"why-card\">\n              <div className=\"why-icon\">\n                <Heart size={24} />\n              </div>\n              <h3>Gratuit pour tous</h3>\n              <p>Maintenir le projet accessible gratuitement pour toutes les bibliothques</p>\n            </div>\n            \n            <div className=\"why-card\">\n              <div className=\"why-icon\">\n                <Users size={24} />\n              </div>\n              <h3>Support communautaire</h3>\n              <p>Fournir une assistance technique et des formations aux utilisateurs</p>\n            </div>\n            \n            <div className=\"why-card\">\n              <div className=\"why-icon\">\n                <Sparkles size={24} />\n              </div>\n              <h3>Innovation</h3>\n              <p>Intgrer les dernires technologies pour une meilleure exprience</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        .donation-page {\n          height: 100%;\n          overflow-y: auto;\n          background: #FAF9F6;\n        }\n        \n        .hero-section {\n          position: relative;\n          background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%);\n          color: #F3EED9;\n          padding: 48px 32px;\n          overflow: hidden;\n        }\n        \n        .hero-background {\n          position: absolute;\n          inset: 0;\n          overflow: hidden;\n        }\n        \n        .hero-pattern {\n          position: absolute;\n          inset: 0;\n          background-image: \n            radial-gradient(circle at 25% 25%, rgba(243, 238, 217, 0.1) 0%, transparent 50%),\n            radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);\n          animation: drift 20s ease-in-out infinite;\n        }\n        \n        @keyframes drift {\n          0%, 100% { transform: translate(0, 0) rotate(0deg); }\n          33% { transform: translate(30px, -30px) rotate(1deg); }\n          66% { transform: translate(-20px, 20px) rotate(-1deg); }\n        }\n        \n        .hero-content {\n          position: relative;\n          z-index: 1;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n        \n        .back-button {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: rgba(243, 238, 217, 0.15);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          color: #F3EED9;\n          padding: 12px 20px;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          font-size: 14px;\n          font-weight: 500;\n          margin-bottom: 32px;\n          width: fit-content;\n        }\n        \n        .back-button:hover {\n          background: rgba(243, 238, 217, 0.25);\n          transform: translateX(-4px);\n        }\n        \n        .hero-main {\n          display: flex;\n          align-items: center;\n          gap: 24px;\n          margin-bottom: 40px;\n          text-align: center;\n          flex-direction: column;\n        }\n        \n        .hero-icon {\n          width: 96px;\n          height: 96px;\n          background: rgba(243, 238, 217, 0.2);\n          border-radius: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n          animation: heartbeat 3s ease-in-out infinite;\n        }\n        \n        .hero-title {\n          font-size: 42px;\n          font-weight: 800;\n          margin: 0 0 16px 0;\n          line-height: 1.2;\n          letter-spacing: -0.5px;\n        }\n        \n        .hero-subtitle {\n          font-size: 20px;\n          opacity: 0.9;\n          margin: 0;\n          line-height: 1.5;\n          max-width: 600px;\n        }\n        \n        .impact-stats {\n          display: flex;\n          justify-content: center;\n          gap: 40px;\n          flex-wrap: wrap;\n        }\n        \n        .impact-item {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          background: rgba(243, 238, 217, 0.1);\n          padding: 20px 24px;\n          border-radius: 16px;\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(243, 238, 217, 0.2);\n        }\n        \n        .impact-number {\n          font-size: 24px;\n          font-weight: 800;\n          color: #F3EED9;\n          display: block;\n          line-height: 1;\n        }\n        \n        .impact-label {\n          font-size: 14px;\n          color: rgba(243, 238, 217, 0.9);\n          margin-top: 4px;\n        }\n        \n        .donation-content {\n          padding: 48px 32px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n        \n        .section {\n          margin-bottom: 56px;\n        }\n        \n        .section-title {\n          font-size: 28px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 8px 0;\n          letter-spacing: -0.3px;\n        }\n        \n        .section-description {\n          font-size: 16px;\n          color: #4A4A4A;\n          margin: 0 0 32px 0;\n          line-height: 1.6;\n        }\n        \n        .amounts-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 20px;\n          margin-bottom: 32px;\n        }\n        \n        .amount-card {\n          background: #FFFFFF;\n          border: 2px solid #E5DCC2;\n          border-radius: 20px;\n          padding: 24px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          text-align: center;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .amount-card:hover {\n          border-color: #E91E63;\n          transform: translateY(-4px);\n          box-shadow: 0 12px 32px rgba(233, 30, 99, 0.15);\n        }\n        \n        .amount-card.selected {\n          border-color: #E91E63;\n          background: rgba(233, 30, 99, 0.05);\n          box-shadow: 0 8px 24px rgba(233, 30, 99, 0.2);\n        }\n        \n        .amount-card.popular {\n          border-color: #E91E63;\n        }\n        \n        .popular-badge {\n          position: absolute;\n          top: -8px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: #E91E63;\n          color: #FFFFFF;\n          padding: 4px 12px;\n          border-radius: 12px;\n          font-size: 11px;\n          font-weight: 700;\n          display: flex;\n          align-items: center;\n          gap: 4px;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n        \n        .amount-icon {\n          width: 48px;\n          height: 48px;\n          background: rgba(233, 30, 99, 0.1);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #E91E63;\n          margin: 0 auto 16px;\n        }\n        \n        .amount-value {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin-bottom: 8px;\n        }\n        \n        .amount-description {\n          font-size: 14px;\n          color: #4A4A4A;\n        }\n        \n        .custom-amount {\n          background: #FFFFFF;\n          border: 2px solid #E5DCC2;\n          border-radius: 16px;\n          padding: 24px;\n        }\n        \n        .custom-label {\n          display: block;\n          font-size: 16px;\n          font-weight: 600;\n          color: #2E2E2E;\n          margin-bottom: 12px;\n        }\n        \n        .custom-input-group {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n        \n        .custom-input {\n          flex: 1;\n          padding: 16px;\n          border: 2px solid #E5DCC2;\n          border-radius: 12px;\n          font-size: 18px;\n          font-weight: 600;\n          text-align: right;\n        }\n        \n        .custom-input:focus {\n          outline: none;\n          border-color: #E91E63;\n        }\n        \n        .currency {\n          font-size: 18px;\n          font-weight: 600;\n          color: #4A4A4A;\n        }\n        \n        .payment-methods {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        \n        .payment-method {\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          background: #FFFFFF;\n          border: 2px solid #E5DCC2;\n          border-radius: 16px;\n          padding: 20px 24px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          text-align: left;\n        }\n        \n        .payment-method.selected {\n          border-color: #E91E63;\n          background: rgba(233, 30, 99, 0.05);\n        }\n        \n        .payment-method.disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        \n        .payment-icon {\n          width: 48px;\n          height: 48px;\n          background: rgba(233, 30, 99, 0.1);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #E91E63;\n        }\n        \n        .payment-content {\n          flex: 1;\n        }\n        \n        .payment-name {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin-bottom: 4px;\n        }\n        \n        .payment-description {\n          font-size: 14px;\n          color: #4A4A4A;\n        }\n        \n        .coming-soon-badge {\n          background: #FFB400;\n          color: #FFFFFF;\n          padding: 2px 8px;\n          border-radius: 8px;\n          font-size: 11px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n          margin-top: 8px;\n          display: inline-block;\n        }\n        \n        .payment-networks {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 24px;\n        }\n        \n        .network-card {\n          background: #FFFFFF;\n          border: 2px solid #E5DCC2;\n          border-radius: 20px;\n          padding: 24px;\n          box-shadow: 0 4px 16px rgba(233, 30, 99, 0.1);\n        }\n        \n        .network-header {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n        \n        .network-indicator {\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n        }\n        \n        .network-name {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n        }\n        \n        .network-details {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        \n        .detail-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        \n        .detail-label {\n          font-size: 14px;\n          font-weight: 600;\n          color: #4A4A4A;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n        \n        .detail-value {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 16px;\n          font-weight: 600;\n          color: #2E2E2E;\n        }\n        \n        .detail-value.amount-highlight {\n          font-size: 20px;\n          color: #E91E63;\n          font-weight: 800;\n        }\n        \n        .phone-number {\n          font-family: 'Courier New', monospace;\n          background: rgba(233, 30, 99, 0.1);\n          padding: 4px 8px;\n          border-radius: 6px;\n        }\n        \n        .copy-button {\n          background: #F3EED9;\n          border: 1px solid #E5DCC2;\n          color: #4A4A4A;\n          padding: 6px;\n          border-radius: 6px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .copy-button:hover {\n          background: #E91E63;\n          color: #FFFFFF;\n          border-color: #E91E63;\n        }\n        \n        .payment-note {\n          display: flex;\n          gap: 16px;\n          background: rgba(233, 30, 99, 0.05);\n          border: 1px solid rgba(233, 30, 99, 0.2);\n          border-radius: 16px;\n          padding: 24px;\n          margin-top: 32px;\n        }\n        \n        .note-icon {\n          width: 40px;\n          height: 40px;\n          background: #E91E63;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #FFFFFF;\n          flex-shrink: 0;\n        }\n        \n        .note-content h4 {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 8px 0;\n        }\n        \n        .note-content p {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin: 0;\n          line-height: 1.6;\n        }\n        \n        .why-donate-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 24px;\n        }\n        \n        .why-card {\n          background: #FFFFFF;\n          border: 1px solid #E5DCC2;\n          border-radius: 20px;\n          padding: 28px;\n          text-align: center;\n          transition: all 0.3s ease;\n        }\n        \n        .why-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 12px 32px rgba(233, 30, 99, 0.1);\n          border-color: rgba(233, 30, 99, 0.3);\n        }\n        \n        .why-icon {\n          width: 56px;\n          height: 56px;\n          background: rgba(233, 30, 99, 0.1);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #E91E63;\n          margin: 0 auto 20px;\n        }\n        \n        .why-card h3 {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 12px 0;\n        }\n        \n        .why-card p {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin: 0;\n          line-height: 1.6;\n        }\n        \n        /* Responsive Design */\n        @media (max-width: 768px) {\n          .hero-section {\n            padding: 32px 16px;\n          }\n          \n          .hero-title {\n            font-size: 32px;\n          }\n          \n          .hero-subtitle {\n            font-size: 18px;\n          }\n          \n          .impact-stats {\n            flex-direction: column;\n            gap: 16px;\n          }\n          \n          .impact-item {\n            justify-content: center;\n          }\n          \n          .donation-content {\n            padding: 32px 16px;\n          }\n          \n          .amounts-grid {\n            grid-template-columns: 1fr 1fr;\n            gap: 16px;\n          }\n          \n          .payment-networks {\n            grid-template-columns: 1fr;\n          }\n          \n          .why-donate-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .detail-item {\n            flex-direction: column;\n            align-items: stretch;\n            gap: 8px;\n          }\n          \n          .detail-value {\n            justify-content: space-between;\n          }\n        }\n        \n        @media (max-width: 480px) {\n          .hero-main {\n            gap: 16px;\n          }\n          \n          .hero-icon {\n            width: 72px;\n            height: 72px;\n          }\n          \n          .hero-title {\n            font-size: 28px;\n          }\n          \n          .amounts-grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .amount-card {\n            padding: 20px;\n          }\n          \n          .payment-method {\n            padding: 16px 20px;\n          }\n          \n          .network-card {\n            padding: 20px;\n          }\n          \n          .payment-note {\n            flex-direction: column;\n            gap: 12px;\n            text-align: center;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};","// src/renderer/components/EnhancedAuthentication.tsx - Version redesigne\nimport React, { useState } from 'react';\nimport { \n  Book, \n  User, \n  Lock, \n  Eye, \n  EyeOff, \n  Shield,\n  Users,\n  BarChart3,\n  WifiOff,\n  Building,\n  KeyRound,\n  UserPlus,\n  LogIn,\n  ArrowRight,\n  CheckCircle,\n  AlertCircle,\n  Mail,\n  Phone,\n  MapPin,\n  Sparkles,\n  HardDrive,\n  Database\n} from 'lucide-react';\n\ninterface EnhancedAuthenticationProps {\n  onLogin: (credentials: { \n    email: string; \n    password: string; \n    institutionCode?: string;\n    mode: 'login' | 'register' | 'create_institution';\n    userData?: any;\n  }) => Promise<void>;\n}\n\nexport const EnhancedAuthentication: React.FC<EnhancedAuthenticationProps> = ({ onLogin }) => {\n  const [mode, setMode] = useState<'login' | 'create_institution'>('login');\n  const [step, setStep] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n\n  // Donnes du formulaire de connexion\n  const [loginData, setLoginData] = useState(() => {\n    // Charger les informations de dernire connexion\n    try {\n      const { LocalAuthService } = require('../services/LocalAuthService');\n      const lastLogin = LocalAuthService.getLastLoginInfo();\n      if (lastLogin) {\n        return {\n          email: lastLogin.email,\n          password: lastLogin.password || '',\n          institutionCode: lastLogin.institutionCode\n        };\n      }\n    } catch (error) {\n      console.log('Impossible de charger les dernires informations de connexion');\n    }\n    \n    return {\n      email: '',\n      password: '',\n      institutionCode: ''\n    };\n  });\n\n  // Donnes pour la cration d'tablissement\n  const [institutionData, setInstitutionData] = useState({\n    name: '',\n    type: 'library' as 'school' | 'university' | 'library' | 'other',\n    city: '',\n    adminEmail: '',\n    adminPassword: '',\n    adminFirstName: '',\n    adminLastName: ''\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    setIsLoading(true);\n\n    try {\n      if (mode === 'login') {\n        await onLogin({\n          email: loginData.email,\n          password: loginData.password,\n          institutionCode: loginData.institutionCode,\n          mode: 'login'\n        });\n      } else if (mode === 'create_institution') {\n        if (step === 2) {\n          await onLogin({\n            email: institutionData.adminEmail,\n            password: institutionData.adminPassword,\n            mode: 'create_institution',\n            userData: {\n              institution: institutionData,\n              admin: {\n                firstName: institutionData.adminFirstName,\n                lastName: institutionData.adminLastName\n              }\n            }\n          });\n        }\n      }\n    } catch (err: any) {\n      setError(err.message || 'Erreur de connexion');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const nextStep = () => {\n    if (step === 1 && institutionData.name && institutionData.type && institutionData.city) {\n      setStep(2);\n    }\n  };\n\n  const previousStep = () => {\n    if (step === 2) {\n      setStep(1);\n    }\n  };\n\n  const institutionTypes = [\n    { value: 'school', label: 'cole/Lyce', icon: '' },\n    { value: 'university', label: 'Universit', icon: '' },\n    { value: 'library', label: 'Bibliothque', icon: '' },\n    { value: 'other', label: 'Autre', icon: '' }\n  ];\n\n  const defaultCredentials = [\n    { email: 'admin@local', password: 'admin', role: 'Administrateur' },\n    { email: 'bibliothecaire@local', password: 'biblio', role: 'Bibliothcaire' },\n    { email: 'test@local', password: 'test', role: 'Utilisateur' },\n    { email: 'demo@demo', password: 'demo', role: 'Dmo' }\n  ];\n\n  const handleQuickLogin = (email: string, password: string) => {\n    setLoginData({ \n      email, \n      password, \n      institutionCode: 'BIBLIO2024' // Code par dfaut pour les connexions rapides\n    });\n    setError('');\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-background\">\n        <div className=\"pattern-overlay\"></div>\n        <div className=\"floating-shapes\">\n          <div className=\"shape shape-1\"></div>\n          <div className=\"shape shape-2\"></div>\n          <div className=\"shape shape-3\"></div>\n        </div>\n      </div>\n\n      <div className=\"auth-content\">\n        {/* Header avec logo et status offline */}\n        <div className=\"auth-header\">\n          <div className=\"app-logo\">\n            <div className=\"logo-icon\">\n              <Book size={32} />\n            </div>\n            <div className=\"logo-text\">\n              <h1>Bibliothque</h1>\n              <span>Gestion Locale</span>\n            </div>\n          </div>\n          \n          <div className=\"offline-badge\">\n            <WifiOff size={16} />\n            <span>Mode Hors Ligne</span>\n          </div>\n        </div>\n\n        {/* Contenu principal */}\n        <div className=\"main-content\">\n          <div className=\"auth-card\">\n            {/* Navigation des onglets */}\n            <div className=\"auth-tabs\">\n              <button\n                className={`tab ${mode === 'login' ? 'active' : ''}`}\n                onClick={() => { setMode('login'); setStep(1); setError(''); }}\n              >\n                <LogIn size={18} />\n                <span>Connexion</span>\n              </button>\n              <button\n                className={`tab ${mode === 'create_institution' ? 'active' : ''}`}\n                onClick={() => { setMode('create_institution'); setStep(1); setError(''); }}\n              >\n                <Building size={18} />\n                <span>Nouvel tablissement</span>\n              </button>\n            </div>\n\n            {/* Messages d'erreur/succs */}\n            {error && (\n              <div className=\"message error\">\n                <AlertCircle size={18} />\n                <span>{error}</span>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"message success\">\n                <CheckCircle size={18} />\n                <span>{success}</span>\n              </div>\n            )}\n\n            {/* Formulaire de connexion */}\n            {mode === 'login' && (\n              <div className=\"login-section\">\n                <div className=\"section-header\">\n                  <HardDrive size={24} />\n                  <h2>Connexion Locale</h2>\n                  <p>Connectez-vous avec vos identifiants locaux</p>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"auth-form\">\n                  <div className=\"form-group\">\n                    <label>Email ou nom d'utilisateur</label>\n                    <div className=\"input-group\">\n                      <Mail size={20} />\n                      <input\n                        type=\"text\"\n                        value={loginData.email}\n                        onChange={(e) => setLoginData(prev => ({ ...prev, email: e.target.value }))}\n                        placeholder=\"admin@local\"\n                        required\n                        disabled={isLoading}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>Mot de passe</label>\n                    <div className=\"input-group\">\n                      <Lock size={20} />\n                      <input\n                        type={showPassword ? 'text' : 'password'}\n                        value={loginData.password}\n                        onChange={(e) => setLoginData(prev => ({ ...prev, password: e.target.value }))}\n                        placeholder=\"Votre mot de passe\"\n                        required\n                        disabled={isLoading}\n                      />\n                      <button\n                        type=\"button\"\n                        className=\"toggle-password\"\n                        onClick={() => setShowPassword(!showPassword)}\n                      >\n                        {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>Code d'accs tablissement</label>\n                    <div className=\"input-group\">\n                      <KeyRound size={20} />\n                      <input\n                        type=\"text\"\n                        value={loginData.institutionCode}\n                        onChange={(e) => setLoginData(prev => ({ ...prev, institutionCode: e.target.value }))}\n                        placeholder=\"Code d'accs de votre tablissement\"\n                        required\n                        disabled={isLoading}\n                      />\n                    </div>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    className=\"submit-btn\"\n                    disabled={!loginData.email || !loginData.password || !loginData.institutionCode || isLoading}\n                  >\n                    {isLoading ? (\n                      <>\n                        <div className=\"spinner\"></div>\n                        Connexion...\n                      </>\n                    ) : (\n                      <>\n                        <LogIn size={18} />\n                        Se connecter\n                      </>\n                    )}\n                  </button>\n                </form>\n\n                {/* Connexions rapides */}\n                <div className=\"quick-login-section\">\n                  <div className=\"divider\">\n                    <span>Connexions rapides</span>\n                  </div>\n                  \n                  <div className=\"quick-login-grid\">\n                    {defaultCredentials.map((cred, index) => (\n                      <button\n                        key={index}\n                        className=\"quick-login-btn\"\n                        onClick={() => handleQuickLogin(cred.email, cred.password)}\n                        disabled={isLoading}\n                      >\n                        <div className=\"credential-icon\">\n                          {cred.role === 'Administrateur' && <Shield size={16} />}\n                          {cred.role === 'Bibliothcaire' && <Users size={16} />}\n                          {cred.role === 'Utilisateur' && <User size={16} />}\n                          {cred.role === 'Dmo' && <Sparkles size={16} />}\n                        </div>\n                        <div className=\"credential-info\">\n                          <span className=\"role\">{cred.role}</span>\n                          <span className=\"email\">{cred.email}</span>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                  \n                  <div className=\"login-hint\">\n                    <p> <strong>Astuce :</strong> Cliquez sur une carte pour remplir automatiquement les champs</p>\n                    <p> Ou utilisez n'importe quel email avec le mot de passe \"demo\"</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Cration d'tablissement */}\n            {mode === 'create_institution' && (\n              <div className=\"institution-section\">\n                {step === 1 && (\n                  <div className=\"step-content\">\n                    <div className=\"section-header\">\n                      <Building size={24} />\n                      <h2>Nouvel tablissement</h2>\n                      <p>Crez votre tablissement local</p>\n                    </div>\n\n                    <form onSubmit={(e) => { e.preventDefault(); nextStep(); }} className=\"auth-form\">\n                      <div className=\"form-group\">\n                        <label>Nom de l'tablissement *</label>\n                        <div className=\"input-group\">\n                          <Building size={20} />\n                          <input\n                            type=\"text\"\n                            value={institutionData.name}\n                            onChange={(e) => setInstitutionData(prev => ({ ...prev, name: e.target.value }))}\n                            placeholder=\"Ma Bibliothque\"\n                            required\n                            disabled={isLoading}\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"form-group\">\n                        <label>Type d'tablissement *</label>\n                        <div className=\"type-grid\">\n                          {institutionTypes.map((type) => (\n                            <label key={type.value} className=\"type-card\">\n                              <input\n                                type=\"radio\"\n                                name=\"type\"\n                                value={type.value}\n                                checked={institutionData.type === type.value}\n                                onChange={(e) => setInstitutionData(prev => ({ ...prev, type: e.target.value as any }))}\n                                disabled={isLoading}\n                              />\n                              <div className=\"type-content\">\n                                <span className=\"type-icon\">{type.icon}</span>\n                                <span className=\"type-label\">{type.label}</span>\n                              </div>\n                            </label>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div className=\"form-group\">\n                        <label>Ville *</label>\n                        <div className=\"input-group\">\n                          <MapPin size={20} />\n                          <input\n                            type=\"text\"\n                            value={institutionData.city}\n                            onChange={(e) => setInstitutionData(prev => ({ ...prev, city: e.target.value }))}\n                            placeholder=\"Votre ville\"\n                            required\n                            disabled={isLoading}\n                          />\n                        </div>\n                      </div>\n\n                      <button\n                        type=\"submit\"\n                        className=\"submit-btn\"\n                        disabled={!institutionData.name || !institutionData.type || !institutionData.city || isLoading}\n                      >\n                        Continuer\n                        <ArrowRight size={18} />\n                      </button>\n                    </form>\n                  </div>\n                )}\n\n                {step === 2 && (\n                  <div className=\"step-content\">\n                    <div className=\"section-header\">\n                      <Shield size={24} />\n                      <h2>Compte Administrateur</h2>\n                      <p>Crez le compte administrateur principal</p>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"auth-form\">\n                      <div className=\"form-row\">\n                        <div className=\"form-group\">\n                          <label>Prnom *</label>\n                          <div className=\"input-group\">\n                            <User size={20} />\n                            <input\n                              type=\"text\"\n                              value={institutionData.adminFirstName}\n                              onChange={(e) => setInstitutionData(prev => ({ ...prev, adminFirstName: e.target.value }))}\n                              placeholder=\"Prnom\"\n                              required\n                              disabled={isLoading}\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"form-group\">\n                          <label>Nom *</label>\n                          <div className=\"input-group\">\n                            <User size={20} />\n                            <input\n                              type=\"text\"\n                              value={institutionData.adminLastName}\n                              onChange={(e) => setInstitutionData(prev => ({ ...prev, adminLastName: e.target.value }))}\n                              placeholder=\"Nom\"\n                              required\n                              disabled={isLoading}\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"form-group\">\n                        <label>Email administrateur *</label>\n                        <div className=\"input-group\">\n                          <Mail size={20} />\n                          <input\n                            type=\"email\"\n                            value={institutionData.adminEmail}\n                            onChange={(e) => setInstitutionData(prev => ({ ...prev, adminEmail: e.target.value }))}\n                            placeholder=\"admin@monorganisation.com\"\n                            required\n                            disabled={isLoading}\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"form-group\">\n                        <label>Mot de passe *</label>\n                        <div className=\"input-group\">\n                          <Lock size={20} />\n                          <input\n                            type={showPassword ? 'text' : 'password'}\n                            value={institutionData.adminPassword}\n                            onChange={(e) => setInstitutionData(prev => ({ ...prev, adminPassword: e.target.value }))}\n                            placeholder=\"Mot de passe scuris\"\n                            required\n                            disabled={isLoading}\n                            minLength={3}\n                          />\n                          <button\n                            type=\"button\"\n                            className=\"toggle-password\"\n                            onClick={() => setShowPassword(!showPassword)}\n                          >\n                            {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\n                          </button>\n                        </div>\n                        <small>Minimum 3 caractres</small>\n                      </div>\n\n                      <div className=\"form-actions\">\n                        <button\n                          type=\"button\"\n                          className=\"back-btn\"\n                          onClick={previousStep}\n                          disabled={isLoading}\n                        >\n                          Prcdent\n                        </button>\n                        <button\n                          type=\"submit\"\n                          className=\"submit-btn\"\n                          disabled={!institutionData.adminFirstName || !institutionData.adminLastName || \n                                   !institutionData.adminEmail || !institutionData.adminPassword || \n                                   institutionData.adminPassword.length < 3 || isLoading}\n                        >\n                          {isLoading ? (\n                            <>\n                              <div className=\"spinner\"></div>\n                              Cration...\n                            </>\n                          ) : (\n                            <>\n                              <Building size={18} />\n                              Crer l'tablissement\n                            </>\n                          )}\n                        </button>\n                      </div>\n                    </form>\n                  </div>\n                )}\n\n                {/* Indicateur de progression */}\n                <div className=\"step-indicator\">\n                  <div className={`step ${step >= 1 ? 'active' : ''}`}>\n                    <span>1</span>\n                    <label>tablissement</label>\n                  </div>\n                  <div className=\"step-line\"></div>\n                  <div className={`step ${step >= 2 ? 'active' : ''}`}>\n                    <span>2</span>\n                    <label>Administrateur</label>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Sidebar avec informations */}\n          <div className=\"info-sidebar\">\n            <div className=\"feature-card\">\n              <Database size={32} />\n              <h3>Base de donnes locale</h3>\n              <p>Vos donnes sont stockes en scurit sur votre ordinateur</p>\n            </div>\n            \n            <div className=\"feature-card\">\n              <WifiOff size={32} />\n              <h3>Fonctionne hors ligne</h3>\n              <p>Aucune connexion Internet requise pour utiliser l'application</p>\n            </div>\n            \n            <div className=\"feature-card\">\n              <BarChart3 size={32} />\n              <h3>Gestion complte</h3>\n              <p>Grez vos livres, emprunts et utilisateurs facilement</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        .auth-container {\n          min-height: 100vh;\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          position: relative;\n          overflow-x: hidden;\n          overflow-y: auto;\n        }\n\n        .auth-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          overflow: hidden;\n        }\n\n        .pattern-overlay {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-image: \n            radial-gradient(circle at 20% 80%, rgba(243, 238, 217, 0.1) 0%, transparent 50%),\n            radial-gradient(circle at 80% 20%, rgba(243, 238, 217, 0.05) 0%, transparent 50%);\n          animation: drift 20s ease-in-out infinite;\n        }\n\n        @keyframes drift {\n          0%, 100% { transform: translate(0, 0) rotate(0deg); }\n          50% { transform: translate(20px, -20px) rotate(1deg); }\n        }\n\n        .floating-shapes {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          pointer-events: none;\n        }\n\n        .shape {\n          position: absolute;\n          background: rgba(243, 238, 217, 0.05);\n          border-radius: 50%;\n          animation: float 6s ease-in-out infinite;\n        }\n\n        .shape-1 {\n          width: 100px;\n          height: 100px;\n          top: 20%;\n          left: 10%;\n          animation-delay: 0s;\n        }\n\n        .shape-2 {\n          width: 60px;\n          height: 60px;\n          top: 60%;\n          right: 15%;\n          animation-delay: 2s;\n        }\n\n        .shape-3 {\n          width: 80px;\n          height: 80px;\n          bottom: 30%;\n          left: 20%;\n          animation-delay: 4s;\n        }\n\n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-20px); }\n        }\n\n        .auth-content {\n          position: relative;\n          z-index: 10;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          padding: 20px;\n          max-width: 1400px;\n          margin: 0 auto;\n          box-sizing: border-box;\n        }\n\n        .auth-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 40px;\n          padding: 0 20px;\n        }\n\n        .app-logo {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n        }\n\n        .logo-icon {\n          width: 50px;\n          height: 50px;\n          background: rgba(243, 238, 217, 0.15);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n          border: 1px solid rgba(243, 238, 217, 0.2);\n        }\n\n        .logo-text h1 {\n          margin: 0;\n          color: #F3EED9;\n          font-size: 24px;\n          font-weight: 700;\n        }\n\n        .logo-text span {\n          color: rgba(243, 238, 217, 0.8);\n          font-size: 14px;\n        }\n\n        .offline-badge {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: rgba(194, 87, 27, 0.2);\n          color: #C2571B;\n          padding: 8px 16px;\n          border-radius: 20px;\n          font-size: 14px;\n          font-weight: 600;\n          border: 1px solid rgba(194, 87, 27, 0.3);\n        }\n\n        .main-content {\n          display: flex;\n          gap: 40px;\n          flex: 1;\n          align-items: flex-start;\n          min-height: 0;\n        }\n\n        .auth-card {\n          flex: 1;\n          background: #FFFFFF;\n          border-radius: 20px;\n          overflow: hidden;\n          overflow-y: auto;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n          max-width: 600px;\n          max-height: calc(100vh - 160px);\n          display: flex;\n          flex-direction: column;\n        }\n\n        .auth-tabs {\n          display: flex;\n          background: rgba(248, 246, 240, 0.8);\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\n          flex-shrink: 0;\n        }\n\n        .tab {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          padding: 20px;\n          background: none;\n          border: none;\n          cursor: pointer;\n          font-size: 16px;\n          font-weight: 600;\n          color: #4A4A4A;\n          transition: all 0.2s ease;\n        }\n\n        .tab.active {\n          background: #FFFFFF;\n          color: #3E5C49;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        .message {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px 24px;\n          font-weight: 500;\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\n        }\n\n        .message.error {\n          background: rgba(220, 38, 38, 0.1);\n          color: #DC2626;\n        }\n\n        .message.success {\n          background: rgba(62, 92, 73, 0.1);\n          color: #3E5C49;\n        }\n\n        .section-header {\n          text-align: center;\n          padding: 32px 24px 24px;\n          border-bottom: 1px solid rgba(229, 220, 194, 0.3);\n        }\n\n        .section-header h2 {\n          margin: 16px 0 8px;\n          color: #3E5C49;\n          font-size: 24px;\n          font-weight: 700;\n        }\n\n        .section-header p {\n          margin: 0;\n          color: #4A4A4A;\n          font-size: 16px;\n        }\n\n        .auth-form {\n          padding: 32px 24px;\n          flex: 1;\n          overflow-y: auto;\n        }\n\n        .form-group {\n          margin-bottom: 24px;\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 16px;\n        }\n\n        .form-group label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 600;\n          color: #3E5C49;\n          font-size: 14px;\n        }\n\n        .input-group {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .input-group svg {\n          position: absolute;\n          left: 16px;\n          color: #4A4A4A;\n          z-index: 2;\n        }\n\n        .input-group input {\n          width: 100%;\n          padding: 16px 16px 16px 48px;\n          border: 2px solid #E5DCC2;\n          border-radius: 12px;\n          font-size: 16px;\n          transition: all 0.2s ease;\n        }\n\n        .input-group input:focus {\n          outline: none;\n          border-color: #3E5C49;\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\n        }\n\n        .input-group input:disabled {\n          background: rgba(248, 246, 240, 0.5);\n          opacity: 0.7;\n        }\n\n        .toggle-password {\n          position: absolute;\n          right: 16px;\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: #4A4A4A;\n          padding: 4px;\n          border-radius: 4px;\n          transition: all 0.2s ease;\n        }\n\n        .toggle-password:hover {\n          color: #3E5C49;\n          background: rgba(62, 92, 73, 0.1);\n        }\n\n        .form-group small {\n          display: block;\n          margin-top: 4px;\n          color: #4A4A4A;\n          font-size: 12px;\n        }\n\n        .type-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 12px;\n        }\n\n        .type-card {\n          display: block;\n          cursor: pointer;\n        }\n\n        .type-card input {\n          display: none;\n        }\n\n        .type-content {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 8px;\n          padding: 20px 16px;\n          border: 2px solid #E5DCC2;\n          border-radius: 12px;\n          transition: all 0.2s ease;\n          text-align: center;\n        }\n\n        .type-card input:checked + .type-content {\n          border-color: #3E5C49;\n          background: rgba(62, 92, 73, 0.05);\n        }\n\n        .type-content:hover {\n          border-color: #3E5C49;\n        }\n\n        .type-icon {\n          font-size: 24px;\n        }\n\n        .type-label {\n          font-weight: 600;\n          color: #3E5C49;\n          font-size: 14px;\n        }\n\n        .submit-btn {\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n          border: none;\n          padding: 16px 24px;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n\n        .submit-btn:hover:not(:disabled) {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(62, 92, 73, 0.3);\n        }\n\n        .submit-btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        .back-btn {\n          background: rgba(248, 246, 240, 0.8);\n          color: #4A4A4A;\n          border: 2px solid #E5DCC2;\n          padding: 12px 24px;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .back-btn:hover:not(:disabled) {\n          background: #E5DCC2;\n          color: #2E2E2E;\n        }\n\n        .form-actions {\n          display: flex;\n          gap: 16px;\n          margin-top: 24px;\n        }\n\n        .form-actions .submit-btn {\n          flex: 1;\n        }\n\n        .spinner {\n          width: 18px;\n          height: 18px;\n          border: 2px solid rgba(243, 238, 217, 0.3);\n          border-top: 2px solid #F3EED9;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .step-indicator {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 16px;\n          padding: 24px;\n          background: rgba(248, 246, 240, 0.8);\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\n        }\n\n        .step {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 8px;\n          opacity: 0.5;\n          transition: opacity 0.3s ease;\n        }\n\n        .step.active {\n          opacity: 1;\n        }\n\n        .step span {\n          width: 32px;\n          height: 32px;\n          background: #E5DCC2;\n          color: #4A4A4A;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 14px;\n        }\n\n        .step.active span {\n          background: #3E5C49;\n          color: #F3EED9;\n        }\n\n        .step label {\n          font-size: 12px;\n          font-weight: 600;\n          color: #4A4A4A;\n          text-align: center;\n        }\n\n        .step-line {\n          width: 40px;\n          height: 2px;\n          background: #E5DCC2;\n        }\n\n        /* Connexions rapides */\n        .quick-login-section {\n          margin-top: 32px;\n          padding-top: 24px;\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\n        }\n\n        .divider {\n          text-align: center;\n          margin-bottom: 24px;\n          position: relative;\n        }\n\n        .divider span {\n          background: #FFFFFF;\n          padding: 0 16px;\n          color: #4A4A4A;\n          font-size: 14px;\n          font-weight: 600;\n        }\n\n        .divider::before {\n          content: '';\n          position: absolute;\n          top: 50%;\n          left: 0;\n          right: 0;\n          height: 1px;\n          background: #E5DCC2;\n          z-index: -1;\n        }\n\n        .quick-login-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n\n        .quick-login-btn {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px;\n          background: rgba(248, 246, 240, 0.8);\n          border: 2px solid #E5DCC2;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          text-align: left;\n        }\n\n        .quick-login-btn:hover:not(:disabled) {\n          border-color: #3E5C49;\n          background: rgba(62, 92, 73, 0.05);\n        }\n\n        .quick-login-btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .credential-icon {\n          width: 36px;\n          height: 36px;\n          background: #3E5C49;\n          color: #F3EED9;\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .credential-info {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n        }\n\n        .credential-info .role {\n          font-weight: 600;\n          color: #3E5C49;\n          font-size: 14px;\n        }\n\n        .credential-info .email {\n          font-size: 12px;\n          color: #4A4A4A;\n        }\n\n        .login-hint {\n          background: rgba(62, 92, 73, 0.05);\n          border: 1px solid rgba(62, 92, 73, 0.1);\n          border-radius: 12px;\n          padding: 16px;\n          margin-top: 16px;\n        }\n\n        .login-hint p {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n          color: #3E5C49;\n        }\n\n        .login-hint p:last-child {\n          margin-bottom: 0;\n        }\n\n        /* Sidebar d'informations */\n        .info-sidebar {\n          flex: 0 0 300px;\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n        }\n\n        .feature-card {\n          background: rgba(243, 238, 217, 0.1);\n          border: 1px solid rgba(243, 238, 217, 0.2);\n          border-radius: 16px;\n          padding: 24px;\n          text-align: center;\n          color: #F3EED9;\n          backdrop-filter: blur(10px);\n        }\n\n        .feature-card svg {\n          margin-bottom: 16px;\n          opacity: 0.9;\n        }\n\n        .feature-card h3 {\n          margin: 0 0 12px 0;\n          font-size: 18px;\n          font-weight: 600;\n        }\n\n        .feature-card p {\n          margin: 0;\n          opacity: 0.8;\n          font-size: 14px;\n          line-height: 1.5;\n        }\n\n        /* Responsive */\n        @media (max-width: 1024px) {\n          .main-content {\n            flex-direction: column;\n            align-items: center;\n          }\n\n          .info-sidebar {\n            flex: none;\n            max-width: 600px;\n            width: 100%;\n            flex-direction: row;\n            overflow-x: auto;\n          }\n\n          .feature-card {\n            flex: 0 0 250px;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .auth-content {\n            padding: 16px;\n          }\n\n          .auth-header {\n            flex-direction: column;\n            gap: 16px;\n            margin-bottom: 24px;\n            padding: 0;\n          }\n\n          .main-content {\n            gap: 24px;\n          }\n\n          .auth-card {\n            max-width: none;\n          }\n\n          .form-row {\n            grid-template-columns: 1fr;\n          }\n\n          .quick-login-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .type-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .info-sidebar {\n            flex-direction: column;\n          }\n\n          .feature-card {\n            flex: none;\n          }\n\n          .form-actions {\n            flex-direction: column-reverse;\n          }\n\n          .tab {\n            padding: 16px 12px;\n            font-size: 14px;\n          }\n\n          .section-header {\n            padding: 24px 16px 16px;\n          }\n\n          .auth-form {\n            padding: 24px 16px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .auth-content {\n            padding: 12px;\n          }\n\n          .logo-text h1 {\n            font-size: 20px;\n          }\n\n          .offline-badge {\n            font-size: 12px;\n            padding: 6px 12px;\n          }\n\n          .section-header h2 {\n            font-size: 20px;\n          }\n\n          .auth-form {\n            padding: 20px 12px;\n          }\n\n          .input-group input {\n            padding: 14px 14px 14px 44px;\n            font-size: 14px;\n          }\n\n          .submit-btn {\n            padding: 14px 20px;\n            font-size: 14px;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Book, \r\n  BookOpen, \r\n  Users, \r\n  TrendingUp, \r\n  Clock, \r\n  Star,\r\n  Award,\r\n  Target,\r\n  Zap,\r\n  Activity\r\n} from 'lucide-react';\r\nimport { Stats } from '../../types';\r\n\r\ninterface EnhancedStatsProps {\r\n  stats: Stats;\r\n  className?: string;\r\n}\r\n\r\ninterface AnimatedCounterProps {\r\n  end: number;\r\n  duration?: number;\r\n  prefix?: string;\r\n  suffix?: string;\r\n}\r\n\r\nconst AnimatedCounter: React.FC<AnimatedCounterProps> = ({ \r\n  end, \r\n  duration = 2000, \r\n  prefix = '', \r\n  suffix = '' \r\n}) => {\r\n  const [count, setCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let startTime: number;\r\n    const startCount = 0;\r\n\r\n    const animate = (currentTime: number) => {\r\n      if (!startTime) startTime = currentTime;\r\n      const progress = Math.min((currentTime - startTime) / duration, 1);\r\n      \r\n      // Easing function for smooth animation\r\n      const easeOutCubic = 1 - Math.pow(1 - progress, 3);\r\n      const currentCount = Math.floor(startCount + (end - startCount) * easeOutCubic);\r\n      \r\n      setCount(currentCount);\r\n\r\n      if (progress < 1) {\r\n        requestAnimationFrame(animate);\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(animate);\r\n  }, [end, duration]);\r\n\r\n  return <span>{prefix}{count.toLocaleString()}{suffix}</span>;\r\n};\r\n\r\nexport const EnhancedStats: React.FC<EnhancedStatsProps> = ({ stats, className = '' }) => {\r\n  const [hoveredCard, setHoveredCard] = useState<string | null>(null);\r\n\r\n  const statsData = [\r\n    {\r\n      id: 'total',\r\n      title: 'Collection Totale',\r\n      value: stats.totalDocuments,\r\n      icon: Book,\r\n      color: '#3E5C49',\r\n      gradient: 'linear-gradient(135deg, #3E5C49 0%, #4A6A55 100%)',\r\n      description: 'Documents dans la bibliothque',\r\n      trend: '+12% ce mois',\r\n      trendPositive: true\r\n    },\r\n    {\r\n      id: 'available',\r\n      title: 'Disponibles',\r\n      value: stats.availableDocuments,\r\n      icon: BookOpen,\r\n      color: '#10B981',\r\n      gradient: 'linear-gradient(135deg, #10B981 0%, #34D399 100%)',\r\n      description: 'Prts  tre emprunts',\r\n      percentage: stats.totalDocuments > 0 ? Math.round((stats.availableDocuments / stats.totalDocuments) * 100) : 0\r\n    },\r\n    {\r\n      id: 'borrowed',\r\n      title: 'En Circulation',\r\n      value: stats.borrowedDocuments,\r\n      icon: Clock,\r\n      color: '#F59E0B',\r\n      gradient: 'linear-gradient(135deg, #F59E0B 0%, #FBBF24 100%)',\r\n      description: 'Actuellement emprunts',\r\n      percentage: stats.totalDocuments > 0 ? Math.round((stats.borrowedDocuments / stats.totalDocuments) * 100) : 0\r\n    },\r\n    {\r\n      id: 'borrowers',\r\n      title: 'Emprunteurs Actifs',\r\n      value: stats.totalBorrowers,\r\n      icon: Users,\r\n      color: '#8B5CF6',\r\n      gradient: 'linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%)',\r\n      description: 'Membres enregistrs',\r\n      breakdown: `${stats.totalStudents} tudiants, ${stats.totalStaff} personnel`\r\n    },\r\n    {\r\n      id: 'authors',\r\n      title: 'Auteurs',\r\n      value: stats.totalAuthors,\r\n      icon: Star,\r\n      color: '#EC4899',\r\n      gradient: 'linear-gradient(135deg, #EC4899 0%, #F472B6 100%)',\r\n      description: 'Auteurs dans la collection'\r\n    },\r\n    {\r\n      id: 'categories',\r\n      title: 'Catgories',\r\n      value: stats.totalCategories,\r\n      icon: Target,\r\n      color: '#06B6D4',\r\n      gradient: 'linear-gradient(135deg, #06B6D4 0%, #22D3EE 100%)',\r\n      description: 'Genres et classifications'\r\n    }\r\n  ];\r\n\r\n  // Calculate library efficiency metrics\r\n  const efficiency = {\r\n    utilization: stats.totalDocuments > 0 ? Math.round((stats.borrowedDocuments / stats.totalDocuments) * 100) : 0,\r\n    availability: stats.totalDocuments > 0 ? Math.round((stats.availableDocuments / stats.totalDocuments) * 100) : 0,\r\n    activity: stats.totalBorrowers > 0 ? Math.round((stats.borrowedDocuments / stats.totalBorrowers) * 100) : 0\r\n  };\r\n\r\n  return (\r\n    <div className={`enhanced-stats ${className}`}>\r\n      {/* Main Stats Grid */}\r\n      <div className=\"stats-grid\">\r\n        {statsData.map((stat) => (\r\n          <div\r\n            key={stat.id}\r\n            className={`stat-card ${hoveredCard === stat.id ? 'hovered' : ''}`}\r\n            onMouseEnter={() => setHoveredCard(stat.id)}\r\n            onMouseLeave={() => setHoveredCard(null)}\r\n            style={{\r\n              '--card-gradient': stat.gradient,\r\n              '--card-color': stat.color\r\n            } as React.CSSProperties}\r\n          >\r\n            <div className=\"stat-card-bg\"></div>\r\n            \r\n            <div className=\"stat-header\">\r\n              <div className=\"stat-icon\">\r\n                <stat.icon size={24} />\r\n              </div>\r\n              <div className=\"stat-trend\">\r\n                {stat.trend && (\r\n                  <span className={`trend ${stat.trendPositive ? 'positive' : 'negative'}`}>\r\n                    <TrendingUp size={14} />\r\n                    {stat.trend}\r\n                  </span>\r\n                )}\r\n                {stat.percentage !== undefined && (\r\n                  <span className=\"percentage\">{stat.percentage}%</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"stat-content\">\r\n              <div className=\"stat-value\">\r\n                <AnimatedCounter end={stat.value} duration={1500} />\r\n              </div>\r\n              <div className=\"stat-title\">{stat.title}</div>\r\n              <div className=\"stat-description\">{stat.description}</div>\r\n              {stat.breakdown && (\r\n                <div className=\"stat-breakdown\">{stat.breakdown}</div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"stat-decoration\">\r\n              <div className=\"floating-icon\">\r\n                <stat.icon size={120} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Efficiency Metrics */}\r\n      <div className=\"efficiency-panel\">\r\n        <div className=\"efficiency-header\">\r\n          <Activity size={20} />\r\n          <h3>Mtriques de Performance</h3>\r\n        </div>\r\n        <div className=\"efficiency-metrics\">\r\n          <div className=\"efficiency-item\">\r\n            <div className=\"efficiency-label\">Taux d'Utilisation</div>\r\n            <div className=\"efficiency-bar\">\r\n              <div \r\n                className=\"efficiency-fill utilization\" \r\n                style={{ width: `${efficiency.utilization}%` }}\r\n              ></div>\r\n            </div>\r\n            <div className=\"efficiency-value\">{efficiency.utilization}%</div>\r\n          </div>\r\n          <div className=\"efficiency-item\">\r\n            <div className=\"efficiency-label\">Disponibilit</div>\r\n            <div className=\"efficiency-bar\">\r\n              <div \r\n                className=\"efficiency-fill availability\" \r\n                style={{ width: `${efficiency.availability}%` }}\r\n              ></div>\r\n            </div>\r\n            <div className=\"efficiency-value\">{efficiency.availability}%</div>\r\n          </div>\r\n          <div className=\"efficiency-item\">\r\n            <div className=\"efficiency-label\">Activit Moyenne</div>\r\n            <div className=\"efficiency-bar\">\r\n              <div \r\n                className=\"efficiency-fill activity\" \r\n                style={{ width: `${Math.min(efficiency.activity, 100)}%` }}\r\n              ></div>\r\n            </div>\r\n            <div className=\"efficiency-value\">{efficiency.activity}%</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .enhanced-stats {\r\n          width: 100%;\r\n          max-width: 1400px;\r\n          margin: 0 auto;\r\n        }\r\n\r\n        .stats-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n          gap: 24px;\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .stat-card {\r\n          position: relative;\r\n          background: rgba(255, 255, 255, 0.95);\r\n          border-radius: 20px;\r\n          padding: 28px;\r\n          overflow: hidden;\r\n          transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          backdrop-filter: blur(10px);\r\n          cursor: pointer;\r\n          min-height: 200px;\r\n        }\r\n\r\n        .stat-card-bg {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: var(--card-gradient);\r\n          opacity: 0;\r\n          transition: opacity 0.4s ease;\r\n          border-radius: inherit;\r\n        }\r\n\r\n        .stat-card.hovered .stat-card-bg {\r\n          opacity: 0.08;\r\n        }\r\n\r\n        .stat-card.hovered {\r\n          transform: translateY(-8px) scale(1.02);\r\n          box-shadow: \r\n            0 20px 40px rgba(62, 92, 73, 0.15),\r\n            0 8px 16px rgba(62, 92, 73, 0.1);\r\n          border-color: var(--card-color);\r\n        }\r\n\r\n        .stat-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: flex-start;\r\n          margin-bottom: 20px;\r\n          position: relative;\r\n          z-index: 2;\r\n        }\r\n\r\n        .stat-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: var(--card-gradient);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: white;\r\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .stat-card.hovered .stat-icon {\r\n          transform: scale(1.1) rotate(5deg);\r\n        }\r\n\r\n        .stat-trend {\r\n          text-align: right;\r\n          font-size: 12px;\r\n        }\r\n\r\n        .trend {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 4px;\r\n          color: #10B981;\r\n          font-weight: 600;\r\n          margin-bottom: 4px;\r\n        }\r\n\r\n        .trend.negative {\r\n          color: #EF4444;\r\n        }\r\n\r\n        .percentage {\r\n          background: var(--card-gradient);\r\n          color: white;\r\n          padding: 4px 8px;\r\n          border-radius: 8px;\r\n          font-weight: 700;\r\n          font-size: 11px;\r\n        }\r\n\r\n        .stat-content {\r\n          position: relative;\r\n          z-index: 2;\r\n        }\r\n\r\n        .stat-value {\r\n          font-size: 2.5rem;\r\n          font-weight: 800;\r\n          color: #005332ff !important;\r\n          line-height: 1;\r\n          margin-bottom: 8px;\r\n          transition: color 0.3s ease;\r\n        }\r\n\r\n        .stat-card.hovered .stat-value {\r\n          color: var(--card-color);\r\n        }\r\n\r\n        .stat-title {\r\n          font-size: 16px;\r\n          font-weight: 700;\r\n          color: #374151;\r\n          margin-bottom: 6px;\r\n        }\r\n\r\n        .stat-description {\r\n          font-size: 14px;\r\n          color: #6B7280;\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .stat-breakdown {\r\n          font-size: 12px;\r\n          color: #9CA3AF;\r\n          font-style: italic;\r\n        }\r\n\r\n        .stat-decoration {\r\n          position: absolute;\r\n          top: 0;\r\n          right: -20px;\r\n          width: 140px;\r\n          height: 140px;\r\n          opacity: 0.03;\r\n          transition: all 0.3s ease;\r\n          z-index: 1;\r\n        }\r\n\r\n        .floating-icon {\r\n          width: 100%;\r\n          height: 100%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: var(--card-color);\r\n          transform: rotate(15deg);\r\n        }\r\n\r\n        .stat-card.hovered .stat-decoration {\r\n          opacity: 0.08;\r\n          transform: scale(1.1) rotate(-5deg);\r\n        }\r\n\r\n        /* Efficiency Panel */\r\n        .efficiency-panel {\r\n          background: rgba(255, 255, 255, 0.95);\r\n          border-radius: 20px;\r\n          padding: 28px;\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n          backdrop-filter: blur(10px);\r\n        }\r\n\r\n        .efficiency-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          margin-bottom: 24px;\r\n          color: #374151;\r\n        }\r\n\r\n        .efficiency-header h3 {\r\n          margin: 0;\r\n          font-size: 18px;\r\n          font-weight: 700;\r\n        }\r\n\r\n        .efficiency-metrics {\r\n          display: grid;\r\n          gap: 20px;\r\n        }\r\n\r\n        .efficiency-item {\r\n          display: grid;\r\n          grid-template-columns: 1fr 3fr auto;\r\n          align-items: center;\r\n          gap: 16px;\r\n        }\r\n\r\n        .efficiency-label {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #374151;\r\n        }\r\n\r\n        .efficiency-bar {\r\n          height: 12px;\r\n          background: rgba(229, 220, 194, 0.3);\r\n          border-radius: 6px;\r\n          overflow: hidden;\r\n          position: relative;\r\n        }\r\n\r\n        .efficiency-fill {\r\n          height: 100%;\r\n          border-radius: inherit;\r\n          transition: width 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          position: relative;\r\n        }\r\n\r\n        .efficiency-fill::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n          animation: shimmer 2s infinite;\r\n        }\r\n\r\n        .efficiency-fill.utilization {\r\n          background: linear-gradient(135deg, #C2571B 0%, rgba(255, 166, 0, 1) 100%);\r\n        }\r\n\r\n        .efficiency-fill.availability {\r\n          background: linear-gradient(135deg, #003a1cff 0%, rgba(1, 241, 153, 1) 100%);\r\n        }\r\n\r\n        .efficiency-fill.activity {\r\n          background: linear-gradient(135deg, #383838ff 0%, #888888ff 100%);\r\n        }\r\n\r\n\r\n        .efficiency-value {\r\n          font-size: 16px;\r\n          font-weight: 700;\r\n          color: #1A1A1A;\r\n          min-width: 50px;\r\n          text-align: right;\r\n        }\r\n\r\n        @keyframes shimmer {\r\n          0% { transform: translateX(-100%); }\r\n          100% { transform: translateX(200%); }\r\n        }\r\n\r\n        /* Responsive Design */\r\n        @media (max-width: 768px) {\r\n          .stats-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: 16px;\r\n          }\r\n\r\n          .stat-card {\r\n            padding: 20px;\r\n            min-height: 160px;\r\n          }\r\n\r\n          .stat-value {\r\n            font-size: 2rem;\r\n          }\r\n\r\n          .efficiency-item {\r\n            grid-template-columns: 1fr;\r\n            gap: 8px;\r\n            text-align: center;\r\n          }\r\n\r\n          .efficiency-bar {\r\n            order: 2;\r\n          }\r\n\r\n          .efficiency-value {\r\n            order: 3;\r\n            text-align: center;\r\n          }\r\n        }\r\n\r\n        /* High contrast mode support */\r\n        @media (prefers-contrast: high) {\r\n          .stat-card {\r\n            border: 2px solid #000;\r\n            background: #fff;\r\n          }\r\n\r\n          .stat-value, .stat-title {\r\n            color: #000;\r\n          }\r\n\r\n          .efficiency-fill {\r\n            border: 1px solid #000;\r\n          }\r\n        }\r\n\r\n        /* Reduced motion support */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .stat-card, .stat-icon, .stat-decoration, .efficiency-fill {\r\n            transition: none;\r\n          }\r\n\r\n          .floating-icon {\r\n            transform: none;\r\n          }\r\n\r\n          .efficiency-fill::after {\r\n            animation: none;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport {\r\n  X,\r\n  Download,\r\n  FileSpreadsheet,\r\n  FileText,\r\n  Database,\r\n  Users,\r\n  BookOpen,\r\n  Clock,\r\n  CheckCircle,\r\n  Circle,\r\n  Calendar,\r\n  Building,\r\n  FileBarChart\r\n} from 'lucide-react';\r\nimport { MicroButton, MicroCard } from './MicroInteractions';\r\nimport { useQuickToast } from './ToastSystem';\r\n\r\nexport interface ExportConfig {\r\n  format: 'excel' | 'csv';\r\n  dataTypes: {\r\n    documents: boolean;\r\n    borrowers: boolean;\r\n    borrowHistory: boolean;\r\n    authors: boolean;\r\n    categories: boolean;\r\n    stats: boolean;\r\n  };\r\n  documentFields: {\r\n    titre: boolean;\r\n    auteur: boolean;\r\n    editeur: boolean;\r\n    lieuEdition: boolean;\r\n    annee: boolean;\r\n    descripteurs: boolean;\r\n    cote: boolean;\r\n    type: boolean;\r\n    isbn: boolean;\r\n    description: boolean;\r\n    estEmprunte: boolean;\r\n    dateEmprunt: boolean;\r\n    nomEmprunteur: boolean;\r\n    dateRetourPrevu: boolean;\r\n  };\r\n  borrowerFields: {\r\n    firstName: boolean;\r\n    lastName: boolean;\r\n    type: boolean;\r\n    matricule: boolean;\r\n    classe: boolean;\r\n    position: boolean;\r\n    email: boolean;\r\n    phone: boolean;\r\n    cniNumber: boolean;\r\n  };\r\n  historyFields: {\r\n    documentTitle: boolean;\r\n    borrowerName: boolean;\r\n    borrowDate: boolean;\r\n    expectedReturnDate: boolean;\r\n    actualReturnDate: boolean;\r\n    status: boolean;\r\n    notes: boolean;\r\n    duration: boolean;\r\n    overdueDays: boolean;\r\n  };\r\n  dateRange: {\r\n    enabled: boolean;\r\n    startDate: string;\r\n    endDate: string;\r\n  };\r\n  filters: {\r\n    documentStatus: 'all' | 'available' | 'borrowed';\r\n    borrowerType: 'all' | 'student' | 'staff';\r\n    historyStatus: 'all' | 'active' | 'returned' | 'overdue';\r\n  };\r\n}\r\n\r\ninterface ExportDialogProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onExport: (config: ExportConfig) => Promise<void>;\r\n  availableData: {\r\n    documents: boolean;\r\n    borrowers: boolean;\r\n    borrowHistory: boolean;\r\n  };\r\n}\r\n\r\nexport const ExportDialog: React.FC<ExportDialogProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onExport,\r\n  availableData\r\n}) => {\r\n  const { success, error } = useQuickToast();\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  const [config, setConfig] = useState<ExportConfig>({\r\n    format: 'excel',\r\n    dataTypes: {\r\n      documents: true,\r\n      borrowers: false,\r\n      borrowHistory: false,\r\n      authors: false,\r\n      categories: false,\r\n      stats: false\r\n    },\r\n    documentFields: {\r\n      titre: true,\r\n      auteur: true,\r\n      editeur: true,\r\n      lieuEdition: false,\r\n      annee: true,\r\n      descripteurs: true,\r\n      cote: true,\r\n      type: false,\r\n      isbn: false,\r\n      description: false,\r\n      estEmprunte: true,\r\n      dateEmprunt: false,\r\n      nomEmprunteur: false,\r\n      dateRetourPrevu: false\r\n    },\r\n    borrowerFields: {\r\n      firstName: true,\r\n      lastName: true,\r\n      type: true,\r\n      matricule: true,\r\n      classe: true,\r\n      position: true,\r\n      email: false,\r\n      phone: false,\r\n      cniNumber: false\r\n    },\r\n    historyFields: {\r\n      documentTitle: true,\r\n      borrowerName: true,\r\n      borrowDate: true,\r\n      expectedReturnDate: true,\r\n      actualReturnDate: true,\r\n      status: true,\r\n      notes: false,\r\n      duration: false,\r\n      overdueDays: false\r\n    },\r\n    dateRange: {\r\n      enabled: false,\r\n      startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n      endDate: new Date().toISOString().split('T')[0]\r\n    },\r\n    filters: {\r\n      documentStatus: 'all',\r\n      borrowerType: 'all',\r\n      historyStatus: 'all'\r\n    }\r\n  });\r\n\r\n  const updateDataType = (dataType: keyof ExportConfig['dataTypes'], enabled: boolean) => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      dataTypes: { ...prev.dataTypes, [dataType]: enabled }\r\n    }));\r\n  };\r\n\r\n  const updateDocumentField = (field: keyof ExportConfig['documentFields'], enabled: boolean) => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      documentFields: { ...prev.documentFields, [field]: enabled }\r\n    }));\r\n  };\r\n\r\n  const updateBorrowerField = (field: keyof ExportConfig['borrowerFields'], enabled: boolean) => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      borrowerFields: { ...prev.borrowerFields, [field]: enabled }\r\n    }));\r\n  };\r\n\r\n  const updateHistoryField = (field: keyof ExportConfig['historyFields'], enabled: boolean) => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      historyFields: { ...prev.historyFields, [field]: enabled }\r\n    }));\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    const selectedDataTypes = Object.entries(config.dataTypes).filter(([_, enabled]) => enabled);\r\n    \r\n    if (selectedDataTypes.length === 0) {\r\n      error('Slection requise', 'Veuillez slectionner au moins un type de donnes  exporter');\r\n      return;\r\n    }\r\n\r\n    setIsExporting(true);\r\n    try {\r\n      await onExport(config);\r\n      success('Export russi', 'Les donnes ont t exportes avec succs');\r\n      onClose();\r\n    } catch (err) {\r\n      error('Erreur d\\'export', 'Une erreur est survenue lors de l\\'export');\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const selectAllDocumentFields = () => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      documentFields: Object.keys(prev.documentFields).reduce((acc, key) => ({\r\n        ...acc,\r\n        [key]: true\r\n      }), {} as ExportConfig['documentFields'])\r\n    }));\r\n  };\r\n\r\n  const deselectAllDocumentFields = () => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      documentFields: Object.keys(prev.documentFields).reduce((acc, key) => ({\r\n        ...acc,\r\n        [key]: false\r\n      }), {} as ExportConfig['documentFields'])\r\n    }));\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"export-dialog-overlay\">\r\n      <div className=\"export-dialog\">\r\n        {/* Header */}\r\n        <div className=\"dialog-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <FileSpreadsheet size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"dialog-title\">Exporter les Donnes</h2>\r\n              <p className=\"dialog-subtitle\">Choisissez les donnes et le format d'export</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"dialog-content\">\r\n          {/* Format Selection */}\r\n          <div className=\"section\">\r\n            <h3 className=\"section-title\">Format d'Export</h3>\r\n            <div className=\"format-options\">\r\n              <div \r\n                className={`format-option ${config.format === 'excel' ? 'selected' : ''}`}\r\n                onClick={() => setConfig(prev => ({ ...prev, format: 'excel' }))}\r\n              >\r\n                <FileSpreadsheet size={20} />\r\n                <span>Excel (.xlsx)</span>\r\n                <div className=\"format-badge\">Recommand</div>\r\n              </div>\r\n              <div \r\n                className={`format-option ${config.format === 'csv' ? 'selected' : ''}`}\r\n                onClick={() => setConfig(prev => ({ ...prev, format: 'csv' }))}\r\n              >\r\n                <FileText size={20} />\r\n                <span>CSV (.csv)</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Data Types Selection */}\r\n          <div className=\"section\">\r\n            <h3 className=\"section-title\">Types de Donnes</h3>\r\n            <div className=\"data-types-grid\">\r\n              {availableData.documents && (\r\n                <div \r\n                  className={`data-type-card ${config.dataTypes.documents ? 'selected' : ''}`}\r\n                  onClick={() => updateDataType('documents', !config.dataTypes.documents)}\r\n                >\r\n                  <BookOpen size={24} />\r\n                  <span>Documents</span>\r\n                  {config.dataTypes.documents ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                </div>\r\n              )}\r\n              \r\n              {availableData.borrowers && (\r\n                <div \r\n                  className={`data-type-card ${config.dataTypes.borrowers ? 'selected' : ''}`}\r\n                  onClick={() => updateDataType('borrowers', !config.dataTypes.borrowers)}\r\n                >\r\n                  <Users size={24} />\r\n                  <span>Emprunteurs</span>\r\n                  {config.dataTypes.borrowers ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                </div>\r\n              )}\r\n              \r\n              {availableData.borrowHistory && (\r\n                <div \r\n                  className={`data-type-card ${config.dataTypes.borrowHistory ? 'selected' : ''}`}\r\n                  onClick={() => updateDataType('borrowHistory', !config.dataTypes.borrowHistory)}\r\n                >\r\n                  <Clock size={24} />\r\n                  <span>Historique</span>\r\n                  {config.dataTypes.borrowHistory ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                </div>\r\n              )}\r\n\r\n              <div \r\n                className={`data-type-card ${config.dataTypes.authors ? 'selected' : ''}`}\r\n                onClick={() => updateDataType('authors', !config.dataTypes.authors)}\r\n              >\r\n                <Users size={24} />\r\n                <span>Auteurs</span>\r\n                {config.dataTypes.authors ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n              </div>\r\n\r\n              <div \r\n                className={`data-type-card ${config.dataTypes.categories ? 'selected' : ''}`}\r\n                onClick={() => updateDataType('categories', !config.dataTypes.categories)}\r\n              >\r\n                <Database size={24} />\r\n                <span>Catgories</span>\r\n                {config.dataTypes.categories ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n              </div>\r\n\r\n              <div \r\n                className={`data-type-card ${config.dataTypes.stats ? 'selected' : ''}`}\r\n                onClick={() => updateDataType('stats', !config.dataTypes.stats)}\r\n              >\r\n                <FileBarChart size={24} />\r\n                <span>Statistiques</span>\r\n                {config.dataTypes.stats ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Document Fields */}\r\n          {config.dataTypes.documents && (\r\n            <div className=\"section\">\r\n              <div className=\"section-header\">\r\n                <h3 className=\"section-title\">Champs Documents</h3>\r\n                <div className=\"field-actions\">\r\n                  <button className=\"action-link\" onClick={selectAllDocumentFields}>Tout slectionner</button>\r\n                  <button className=\"action-link\" onClick={deselectAllDocumentFields}>Tout dslectionner</button>\r\n                </div>\r\n              </div>\r\n              <div className=\"fields-grid\">\r\n                {Object.entries({\r\n                  titre: 'Titre',\r\n                  auteur: 'Auteur',\r\n                  editeur: 'diteur',\r\n                  lieuEdition: 'Lieu d\\'dition',\r\n                  annee: 'Anne',\r\n                  descripteurs: 'Catgories',\r\n                  cote: 'Cote',\r\n                  type: 'Type',\r\n                  isbn: 'ISBN',\r\n                  description: 'Description',\r\n                  estEmprunte: 'Statut d\\'emprunt',\r\n                  dateEmprunt: 'Date d\\'emprunt',\r\n                  nomEmprunteur: 'Emprunteur',\r\n                  dateRetourPrevu: 'Date retour prvue'\r\n                }).map(([field, label]) => (\r\n                  <div \r\n                    key={field}\r\n                    className={`field-checkbox ${config.documentFields[field as keyof ExportConfig['documentFields']] ? 'checked' : ''}`}\r\n                    onClick={() => updateDocumentField(field as keyof ExportConfig['documentFields'], !config.documentFields[field as keyof ExportConfig['documentFields']])}\r\n                  >\r\n                    {config.documentFields[field as keyof ExportConfig['documentFields']] ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                    <span>{label}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Borrower Fields */}\r\n          {config.dataTypes.borrowers && (\r\n            <div className=\"section\">\r\n              <h3 className=\"section-title\">Champs Emprunteurs</h3>\r\n              <div className=\"fields-grid\">\r\n                {Object.entries({\r\n                  firstName: 'Prnom',\r\n                  lastName: 'Nom',\r\n                  type: 'Type',\r\n                  matricule: 'Matricule',\r\n                  classe: 'Classe',\r\n                  position: 'Poste',\r\n                  email: 'Email',\r\n                  phone: 'Tlphone',\r\n                  cniNumber: 'CNI'\r\n                }).map(([field, label]) => (\r\n                  <div \r\n                    key={field}\r\n                    className={`field-checkbox ${config.borrowerFields[field as keyof ExportConfig['borrowerFields']] ? 'checked' : ''}`}\r\n                    onClick={() => updateBorrowerField(field as keyof ExportConfig['borrowerFields'], !config.borrowerFields[field as keyof ExportConfig['borrowerFields']])}\r\n                  >\r\n                    {config.borrowerFields[field as keyof ExportConfig['borrowerFields']] ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                    <span>{label}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* History Fields */}\r\n          {config.dataTypes.borrowHistory && (\r\n            <div className=\"section\">\r\n              <h3 className=\"section-title\">Champs Historique</h3>\r\n              <div className=\"fields-grid\">\r\n                {Object.entries({\r\n                  documentTitle: 'Titre du document',\r\n                  borrowerName: 'Nom emprunteur',\r\n                  borrowDate: 'Date emprunt',\r\n                  expectedReturnDate: 'Date retour prvue',\r\n                  actualReturnDate: 'Date retour effective',\r\n                  status: 'Statut',\r\n                  notes: 'Notes',\r\n                  duration: 'Dure (jours)',\r\n                  overdueDays: 'Retard (jours)'\r\n                }).map(([field, label]) => (\r\n                  <div \r\n                    key={field}\r\n                    className={`field-checkbox ${config.historyFields[field as keyof ExportConfig['historyFields']] ? 'checked' : ''}`}\r\n                    onClick={() => updateHistoryField(field as keyof ExportConfig['historyFields'], !config.historyFields[field as keyof ExportConfig['historyFields']])}\r\n                  >\r\n                    {config.historyFields[field as keyof ExportConfig['historyFields']] ? <CheckCircle size={16} /> : <Circle size={16} />}\r\n                    <span>{label}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Date Range Filter */}\r\n          {config.dataTypes.borrowHistory && (\r\n            <div className=\"section\">\r\n              <div className=\"section-header\">\r\n                <h3 className=\"section-title\">Filtre par Date</h3>\r\n                <div className=\"toggle-switch\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"dateRange\"\r\n                    checked={config.dateRange.enabled}\r\n                    onChange={(e) => setConfig(prev => ({\r\n                      ...prev,\r\n                      dateRange: { ...prev.dateRange, enabled: e.target.checked }\r\n                    }))}\r\n                  />\r\n                  <label htmlFor=\"dateRange\"></label>\r\n                </div>\r\n              </div>\r\n              \r\n              {config.dateRange.enabled && (\r\n                <div className=\"date-range-inputs\">\r\n                  <div className=\"date-input\">\r\n                    <label>Date de dbut</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={config.dateRange.startDate}\r\n                      onChange={(e) => setConfig(prev => ({\r\n                        ...prev,\r\n                        dateRange: { ...prev.dateRange, startDate: e.target.value }\r\n                      }))}\r\n                    />\r\n                  </div>\r\n                  <div className=\"date-input\">\r\n                    <label>Date de fin</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={config.dateRange.endDate}\r\n                      onChange={(e) => setConfig(prev => ({\r\n                        ...prev,\r\n                        dateRange: { ...prev.dateRange, endDate: e.target.value }\r\n                      }))}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Filters */}\r\n          <div className=\"section\">\r\n            <h3 className=\"section-title\">Filtres</h3>\r\n            <div className=\"filters-grid\">\r\n              {config.dataTypes.documents && (\r\n                <div className=\"filter-group\">\r\n                  <label>Statut Documents</label>\r\n                  <select \r\n                    value={config.filters.documentStatus} \r\n                    onChange={(e) => setConfig(prev => ({\r\n                      ...prev,\r\n                      filters: { ...prev.filters, documentStatus: e.target.value as any }\r\n                    }))}\r\n                  >\r\n                    <option value=\"all\">Tous</option>\r\n                    <option value=\"available\">Disponibles</option>\r\n                    <option value=\"borrowed\">Emprunts</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {config.dataTypes.borrowers && (\r\n                <div className=\"filter-group\">\r\n                  <label>Type Emprunteurs</label>\r\n                  <select \r\n                    value={config.filters.borrowerType} \r\n                    onChange={(e) => setConfig(prev => ({\r\n                      ...prev,\r\n                      filters: { ...prev.filters, borrowerType: e.target.value as any }\r\n                    }))}\r\n                  >\r\n                    <option value=\"all\">Tous</option>\r\n                    <option value=\"student\">tudiants</option>\r\n                    <option value=\"staff\">Personnel</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {config.dataTypes.borrowHistory && (\r\n                <div className=\"filter-group\">\r\n                  <label>Statut Historique</label>\r\n                  <select \r\n                    value={config.filters.historyStatus} \r\n                    onChange={(e) => setConfig(prev => ({\r\n                      ...prev,\r\n                      filters: { ...prev.filters, historyStatus: e.target.value as any }\r\n                    }))}\r\n                  >\r\n                    <option value=\"all\">Tous</option>\r\n                    <option value=\"active\">En cours</option>\r\n                    <option value=\"returned\">Rendus</option>\r\n                    <option value=\"overdue\">En retard</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"dialog-footer\">\r\n          <MicroButton variant=\"secondary\" onClick={onClose}>\r\n            Annuler\r\n          </MicroButton>\r\n          <MicroButton \r\n            variant=\"success\" \r\n            icon={Download} \r\n            onClick={handleExport}\r\n            disabled={isExporting}\r\n          >\r\n            {isExporting ? 'Export en cours...' : `Exporter en ${config.format.toUpperCase()}`}\r\n          </MicroButton>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .export-dialog-overlay {\r\n          position: fixed;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          backdrop-filter: blur(8px);\r\n        }\r\n\r\n        .export-dialog {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 900px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .dialog-header {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          padding: 32px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n\r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .dialog-title {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .dialog-subtitle {\r\n          font-size: 14px;\r\n          opacity: 0.8;\r\n          margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n          width: 44px;\r\n          height: 44px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n\r\n        .dialog-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 32px;\r\n        }\r\n\r\n        .section {\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .section-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 16px 0;\r\n        }\r\n\r\n        .section-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          margin-bottom: 16px;\r\n        }\r\n\r\n        .field-actions {\r\n          display: flex;\r\n          gap: 16px;\r\n        }\r\n\r\n        .action-link {\r\n          background: none;\r\n          border: none;\r\n          color: #3E5C49;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          text-decoration: underline;\r\n          transition: color 0.2s ease;\r\n        }\r\n\r\n        .action-link:hover {\r\n          color: #2E453A;\r\n        }\r\n\r\n        .format-options {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .format-option {\r\n          padding: 20px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          position: relative;\r\n        }\r\n\r\n        .format-option:hover {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n\r\n        .format-option.selected {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .format-badge {\r\n          position: absolute;\r\n          top: -8px;\r\n          right: -8px;\r\n          background: #C2571B;\r\n          color: #F3EED9;\r\n          font-size: 10px;\r\n          font-weight: 600;\r\n          padding: 4px 8px;\r\n          border-radius: 12px;\r\n        }\r\n\r\n        .data-types-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .data-type-card {\r\n          padding: 20px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          gap: 8px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          text-align: center;\r\n          position: relative;\r\n        }\r\n\r\n        .data-type-card:hover {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n\r\n        .data-type-card.selected {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .data-type-card svg:last-child {\r\n          position: absolute;\r\n          top: 8px;\r\n          right: 8px;\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .fields-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n          gap: 12px;\r\n        }\r\n\r\n        .field-checkbox {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px;\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .field-checkbox:hover {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n\r\n        .field-checkbox.checked {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .toggle-switch {\r\n          position: relative;\r\n          display: inline-block;\r\n          width: 50px;\r\n          height: 24px;\r\n        }\r\n\r\n        .toggle-switch input {\r\n          opacity: 0;\r\n          width: 0;\r\n          height: 0;\r\n        }\r\n\r\n        .toggle-switch label {\r\n          position: absolute;\r\n          cursor: pointer;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background-color: #ccc;\r\n          transition: .4s;\r\n          border-radius: 24px;\r\n        }\r\n\r\n        .toggle-switch label:before {\r\n          position: absolute;\r\n          content: \"\";\r\n          height: 18px;\r\n          width: 18px;\r\n          left: 3px;\r\n          bottom: 3px;\r\n          background-color: white;\r\n          transition: .4s;\r\n          border-radius: 50%;\r\n        }\r\n\r\n        .toggle-switch input:checked + label {\r\n          background-color: #3E5C49;\r\n        }\r\n\r\n        .toggle-switch input:checked + label:before {\r\n          transform: translateX(26px);\r\n        }\r\n\r\n        .date-range-inputs {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 16px;\r\n          margin-top: 16px;\r\n        }\r\n\r\n        .date-input label {\r\n          display: block;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          color: #2E2E2E;\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .date-input input {\r\n          width: 100%;\r\n          padding: 12px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .date-input input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .filters-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n          gap: 16px;\r\n        }\r\n\r\n        .filter-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n\r\n        .filter-group label {\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          color: #2E2E2E;\r\n        }\r\n\r\n        .filter-group select {\r\n          padding: 12px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .filter-group select:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .dialog-footer {\r\n          padding: 24px 32px;\r\n          border-top: 1px solid #E5DCC2;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .export-dialog {\r\n            margin: 12px;\r\n          }\r\n\r\n          .data-types-grid,\r\n          .fields-grid,\r\n          .filters-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .format-options {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .date-range-inputs {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .dialog-content {\r\n            padding: 20px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","// src/renderer/components/InitialSetup.tsx - Version redesigne\r\nimport React, { useState } from 'react';\r\nimport { \r\n  Monitor, \r\n  Wifi, \r\n  WifiOff, \r\n  Database, \r\n  Cloud, \r\n  ArrowRight, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  Info,\r\n  Settings,\r\n  Globe,\r\n  HardDrive,\r\n  Network,\r\n  Users\r\n} from 'lucide-react';\r\n\r\nexport type AppMode = 'offline' | 'online';\r\n\r\ninterface InitialSetupProps {\r\n  onComplete: (mode: AppMode) => void;\r\n}\r\n\r\nexport const InitialSetup: React.FC<InitialSetupProps> = ({ onComplete }) => {\r\n  const [selectedMode, setSelectedMode] = useState<AppMode>('offline');\r\n  \r\n  return (\r\n    <div className=\"initial-setup\">\r\n      {/* Background Pattern */}\r\n      <div className=\"setup-background\">\r\n        <div className=\"setup-pattern\"></div>\r\n        <div className=\"floating-elements\">\r\n          <div className=\"floating-icon\"><Database /></div>\r\n          <div className=\"floating-icon\"><Cloud /></div>\r\n          <div className=\"floating-icon\"><Network /></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"setup-container\">\r\n        {/* Header */}\r\n        <div className=\"setup-header\">\r\n          <div className=\"setup-logo\">\r\n            <Monitor size={48} />\r\n          </div>\r\n          <h1 className=\"setup-title\">Configuration Initiale</h1>\r\n          <p className=\"setup-subtitle\">\r\n            Configurez le mode de fonctionnement de votre bibliothque\r\n          </p>\r\n        </div>\r\n\r\n        {/* Mode Selection */}\r\n        <div className=\"mode-selection\">\r\n          <h2 className=\"section-title\">\r\n            <Settings size={24} />\r\n            Choisissez votre mode de fonctionnement\r\n          </h2>\r\n\r\n          <div className=\"mode-options\">\r\n            {/* Mode Offline */}\r\n            <div \r\n              className={`mode-card ${selectedMode === 'offline' ? 'selected' : ''}`}\r\n              onClick={() => setSelectedMode('offline')}\r\n            >\r\n              <div className=\"mode-header\">\r\n                <div className=\"mode-icon offline\">\r\n                  <HardDrive size={32} />\r\n                </div>\r\n                <div className=\"mode-info\">\r\n                  <h3>Mode Hors Ligne</h3>\r\n                  <span className=\"mode-status recommended\">Recommand</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mode-description\">\r\n                <p>\r\n                  Utilise une base de donnes locale (SQLite) pour stocker toutes les donnes. \r\n                  Fonctionne sans connexion Internet et peut tre partag en rseau local.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"mode-features\">\r\n                <div className=\"feature-list\">\r\n                  <div className=\"feature\">\r\n                    <CheckCircle size={16} />\r\n                    <span>Fonctionne sans Internet</span>\r\n                  </div>\r\n                  <div className=\"feature\">\r\n                    <CheckCircle size={16} />\r\n                    <span>Donnes stockes localement</span>\r\n                  </div>\r\n                  <div className=\"feature\">\r\n                    <CheckCircle size={16} />\r\n                    <span>Partage en rseau local</span>\r\n                  </div>\r\n                  <div className=\"feature\">\r\n                    <CheckCircle size={16} />\r\n                    <span>Performance optimale</span>\r\n                  </div>\r\n                  <div className=\"feature\">\r\n                    <CheckCircle size={16} />\r\n                    <span>Contrle total des donnes</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mode-ideal\">\r\n                <Info size={16} />\r\n                <span>Idal pour : Bibliothques locales, tablissements scolaires, usage priv</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Mode Online - Disabled */}\r\n            <div className=\"mode-card disabled\">\r\n              <div className=\"mode-header\">\r\n                <div className=\"mode-icon online disabled\">\r\n                  <Cloud size={32} />\r\n                </div>\r\n                <div className=\"mode-info\">\r\n                  <h3>Mode En Ligne</h3>\r\n                  <span className=\"mode-status coming-soon\">Bientt disponible</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mode-description\">\r\n                <p>\r\n                  Utilise Supabase pour la synchronisation cloud et le partage multi-tablissements. \r\n                  Ncessite une connexion Internet stable.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"mode-features\">\r\n                <div className=\"feature-list\">\r\n                  <div className=\"feature disabled\">\r\n                    <Globe size={16} />\r\n                    <span>Synchronisation cloud</span>\r\n                  </div>\r\n                  <div className=\"feature disabled\">\r\n                    <Users size={16} />\r\n                    <span>Multi-tablissements</span>\r\n                  </div>\r\n                  <div className=\"feature disabled\">\r\n                    <Wifi size={16} />\r\n                    <span>Accs depuis partout</span>\r\n                  </div>\r\n                  <div className=\"feature disabled\">\r\n                    <Database size={16} />\r\n                    <span>Sauvegarde automatique</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mode-ideal disabled\">\r\n                <AlertCircle size={16} />\r\n                <span>Cette fonctionnalit sera disponible dans une prochaine version</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Information Panel */}\r\n        <div className=\"info-panel\">\r\n          <div className=\"info-card\">\r\n            <div className=\"info-header\">\r\n              <Info size={20} />\r\n              <h3>Informations importantes</h3>\r\n            </div>\r\n            <div className=\"info-content\">\r\n              {selectedMode === 'offline' ? (\r\n                <div className=\"info-details\">\r\n                  <p><strong>Mode Hors Ligne slectionn :</strong></p>\r\n                  <ul>\r\n                    <li>Vos donnes seront stockes localement sur cet ordinateur</li>\r\n                    <li>L'application fonctionnera sans connexion Internet</li>\r\n                    <li>Vous pouvez partager la base de donnes sur votre rseau local</li>\r\n                    <li>Ce choix peut tre modifi ultrieurement dans les paramtres</li>\r\n                  </ul>\r\n                </div>\r\n              ) : (\r\n                <div className=\"info-details\">\r\n                  <p><strong>Mode En Ligne :</strong></p>\r\n                  <ul>\r\n                    <li>Fonctionnalit en cours de dveloppement</li>\r\n                    <li>Permettra la synchronisation cloud via Supabase</li>\r\n                    <li>Gestion multi-tablissements</li>\r\n                    <li>Disponible dans une prochaine mise  jour</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"setup-actions\">\r\n          <button \r\n            className=\"continue-btn\"\r\n            onClick={() => onComplete(selectedMode)}\r\n            disabled={selectedMode === 'online'}\r\n          >\r\n            <span>Continuer avec le mode {selectedMode === 'offline' ? 'Hors Ligne' : 'En Ligne'}</span>\r\n            <ArrowRight size={20} />\r\n          </button>\r\n          \r\n          <p className=\"setup-note\">\r\n            Vous pourrez modifier ce choix plus tard dans les paramtres de l'application\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .initial-setup {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          overflow: auto;\r\n          z-index: 1000;\r\n        }\r\n\r\n        .setup-background {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          opacity: 0.1;\r\n        }\r\n\r\n        .setup-pattern {\r\n          width: 100%;\r\n          height: 100%;\r\n          background-image: \r\n            radial-gradient(circle at 25% 25%, rgba(243, 238, 217, 0.5) 2px, transparent 2px),\r\n            radial-gradient(circle at 75% 75%, rgba(243, 238, 217, 0.5) 2px, transparent 2px);\r\n          background-size: 50px 50px;\r\n          animation: patternMove 20s linear infinite;\r\n        }\r\n\r\n        .floating-elements {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n        }\r\n\r\n        .floating-icon {\r\n          position: absolute;\r\n          color: rgba(243, 238, 217, 0.2);\r\n          animation: float 6s ease-in-out infinite;\r\n        }\r\n\r\n        .floating-icon:nth-child(1) {\r\n          top: 10%;\r\n          left: 10%;\r\n          animation-delay: 0s;\r\n        }\r\n\r\n        .floating-icon:nth-child(2) {\r\n          top: 20%;\r\n          right: 10%;\r\n          animation-delay: 2s;\r\n        }\r\n\r\n        .floating-icon:nth-child(3) {\r\n          bottom: 20%;\r\n          left: 20%;\r\n          animation-delay: 4s;\r\n        }\r\n\r\n        .setup-container {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          padding: 32px;\r\n          max-width: 1000px;\r\n          width: 95%;\r\n          max-height: 95vh;\r\n          overflow-y: auto;\r\n          box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);\r\n          position: relative;\r\n          z-index: 1;\r\n          margin: 20px auto;\r\n          animation: slideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n        }\r\n\r\n        @keyframes slideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(30px) scale(0.95);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n\r\n        .setup-header {\r\n          text-align: center;\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .setup-logo {\r\n          display: inline-flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 80px;\r\n          height: 80px;\r\n          background: linear-gradient(135deg, #3E5C49, #2E453A);\r\n          border-radius: 20px;\r\n          color: #F3EED9;\r\n          margin-bottom: 20px;\r\n          box-shadow: 0 8px 32px rgba(62, 92, 73, 0.3);\r\n        }\r\n\r\n        .setup-title {\r\n          font-size: 2.5rem;\r\n          font-weight: 800;\r\n          color: #2E2E2E;\r\n          margin: 0 0 10px 0;\r\n          letter-spacing: -0.5px;\r\n        }\r\n\r\n        .setup-subtitle {\r\n          font-size: 1.1rem;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n        }\r\n\r\n        .mode-selection {\r\n          margin-bottom: 24px;\r\n        }\r\n\r\n        .section-title {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          font-size: 1.4rem;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin-bottom: 16px;\r\n        }\r\n\r\n        .mode-options {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 16px;\r\n        }\r\n\r\n        .mode-card {\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 16px;\r\n          padding: 20px;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          background: #FFFFFF;\r\n          min-height: 380px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .mode-card::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          height: 4px;\r\n          background: linear-gradient(90deg, #3E5C49, #C2571B);\r\n          transform: scaleX(0);\r\n          transition: transform 0.3s ease;\r\n        }\r\n\r\n        .mode-card:not(.disabled):hover {\r\n          border-color: #3E5C49;\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 10px 30px rgba(62, 92, 73, 0.2);\r\n        }\r\n\r\n        .mode-card:not(.disabled):hover::before {\r\n          transform: scaleX(1);\r\n        }\r\n\r\n        .mode-card.selected {\r\n          border-color: #3E5C49;\r\n          background: linear-gradient(135deg, rgba(62, 92, 73, 0.05), rgba(243, 238, 217, 0.1));\r\n          box-shadow: 0 10px 30px rgba(62, 92, 73, 0.2);\r\n        }\r\n\r\n        .mode-card.selected::before {\r\n          transform: scaleX(1);\r\n        }\r\n\r\n        .mode-card.disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n          background: rgba(248, 246, 240, 0.5);\r\n        }\r\n\r\n        .mode-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          margin-bottom: 14px;\r\n        }\r\n\r\n        .mode-icon {\r\n          width: 44px;\r\n          height: 44px;\r\n          border-radius: 10px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .mode-icon.offline {\r\n          background: linear-gradient(135deg, #3E5C49, #2E453A);\r\n        }\r\n\r\n        .mode-icon.online {\r\n          background: linear-gradient(135deg, #C2571B, #A8481A);\r\n        }\r\n\r\n        .mode-icon.disabled {\r\n          background: #6E6E6E;\r\n        }\r\n\r\n        .mode-info h3 {\r\n          font-size: 1.2rem;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .mode-status {\r\n          font-size: 0.85rem;\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .mode-status.recommended {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .mode-status.coming-soon {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n        }\r\n\r\n        .mode-description {\r\n          margin-bottom: 12px;\r\n          flex-grow: 1;\r\n        }\r\n\r\n        .mode-description p {\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          line-height: 1.4;\r\n          font-size: 0.95rem;\r\n        }\r\n\r\n        .feature-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 6px;\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .feature {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          font-size: 0.85rem;\r\n        }\r\n\r\n        .feature:not(.disabled) {\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .feature.disabled {\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .mode-ideal {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          padding: 10px;\r\n          background: rgba(248, 246, 240, 0.8);\r\n          border-radius: 6px;\r\n          font-size: 0.8rem;\r\n          color: #4A4A4A;\r\n          margin-top: auto;\r\n        }\r\n\r\n        .mode-ideal.disabled {\r\n          background: rgba(229, 220, 194, 0.3);\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .info-panel {\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .info-card {\r\n          background: rgba(248, 246, 240, 0.8);\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 10px;\r\n          padding: 16px;\r\n        }\r\n\r\n        .info-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          margin-bottom: 10px;\r\n        }\r\n\r\n        .info-header h3 {\r\n          font-size: 1.05rem;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n\r\n        .info-content ul {\r\n          margin: 6px 0 0 0;\r\n          padding-left: 18px;\r\n        }\r\n\r\n        .info-content li {\r\n          margin-bottom: 3px;\r\n          color: #4A4A4A;\r\n          font-size: 0.9rem;\r\n        }\r\n\r\n        .setup-actions {\r\n          text-align: center;\r\n        }\r\n\r\n        .continue-btn {\r\n          display: inline-flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          background: linear-gradient(135deg, #3E5C49, #2E453A);\r\n          color: #F3EED9;\r\n          border: none;\r\n          padding: 14px 28px;\r\n          border-radius: 10px;\r\n          font-size: 1.05rem;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .continue-btn:not(:disabled):hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 10px 30px rgba(62, 92, 73, 0.3);\r\n        }\r\n\r\n        .continue-btn:disabled {\r\n          opacity: 0.5;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        .setup-note {\r\n          color: #4A4A4A;\r\n          font-size: 0.85rem;\r\n          margin: 0;\r\n        }\r\n\r\n        @keyframes patternMove {\r\n          0% { transform: translateX(0) translateY(0); }\r\n          100% { transform: translateX(50px) translateY(50px); }\r\n        }\r\n\r\n        @keyframes float {\r\n          0%, 100% { transform: translateY(0px); }\r\n          50% { transform: translateY(-20px); }\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .setup-container {\r\n            padding: 20px;\r\n            width: 98%;\r\n            margin: 10px auto;\r\n          }\r\n\r\n          .mode-options {\r\n            grid-template-columns: 1fr;\r\n            gap: 12px;\r\n          }\r\n\r\n          .mode-card {\r\n            min-height: auto;\r\n            padding: 16px;\r\n          }\r\n\r\n          .setup-title {\r\n            font-size: 1.8rem;\r\n          }\r\n\r\n          .section-title {\r\n            font-size: 1.2rem;\r\n          }\r\n        }\r\n\r\n        @media (max-width: 480px) {\r\n          .setup-container {\r\n            padding: 16px;\r\n            width: 99%;\r\n            margin: 5px auto;\r\n          }\r\n\r\n          .setup-header {\r\n            margin-bottom: 24px;\r\n          }\r\n\r\n          .setup-title {\r\n            font-size: 1.6rem;\r\n          }\r\n\r\n          .mode-card {\r\n            padding: 14px;\r\n          }\r\n\r\n          .continue-btn {\r\n            padding: 12px 20px;\r\n            font-size: 1rem;\r\n          }\r\n        }\r\n\r\n        /* Scrollbar personnalis */\r\n        .setup-container::-webkit-scrollbar {\r\n          width: 8px;\r\n        }\r\n\r\n        .setup-container::-webkit-scrollbar-track {\r\n          background: #F3EED9;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .setup-container::-webkit-scrollbar-thumb {\r\n          background: #3E5C49;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .setup-container::-webkit-scrollbar-thumb:hover {\r\n          background: #2E453A;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","// src/renderer/components/InstitutionSetup.tsx - Version redesigne\nimport React, { useState } from 'react';\nimport { \n  Building,\n  CheckCircle,\n  Copy,\n  Download,\n  Mail,\n  ArrowRight,\n  Sparkles,\n  Shield,\n  BookOpen,\n  Users,\n  Database,\n  WifiOff,\n  HardDrive,\n  Zap\n} from 'lucide-react';\nimport { Institution } from '../services/SupabaseClient';\n\ninterface InstitutionSetupProps {\n  institutionCode: string;\n  institution: Institution | null;\n  onComplete: () => void;\n}\n\nexport const InstitutionSetup: React.FC<InstitutionSetupProps> = ({\n  institutionCode,\n  institution,\n  onComplete\n}) => {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [copied, setCopied] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleCopyCode = async () => {\n    try {\n      await navigator.clipboard.writeText(institutionCode);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      const textArea = document.createElement('textarea');\n      textArea.value = institutionCode;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleDownloadInfo = () => {\n    const content = `\nINFORMATIONS DE VOTRE TABLISSEMENT (MODE HORS LIGNE)\n=====================================================\n\nNom: ${institution?.name || 'Non spcifi'}\nCode d'accs local: ${institutionCode}\nType: ${institution?.type || 'Non spcifi'}\nVille: ${institution?.city || 'Non spcifi'}\n\nMODE DE FONCTIONNEMENT:\n======================\n Base de donnes locale (SQLite)\n Fonctionne sans Internet\n Donnes stockes sur votre ordinateur\n Possibilit de partage en rseau local\n\nINFORMATIONS IMPORTANTES:\n========================\n- Ce code permet l'accs  votre bibliothque locale\n- Conservez-le prcieusement\n- Partagez-le uniquement avec des personnes autorises\n- Votre tablissement fonctionne entirement hors ligne\n\nDate de cration: ${new Date().toLocaleDateString('fr-FR')}\nHeure de cration: ${new Date().toLocaleTimeString('fr-FR')}\n    `.trim();\n\n    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${institution?.name?.replace(/[^a-zA-Z0-9]/g, '_') || 'bibliotheque'}_offline_info.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const sendInvitation = () => {\n    const subject = encodeURIComponent(`Invitation - ${institution?.name} (Mode Hors Ligne)`);\n    const body = encodeURIComponent(`\nBonjour,\n\nVous tes invit(e)  rejoindre ${institution?.name} sur notre systme de bibliothque local.\n\n Code d'accs: ${institutionCode}\n\n Informations importantes:\n- Notre bibliothque fonctionne en mode hors ligne\n- Aucune connexion Internet requise\n- Accs depuis le rseau local uniquement\n\n Instructions:\n1. Connectez-vous au rseau local de l'tablissement\n2. Lancez l'application Bibliothque\n3. Utilisez le code d'accs ci-dessus pour vous connecter\n4. Vos donnes seront synchronises localement\n\nSi vous avez des questions, contactez l'administrateur de la bibliothque.\n\nCordialement,\nL'quipe de ${institution?.name}\n    `);\n    \n    window.open(`mailto:?subject=${subject}&body=${body}`);\n  };\n\n  const nextStep = () => {\n    if (currentStep < 3) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      onComplete();\n    }\n  };\n\n  const previousStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const steps = [\n    {\n      number: 1,\n      title: \"tablissement cr !\",\n      subtitle: \"Configuration russie\",\n      icon: CheckCircle\n    },\n    {\n      number: 2,\n      title: \"Code d'accs\",\n      subtitle: \"Partagez avec vos utilisateurs\",\n      icon: Shield\n    },\n    {\n      number: 3,\n      title: \"Prt  utiliser\",\n      subtitle: \"Commencez ds maintenant\",\n      icon: BookOpen\n    }\n  ];\n\n  return (\n    <div className=\"institution-setup\">\n      <div className=\"setup-background\">\n        <div className=\"pattern-overlay\"></div>\n        <div className=\"floating-shapes\">\n          <div className=\"shape shape-1\"></div>\n          <div className=\"shape shape-2\"></div>\n          <div className=\"shape shape-3\"></div>\n        </div>\n      </div>\n\n      <div className=\"setup-container\">\n        {/* Header */}\n        <div className=\"setup-header\">\n          <div className=\"offline-badge\">\n            <WifiOff size={16} />\n            <span>Mode Hors Ligne</span>\n          </div>\n          \n          <div className=\"header-logo\">\n            <Building size={40} />\n          </div>\n          <h1 className=\"setup-title\">Configuration Termine</h1>\n          \n          {/* Progress indicator */}\n          <div className=\"progress-container\">\n            <div className=\"progress-steps\">\n              {steps.map((step, index) => (\n                <div key={step.number} className={`progress-step ${currentStep >= step.number ? 'active' : ''} ${currentStep === step.number ? 'current' : ''}`}>\n                  <div className=\"step-circle\">\n                    <step.icon size={16} />\n                  </div>\n                  <div className=\"step-info\">\n                    <span className=\"step-title\">{step.title}</span>\n                    <span className=\"step-subtitle\">{step.subtitle}</span>\n                  </div>\n                  {index < steps.length - 1 && <div className=\"step-connector\"></div>}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"setup-content\">\n          {/* Step 1: Success */}\n          {currentStep === 1 && (\n            <div className=\"step-content success-step\">\n              <div className=\"success-animation\">\n                <div className=\"success-circle\">\n                  <CheckCircle size={48} />\n                </div>\n                <div className=\"success-sparkles\">\n                  <Sparkles className=\"sparkle sparkle-1\" />\n                  <Sparkles className=\"sparkle sparkle-2\" />\n                  <Sparkles className=\"sparkle sparkle-3\" />\n                </div>\n              </div>\n              \n              <h2 className=\"step-title\">Flicitations ! </h2>\n              <p className=\"step-description\">\n                Votre tablissement <strong>{institution?.name}</strong> a t configur avec succs \n                en mode hors ligne. Vous pouvez maintenant grer votre bibliothque localement.\n              </p>\n\n              <div className=\"institution-card\">\n                <div className=\"card-header\">\n                  <HardDrive size={20} />\n                  <h3>Bibliothque Locale</h3>\n                </div>\n                <div className=\"card-content\">\n                  <div className=\"info-row\">\n                    <span className=\"info-label\">Nom:</span>\n                    <span className=\"info-value\">{institution?.name}</span>\n                  </div>\n                  <div className=\"info-row\">\n                    <span className=\"info-label\">Type:</span>\n                    <span className=\"info-value\">\n                      {institution?.type === 'school' && ' cole/Lyce'}\n                      {institution?.type === 'university' && ' Universit'}\n                      {institution?.type === 'library' && ' Bibliothque'}\n                      {institution?.type === 'other' && ' Autre'}\n                    </span>\n                  </div>\n                  <div className=\"info-row\">\n                    <span className=\"info-label\">Ville:</span>\n                    <span className=\"info-value\">{institution?.city}</span>\n                  </div>\n                  <div className=\"info-row highlight\">\n                    <span className=\"info-label\">Code d'accs:</span>\n                    <span className=\"info-value code-value\">{institutionCode}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"features-preview\">\n                <h3>Fonctionnalits disponibles :</h3>\n                <div className=\"features-grid\">\n                  <div className=\"feature-item\">\n                    <Database size={18} />\n                    <span>Base de donnes locale</span>\n                  </div>\n                  <div className=\"feature-item\">\n                    <WifiOff size={18} />\n                    <span>Fonctionne hors ligne</span>\n                  </div>\n                  <div className=\"feature-item\">\n                    <BookOpen size={18} />\n                    <span>Gestion des livres</span>\n                  </div>\n                  <div className=\"feature-item\">\n                    <Users size={18} />\n                    <span>Gestion des utilisateurs</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step 2: Share Code */}\n          {currentStep === 2 && (\n            <div className=\"step-content share-step\">\n              <div className=\"share-header\">\n                <div className=\"share-icon\">\n                  <Shield size={40} />\n                </div>\n                <h2 className=\"step-title\">Code d'Accs Local</h2>\n                <p className=\"step-description\">\n                  Ce code permet aux utilisateurs locaux d'accder  votre bibliothque. \n                  Conservez-le prcieusement et partagez-le uniquement avec des personnes autorises.\n                </p>\n              </div>\n\n              <div className=\"code-display\">\n                <div className=\"code-container\">\n                  <div className=\"code-label\">Code d'accs local</div>\n                  <div className=\"code-value-large\">{institutionCode}</div>\n                  <button \n                    className={`copy-button ${copied ? 'copied' : ''}`}\n                    onClick={handleCopyCode}\n                  >\n                    {copied ? <CheckCircle size={16} /> : <Copy size={16} />}\n                    <span>{copied ? 'Copi !' : 'Copier le code'}</span>\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"sharing-options\">\n                <h3>Options de partage</h3>\n                <div className=\"sharing-grid\">\n                  <button className=\"sharing-option\" onClick={handleDownloadInfo}>\n                    <div className=\"option-icon\">\n                      <Download size={20} />\n                    </div>\n                    <div className=\"option-content\">\n                      <span className=\"option-title\">Tlcharger les infos</span>\n                      <span className=\"option-description\">Fichier avec code et instructions</span>\n                    </div>\n                  </button>\n\n                  <button className=\"sharing-option\" onClick={sendInvitation}>\n                    <div className=\"option-icon\">\n                      <Mail size={20} />\n                    </div>\n                    <div className=\"option-content\">\n                      <span className=\"option-title\">Envoyer par email</span>\n                      <span className=\"option-description\">Invitation pr-rdige</span>\n                    </div>\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"instructions-card\">\n                <h4>Instructions pour vos utilisateurs :</h4>\n                <ol className=\"instructions-list\">\n                  <li>Se connecter au rseau local de l'tablissement</li>\n                  <li>Lancer l'application Bibliothque</li>\n                  <li>Utiliser ce code d'accs : <code>{institutionCode}</code></li>\n                  <li>Les donnes seront synchronises localement</li>\n                </ol>\n                \n                <div className=\"offline-note\">\n                  <WifiOff size={16} />\n                  <span>Aucune connexion Internet requise</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step 3: Ready to Start */}\n          {currentStep === 3 && (\n            <div className=\"step-content ready-step\">\n              <div className=\"ready-animation\">\n                <div className=\"ready-icon\">\n                  <Zap size={48} />\n                </div>\n              </div>\n\n              <h2 className=\"step-title\">Tout est prt ! </h2>\n              <p className=\"step-description\">\n                Votre bibliothque locale est configure et prte  tre utilise. \n                Vous allez maintenant accder au tableau de bord administrateur.\n              </p>\n\n              <div className=\"quick-actions\">\n                <h3>Prochaines tapes recommandes :</h3>\n                <div className=\"actions-list\">\n                  <div className=\"action-item\">\n                    <div className=\"action-number\">1</div>\n                    <div className=\"action-content\">\n                      <span className=\"action-title\">Ajoutez vos premiers livres</span>\n                      <span className=\"action-description\">Construisez votre catalogue local</span>\n                    </div>\n                  </div>\n                  <div className=\"action-item\">\n                    <div className=\"action-number\">2</div>\n                    <div className=\"action-content\">\n                      <span className=\"action-title\">Configurez vos paramtres</span>\n                      <span className=\"action-description\">Personnalisez votre bibliothque</span>\n                    </div>\n                  </div>\n                  <div className=\"action-item\">\n                    <div className=\"action-number\">3</div>\n                    <div className=\"action-content\">\n                      <span className=\"action-title\">Partagez le code d'accs</span>\n                      <span className=\"action-description\">Invitez vos utilisateurs locaux</span>\n                    </div>\n                  </div>\n                  <div className=\"action-item\">\n                    <div className=\"action-number\">4</div>\n                    <div className=\"action-content\">\n                      <span className=\"action-title\">Testez le systme</span>\n                      <span className=\"action-description\">Vrifiez toutes les fonctionnalits</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"offline-advantages\">\n                <h4>Avantages du mode hors ligne :</h4>\n                <div className=\"advantages-grid\">\n                  <div className=\"advantage-item\">\n                    <Database size={16} />\n                    <span>Donnes locales scurises</span>\n                  </div>\n                  <div className=\"advantage-item\">\n                    <WifiOff size={16} />\n                    <span>Indpendance Internet</span>\n                  </div>\n                  <div className=\"advantage-item\">\n                    <Zap size={16} />\n                    <span>Performance optimale</span>\n                  </div>\n                  <div className=\"advantage-item\">\n                    <Shield size={16} />\n                    <span>Contrle total</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Navigation */}\n        <div className=\"setup-navigation\">\n          {currentStep > 1 && (\n            <button \n              className=\"nav-button secondary\"\n              onClick={previousStep}\n              disabled={isLoading}\n            >\n              Prcdent\n            </button>\n          )}\n          \n          <button \n            className=\"nav-button primary\"\n            onClick={nextStep}\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <>\n                <div className=\"loading-spinner\"></div>\n                Chargement...\n              </>\n            ) : (\n              <>\n                {currentStep === 3 ? 'Accder  ma bibliothque' : 'Continuer'}\n                <ArrowRight size={16} />\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n\n      <style>{`\n        .institution-setup {\n          min-height: 100vh;\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          position: relative;\n          overflow-x: hidden;\n        }\n\n        .setup-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          overflow: hidden;\n        }\n\n        .pattern-overlay {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-image: \n            radial-gradient(circle at 20% 80%, rgba(243, 238, 217, 0.1) 0%, transparent 50%),\n            radial-gradient(circle at 80% 20%, rgba(243, 238, 217, 0.05) 0%, transparent 50%);\n          animation: drift 20s ease-in-out infinite;\n        }\n\n        @keyframes drift {\n          0%, 100% { transform: translate(0, 0) rotate(0deg); }\n          50% { transform: translate(20px, -20px) rotate(1deg); }\n        }\n\n        .floating-shapes {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          pointer-events: none;\n        }\n\n        .shape {\n          position: absolute;\n          background: rgba(243, 238, 217, 0.05);\n          border-radius: 50%;\n          animation: float 6s ease-in-out infinite;\n        }\n\n        .shape-1 {\n          width: 80px;\n          height: 80px;\n          top: 20%;\n          left: 10%;\n          animation-delay: 0s;\n        }\n\n        .shape-2 {\n          width: 60px;\n          height: 60px;\n          top: 60%;\n          right: 15%;\n          animation-delay: 2s;\n        }\n\n        .shape-3 {\n          width: 100px;\n          height: 100px;\n          bottom: 30%;\n          left: 20%;\n          animation-delay: 4s;\n        }\n\n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-20px); }\n        }\n\n        .setup-container {\n          position: relative;\n          z-index: 10;\n          min-height: 100vh;\n          display: flex;\n          flex-direction: column;\n          padding: 20px;\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        .setup-header {\n          text-align: center;\n          margin-bottom: 32px;\n          color: #F3EED9;\n        }\n\n        .offline-badge {\n          display: inline-flex;\n          align-items: center;\n          gap: 8px;\n          background: rgba(194, 87, 27, 0.2);\n          color: #C2571B;\n          padding: 8px 16px;\n          border-radius: 20px;\n          font-size: 14px;\n          font-weight: 600;\n          border: 1px solid rgba(194, 87, 27, 0.3);\n          margin-bottom: 24px;\n        }\n\n        .header-logo {\n          width: 60px;\n          height: 60px;\n          background: rgba(243, 238, 217, 0.15);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0 auto 20px;\n          border: 1px solid rgba(243, 238, 217, 0.2);\n        }\n\n        .setup-title {\n          font-size: 28px;\n          font-weight: 800;\n          margin: 0 0 24px 0;\n          letter-spacing: -0.5px;\n        }\n\n        .progress-container {\n          margin-bottom: 16px;\n        }\n\n        .progress-steps {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          gap: 32px;\n        }\n\n        .progress-step {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 8px;\n          opacity: 0.5;\n          transition: all 0.3s ease;\n          position: relative;\n        }\n\n        .progress-step.active {\n          opacity: 1;\n        }\n\n        .progress-step.current {\n          transform: scale(1.05);\n        }\n\n        .step-circle {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: rgba(243, 238, 217, 0.15);\n          border: 2px solid rgba(243, 238, 217, 0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.3s ease;\n        }\n\n        .progress-step.active .step-circle {\n          background: rgba(243, 238, 217, 0.25);\n          border-color: rgba(243, 238, 217, 0.5);\n        }\n\n        .progress-step.current .step-circle {\n          background: #C2571B;\n          border-color: #C2571B;\n          color: #F3EED9;\n          box-shadow: 0 4px 16px rgba(194, 87, 27, 0.3);\n        }\n\n        .step-info {\n          text-align: center;\n        }\n\n        .step-title {\n          font-size: 12px;\n          font-weight: 600;\n          margin: 0 0 2px 0;\n        }\n\n        .step-subtitle {\n          font-size: 10px;\n          opacity: 0.8;\n        }\n\n        .step-connector {\n          position: absolute;\n          top: 20px;\n          left: calc(100% + 8px);\n          width: 24px;\n          height: 2px;\n          background: rgba(243, 238, 217, 0.2);\n          z-index: -1;\n        }\n\n        .setup-content {\n          flex: 1;\n          background: #FFFFFF;\n          border-radius: 20px;\n          padding: 32px;\n          margin-bottom: 24px;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n          overflow-y: auto;\n        }\n\n        .step-content {\n          max-width: 700px;\n          margin: 0 auto;\n        }\n\n        /* Success Step */\n        .success-step {\n          text-align: center;\n        }\n\n        .success-animation {\n          position: relative;\n          margin-bottom: 24px;\n        }\n\n        .success-circle {\n          color: #3E5C49;\n          animation: bounce 0.6s ease-out;\n        }\n\n        .success-sparkles {\n          position: absolute;\n          inset: 0;\n          pointer-events: none;\n        }\n\n        .sparkle {\n          position: absolute;\n          color: #C2571B;\n          animation: sparkle 2s ease-in-out infinite;\n        }\n\n        .sparkle-1 {\n          top: 10%;\n          left: 20%;\n          animation-delay: 0s;\n        }\n\n        .sparkle-2 {\n          top: 20%;\n          right: 15%;\n          animation-delay: 0.5s;\n        }\n\n        .sparkle-3 {\n          bottom: 15%;\n          left: 15%;\n          animation-delay: 1s;\n        }\n\n        @keyframes bounce {\n          0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); }\n          40%, 43% { transform: translate3d(0, -20px, 0); }\n          70% { transform: translate3d(0, -10px, 0); }\n          90% { transform: translate3d(0, -3px, 0); }\n        }\n\n        @keyframes sparkle {\n          0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n          50% { opacity: 1; transform: scale(1) rotate(180deg); }\n        }\n\n        .step-title {\n          font-size: 24px;\n          font-weight: 700;\n          color: #3E5C49;\n          margin: 0 0 12px 0;\n          letter-spacing: -0.3px;\n        }\n\n        .step-description {\n          font-size: 16px;\n          color: #4A4A4A;\n          line-height: 1.5;\n          margin-bottom: 24px;\n        }\n\n        .institution-card {\n          background: rgba(243, 238, 217, 0.1);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          border-radius: 12px;\n          margin-bottom: 24px;\n          overflow: hidden;\n        }\n\n        .card-header {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 16px 20px;\n          background: rgba(62, 92, 73, 0.1);\n          border-bottom: 1px solid rgba(243, 238, 217, 0.3);\n        }\n\n        .card-header h3 {\n          font-size: 16px;\n          font-weight: 600;\n          color: #3E5C49;\n          margin: 0;\n        }\n\n        .card-content {\n          padding: 20px;\n        }\n\n        .info-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n          padding-bottom: 12px;\n          border-bottom: 1px solid rgba(243, 238, 217, 0.3);\n        }\n\n        .info-row:last-child {\n          margin-bottom: 0;\n          padding-bottom: 0;\n          border-bottom: none;\n        }\n\n        .info-row.highlight {\n          background: rgba(62, 92, 73, 0.05);\n          padding: 12px;\n          border-radius: 8px;\n          border: 1px solid rgba(62, 92, 73, 0.2);\n          border-bottom: 1px solid rgba(62, 92, 73, 0.2);\n        }\n\n        .info-label {\n          font-weight: 600;\n          color: #4A4A4A;\n          font-size: 14px;\n        }\n\n        .info-value {\n          font-weight: 600;\n          color: #3E5C49;\n          font-size: 14px;\n        }\n\n        .code-value {\n          font-family: 'Monaco', 'Consolas', monospace;\n          background: #3E5C49;\n          color: #F3EED9;\n          padding: 6px 10px;\n          border-radius: 6px;\n          font-size: 14px;\n          letter-spacing: 1px;\n        }\n\n        .features-preview h3 {\n          font-size: 16px;\n          font-weight: 600;\n          color: #3E5C49;\n          margin: 0 0 12px 0;\n          text-align: left;\n        }\n\n        .features-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n          gap: 12px;\n        }\n\n        .feature-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 12px;\n          background: rgba(62, 92, 73, 0.05);\n          border: 1px solid rgba(62, 92, 73, 0.1);\n          border-radius: 8px;\n          color: #3E5C49;\n          font-weight: 500;\n          font-size: 14px;\n        }\n\n        /* Share Step */\n        .share-step {\n          text-align: center;\n        }\n\n        .share-header {\n          margin-bottom: 24px;\n        }\n\n        .share-icon {\n          color: #C2571B;\n          margin-bottom: 16px;\n        }\n\n        .code-display {\n          margin-bottom: 32px;\n        }\n\n        .code-container {\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          border-radius: 16px;\n          padding: 24px;\n          color: #F3EED9;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .code-container::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          right: 0;\n          width: 80px;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(243, 238, 217, 0.1));\n          transform: skewX(-15deg);\n        }\n\n        .code-label {\n          font-size: 12px;\n          opacity: 0.9;\n          margin-bottom: 12px;\n          text-transform: uppercase;\n          letter-spacing: 1px;\n        }\n\n        .code-value-large {\n          font-size: 32px;\n          font-weight: 800;\n          letter-spacing: 4px;\n          font-family: 'Monaco', 'Consolas', monospace;\n          margin-bottom: 16px;\n          position: relative;\n          z-index: 1;\n        }\n\n        .copy-button {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          background: rgba(243, 238, 217, 0.2);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          color: #F3EED9;\n          padding: 8px 16px;\n          border-radius: 8px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 600;\n          margin: 0 auto;\n          position: relative;\n          z-index: 1;\n          font-size: 14px;\n        }\n\n        .copy-button:hover {\n          background: rgba(243, 238, 217, 0.3);\n          transform: translateY(-1px);\n        }\n\n        .copy-button.copied {\n          background: rgba(194, 87, 27, 0.8);\n          border-color: rgba(194, 87, 27, 0.8);\n          color: #F3EED9;\n        }\n\n        .sharing-options {\n          margin-bottom: 32px;\n        }\n\n        .sharing-options h3 {\n          font-size: 16px;\n          font-weight: 600;\n          color: #3E5C49;\n          margin: 0 0 16px 0;\n        }\n\n        .sharing-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n        }\n\n        .sharing-option {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px;\n          background: rgba(62, 92, 73, 0.05);\n          border: 1px solid rgba(62, 92, 73, 0.1);\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          color: #3E5C49;\n          font-weight: 600;\n        }\n\n        .sharing-option:hover {\n          background: rgba(62, 92, 73, 0.1);\n          border-color: rgba(62, 92, 73, 0.2);\n        }\n\n        .option-icon {\n          width: 36px;\n          height: 36px;\n          background: #C2571B;\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n          flex-shrink: 0;\n        }\n\n        .option-content {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n        }\n\n        .option-title {\n          font-size: 14px;\n          font-weight: 600;\n        }\n\n        .option-description {\n          font-size: 12px;\n          color: #4A4A4A;\n        }\n\n        .instructions-card {\n          background: rgba(243, 238, 217, 0.1);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          border-radius: 12px;\n          padding: 20px;\n          color: #3E5C49;\n          text-align: left;\n          max-width: 500px;\n          margin: 0 auto;\n        }\n\n        .instructions-card h4 {\n          margin: 0 0 12px 0;\n          font-size: 14px;\n          font-weight: 600;\n        }\n\n        .instructions-list {\n          margin: 0 0 16px 0;\n          padding-left: 20px;\n          list-style-type: decimal;\n        }\n\n        .instructions-list li {\n          margin-bottom: 6px;\n          font-size: 13px;\n          line-height: 1.4;\n        }\n\n        .instructions-list code {\n          background: #3E5C49;\n          color: #F3EED9;\n          padding: 2px 6px;\n          border-radius: 4px;\n          font-family: 'Monaco', 'Consolas', monospace;\n          font-size: 12px;\n        }\n\n        .offline-note {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: rgba(194, 87, 27, 0.1);\n          border: 1px solid rgba(194, 87, 27, 0.2);\n          color: #C2571B;\n          padding: 8px 12px;\n          border-radius: 8px;\n          font-size: 12px;\n          font-weight: 600;\n        }\n\n        /* Ready Step */\n        .ready-step {\n          text-align: center;\n        }\n\n        .ready-animation {\n          margin-bottom: 24px;\n        }\n\n        .ready-icon {\n          color: #C2571B;\n          animation: pulse 2s ease-in-out infinite;\n        }\n\n        @keyframes pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.1); }\n        }\n\n        .quick-actions {\n          margin-bottom: 24px;\n        }\n\n        .quick-actions h3 {\n          font-size: 16px;\n          font-weight: 600;\n          color: #3E5C49;\n          margin: 0 0 16px 0;\n          text-align: left;\n        }\n\n        .actions-list {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .action-item {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          padding: 16px;\n          background: rgba(62, 92, 73, 0.05);\n          border: 1px solid rgba(62, 92, 73, 0.1);\n          border-radius: 12px;\n        }\n\n        .action-number {\n          width: 32px;\n          height: 32px;\n          background: #C2571B;\n          color: #F3EED9;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 14px;\n          flex-shrink: 0;\n        }\n\n        .action-content {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n          text-align: left;\n        }\n\n        .action-title {\n          font-weight: 600;\n          color: #3E5C49;\n          font-size: 14px;\n        }\n\n        .action-description {\n          font-size: 12px;\n          color: #4A4A4A;\n        }\n\n        .offline-advantages h4 {\n          font-size: 14px;\n          font-weight: 600;\n          color: #3E5C49;\n          margin: 0 0 12px 0;\n          text-align: left;\n        }\n\n        .advantages-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n          gap: 12px;\n        }\n\n        .advantage-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 10px 12px;\n          background: rgba(194, 87, 27, 0.1);\n          border: 1px solid rgba(194, 87, 27, 0.2);\n          border-radius: 8px;\n          color: #C2571B;\n          font-weight: 500;\n          font-size: 13px;\n        }\n\n        /* Navigation */\n        .setup-navigation {\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n          padding: 0 20px 20px;\n        }\n\n        .nav-button {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 10px 20px;\n          border-radius: 10px;\n          font-weight: 600;\n          font-size: 14px;\n          cursor: pointer;\n          border: none;\n          transition: all 0.2s ease;\n        }\n\n        .nav-button.primary {\n          background: #C2571B;\n          color: #F3EED9;\n        }\n\n        .nav-button.primary:hover:not(:disabled) {\n          background: #A8481A;\n          transform: translateY(-1px);\n          box-shadow: 0 4px 16px rgba(194, 87, 27, 0.3);\n        }\n\n        .nav-button.secondary {\n          background: rgba(243, 238, 217, 0.1);\n          color: #F3EED9;\n          border: 1px solid rgba(243, 238, 217, 0.3);\n        }\n\n        .nav-button.secondary:hover:not(:disabled) {\n          background: rgba(243, 238, 217, 0.2);\n          border-color: rgba(243, 238, 217, 0.5);\n        }\n\n        .nav-button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          transform: none;\n          box-shadow: none;\n        }\n\n        .loading-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid rgba(243, 238, 217, 0.3);\n          border-top: 2px solid #F3EED9;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Responsive */\n        @media (max-width: 768px) {\n          .setup-container {\n            padding: 16px;\n          }\n\n          .progress-steps {\n            gap: 20px;\n          }\n\n          .step-connector {\n            width: 16px;\n            left: calc(100% + 4px);\n          }\n\n          .setup-content {\n            padding: 24px 16px;\n          }\n\n          .features-grid,\n          .sharing-grid,\n          .advantages-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .setup-navigation {\n            flex-direction: column-reverse;\n            padding: 0 16px 16px;\n          }\n\n          .code-value-large {\n            font-size: 24px;\n            letter-spacing: 2px;\n          }\n\n          .step-title {\n            font-size: 20px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .progress-steps {\n            flex-direction: column;\n            gap: 16px;\n          }\n\n          .step-connector {\n            display: none;\n          }\n\n          .setup-title {\n            font-size: 24px;\n          }\n\n          .code-value-large {\n            font-size: 20px;\n            letter-spacing: 1px;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};","import React, { useEffect, useState, createContext, useContext } from 'react';\r\nimport { \r\n  Command, \r\n  Search, \r\n  Plus, \r\n  BookOpen, \r\n  Users, \r\n  Settings, \r\n  Home,\r\n  X,\r\n  Keyboard,\r\n  Zap,\r\n  Eye,\r\n  EyeOff\r\n} from 'lucide-react';\r\n\r\ninterface Shortcut {\r\n  key: string;\r\n  description: string;\r\n  action: () => void;\r\n  category: 'navigation' | 'actions' | 'search' | 'general';\r\n  icon?: any;\r\n  modifier?: 'ctrl' | 'alt' | 'shift';\r\n}\r\n\r\ninterface KeyboardShortcutsContextType {\r\n  registerShortcut: (id: string, shortcut: Shortcut) => void;\r\n  unregisterShortcut: (id: string) => void;\r\n  showHelp: () => void;\r\n  hideHelp: () => void;\r\n  isEnabled: boolean;\r\n  setEnabled: (enabled: boolean) => void;\r\n}\r\n\r\nconst KeyboardShortcutsContext = createContext<KeyboardShortcutsContextType | undefined>(undefined);\r\n\r\nexport const useKeyboardShortcuts = () => {\r\n  const context = useContext(KeyboardShortcutsContext);\r\n  if (!context) {\r\n    throw new Error('useKeyboardShortcuts must be used within a KeyboardShortcutsProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface KeyboardShortcutsProviderProps {\r\n  children: React.ReactNode;\r\n  onNavigate?: (view: any) => void;\r\n  onOpenAddDocument?: () => void;\r\n  onOpenSearch?: () => void;\r\n  onOpenSettings?: () => void;\r\n}\r\n\r\nexport const KeyboardShortcutsProvider: React.FC<KeyboardShortcutsProviderProps> = ({\r\n  children,\r\n  onNavigate,\r\n  onOpenAddDocument,\r\n  onOpenSearch,\r\n  onOpenSettings\r\n}) => {\r\n  const [shortcuts, setShortcuts] = useState<Record<string, Shortcut>>({});\r\n  const [showHelpPanel, setShowHelpPanel] = useState(false);\r\n  const [isEnabled, setIsEnabled] = useState(true);\r\n  const [pressedKeys, setPressedKeys] = useState<Set<string>>(new Set());\r\n  const [commandPalette, setCommandPalette] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  // Default shortcuts\r\n  useEffect(() => {\r\n    const defaultShortcuts: Record<string, Shortcut> = {\r\n      'home': {\r\n        key: 'h',\r\n        description: 'Accueil / Dashboard',\r\n        action: () => onNavigate?.('dashboard'),\r\n        category: 'navigation',\r\n        icon: Home\r\n      },\r\n      'documents': {\r\n        key: 'd',\r\n        description: 'Liste des documents',\r\n        action: () => onNavigate?.('documents'),\r\n        category: 'navigation',\r\n        icon: BookOpen\r\n      },\r\n      'borrowed': {\r\n        key: 'b',\r\n        description: 'Documents emprunts',\r\n        action: () => onNavigate?.('borrowed'),\r\n        category: 'navigation',\r\n        icon: BookOpen\r\n      },\r\n      'borrowers': {\r\n        key: 'u',\r\n        description: 'Gestion des emprunteurs',\r\n        action: () => onNavigate?.('borrowers'),\r\n        category: 'navigation',\r\n        icon: Users\r\n      },\r\n      'add-document': {\r\n        key: 'n',\r\n        description: 'Nouveau document',\r\n        action: () => onOpenAddDocument?.(),\r\n        category: 'actions',\r\n        icon: Plus,\r\n        modifier: 'ctrl'\r\n      },\r\n      'search': {\r\n        key: 'k',\r\n        description: 'Recherche rapide',\r\n        action: () => setCommandPalette(true),\r\n        category: 'search',\r\n        icon: Search,\r\n        modifier: 'ctrl'\r\n      },\r\n      'settings': {\r\n        key: ',',\r\n        description: 'Paramtres',\r\n        action: () => onOpenSettings?.(),\r\n        category: 'general',\r\n        icon: Settings,\r\n        modifier: 'ctrl'\r\n      },\r\n      'help': {\r\n        key: '?',\r\n        description: 'Aide et raccourcis',\r\n        action: () => setShowHelpPanel(true),\r\n        category: 'general',\r\n        icon: Keyboard,\r\n        modifier: 'shift'\r\n      },\r\n      'command-palette': {\r\n        key: 'p',\r\n        description: 'Palette de commandes',\r\n        action: () => setCommandPalette(true),\r\n        category: 'general',\r\n        icon: Command,\r\n        modifier: 'ctrl'\r\n      }\r\n    };\r\n\r\n    setShortcuts(defaultShortcuts);\r\n  }, [onNavigate, onOpenAddDocument, onOpenSearch, onOpenSettings]);\r\n\r\n  useEffect(() => {\r\n    if (!isEnabled) return;\r\n\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      // Don't trigger shortcuts when typing in inputs\r\n      if (event.target instanceof HTMLInputElement || \r\n          event.target instanceof HTMLTextAreaElement ||\r\n          event.target instanceof HTMLSelectElement) {\r\n        return;\r\n      }\r\n\r\n      setPressedKeys(prev => new Set([...prev, event.key.toLowerCase()]));\r\n\r\n      // Check for modifier combinations\r\n      const key = event.key.toLowerCase();\r\n      const hasCtrl = event.ctrlKey || event.metaKey;\r\n      const hasAlt = event.altKey;\r\n      const hasShift = event.shiftKey;\r\n\r\n      // Find matching shortcut\r\n      const matchingShortcut = Object.values(shortcuts).find(shortcut => {\r\n        if (shortcut.key !== key) return false;\r\n        \r\n        switch (shortcut.modifier) {\r\n          case 'ctrl':\r\n            return hasCtrl && !hasAlt && !hasShift;\r\n          case 'alt':\r\n            return !hasCtrl && hasAlt && !hasShift;\r\n          case 'shift':\r\n            return !hasCtrl && !hasAlt && hasShift;\r\n          default:\r\n            return !hasCtrl && !hasAlt && !hasShift;\r\n        }\r\n      });\r\n\r\n      if (matchingShortcut) {\r\n        event.preventDefault();\r\n        matchingShortcut.action();\r\n      }\r\n\r\n      // ESC to close modals\r\n      if (key === 'escape') {\r\n        setShowHelpPanel(false);\r\n        setCommandPalette(false);\r\n      }\r\n    };\r\n\r\n    const handleKeyUp = (event: KeyboardEvent) => {\r\n      setPressedKeys(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(event.key.toLowerCase());\r\n        return newSet;\r\n      });\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    window.addEventListener('keyup', handleKeyUp);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n      window.removeEventListener('keyup', handleKeyUp);\r\n    };\r\n  }, [shortcuts, isEnabled]);\r\n\r\n  const registerShortcut = (id: string, shortcut: Shortcut) => {\r\n    setShortcuts(prev => ({ ...prev, [id]: shortcut }));\r\n  };\r\n\r\n  const unregisterShortcut = (id: string) => {\r\n    setShortcuts(prev => {\r\n      const newShortcuts = { ...prev };\r\n      delete newShortcuts[id];\r\n      return newShortcuts;\r\n    });\r\n  };\r\n\r\n  const showHelp = () => setShowHelpPanel(true);\r\n  const hideHelp = () => setShowHelpPanel(false);\r\n\r\n  // Group shortcuts by category\r\n  const groupedShortcuts = Object.values(shortcuts).reduce((acc, shortcut) => {\r\n    if (!acc[shortcut.category]) {\r\n      acc[shortcut.category] = [];\r\n    }\r\n    acc[shortcut.category].push(shortcut);\r\n    return acc;\r\n  }, {} as Record<string, Shortcut[]>);\r\n\r\n  // Filtered shortcuts for command palette\r\n  const filteredShortcuts = Object.values(shortcuts).filter(shortcut =>\r\n    shortcut.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    shortcut.key.includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const categoryLabels = {\r\n    navigation: 'Navigation',\r\n    actions: 'Actions',\r\n    search: 'Recherche',\r\n    general: 'Gnral'\r\n  };\r\n\r\n  const categoryIcons = {\r\n    navigation: Home,\r\n    actions: Zap,\r\n    search: Search,\r\n    general: Command\r\n  };\r\n\r\n  return (\r\n    <KeyboardShortcutsContext.Provider value={{\r\n      registerShortcut,\r\n      unregisterShortcut,\r\n      showHelp,\r\n      hideHelp,\r\n      isEnabled,\r\n      setEnabled: setIsEnabled\r\n    }}>\r\n      {children}\r\n\r\n      {/* Keyboard Shortcuts Help Panel */}\r\n      {showHelpPanel && (\r\n        <div className=\"shortcuts-overlay\" onClick={() => setShowHelpPanel(false)}>\r\n          <div className=\"shortcuts-panel\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"shortcuts-header\">\r\n              <div className=\"header-content\">\r\n                <Keyboard size={24} />\r\n                <div>\r\n                  <h2>Raccourcis Clavier</h2>\r\n                  <p>Naviguez plus rapidement dans votre bibliothque</p>\r\n                </div>\r\n              </div>\r\n              <button \r\n                className=\"close-button\"\r\n                onClick={() => setShowHelpPanel(false)}\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"shortcuts-content\">\r\n              {Object.entries(groupedShortcuts).map(([category, categoryShortcuts]) => {\r\n                const Icon = categoryIcons[category as keyof typeof categoryIcons];\r\n                return (\r\n                  <div key={category} className=\"shortcuts-category\">\r\n                    <div className=\"category-header\">\r\n                      <Icon size={18} />\r\n                      <h3>{categoryLabels[category as keyof typeof categoryLabels]}</h3>\r\n                    </div>\r\n                    <div className=\"shortcuts-list\">\r\n                      {categoryShortcuts.map((shortcut, index) => (\r\n                        <div key={index} className=\"shortcut-item\">\r\n                          {shortcut.icon && <shortcut.icon size={16} />}\r\n                          <span className=\"shortcut-description\">{shortcut.description}</span>\r\n                          <div className=\"shortcut-keys\">\r\n                            {shortcut.modifier && (\r\n                              <kbd className=\"key-modifier\">\r\n                                {shortcut.modifier === 'ctrl' ? '' : shortcut.modifier}\r\n                              </kbd>\r\n                            )}\r\n                            <kbd className=\"key\">{shortcut.key.toUpperCase()}</kbd>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            <div className=\"shortcuts-footer\">\r\n              <div className=\"toggle-section\">\r\n                <button\r\n                  className={`toggle-button ${isEnabled ? 'enabled' : 'disabled'}`}\r\n                  onClick={() => setIsEnabled(!isEnabled)}\r\n                >\r\n                  {isEnabled ? <Eye size={16} /> : <EyeOff size={16} />}\r\n                  {isEnabled ? 'Raccourcis activs' : 'Raccourcis dsactivs'}\r\n                </button>\r\n              </div>\r\n              <p className=\"shortcuts-tip\">\r\n                 Astuce: Utilisez <kbd>Ctrl</kbd> + <kbd>K</kbd> pour la palette de commandes\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Command Palette */}\r\n      {commandPalette && (\r\n        <div className=\"command-palette-overlay\" onClick={() => setCommandPalette(false)}>\r\n          <div className=\"command-palette\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"command-search\">\r\n              <Search size={20} />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Tapez une commande ou recherchez...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                autoFocus\r\n              />\r\n              <kbd className=\"escape-hint\">ESC</kbd>\r\n            </div>\r\n            \r\n            <div className=\"command-results\">\r\n              {filteredShortcuts.length > 0 ? (\r\n                filteredShortcuts.map((shortcut, index) => (\r\n                  <button\r\n                    key={index}\r\n                    className=\"command-item\"\r\n                    onClick={() => {\r\n                      shortcut.action();\r\n                      setCommandPalette(false);\r\n                      setSearchQuery('');\r\n                    }}\r\n                  >\r\n                    {shortcut.icon && <shortcut.icon size={18} />}\r\n                    <span className=\"command-description\">{shortcut.description}</span>\r\n                    <div className=\"command-keys\">\r\n                      {shortcut.modifier && (\r\n                        <kbd className=\"key-modifier\">\r\n                          {shortcut.modifier === 'ctrl' ? '' : shortcut.modifier}\r\n                        </kbd>\r\n                      )}\r\n                      <kbd className=\"key\">{shortcut.key.toUpperCase()}</kbd>\r\n                    </div>\r\n                  </button>\r\n                ))\r\n              ) : (\r\n                <div className=\"no-results\">\r\n                  <Search size={32} />\r\n                  <p>Aucune commande trouve pour \"{searchQuery}\"</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        /* Shortcuts Help Panel */\r\n        .shortcuts-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          backdrop-filter: blur(8px);\r\n          z-index: 10000;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: 20px;\r\n          animation: fadeIn 0.3s ease;\r\n        }\r\n\r\n        .shortcuts-panel {\r\n          background: white;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 800px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          box-shadow: 0 32px 64px rgba(0, 0, 0, 0.2);\r\n          animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n\r\n        .shortcuts-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 32px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: white;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n        }\r\n\r\n        .header-content h2 {\r\n          margin: 0 0 4px 0;\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n        }\r\n\r\n        .header-content p {\r\n          margin: 0;\r\n          opacity: 0.9;\r\n          font-size: 14px;\r\n        }\r\n\r\n        .close-button {\r\n          background: rgba(255, 255, 255, 0.2);\r\n          border: none;\r\n          border-radius: 10px;\r\n          padding: 10px;\r\n          color: white;\r\n          cursor: pointer;\r\n          transition: background 0.2s ease;\r\n          z-index: 1001;\r\n        }\r\n\r\n        .close-button:hover {\r\n          background: rgba(255, 255, 255, 0.3);\r\n        }\r\n\r\n        .shortcuts-content {\r\n          padding: 32px;\r\n          max-height: 60vh;\r\n          overflow-y: auto;\r\n        }\r\n\r\n        .shortcuts-category {\r\n          margin-bottom: 32px;\r\n        }\r\n\r\n        .category-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          margin-bottom: 16px;\r\n          color: #374151;\r\n        }\r\n\r\n        .category-header h3 {\r\n          margin: 0;\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .shortcuts-list {\r\n          display: grid;\r\n          gap: 12px;\r\n        }\r\n\r\n        .shortcut-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 12px 16px;\r\n          background: rgba(248, 246, 240, 0.6);\r\n          border-radius: 12px;\r\n          border: 1px solid rgba(229, 220, 194, 0.4);\r\n        }\r\n\r\n        .shortcut-description {\r\n          flex: 1;\r\n          font-size: 14px;\r\n          color: #374151;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .shortcut-keys {\r\n          display: flex;\r\n          gap: 4px;\r\n        }\r\n\r\n        .key, .key-modifier {\r\n          background: #374151;\r\n          color: white;\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n          font-size: 12px;\r\n          font-weight: 600;\r\n          font-family: monospace;\r\n          min-width: 24px;\r\n          text-align: center;\r\n        }\r\n\r\n        .key-modifier {\r\n          background: #6B7280;\r\n        }\r\n\r\n        .shortcuts-footer {\r\n          padding: 24px 32px;\r\n          background: rgba(248, 246, 240, 0.4);\r\n          border-top: 1px solid rgba(229, 220, 194, 0.4);\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n        }\r\n\r\n        .toggle-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 20px;\r\n          border: none;\r\n          border-radius: 10px;\r\n          cursor: pointer;\r\n          font-weight: 600;\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .toggle-button.enabled {\r\n          background: #10B981;\r\n          color: white;\r\n        }\r\n\r\n        .toggle-button.disabled {\r\n          background: #EF4444;\r\n          color: white;\r\n        }\r\n\r\n        .shortcuts-tip {\r\n          margin: 0;\r\n          font-size: 14px;\r\n          color: #6B7280;\r\n        }\r\n\r\n        /* Command Palette */\r\n        .command-palette-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.4);\r\n          backdrop-filter: blur(4px);\r\n          z-index: 10001;\r\n          display: flex;\r\n          align-items: flex-start;\r\n          justify-content: center;\r\n          padding-top: 120px;\r\n          animation: fadeIn 0.2s ease;\r\n        }\r\n\r\n        .command-palette {\r\n          background: white;\r\n          border-radius: 16px;\r\n          width: 100%;\r\n          max-width: 600px;\r\n          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\r\n          overflow: hidden;\r\n          animation: slideDown 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n\r\n        .command-search {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 20px;\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.4);\r\n        }\r\n\r\n        .command-search input {\r\n          flex: 1;\r\n          border: none;\r\n          outline: none;\r\n          font-size: 16px;\r\n          color: #374151;\r\n          background: transparent;\r\n        }\r\n\r\n        .command-search input::placeholder {\r\n          color: #9CA3AF;\r\n        }\r\n\r\n        .escape-hint {\r\n          background: #F3F4F6;\r\n          color: #6B7280;\r\n          padding: 4px 8px;\r\n          border-radius: 4px;\r\n          font-size: 11px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .command-results {\r\n          max-height: 400px;\r\n          overflow-y: auto;\r\n        }\r\n\r\n        .command-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          width: 100%;\r\n          padding: 16px 20px;\r\n          border: none;\r\n          background: transparent;\r\n          text-align: left;\r\n          cursor: pointer;\r\n          transition: background 0.2s ease;\r\n          border-bottom: 1px solid rgba(229, 220, 194, 0.2);\r\n        }\r\n\r\n        .command-item:hover {\r\n          background: rgba(62, 92, 73, 0.05);\r\n        }\r\n\r\n        .command-item:last-child {\r\n          border-bottom: none;\r\n        }\r\n\r\n        .command-description {\r\n          flex: 1;\r\n          font-size: 14px;\r\n          color: #374151;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .command-keys {\r\n          display: flex;\r\n          gap: 4px;\r\n        }\r\n\r\n        .no-results {\r\n          padding: 40px 20px;\r\n          text-align: center;\r\n          color: #9CA3AF;\r\n        }\r\n\r\n        .no-results p {\r\n          margin: 12px 0 0 0;\r\n          font-size: 14px;\r\n        }\r\n\r\n        /* Animations */\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n\r\n        @keyframes slideUp {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(32px) scale(0.95);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n\r\n        @keyframes slideDown {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(-20px);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n\r\n        /* Responsive */\r\n        @media (max-width: 768px) {\r\n          .shortcuts-panel {\r\n            margin: 10px;\r\n            max-height: calc(100vh - 20px);\r\n          }\r\n\r\n          .shortcuts-header {\r\n            padding: 20px;\r\n          }\r\n\r\n          .shortcuts-content {\r\n            padding: 20px;\r\n          }\r\n\r\n          .shortcuts-footer {\r\n            padding: 16px 20px;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n            text-align: center;\r\n          }\r\n\r\n          .command-palette-overlay {\r\n            padding-top: 60px;\r\n            padding-left: 10px;\r\n            padding-right: 10px;\r\n          }\r\n\r\n          .shortcut-item {\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n            gap: 8px;\r\n          }\r\n\r\n          .shortcut-keys {\r\n            align-self: flex-end;\r\n          }\r\n        }\r\n\r\n        /* High contrast mode */\r\n        @media (prefers-contrast: high) {\r\n          .shortcuts-panel,\r\n          .command-palette {\r\n            border: 2px solid #000;\r\n          }\r\n\r\n          .shortcut-item,\r\n          .command-item {\r\n            border: 1px solid #ccc;\r\n          }\r\n\r\n          .key, .key-modifier {\r\n            border: 1px solid #000;\r\n          }\r\n        }\r\n\r\n        /* Reduced motion */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .shortcuts-overlay,\r\n          .command-palette-overlay,\r\n          .shortcuts-panel,\r\n          .command-palette,\r\n          .shortcut-item,\r\n          .command-item,\r\n          .toggle-button {\r\n            animation: none;\r\n            transition: none;\r\n          }\r\n        }\r\n      `}</style>\r\n    </KeyboardShortcutsContext.Provider>\r\n  );\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport { \r\n  Heart,\r\n  Star,\r\n  Sparkles,\r\n  Zap,\r\n  CheckCircle,\r\n  ArrowRight,\r\n  BookOpen,\r\n  Users,\r\n  Plus,\r\n  Search,\r\n  Settings,\r\n  Home\r\n} from 'lucide-react';\r\n\r\n// Hook pour grer les micro-interactions\r\nexport const useMicroInteractions = () => {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const [isPressed, setIsPressed] = useState(false);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const triggerSuccess = () => {\r\n    setIsAnimating(true);\r\n    setTimeout(() => setIsAnimating(false), 600);\r\n  };\r\n\r\n  return {\r\n    isHovered,\r\n    isPressed,\r\n    isAnimating,\r\n    setIsHovered,\r\n    setIsPressed,\r\n    triggerSuccess,\r\n    animationProps: {\r\n      onMouseEnter: () => setIsHovered(true),\r\n      onMouseLeave: () => setIsHovered(false),\r\n      onMouseDown: () => setIsPressed(true),\r\n      onMouseUp: () => setIsPressed(false),\r\n    }\r\n  };\r\n};\r\n\r\n// Composant de particules animes\r\ninterface ParticleSystemProps {\r\n  isActive: boolean;\r\n  color?: string;\r\n  count?: number;\r\n}\r\n\r\nexport const ParticleSystem: React.FC<ParticleSystemProps> = ({ \r\n  isActive, \r\n  color = '#3E5C49',\r\n  count = 8 \r\n}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (isActive && containerRef.current) {\r\n      const particles = Array.from({ length: count }, (_, i) => {\r\n        const particle = document.createElement('div');\r\n        particle.className = 'micro-particle';\r\n        particle.style.cssText = `\r\n          position: absolute;\r\n          width: 6px;\r\n          height: 6px;\r\n          background: ${color};\r\n          border-radius: 50%;\r\n          pointer-events: none;\r\n          z-index: 1000;\r\n          box-shadow: 0 0 8px ${color}80;\r\n        `;\r\n        \r\n        const angle = (360 / count) * i;\r\n        const distance = 30 + Math.random() * 20;\r\n        const endX = Math.cos(angle * Math.PI / 180) * distance;\r\n        const endY = Math.sin(angle * Math.PI / 180) * distance;\r\n        \r\n        particle.animate([\r\n          { \r\n            transform: 'translate(0, 0) scale(0)',\r\n            opacity: 1\r\n          },\r\n          { \r\n            transform: `translate(${endX}px, ${endY}px) scale(1)`,\r\n            opacity: 0\r\n          }\r\n        ], {\r\n          duration: 600,\r\n          easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'\r\n        });\r\n\r\n        containerRef.current?.appendChild(particle);\r\n        \r\n        setTimeout(() => {\r\n          particle.remove();\r\n        }, 600);\r\n      });\r\n    }\r\n  }, [isActive, color, count]);\r\n\r\n  return <div ref={containerRef} className=\"particle-container\" />;\r\n};\r\n\r\n// Bouton avec micro-interactions amlior\r\ninterface MicroButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  variant?: 'primary' | 'secondary' | 'success' | 'danger';\r\n  size?: 'small' | 'medium' | 'large';\r\n  icon?: any;\r\n  disabled?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const MicroButton: React.FC<MicroButtonProps> = ({\r\n  children,\r\n  onClick,\r\n  variant = 'primary',\r\n  size = 'medium',\r\n  icon: Icon,\r\n  disabled = false,\r\n  className = ''\r\n}) => {\r\n  const { isHovered, isPressed, isAnimating, animationProps, triggerSuccess } = useMicroInteractions();\r\n  const [showParticles, setShowParticles] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (disabled) return;\r\n    \r\n    setShowParticles(true);\r\n    triggerSuccess();\r\n    onClick?.();\r\n    \r\n    setTimeout(() => setShowParticles(false), 100);\r\n  };\r\n\r\n  const getVariantStyles = () => {\r\n    switch (variant) {\r\n      case 'primary':\r\n        return {\r\n          bg: 'linear-gradient(135deg, #3E5C49 0%, #2E453A 100%)',\r\n          hover: 'linear-gradient(135deg, #2E453A 0%, #1E2F25 100%)',\r\n          text: '#F3EED9',\r\n          particles: '#3E5C49',\r\n          shadow: 'rgba(62, 92, 73, 0.3)',\r\n          border: 'none'\r\n        };\r\n      case 'secondary':\r\n        return {\r\n          bg: 'linear-gradient(135deg, #F3EED9 0%, #E5DCC2 100%)',\r\n          hover: 'linear-gradient(135deg, #E5DCC2 0%, #D4C9A8 100%)',\r\n          text: '#2E2E2E',\r\n          particles: '#6E6E6E',\r\n          shadow: 'rgba(110, 110, 110, 0.2)',\r\n          border: '2px solid #E5DCC2'\r\n        };\r\n      case 'success':\r\n        return {\r\n          bg: 'linear-gradient(135deg, #3E5C49 0%, #2E453A 100%)',\r\n          hover: 'linear-gradient(135deg, #2E453A 0%, #1E2F25 100%)',\r\n          text: '#F3EED9',\r\n          particles: '#34D399',\r\n          shadow: 'rgba(62, 92, 73, 0.4)',\r\n          border: 'none'\r\n        };\r\n      case 'danger':\r\n        return {\r\n          bg: 'linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)',\r\n          hover: 'linear-gradient(135deg, #B91C1C 0%, #991B1B 100%)',\r\n          text: '#F3EED9',\r\n          particles: '#F87171',\r\n          shadow: 'rgba(220, 38, 38, 0.3)',\r\n          border: 'none'\r\n        };\r\n      default:\r\n        return {\r\n          bg: 'linear-gradient(135deg, #3E5C49 0%, #2E453A 100%)',\r\n          hover: 'linear-gradient(135deg, #2E453A 0%, #1E2F25 100%)',\r\n          text: '#F3EED9',\r\n          particles: '#3E5C49',\r\n          shadow: 'rgba(62, 92, 73, 0.3)',\r\n          border: 'none'\r\n        };\r\n    }\r\n  };\r\n\r\n  const styles = getVariantStyles();\r\n\r\n  return (\r\n    <button\r\n      className={`micro-button ${variant} ${size} ${className}`}\r\n      onClick={handleClick}\r\n      disabled={disabled}\r\n      {...animationProps}\r\n      style={{\r\n        '--button-bg': styles.bg,\r\n        '--button-hover': styles.hover,\r\n        '--button-text': styles.text,\r\n        '--button-particles': styles.particles,\r\n        '--button-shadow': styles.shadow,\r\n        '--button-border': styles.border,\r\n        '--scale': isPressed ? '0.95' : isHovered ? '1.02' : '1',\r\n        '--shadow': isHovered \r\n          ? `0 8px 25px ${styles.shadow}, 0 0 20px ${styles.shadow}` \r\n          : `0 2px 10px ${styles.shadow}`,\r\n        '--brightness': isPressed ? '0.9' : '1'\r\n      } as React.CSSProperties}\r\n    >\r\n      <div className=\"button-content\">\r\n        {Icon && (\r\n          <div className={`button-icon ${isAnimating ? 'success-bounce' : ''}`}>\r\n            <Icon size={size === 'small' ? 14 : size === 'large' ? 20 : 16} />\r\n          </div>\r\n        )}\r\n        <span className=\"button-text\">{children}</span>\r\n      </div>\r\n      \r\n      <ParticleSystem isActive={showParticles} color={styles.particles} />\r\n      \r\n      {/* Ripple effect */}\r\n      <div className={`ripple-effect ${isPressed ? 'active' : ''}`} />\r\n      \r\n      {/* Shine effect */}\r\n      <div className=\"shine-effect\" />\r\n      \r\n      <style>{`\r\n        .micro-button {\r\n          position: relative;\r\n          background: var(--button-bg);\r\n          color: var(--button-text);\r\n          border: var(--button-border);\r\n          border-radius: 12px;\r\n          font-weight: 600;\r\n          cursor: ${disabled ? 'not-allowed' : 'pointer'};\r\n          overflow: hidden;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          transform: scale(var(--scale));\r\n          box-shadow: var(--shadow);\r\n          filter: brightness(var(--brightness));\r\n          opacity: ${disabled ? '0.6' : '1'};\r\n          text-shadow: ${variant === 'secondary' ? 'none' : '0 1px 2px rgba(0, 0, 0, 0.1)'};\r\n        }\r\n\r\n        .micro-button.small {\r\n          padding: 8px 16px;\r\n          font-size: 13px;\r\n          border-radius: 8px;\r\n        }\r\n\r\n        .micro-button.medium {\r\n          padding: 12px 20px;\r\n          font-size: 14px;\r\n        }\r\n\r\n        .micro-button.large {\r\n          padding: 16px 24px;\r\n          font-size: 16px;\r\n          border-radius: 14px;\r\n        }\r\n\r\n        .micro-button:hover:not(:disabled) {\r\n          background: var(--button-hover);\r\n          letter-spacing: 0.3px;\r\n        }\r\n\r\n        .micro-button.secondary:hover:not(:disabled) {\r\n          border-color: #2E2E2E;\r\n        }\r\n\r\n        .button-content {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          gap: 8px;\r\n          position: relative;\r\n          z-index: 2;\r\n        }\r\n\r\n        .button-icon {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: transform 0.2s ease;\r\n        }\r\n\r\n        .button-icon.success-bounce {\r\n          animation: successBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n        }\r\n\r\n        .button-text {\r\n          position: relative;\r\n          font-weight: 600;\r\n          line-height: 1.2;\r\n        }\r\n\r\n        .ripple-effect {\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          width: 0;\r\n          height: 0;\r\n          background: rgba(255, 255, 255, 0.4);\r\n          border-radius: 50%;\r\n          transform: translate(-50%, -50%);\r\n          transition: all 0.4s ease;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .ripple-effect.active {\r\n          width: 300px;\r\n          height: 300px;\r\n        }\r\n\r\n        .shine-effect {\r\n          position: absolute;\r\n          top: 0;\r\n          left: -100%;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: linear-gradient(\r\n            90deg,\r\n            transparent,\r\n            rgba(255, 255, 255, 0.2),\r\n            transparent\r\n          );\r\n          transition: left 0.5s ease;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .micro-button:hover:not(:disabled) .shine-effect {\r\n          left: 100%;\r\n        }\r\n\r\n        .particle-container {\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          transform: translate(-50%, -50%);\r\n          pointer-events: none;\r\n        }\r\n\r\n        @keyframes successBounce {\r\n          0% { transform: scale(1); }\r\n          50% { transform: scale(1.2) rotate(5deg); }\r\n          100% { transform: scale(1) rotate(0deg); }\r\n        }\r\n\r\n        /* Glow effect pour les boutons primaires */\r\n        .micro-button.primary:hover:not(:disabled) {\r\n          box-shadow: \r\n            var(--shadow),\r\n            0 0 30px rgba(62, 92, 73, 0.4),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.1);\r\n        }\r\n\r\n        /* Animation de pulse pour les boutons success */\r\n        .micro-button.success {\r\n          animation: ${isAnimating ? 'successPulse 0.6s ease' : 'none'};\r\n        }\r\n\r\n        @keyframes successPulse {\r\n          0% { transform: scale(1); }\r\n          50% { \r\n            transform: scale(1.05); \r\n            box-shadow: 0 0 30px rgba(62, 92, 73, 0.6);\r\n          }\r\n          100% { transform: scale(1); }\r\n        }\r\n\r\n        /* tats de focus pour l'accessibilit */\r\n        .micro-button:focus-visible {\r\n          outline: 2px solid #C2571B;\r\n          outline-offset: 2px;\r\n        }\r\n\r\n        /* Amlioration pour les petits crans */\r\n        @media (max-width: 768px) {\r\n          .micro-button {\r\n            min-height: 44px;\r\n            min-width: 44px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </button>\r\n  );\r\n};\r\n\r\n// Card avec micro-interactions amliore\r\ninterface MicroCardProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  className?: string;\r\n  hoverable?: boolean;\r\n  variant?: 'default' | 'elevated' | 'outlined';\r\n}\r\n\r\nexport const MicroCard: React.FC<MicroCardProps> = ({\r\n  children,\r\n  onClick,\r\n  className = '',\r\n  hoverable = true,\r\n  variant = 'default'\r\n}) => {\r\n  const { isHovered, animationProps } = useMicroInteractions();\r\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });\r\n\r\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!hoverable) return;\r\n    \r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    setMousePosition({\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top\r\n    });\r\n  };\r\n\r\n  const getVariantStyles = () => {\r\n    switch (variant) {\r\n      case 'elevated':\r\n        return {\r\n          background: 'linear-gradient(135deg, #FFFFFF 0%, #F9FAFB 100%)',\r\n          border: '1px solid rgba(229, 220, 194, 0.2)',\r\n          shadow: '0 8px 32px rgba(0, 0, 0, 0.08)',\r\n          hoverShadow: '0 20px 50px rgba(0, 0, 0, 0.15)'\r\n        };\r\n      case 'outlined':\r\n        return {\r\n          background: 'transparent',\r\n          border: '2px solid #E5DCC2',\r\n          shadow: 'none',\r\n          hoverShadow: '0 8px 25px rgba(62, 92, 73, 0.1)'\r\n        };\r\n      default:\r\n        return {\r\n          background: '#FFFFFF',\r\n          border: '1px solid rgba(229, 220, 194, 0.15)',\r\n          shadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n          hoverShadow: '0 20px 40px rgba(0, 0, 0, 0.12)'\r\n        };\r\n    }\r\n  };\r\n\r\n  const styles = getVariantStyles();\r\n\r\n  return (\r\n    <div\r\n      className={`micro-card ${variant} ${className} ${onClick ? 'clickable' : ''}`}\r\n      onClick={onClick}\r\n      onMouseMove={handleMouseMove}\r\n      {...(hoverable ? animationProps : {})}\r\n      style={{\r\n        '--mouse-x': `${mousePosition.x}px`,\r\n        '--mouse-y': `${mousePosition.y}px`,\r\n        '--scale': isHovered ? '1.02' : '1',\r\n        '--shadow': isHovered ? styles.hoverShadow : styles.shadow,\r\n        '--border-opacity': isHovered ? '0.4' : '0.15',\r\n        '--background': styles.background,\r\n        '--border': styles.border\r\n      } as React.CSSProperties}\r\n    >\r\n      {hoverable && (\r\n        <div \r\n          className={`card-glow ${isHovered ? 'active' : ''}`}\r\n          style={{\r\n            background: `radial-gradient(300px circle at var(--mouse-x) var(--mouse-y), rgba(62, 92, 73, 0.08), transparent 40%)`\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      <div className=\"card-border-gradient\" />\r\n      \r\n      <div className=\"card-content\">\r\n        {children}\r\n      </div>\r\n\r\n      <style>{`\r\n        .micro-card {\r\n          position: relative;\r\n          background: var(--background);\r\n          border-radius: 16px;\r\n          border: var(--border);\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          transform: scale(var(--scale));\r\n          box-shadow: var(--shadow);\r\n          overflow: hidden;\r\n          backdrop-filter: blur(10px);\r\n        }\r\n\r\n        .micro-card.elevated {\r\n          border-radius: 20px;\r\n        }\r\n\r\n        .micro-card.outlined:hover {\r\n          border-color: #3E5C49;\r\n          background: rgba(62, 92, 73, 0.02);\r\n        }\r\n\r\n        .micro-card.clickable {\r\n          cursor: pointer;\r\n        }\r\n\r\n        .micro-card.clickable:active {\r\n          transform: scale(0.98);\r\n        }\r\n\r\n        .card-glow {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          opacity: 0;\r\n          transition: opacity 0.3s ease;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .card-glow.active {\r\n          opacity: 1;\r\n        }\r\n\r\n        .card-border-gradient {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          height: 1px;\r\n          background: linear-gradient(90deg, \r\n            transparent, \r\n            rgba(62, 92, 73, 0.3), \r\n            transparent\r\n          );\r\n          opacity: 0;\r\n          transition: opacity 0.3s ease;\r\n        }\r\n\r\n        .micro-card:hover .card-border-gradient {\r\n          opacity: 1;\r\n        }\r\n\r\n        .card-content {\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n\r\n        /* Animation d'apparition amliore */\r\n        .micro-card {\r\n          animation: cardSlideIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n        }\r\n\r\n        @keyframes cardSlideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(20px) scale(0.95);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n\r\n        /* Focus visible pour l'accessibilit */\r\n        .micro-card.clickable:focus-visible {\r\n          outline: 2px solid #C2571B;\r\n          outline-offset: 2px;\r\n        }\r\n\r\n        /* Amlioration pour les crans tactiles */\r\n        @media (hover: none) {\r\n          .micro-card:hover {\r\n            transform: none;\r\n          }\r\n          \r\n          .micro-card.clickable:active {\r\n            transform: scale(0.98);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Floating Action Button avec micro-interactions amlior\r\ninterface FloatingButtonProps {\r\n  icon: any;\r\n  onClick: () => void;\r\n  tooltip?: string;\r\n  color?: string;\r\n  size?: 'small' | 'medium' | 'large';\r\n}\r\n\r\nexport const FloatingButton: React.FC<FloatingButtonProps> = ({\r\n  icon: Icon,\r\n  onClick,\r\n  tooltip,\r\n  color = '#3E5C49',\r\n  size = 'medium'\r\n}) => {\r\n  const { isHovered, isPressed, animationProps } = useMicroInteractions();\r\n  const [showTooltip, setShowTooltip] = useState(false);\r\n\r\n  const getSizeStyles = () => {\r\n    switch (size) {\r\n      case 'small':\r\n        return { width: '48px', height: '48px', iconSize: 18 };\r\n      case 'large':\r\n        return { width: '64px', height: '64px', iconSize: 24 };\r\n      default:\r\n        return { width: '56px', height: '56px', iconSize: 20 };\r\n    }\r\n  };\r\n\r\n  const sizeStyles = getSizeStyles();\r\n\r\n  return (\r\n    <div className=\"floating-button-container\">\r\n      <button\r\n        className={`floating-button ${size}`}\r\n        onClick={onClick}\r\n        onMouseEnter={() => {\r\n          animationProps.onMouseEnter();\r\n          if (tooltip) setShowTooltip(true);\r\n        }}\r\n        onMouseLeave={() => {\r\n          animationProps.onMouseLeave();\r\n          setShowTooltip(false);\r\n        }}\r\n        onMouseDown={animationProps.onMouseDown}\r\n        onMouseUp={animationProps.onMouseUp}\r\n        style={{\r\n          '--button-color': color,\r\n          '--button-size': sizeStyles.width,\r\n          '--scale': isPressed ? '0.9' : isHovered ? '1.1' : '1',\r\n          '--shadow': isHovered \r\n            ? `0 12px 30px ${color}50, 0 0 20px ${color}30` \r\n            : `0 6px 20px ${color}30`,\r\n          '--rotation': isHovered ? '5deg' : '0deg'\r\n        } as React.CSSProperties}\r\n      >\r\n        <Icon size={sizeStyles.iconSize} />\r\n        \r\n        {/* Pulse ring */}\r\n        <div className={`pulse-ring ${isHovered ? 'active' : ''}`} />\r\n        \r\n        {/* Shine effect */}\r\n        <div className=\"fab-shine\" />\r\n      </button>\r\n\r\n      {/* Tooltip amlior */}\r\n      {tooltip && (\r\n        <div className={`floating-tooltip ${showTooltip ? 'visible' : ''}`}>\r\n          {tooltip}\r\n          <div className=\"tooltip-arrow\" />\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        .floating-button-container {\r\n          position: relative;\r\n        }\r\n\r\n        .floating-button {\r\n          position: relative;\r\n          width: var(--button-size);\r\n          height: var(--button-size);\r\n          background: linear-gradient(135deg, var(--button-color) 0%, ${color}dd 100%);\r\n          color: #F3EED9;\r\n          border: none;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          cursor: pointer;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          transform: scale(var(--scale)) rotate(var(--rotation));\r\n          box-shadow: var(--shadow);\r\n          overflow: hidden;\r\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .floating-button::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(135deg, \r\n            rgba(255, 255, 255, 0.2) 0%, \r\n            transparent 50%, \r\n            rgba(0, 0, 0, 0.1) 100%\r\n          );\r\n          border-radius: 50%;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .pulse-ring {\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          width: 100%;\r\n          height: 100%;\r\n          border: 2px solid var(--button-color);\r\n          border-radius: 50%;\r\n          transform: translate(-50%, -50%) scale(0);\r\n          opacity: 0;\r\n          transition: all 0.4s ease;\r\n        }\r\n\r\n        .pulse-ring.active {\r\n          transform: translate(-50%, -50%) scale(1.6);\r\n          opacity: 0.4;\r\n        }\r\n\r\n        .fab-shine {\r\n          position: absolute;\r\n          top: -50%;\r\n          left: -50%;\r\n          width: 200%;\r\n          height: 200%;\r\n          background: linear-gradient(45deg, \r\n            transparent 30%, \r\n            rgba(255, 255, 255, 0.3) 50%, \r\n            transparent 70%\r\n          );\r\n          transform: rotate(-45deg) translate(-100%, -100%);\r\n          transition: transform 0.6s ease;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .floating-button:hover .fab-shine {\r\n          transform: rotate(-45deg) translate(100%, 100%);\r\n        }\r\n\r\n        .floating-tooltip {\r\n          position: absolute;\r\n          bottom: calc(100% + 12px);\r\n          left: 50%;\r\n          transform: translateX(-50%) translateY(4px);\r\n          background: rgba(46, 46, 46, 0.95);\r\n          color: #F3EED9;\r\n          padding: 8px 12px;\r\n          border-radius: 8px;\r\n          font-size: 12px;\r\n          font-weight: 600;\r\n          white-space: nowrap;\r\n          opacity: 0;\r\n          visibility: hidden;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          pointer-events: none;\r\n          z-index: 1000;\r\n          backdrop-filter: blur(10px);\r\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .floating-tooltip.visible {\r\n          opacity: 1;\r\n          visibility: visible;\r\n          transform: translateX(-50%) translateY(0px);\r\n        }\r\n\r\n        .tooltip-arrow {\r\n          position: absolute;\r\n          top: 100%;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          width: 0;\r\n          height: 0;\r\n          border-left: 6px solid transparent;\r\n          border-right: 6px solid transparent;\r\n          border-top: 6px solid rgba(46, 46, 46, 0.95);\r\n        }\r\n\r\n        /* Tailles spcifiques */\r\n        .floating-button.small {\r\n          --button-size: 48px;\r\n        }\r\n\r\n        .floating-button.large {\r\n          --button-size: 64px;\r\n        }\r\n\r\n        /* Focus visible pour l'accessibilit */\r\n        .floating-button:focus-visible {\r\n          outline: 2px solid #C2571B;\r\n          outline-offset: 3px;\r\n        }\r\n\r\n        /* Animation d'apparition */\r\n        .floating-button {\r\n          animation: fabSlideIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n        }\r\n\r\n        @keyframes fabSlideIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: scale(0) rotate(-180deg);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: scale(1) rotate(0deg);\r\n          }\r\n        }\r\n\r\n        /* Amlioration pour les crans tactiles */\r\n        @media (hover: none) {\r\n          .floating-button:hover {\r\n            transform: scale(1);\r\n          }\r\n          \r\n          .floating-button:active {\r\n            transform: scale(0.95);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Loading avec micro-interactions amlior\r\nexport const MicroLoader: React.FC<{ \r\n  size?: number; \r\n  color?: string;\r\n  variant?: 'spinner' | 'dots' | 'pulse';\r\n}> = ({ \r\n  size = 24, \r\n  color = '#3E5C49',\r\n  variant = 'spinner'\r\n}) => {\r\n  \r\n  if (variant === 'dots') {\r\n    return (\r\n      <div className=\"micro-loader dots\" style={{ width: size * 2, height: size / 2 }}>\r\n        <div className=\"dot\" style={{ backgroundColor: color }} />\r\n        <div className=\"dot\" style={{ backgroundColor: color }} />\r\n        <div className=\"dot\" style={{ backgroundColor: color }} />\r\n        \r\n        <style>{`\r\n          .micro-loader.dots {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n          }\r\n\r\n          .dot {\r\n            width: ${size / 4}px;\r\n            height: ${size / 4}px;\r\n            border-radius: 50%;\r\n            animation: dotPulse 1.4s ease-in-out infinite both;\r\n          }\r\n\r\n          .dot:nth-child(1) { animation-delay: -0.32s; }\r\n          .dot:nth-child(2) { animation-delay: -0.16s; }\r\n          .dot:nth-child(3) { animation-delay: 0s; }\r\n\r\n          @keyframes dotPulse {\r\n            0%, 80%, 100% { \r\n              transform: scale(0.8);\r\n              opacity: 0.5;\r\n            }\r\n            40% { \r\n              transform: scale(1);\r\n              opacity: 1;\r\n            }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (variant === 'pulse') {\r\n    return (\r\n      <div className=\"micro-loader pulse\" style={{ width: size, height: size }}>\r\n        <div className=\"pulse-circle\" style={{ backgroundColor: `${color}40` }} />\r\n        <div className=\"pulse-circle\" style={{ backgroundColor: `${color}60` }} />\r\n        <div className=\"pulse-circle\" style={{ backgroundColor: color }} />\r\n        \r\n        <style>{`\r\n          .micro-loader.pulse {\r\n            position: relative;\r\n            display: inline-block;\r\n          }\r\n\r\n          .pulse-circle {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            border-radius: 50%;\r\n            animation: pulse 2s ease-in-out infinite;\r\n          }\r\n\r\n          .pulse-circle:nth-child(1) { animation-delay: 0s; }\r\n          .pulse-circle:nth-child(2) { animation-delay: 0.4s; }\r\n          .pulse-circle:nth-child(3) { animation-delay: 0.8s; }\r\n\r\n          @keyframes pulse {\r\n            0% { \r\n              transform: scale(0);\r\n              opacity: 1;\r\n            }\r\n            100% { \r\n              transform: scale(1);\r\n              opacity: 0;\r\n            }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Default spinner variant\r\n  return (\r\n    <div className=\"micro-loader spinner\" style={{ width: size, height: size }}>\r\n      <div className=\"spinner-ring\" style={{ borderTopColor: color }} />\r\n      \r\n      <style>{`\r\n        .micro-loader.spinner {\r\n          position: relative;\r\n          display: inline-block;\r\n        }\r\n\r\n        .spinner-ring {\r\n          width: 100%;\r\n          height: 100%;\r\n          border: 2px solid transparent;\r\n          border-top: 2px solid ${color};\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n        }\r\n\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\nimport { \n  Printer, \n  Download, \n  FileText, \n  BookOpen, \n  Clock,\n  X,\n  Check,\n  AlertCircle,\n  Eye,\n  Zap,\n  BarChart3\n} from 'lucide-react';\nimport { Document, Stats } from '../../preload';\nimport { InstitutionSettings } from '../../preload';\nimport { ExportDialog, ExportConfig } from './ExportDialog';\n\ninterface PrintManagerProps {\n  documents: Document[];\n  stats: Stats;\n  onClose: () => void;\n}\n\ntype PrintType = 'inventory' | 'available' | 'borrowed';\n\nexport const PrintManager: React.FC<PrintManagerProps> = ({ \n  documents, \n  stats, \n  onClose \n}) => {\n  const [selectedType, setSelectedType] = useState<PrintType>('inventory');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n  const [showExportDialog, setShowExportDialog] = useState(false);\n  const [institutionSettings, setInstitutionSettings] = useState<InstitutionSettings>({\n    name: 'Bibliothque Numrique',\n    address: '',\n    city: '',\n    country: '',\n    phone: '',\n    email: '',\n    website: '',\n    logo: '',\n    description: 'Systme de gestion de bibliothque moderne'\n  });\n\n  useEffect(() => {\n    // Charger les informations de l'institution depuis les donnes de connexion\n    const loadInstitutionSettings = () => {\n      try {\n        // D'abord essayer de rcuprer les donnes de l'utilisateur connect\n        const currentUser = localStorage.getItem('currentUser');\n        if (currentUser) {\n          const user = JSON.parse(currentUser);\n          if (user.institutionCode) {\n            // Chercher l'institution correspondante dans LocalAuthService\n            const institutions = JSON.parse(localStorage.getItem('local_institutions') || '[]');\n            const userInstitution = institutions.find((inst: any) => inst.code === user.institutionCode);\n            \n            if (userInstitution) {\n              setInstitutionSettings({\n                name: userInstitution.name || 'Bibliothque Numrique',\n                address: userInstitution.address || '',\n                city: userInstitution.city || '',\n                country: userInstitution.country || '',\n                phone: userInstitution.phone || '',\n                email: userInstitution.email || '',\n                website: userInstitution.website || '',\n                logo: userInstitution.logo || '',\n                description: userInstitution.description || 'Systme de gestion de bibliothque moderne'\n              });\n              return;\n            }\n          }\n        }\n\n        // Fallback vers les paramtres stocks si aucune institution de connexion n'est trouve\n        const stored = localStorage.getItem('institutionSettings');\n        if (stored) {\n          const parsed = JSON.parse(stored);\n          setInstitutionSettings(prev => ({ ...prev, ...parsed }));\n        }\n      } catch (error) {\n        console.error('Erreur lors du chargement des paramtres d\\'institution:', error);\n      }\n    };\n\n    loadInstitutionSettings();\n  }, []);\n\n  const printOptions = [\n    {\n      id: 'inventory' as PrintType,\n      title: 'Inventaire Complet',\n      description: 'Liste dtaille de tous les documents avec statuts',\n      icon: FileText,\n      color: '#3E5C49',\n      gradient: 'linear-gradient(135deg, #3E5C49 0%, #2E453A 100%)',\n      count: documents.length,\n      features: ['Informations compltes', 'Statuts des emprunts', 'Mtadonnes']\n    },\n    {\n      id: 'available' as PrintType,\n      title: 'Documents Disponibles',\n      description: 'Collection des ouvrages disponibles  l\\'emprunt',\n      icon: BookOpen,\n      color: '#3E5C49',\n      gradient: 'linear-gradient(135deg, #3E5C49 0%, #4A6B57 100%)',\n      count: documents.filter(doc => !doc.estEmprunte).length,\n      features: ['Documents en rayon', 'Prts  emprunter', 'Tri par catgorie']\n    },\n    {\n      id: 'borrowed' as PrintType,\n      title: 'Documents Emprunts',\n      description: 'Suivi des emprunts en cours avec emprunteurs',\n      icon: Clock,\n      color: '#C2571B',\n      gradient: 'linear-gradient(135deg, #C2571B 0%, #A8481A 100%)',\n      count: documents.filter(doc => doc.estEmprunte).length,\n      features: ['Noms des emprunteurs', 'Dates d\\'emprunt', 'Alertes retard']\n    }\n  ];\n\n  const showMessage = (type: 'success' | 'error', text: string) => {\n    setMessage({ type, text });\n    setTimeout(() => setMessage(null), 5000);\n  };\n\n  const handlePrint = async () => {\n    setIsProcessing(true);\n    try {\n      const printData = { \n        documents, \n        stats, \n        institution: institutionSettings \n      };\n\n      let success = false;\n      switch (selectedType) {\n        case 'inventory':\n          success = await window.electronAPI.printInventory(printData);\n          break;\n        case 'available':\n          success = await window.electronAPI.printAvailableBooks(printData);\n          break;\n        case 'borrowed':\n          success = await window.electronAPI.printBorrowedBooks(printData);\n          break;\n      }\n\n      if (success) {\n        showMessage('success', 'Document envoy  l\\'imprimante avec succs');\n      } else {\n        showMessage('error', 'Erreur lors de l\\'impression');\n      }\n    } catch (error) {\n      console.error('Print error:', error);\n      showMessage('error', 'Erreur lors de l\\'impression');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleExport = async (config: ExportConfig) => {\n    setIsProcessing(true);\n    try {\n      const result = await window.electronAPI.exportAdvanced(config);\n      if (result.success && result.path) {\n        const fileName = result.path.split(/[/\\\\]/).pop();\n        showMessage('success', `Fichier export avec succs : ${fileName}`);\n      } else if (result.cancelled) {\n        // User cancelled the export\n        return;\n      } else {\n        showMessage('error', `Erreur lors de l'export : ${result.error || 'Erreur inconnue'}`);\n      }\n    } catch (error) {\n      console.error('Export error:', error);\n      showMessage('error', 'Erreur lors de l\\'export des donnes');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const getPreviewData = () => {\n    switch (selectedType) {\n      case 'inventory':\n        return {\n          title: 'Inventaire Complet',\n          items: documents,\n          description: `${documents.length} document(s) au total`,\n          icon: BarChart3\n        };\n      case 'available':\n        return {\n          title: 'Documents Disponibles',\n          items: documents.filter(doc => !doc.estEmprunte),\n          description: `${documents.filter(doc => !doc.estEmprunte).length} document(s) disponible(s)`,\n          icon: BookOpen\n        };\n      case 'borrowed':\n        return {\n          title: 'Documents Emprunts',\n          items: documents.filter(doc => doc.estEmprunte),\n          description: `${documents.filter(doc => doc.estEmprunte).length} document(s) emprunt(s)`,\n          icon: Clock\n        };\n    }\n  };\n\n  const previewData = getPreviewData();\n  const selectedOption = printOptions.find(opt => opt.id === selectedType);\n  if (!selectedOption) {\n    return <div>Erreur: option slectionne invalide</div>;\n  }\n\n  return (\n    <div className=\"print-manager-overlay\">\n      <div className=\"print-manager-modal\">\n        {/* Header */}\n        <div className=\"modal-header\">\n          <div className=\"header-content\">\n            <div className=\"header-icon\">\n              <Printer size={28} />\n            </div>\n            <div className=\"header-text\">\n              <h2 className=\"modal-title\">Impression & Export</h2>\n              <p className=\"modal-subtitle\">Gnrez des rapports professionnels de votre bibliothque</p>\n            </div>\n          </div>\n          <button className=\"close-button\" onClick={onClose}>\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Message */}\n        {message && (\n          <div className={`message ${message.type}`}>\n            {message.type === 'success' ? <Check size={20} /> : <AlertCircle size={20} />}\n            <span>{message.text}</span>\n          </div>\n        )}\n\n        <div className=\"modal-content\">\n          {/* Options Selection */}\n          <div className=\"options-section\">\n            <div className=\"section-header\">\n              <h3 className=\"section-title\">Choisir le type de rapport</h3>\n              <p className=\"section-description\">Slectionnez le contenu  inclure dans votre document</p>\n            </div>\n            \n            <div className=\"print-options\">\n              {printOptions.map((option) => (\n                <div\n                  key={option.id}\n                  className={`option-card ${selectedType === option.id ? 'selected' : ''}`}\n                  onClick={() => setSelectedType(option.id)}\n                >\n                  <div className=\"option-header\">\n                    <div \n                      className=\"option-icon\"\n                      style={{ background: option.gradient }}\n                    >\n                      <option.icon size={24} />\n                    </div>\n                    <div className=\"option-badge\">\n                      {option.count} lment{option.count > 1 ? 's' : ''}\n                    </div>\n                  </div>\n                  \n                  <div className=\"option-content\">\n                    <h4 className=\"option-title\">{option.title}</h4>\n                    <p className=\"option-description\">{option.description}</p>\n                    \n                    <div className=\"option-features\">\n                      {option.features.map((feature, index) => (\n                        <span key={index} className=\"feature-tag\">\n                          {feature}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"option-indicator\">\n                    {selectedType === option.id && <Check size={16} />}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Preview Section */}\n          <div className=\"preview-section\">\n            <div className=\"section-header\">\n              <div className=\"preview-title-section\">\n                <h3 className=\"section-title\">Aperu du contenu</h3>\n                <div className=\"preview-stats\">\n                  <previewData.icon size={16} />\n                  <span>{previewData.description}</span>\n                </div>\n              </div>\n              <button className=\"preview-button\">\n                <Eye size={16} />\n                Prvisualiser\n              </button>\n            </div>\n            \n            <div className=\"preview-card\">\n              <div className=\"preview-header\">\n                <div className=\"institution-header\">\n                  {institutionSettings.logo && (\n                    <div className=\"institution-logo\">\n                      <img src={institutionSettings.logo} alt=\"Logo\" />\n                    </div>\n                  )}\n                  <div className=\"institution-info\">\n                    <h3 className=\"institution-name\">{institutionSettings.name}</h3>\n                    {institutionSettings.address && (\n                      <p className=\"institution-address\">\n                        {institutionSettings.address}, {institutionSettings.city}\n                      </p>\n                    )}\n                    {institutionSettings.phone && (\n                      <p className=\"institution-contact\">\n                        Tl: {institutionSettings.phone}\n                        {institutionSettings.email && `  ${institutionSettings.email}`}\n                      </p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"report-header\">\n                  <div \n                    className=\"preview-icon\"\n                    style={{ background: selectedOption?.gradient }}\n                  >\n                    <selectedOption.icon size={20} />\n                  </div>\n                  <div className=\"preview-info\">\n                    <h4 className=\"preview-title\">{previewData.title}</h4>\n                    <p className=\"preview-subtitle\">Gnr le {new Date().toLocaleDateString('fr-FR')}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"preview-content\">\n                <div className=\"preview-table\">\n                  <div className=\"table-header\">\n                    <div className=\"header-cell\">Titre</div>\n                    <div className=\"header-cell\">Auteur</div>\n                    <div className=\"header-cell\">Catgorie</div>\n                    {selectedType === 'borrowed' && (\n                      <>\n                        <div className=\"header-cell\">Emprunteur</div>\n                        <div className=\"header-cell\">Date</div>\n                      </>\n                    )}\n                    {selectedType !== 'borrowed' && (\n                      <div className=\"header-cell\">Statut</div>\n                    )}\n                  </div>\n                  \n                  <div className=\"table-body\">\n                    {previewData.items.slice(0, 4).map((doc, index) => (\n                      <div key={index} className=\"table-row\">\n                        <div className=\"table-cell\">\n                          <div className=\"cell-content\">\n                            <div className=\"book-title\">{doc.titre}</div>\n                          </div>\n                        </div>\n                        <div className=\"table-cell\">{doc.auteur}</div>\n                        <div className=\"table-cell\">\n                          <span className=\"category-badge\">{doc.descripteurs}</span>\n                        </div>\n                        {selectedType === 'borrowed' && (\n                          <>\n                            <div className=\"table-cell\">\n                              <strong>{doc.nomEmprunteur || '-'}</strong>\n                            </div>\n                            <div className=\"table-cell\">\n                              {doc.dateEmprunt ? new Date(doc.dateEmprunt).toLocaleDateString('fr-FR') : '-'}\n                            </div>\n                          </>\n                        )}\n                        {selectedType !== 'borrowed' && (\n                          <div className=\"table-cell\">\n                            <span className={`status-badge ${doc.estEmprunte ? 'borrowed' : 'available'}`}>\n                              {doc.estEmprunte ? 'Emprunt' : 'Disponible'}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                    \n                    {previewData.items.length > 4 && (\n                      <div className=\"table-row more-items\">\n                        <div className=\"table-cell more-text\">\n                          ... et {previewData.items.length - 4} autre(s) lment(s)\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"modal-footer\">\n          <div className=\"footer-info\">\n            <div className=\"info-item\">\n              <FileText size={16} />\n              <span>Format PDF professionnel</span>\n            </div>\n            <div className=\"info-item\">\n              <Download size={16} />\n              <span>Export Excel/CSV pour donnes</span>\n            </div>\n          </div>\n          \n          <div className=\"footer-actions\">\n            <button \n              className=\"btn-secondary\"\n              onClick={() => setShowExportDialog(true)}\n              disabled={isProcessing}\n            >\n              <Download size={18} />\n              {isProcessing ? 'Export...' : 'Exporter Donnes'}\n            </button>\n            <button \n              className=\"btn-primary\"\n              onClick={handlePrint}\n              disabled={isProcessing}\n            >\n              {isProcessing ? (\n                <>\n                  <Zap size={18} />\n                  Gnration...\n                </>\n              ) : (\n                <>\n                  <Printer size={18} />\n                  Imprimer\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        .print-manager-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(46, 46, 46, 0.7);\n          backdrop-filter: blur(8px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 20px;\n        }\n        \n        .print-manager-modal {\n          background: #FFFFFF;\n          border-radius: 24px;\n          width: 100%;\n          max-width: 1000px;\n          max-height: 90vh;\n          overflow: hidden;\n          display: flex;\n          flex-direction: column;\n          box-shadow: \n            0 24px 48px rgba(62, 92, 73, 0.2),\n            0 8px 24px rgba(62, 92, 73, 0.12);\n          border: 1px solid rgba(229, 220, 194, 0.3);\n        }\n        \n        .modal-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 32px;\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .modal-header::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          right: 0;\n          width: 200px;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(243, 238, 217, 0.1));\n          transform: skewX(-15deg);\n          transform-origin: top;\n        }\n        \n        .header-content {\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          position: relative;\n          z-index: 1;\n        }\n        \n        .header-icon {\n          width: 56px;\n          height: 56px;\n          background: rgba(243, 238, 217, 0.2);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          backdrop-filter: blur(10px);\n        }\n        \n        .modal-title {\n          font-size: 24px;\n          font-weight: 800;\n          margin: 0 0 4px 0;\n          letter-spacing: -0.3px;\n        }\n        \n        .modal-subtitle {\n          font-size: 14px;\n          opacity: 0.9;\n          margin: 0;\n          line-height: 1.4;\n        }\n        \n        .close-button {\n          background: rgba(243, 238, 217, 0.15);\n          border: 1px solid rgba(243, 238, 217, 0.3);\n          color: #F3EED9;\n          padding: 12px;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          position: relative;\n          z-index: 1;\n        }\n        \n        .close-button:hover {\n          background: rgba(243, 238, 217, 0.25);\n          transform: scale(1.05);\n        }\n        \n        .message {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px 32px;\n          font-size: 14px;\n          font-weight: 600;\n          border-bottom: 1px solid #E5DCC2;\n        }\n        \n        .message.success {\n          background: rgba(62, 92, 73, 0.1);\n          color: #3E5C49;\n        }\n        \n        .message.error {\n          background: rgba(194, 87, 27, 0.1);\n          color: #C2571B;\n        }\n        \n        .modal-content {\n          flex: 1;\n          overflow-y: auto;\n          padding: 32px;\n          display: flex;\n          flex-direction: column;\n          gap: 40px;\n        }\n        \n        .section-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 24px;\n        }\n        \n        .section-title {\n          font-size: 20px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 4px 0;\n        }\n        \n        .section-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin: 0;\n        }\n        \n        .preview-title-section {\n          flex: 1;\n        }\n        \n        .preview-stats {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 14px;\n          color: #4A4A4A;\n          margin-top: 4px;\n        }\n        \n        .preview-button {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 16px;\n          background: #F3EED9;\n          border: 1px solid #E5DCC2;\n          border-radius: 8px;\n          color: #4A4A4A;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .preview-button:hover {\n          background: #EAEADC;\n          color: #2E2E2E;\n        }\n        \n        .print-options {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 20px;\n        }\n        \n        .option-card {\n          background: #FFFFFF;\n          border: 2px solid #E5DCC2;\n          border-radius: 16px;\n          padding: 24px;\n          cursor: pointer;\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .option-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: linear-gradient(135deg, transparent 0%, rgba(62, 92, 73, 0.02) 100%);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        .option-card:hover::before {\n          opacity: 1;\n        }\n        \n        .option-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 12px 32px rgba(62, 92, 73, 0.15);\n          border-color: #3E5C49;\n        }\n        \n        .option-card.selected {\n          border-color: #3E5C49;\n          background: rgba(62, 92, 73, 0.02);\n          box-shadow: 0 8px 24px rgba(62, 92, 73, 0.12);\n        }\n        \n        .option-card.selected::before {\n          opacity: 1;\n        }\n        \n        .option-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 16px;\n        }\n        \n        .option-icon {\n          width: 48px;\n          height: 48px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n        }\n        \n        .option-badge {\n          background: #F3EED9;\n          color: #4A4A4A;\n          padding: 4px 12px;\n          border-radius: 20px;\n          font-size: 12px;\n          font-weight: 600;\n        }\n        \n        .option-title {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 8px 0;\n        }\n        \n        .option-description {\n          font-size: 14px;\n          color: #4A4A4A;\n          margin: 0 0 16px 0;\n          line-height: 1.5;\n        }\n        \n        .option-features {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 8px;\n        }\n        \n        .feature-tag {\n          background: #F3EED9;\n          color: #4A4A4A;\n          padding: 4px 8px;\n          border-radius: 8px;\n          font-size: 11px;\n          font-weight: 500;\n        }\n        \n        .option-indicator {\n          position: absolute;\n          top: 16px;\n          right: 16px;\n          width: 24px;\n          height: 24px;\n          background: #3E5C49;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n          opacity: 0;\n          transform: scale(0.8);\n          transition: all 0.3s ease;\n        }\n        \n        .option-card.selected .option-indicator {\n          opacity: 1;\n          transform: scale(1);\n        }\n        \n        .preview-card {\n          background: #FEFEFE;\n          border: 1px solid #E5DCC2;\n          border-radius: 16px;\n          overflow: hidden;\n        }\n        \n        .preview-header {\n          padding: 24px;\n          background: #F3EED9;\n        }\n\n        .institution-header {\n          display: flex;\n          align-items: flex-start;\n          gap: 16px;\n          margin-bottom: 20px;\n          padding-bottom: 16px;\n          border-bottom: 1px solid rgba(229, 220, 194, 0.5);\n        }\n\n        .institution-logo {\n          width: 60px;\n          height: 60px;\n          border-radius: 12px;\n          overflow: hidden;\n          border: 2px solid #E5DCC2;\n          background: #FFFFFF;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .institution-logo img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .institution-info {\n          flex: 1;\n        }\n\n        .institution-name {\n          font-size: 18px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 4px 0;\n        }\n\n        .institution-address {\n          font-size: 13px;\n          color: #4A4A4A;\n          margin: 0 0 2px 0;\n        }\n\n        .institution-contact {\n          font-size: 12px;\n          color: #4A4A4A;\n          margin: 0;\n        }\n\n        .report-header {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          border-bottom: 1px solid #E5DCC2;\n        }\n        \n        .preview-icon {\n          width: 40px;\n          height: 40px;\n          border-radius: 10px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #F3EED9;\n        }\n        \n        .preview-title {\n          font-size: 16px;\n          font-weight: 700;\n          color: #2E2E2E;\n          margin: 0 0 2px 0;\n        }\n        \n        .preview-subtitle {\n          font-size: 12px;\n          color: #4A4A4A;\n          margin: 0;\n        }\n        \n        .preview-content {\n          padding: 24px;\n        }\n        \n        .preview-table {\n          background: #FFFFFF;\n          border-radius: 12px;\n          overflow: hidden;\n          border: 1px solid #E5DCC2;\n        }\n        \n        .table-header {\n          display: grid;\n          grid-template-columns: 2fr 1.5fr 1fr 1fr 1fr;\n          background: #F3EED9;\n          border-bottom: 1px solid #E5DCC2;\n        }\n        \n        .header-cell {\n          padding: 16px 20px;\n          font-size: 12px;\n          font-weight: 700;\n          color: #2E2E2E;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n        \n        .table-body {\n          max-height: 240px;\n          overflow-y: auto;\n        }\n        \n        .table-row {\n          display: grid;\n          grid-template-columns: 2fr 1.5fr 1fr 1fr 1fr;\n          border-bottom: 1px solid #F3EED9;\n          transition: background 0.2s ease;\n        }\n        \n        .table-row:hover {\n          background: #FEFEFE;\n        }\n        \n        .table-row:last-child {\n          border-bottom: none;\n        }\n        \n        .table-row.more-items {\n          grid-template-columns: 1fr;\n          background: #F3EED9;\n        }\n        \n        .table-cell {\n          padding: 16px 20px;\n          font-size: 14px;\n          color: #2E2E2E;\n          display: flex;\n          align-items: center;\n          overflow: hidden;\n        }\n        \n        .cell-content {\n          width: 100%;\n        }\n        \n        .book-title {\n          font-weight: 600;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .more-text {\n          text-align: center;\n          font-style: italic;\n          color: #4A4A4A;\n          justify-content: center;\n        }\n        \n        .category-badge {\n          background: #3E5C49;\n          color: #F3EED9;\n          padding: 4px 10px;\n          border-radius: 12px;\n          font-size: 11px;\n          font-weight: 600;\n        }\n        \n        .status-badge {\n          padding: 4px 10px;\n          border-radius: 12px;\n          font-size: 11px;\n          font-weight: 600;\n        }\n        \n        .status-badge.available {\n          background: rgba(62, 92, 73, 0.1);\n          color: #3E5C49;\n        }\n        \n        .status-badge.borrowed {\n          background: rgba(194, 87, 27, 0.1);\n          color: #C2571B;\n        }\n        \n        .modal-footer {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 24px 32px;\n          border-top: 1px solid #E5DCC2;\n          background: #FEFEFE;\n        }\n        \n        .footer-info {\n          display: flex;\n          gap: 32px;\n        }\n        \n        .info-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 12px;\n          color: #4A4A4A;\n        }\n        \n        .footer-actions {\n          display: flex;\n          gap: 12px;\n        }\n        \n        .btn-secondary, .btn-primary {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 16px 24px;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          border: none;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .btn-secondary {\n          background: #F3EED9;\n          color: #4A4A4A;\n          border: 2px solid #E5DCC2;\n        }\n        \n        .btn-secondary:hover:not(:disabled) {\n          background: #EAEADC;\n          color: #2E2E2E;\n          transform: translateY(-1px);\n        }\n        \n        .btn-primary {\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\n          color: #F3EED9;\n          box-shadow: 0 4px 16px rgba(62, 92, 73, 0.3);\n        }\n        \n        .btn-primary:hover:not(:disabled) {\n          background: linear-gradient(135deg, #2E453A 0%, #1E2F25 100%);\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(62, 92, 73, 0.4);\n        }\n        \n        .btn-secondary:disabled,\n        .btn-primary:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          transform: none;\n        }\n        \n        /* Responsive Design */\n        @media (max-width: 1024px) {\n          .print-options {\n            grid-template-columns: 1fr;\n            gap: 16px;\n          }\n          \n          .table-header,\n          .table-row {\n            grid-template-columns: 1fr;\n          }\n          \n          .header-cell,\n          .table-cell {\n            padding: 12px 16px;\n          }\n          \n          .modal-content {\n            padding: 24px;\n            gap: 32px;\n          }\n        }\n        \n        @media (max-width: 768px) {\n          .print-manager-overlay {\n            padding: 12px;\n          }\n          \n          .print-manager-modal {\n            border-radius: 20px;\n          }\n          \n          .modal-header {\n            padding: 24px 20px;\n            flex-direction: column;\n            gap: 16px;\n            text-align: center;\n          }\n          \n          .header-content {\n            flex-direction: column;\n            gap: 16px;\n          }\n          \n          .modal-content {\n            padding: 20px;\n          }\n          \n          .section-header {\n            flex-direction: column;\n            align-items: stretch;\n            gap: 12px;\n          }\n          \n          .footer-info {\n            display: none;\n          }\n          \n          .footer-actions {\n            width: 100%;\n            justify-content: stretch;\n          }\n          \n          .btn-secondary,\n          .btn-primary {\n            flex: 1;\n            justify-content: center;\n          }\n          \n          .option-card {\n            padding: 20px;\n          }\n          \n          .preview-content {\n            padding: 16px;\n          }\n        }\n        \n        @media (max-width: 480px) {\n          .modal-header {\n            padding: 20px 16px;\n          }\n          \n          .modal-content {\n            padding: 16px;\n            gap: 24px;\n          }\n          \n          .modal-footer {\n            padding: 16px;\n            flex-direction: column;\n            gap: 16px;\n          }\n          \n          .footer-actions {\n            flex-direction: column;\n          }\n          \n          .option-header {\n            flex-direction: column;\n            gap: 12px;\n            align-items: stretch;\n          }\n          \n          .option-badge {\n            text-align: center;\n          }\n          \n          .table-header,\n          .table-row {\n            display: block;\n          }\n          \n          .header-cell,\n          .table-cell {\n            display: block;\n            padding: 8px 16px;\n            border-bottom: 1px solid #F3EED9;\n          }\n          \n          .header-cell {\n            background: #E5DCC2;\n            font-weight: 700;\n          }\n          \n          .table-cell:last-child {\n            border-bottom: none;\n          }\n        }\n      `}</style>\n\n      {/* Export Dialog */}\n      {showExportDialog && (\n        <ExportDialog\n          isOpen={showExportDialog}\n          onClose={() => setShowExportDialog(false)}\n          onExport={handleExport}\n          availableData={{\n            documents: true,\n            borrowers: true,\n            borrowHistory: false\n          }}\n        />\n      )}\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Settings as SettingsIcon, \r\n  Building,\r\n  Upload,\r\n  Save,\r\n  X,\r\n  Camera,\r\n  User,\r\n  Mail,\r\n  Phone,\r\n  MapPin,\r\n  Globe,\r\n  Database,\r\n  Download,\r\n  UploadCloud,\r\n  Shield,\r\n  LogOut,\r\n  Trash2,\r\n  RefreshCw,\r\n  HardDrive,\r\n  Cloud,\r\n  Lock,\r\n  Eye,\r\n  EyeOff,\r\n  CheckCircle,\r\n  AlertCircle\r\n} from 'lucide-react';\r\n\r\nimport { SupabaseRendererService as SupabaseService, User as SupabaseUser, Institution as SupabaseInstitution } from '../services/SupabaseClient';\r\nimport { ConfigService } from '../services/ConfigService';\r\n\r\ninterface SettingsProps {\r\n  onClose: () => void;\r\n  onLogout: () => void;\r\n  currentUser: SupabaseUser | null;\r\n  currentInstitution: SupabaseInstitution | null;\r\n  supabaseService: SupabaseService;\r\n}\r\n\r\ninterface InstitutionSettings {\r\n  name: string;\r\n  address: string;\r\n  city: string;\r\n  country: string;\r\n  phone: string;\r\n  email: string;\r\n  website: string;\r\n  logo: string;\r\n  description: string;\r\n}\r\n\r\ninterface BackupSettings {\r\n  autoBackup: boolean;\r\n  backupFrequency: 'daily' | 'weekly' | 'monthly';\r\n  lastBackup: string;\r\n  cloudSync: boolean;\r\n  cloudProvider: 'google' | 'dropbox' | 'onedrive';\r\n}\r\n\r\ninterface SecuritySettings {\r\n  requireAuth: boolean;\r\n  sessionTimeout: number;\r\n  passwordPolicy: {\r\n    minLength: number;\r\n    requireNumbers: boolean;\r\n    requireSymbols: boolean;\r\n  };\r\n}\r\n\r\nexport const Settings: React.FC<SettingsProps> = ({ onClose, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'institution' | 'backup' | 'security' | 'config' | 'about'>('institution');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n\r\n  const [institutionSettings, setInstitutionSettings] = useState<InstitutionSettings>({\r\n    name: 'Lyce Moderne de Douala',\r\n    address: 'Avenue de la Libert',\r\n    city: 'Douala',\r\n    country: 'Cameroun',\r\n    phone: '+237 233 42 15 67',\r\n    email: 'contact@lyceemoderne.cm',\r\n    website: 'www.lyceemoderne.cm',\r\n    logo: '',\r\n    description: 'tablissement d\\'enseignement secondaire gnral et technique'\r\n  });\r\n\r\n  const [backupSettings, setBackupSettings] = useState<BackupSettings>({\r\n    autoBackup: true,\r\n    backupFrequency: 'weekly',\r\n    lastBackup: new Date().toISOString(),\r\n    cloudSync: false,\r\n    cloudProvider: 'google'\r\n  });\r\n\r\n  const [securitySettings, setSecuritySettings] = useState<SecuritySettings>({\r\n    requireAuth: true,\r\n    sessionTimeout: 60,\r\n    passwordPolicy: {\r\n      minLength: 6,\r\n      requireNumbers: true,\r\n      requireSymbols: false\r\n    }\r\n  });\r\n\r\n  const [showConfirmLogout, setShowConfirmLogout] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, []);\r\n\r\n  const loadSettings = async () => {\r\n    try {\r\n      // Simulate loading settings from storage\r\n      const settings = await window.electronAPI.getSettings();\r\n      if (settings) {\r\n        setInstitutionSettings(settings.institution || institutionSettings);\r\n        setBackupSettings(settings.backup || backupSettings);\r\n        setSecuritySettings(settings.security || securitySettings);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading settings:', error);\r\n    }\r\n  };\r\n\r\n  const saveSettings = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await window.electronAPI.saveSettings({\r\n        institution: institutionSettings,\r\n        backup: backupSettings,\r\n        security: securitySettings\r\n      });\r\n      showMessage('success', 'Paramtres sauvegards avec succs');\r\n    } catch (error) {\r\n      showMessage('error', 'Erreur lors de la sauvegarde');\r\n      console.error('Error saving settings:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const showMessage = (type: 'success' | 'error', text: string) => {\r\n    setMessage({ type, text });\r\n    setTimeout(() => setMessage(null), 5000);\r\n  };\r\n\r\n  const handleLogoUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setInstitutionSettings(prev => ({\r\n          ...prev,\r\n          logo: e.target?.result as string\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleBackup = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await window.electronAPI.createBackup();\r\n      setBackupSettings(prev => ({\r\n        ...prev,\r\n        lastBackup: new Date().toISOString()\r\n      }));\r\n      showMessage('success', 'Sauvegarde cre avec succs');\r\n    } catch (error) {\r\n      showMessage('error', 'Erreur lors de la sauvegarde');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    if (window.confirm('tes-vous sr de vouloir restaurer une sauvegarde ? Cela remplacera toutes les donnes actuelles.')) {\r\n      setIsLoading(true);\r\n      try {\r\n        // Utiliser la nouvelle fonction selectBackupFile\r\n        const fileResult = await window.electronAPI.selectBackupFile();\r\n        if (fileResult.success && fileResult.filePath) {\r\n          const restoreResult = await window.electronAPI.restoreBackup(fileResult.filePath);\r\n          if (restoreResult.success) {\r\n            showMessage('success', 'Donnes restaures avec succs');\r\n          } else {\r\n            showMessage('error', restoreResult.error || 'Erreur lors de la restauration');\r\n          }\r\n        } else if (fileResult.error && fileResult.error !== 'Slection annule') {\r\n          showMessage('error', fileResult.error);\r\n        }\r\n      } catch (error) {\r\n        showMessage('error', 'Erreur lors de la restauration');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClearData = async () => {\r\n    if (window.confirm(' ATTENTION: Cette action supprimera dfinitivement toutes les donnes. tes-vous absolument sr ?')) {\r\n      if (window.confirm('Dernire confirmation: Voulez-vous vraiment supprimer TOUTES les donnes ?')) {\r\n        setIsLoading(true);\r\n        try {\r\n          await window.electronAPI.clearAllData();\r\n          showMessage('success', 'Toutes les donnes ont t supprimes');\r\n        } catch (error) {\r\n          showMessage('error', 'Erreur lors de la suppression');\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'institution', label: 'tablissement', icon: Building },\r\n    { id: 'backup', label: 'Sauvegardes', icon: Database },\r\n    { id: 'security', label: 'Scurit', icon: Shield },\r\n    { id: 'config', label: 'Configuration', icon: HardDrive },\r\n    { id: 'about', label: ' propos', icon: SettingsIcon }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"settings-overlay\">\r\n      <div className=\"settings-modal\">\r\n        {/* Header */}\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <SettingsIcon size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">Paramtres</h2>\r\n              <p className=\"modal-subtitle\">Configuration de l'application</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Message */}\r\n        {message && (\r\n          <div className={`message ${message.type}`}>\r\n            {message.type === 'success' ? <CheckCircle size={20} /> : <AlertCircle size={20} />}\r\n            <span>{message.text}</span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"settings-content\">\r\n          {/* Sidebar */}\r\n          <div className=\"settings-sidebar\">\r\n            <nav className=\"settings-nav\">\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  className={`nav-button ${activeTab === tab.id ? 'active' : ''}`}\r\n                  onClick={() => setActiveTab(tab.id as any)}\r\n                >\r\n                  <tab.icon size={20} />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              ))}\r\n            </nav>\r\n\r\n            <div className=\"logout-section\">\r\n              <button \r\n                className=\"logout-button\"\r\n                onClick={() => setShowConfirmLogout(true)}\r\n              >\r\n                <LogOut size={18} />\r\n                Se dconnecter\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"settings-main\">\r\n            {activeTab === 'institution' && (\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-header\">\r\n                  <Building size={24} />\r\n                  <div>\r\n                    <h3>Informations de l'tablissement</h3>\r\n                    <p>Configurez les dtails de votre institution</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-section\">\r\n                  <div className=\"logo-section\">\r\n                    <div className=\"logo-preview\">\r\n                      {institutionSettings.logo ? (\r\n                        <img src={institutionSettings.logo} alt=\"Logo\" />\r\n                      ) : (\r\n                        <div className=\"logo-placeholder\">\r\n                          <Camera size={32} />\r\n                          <span>Logo</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"logo-actions\">\r\n                      <label className=\"upload-button\">\r\n                        <Upload size={16} />\r\n                        Changer le logo\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={handleLogoUpload}\r\n                          style={{ display: 'none' }}\r\n                        />\r\n                      </label>\r\n                      {institutionSettings.logo && (\r\n                        <button\r\n                          className=\"remove-button\"\r\n                          onClick={() => setInstitutionSettings(prev => ({ ...prev, logo: '' }))}\r\n                        >\r\n                          <Trash2 size={16} />\r\n                          Supprimer\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Nom de l'tablissement</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <Building size={18} />\r\n                        <input\r\n                          type=\"text\"\r\n                          value={institutionSettings.name}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, name: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label>Tlphone</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <Phone size={18} />\r\n                        <input\r\n                          type=\"tel\"\r\n                          value={institutionSettings.phone}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, phone: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label>Email</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <Mail size={18} />\r\n                        <input\r\n                          type=\"email\"\r\n                          value={institutionSettings.email}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, email: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label>Site web</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <Globe size={18} />\r\n                        <input\r\n                          type=\"url\"\r\n                          value={institutionSettings.website}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, website: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label>Adresse</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <MapPin size={18} />\r\n                        <input\r\n                          type=\"text\"\r\n                          value={institutionSettings.address}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, address: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label>Ville</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <MapPin size={18} />\r\n                        <input\r\n                          type=\"text\"\r\n                          value={institutionSettings.city}\r\n                          onChange={(e) => setInstitutionSettings(prev => ({ ...prev, city: e.target.value }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group span-full\">\r\n                      <label>Description</label>\r\n                      <textarea\r\n                        value={institutionSettings.description}\r\n                        onChange={(e) => setInstitutionSettings(prev => ({ ...prev, description: e.target.value }))}\r\n                        className=\"form-textarea\"\r\n                        rows={3}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'backup' && (\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-header\">\r\n                  <Database size={24} />\r\n                  <div>\r\n                    <h3>Gestion des sauvegardes</h3>\r\n                    <p>Protgez vos donnes avec des sauvegardes automatiques</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"backup-status\">\r\n                  <div className=\"status-card\">\r\n                    <div className=\"status-icon success\">\r\n                      <CheckCircle size={24} />\r\n                    </div>\r\n                    <div className=\"status-content\">\r\n                      <h4>Dernire sauvegarde</h4>\r\n                      <p>{new Date(backupSettings.lastBackup).toLocaleDateString('fr-FR', {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-section\">\r\n                  <div className=\"setting-group\">\r\n                    <div className=\"setting-header\">\r\n                      <h4>Sauvegarde automatique</h4>\r\n                      <label className=\"toggle-switch\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={backupSettings.autoBackup}\r\n                          onChange={(e) => setBackupSettings(prev => ({ ...prev, autoBackup: e.target.checked }))}\r\n                        />\r\n                        <span className=\"toggle-slider\"></span>\r\n                      </label>\r\n                    </div>\r\n                    <p>Crer automatiquement des sauvegardes selon la frquence dfinie</p>\r\n                  </div>\r\n\r\n                  {backupSettings.autoBackup && (\r\n                    <div className=\"setting-group\">\r\n                      <h4>Frquence</h4>\r\n                      <div className=\"radio-group\">\r\n                        {[\r\n                          { value: 'daily', label: 'Quotidienne' },\r\n                          { value: 'weekly', label: 'Hebdomadaire' },\r\n                          { value: 'monthly', label: 'Mensuelle' }\r\n                        ].map((option) => (\r\n                          <label key={option.value} className=\"radio-option\">\r\n                            <input\r\n                              type=\"radio\"\r\n                              name=\"frequency\"\r\n                              value={option.value}\r\n                              checked={backupSettings.backupFrequency === option.value}\r\n                              onChange={(e) => setBackupSettings(prev => ({ ...prev, backupFrequency: e.target.value as any }))}\r\n                            />\r\n                            <span className=\"radio-label\">{option.label}</span>\r\n                          </label>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"setting-group\">\r\n                    <div className=\"setting-header\">\r\n                      <h4>Synchronisation cloud</h4>\r\n                      <label className=\"toggle-switch\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={backupSettings.cloudSync}\r\n                          onChange={(e) => setBackupSettings(prev => ({ ...prev, cloudSync: e.target.checked }))}\r\n                        />\r\n                        <span className=\"toggle-slider\"></span>\r\n                      </label>\r\n                    </div>\r\n                    <p>Synchroniser automatiquement vos sauvegardes avec le cloud</p>\r\n                  </div>\r\n\r\n                  <div className=\"backup-actions\">\r\n                    <button \r\n                      className=\"action-button primary\"\r\n                      onClick={handleBackup}\r\n                      disabled={isLoading}\r\n                    >\r\n                      <HardDrive size={18} />\r\n                      Crer une sauvegarde maintenant\r\n                    </button>\r\n                    \r\n                    <button \r\n                      className=\"action-button secondary\"\r\n                      onClick={handleRestore}\r\n                      disabled={isLoading}\r\n                    >\r\n                      <Download size={18} />\r\n                      Restaurer une sauvegarde\r\n                    </button>\r\n                    \r\n                    <button \r\n                      className=\"action-button danger\"\r\n                      onClick={handleClearData}\r\n                      disabled={isLoading}\r\n                    >\r\n                      <Trash2 size={18} />\r\n                      Effacer toutes les donnes\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'security' && (\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-header\">\r\n                  <Shield size={24} />\r\n                  <div>\r\n                    <h3>Paramtres de scurit</h3>\r\n                    <p>Configurez la scurit et l'authentification</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-section\">\r\n                  <div className=\"setting-group\">\r\n                    <div className=\"setting-header\">\r\n                      <h4>Authentification requise</h4>\r\n                      <label className=\"toggle-switch\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={securitySettings.requireAuth}\r\n                          onChange={(e) => setSecuritySettings(prev => ({ ...prev, requireAuth: e.target.checked }))}\r\n                        />\r\n                        <span className=\"toggle-slider\"></span>\r\n                      </label>\r\n                    </div>\r\n                    <p>Exiger une connexion pour accder  l'application</p>\r\n                  </div>\r\n\r\n                  <div className=\"setting-group\">\r\n                    <h4>Dlai d'expiration de session (minutes)</h4>\r\n                    <div className=\"input-wrapper\">\r\n                      <Lock size={18} />\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"5\"\r\n                        max=\"480\"\r\n                        value={securitySettings.sessionTimeout}\r\n                        onChange={(e) => setSecuritySettings(prev => ({ ...prev, sessionTimeout: parseInt(e.target.value) }))}\r\n                        className=\"form-input\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"setting-group\">\r\n                    <h4>Politique de mot de passe</h4>\r\n                    \r\n                    <div className=\"sub-setting\">\r\n                      <label>Longueur minimale</label>\r\n                      <div className=\"input-wrapper\">\r\n                        <Lock size={18} />\r\n                        <input\r\n                          type=\"number\"\r\n                          min=\"4\"\r\n                          max=\"20\"\r\n                          value={securitySettings.passwordPolicy.minLength}\r\n                          onChange={(e) => setSecuritySettings(prev => ({\r\n                            ...prev,\r\n                            passwordPolicy: {\r\n                              ...prev.passwordPolicy,\r\n                              minLength: parseInt(e.target.value)\r\n                            }\r\n                          }))}\r\n                          className=\"form-input\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"checkbox-group\">\r\n                      <label className=\"checkbox-option\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={securitySettings.passwordPolicy.requireNumbers}\r\n                          onChange={(e) => setSecuritySettings(prev => ({\r\n                            ...prev,\r\n                            passwordPolicy: {\r\n                              ...prev.passwordPolicy,\r\n                              requireNumbers: e.target.checked\r\n                            }\r\n                          }))}\r\n                        />\r\n                        <span className=\"checkbox-label\">Exiger des chiffres</span>\r\n                      </label>\r\n\r\n                      <label className=\"checkbox-option\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={securitySettings.passwordPolicy.requireSymbols}\r\n                          onChange={(e) => setSecuritySettings(prev => ({\r\n                            ...prev,\r\n                            passwordPolicy: {\r\n                              ...prev.passwordPolicy,\r\n                              requireSymbols: e.target.checked\r\n                            }\r\n                          }))}\r\n                        />\r\n                        <span className=\"checkbox-label\">Exiger des symboles</span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'config' && (\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-header\">\r\n                  <HardDrive size={24} />\r\n                  <div>\r\n                    <h3>Configuration de l'application</h3>\r\n                    <p>Mode de fonctionnement et paramtres systme</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"config-content\">\r\n                  <div className=\"config-info-card\">\r\n                    <div className=\"config-header\">\r\n                      <div className=\"config-icon\">\r\n                        {ConfigService.getMode() === 'offline' ? (\r\n                          <HardDrive size={24} />\r\n                        ) : (\r\n                          <Cloud size={24} />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"config-details\">\r\n                        <h4>Mode actuel : {ConfigService.getConfigInfo().displayMode}</h4>\r\n                        <p className=\"config-description\">\r\n                          {ConfigService.getMode() === 'offline' \r\n                            ? 'L\\'application utilise une base de donnes locale SQLite'\r\n                            : 'L\\'application utilise Supabase pour la synchronisation cloud'\r\n                          }\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"config-features\">\r\n                      <h5>Fonctionnalits actives :</h5>\r\n                      <div className=\"feature-list\">\r\n                        {ConfigService.getMode() === 'offline' ? (\r\n                          <>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Base de donnes locale</span>\r\n                            </div>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Fonctionnement hors ligne</span>\r\n                            </div>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Partage rseau local</span>\r\n                            </div>\r\n                            <div className=\"feature-item\">\r\n                              <AlertCircle className=\"feature-icon disabled\" size={16} />\r\n                              <span className=\"disabled\">Synchronisation cloud (dsactive)</span>\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Synchronisation cloud</span>\r\n                            </div>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Multi-tablissements</span>\r\n                            </div>\r\n                            <div className=\"feature-item\">\r\n                              <CheckCircle className=\"feature-icon active\" size={16} />\r\n                              <span>Sauvegarde automatique</span>\r\n                            </div>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"config-actions\">\r\n                      <div className=\"action-note\">\r\n                        <AlertCircle size={16} />\r\n                        <span>\r\n                          Le mode en ligne sera disponible dans une prochaine version. \r\n                          Le mode hors ligne offre toutes les fonctionnalits ncessaires.\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"config-stats-card\">\r\n                    <h5>Informations systme</h5>\r\n                    <div className=\"stats-grid\">\r\n                      <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Configur le :</span>\r\n                        <span className=\"stat-value\">\r\n                          {ConfigService.getConfig().configuredAt \r\n                            ? new Date(ConfigService.getConfig().configuredAt).toLocaleDateString('fr-FR')\r\n                            : 'Non configur'\r\n                          }\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Version :</span>\r\n                        <span className=\"stat-value\">{ConfigService.getConfig().version}</span>\r\n                      </div>\r\n                      <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Mode :</span>\r\n                        <span className=\"stat-value\">{ConfigService.getConfigInfo().displayMode}</span>\r\n                      </div>\r\n                      <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Statut :</span>\r\n                        <span className=\"stat-value success\">\r\n                          <CheckCircle size={14} />\r\n                          Oprationnel\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'about' && (\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-header\">\r\n                  <SettingsIcon size={24} />\r\n                  <div>\r\n                    <h3> propos de l'application</h3>\r\n                    <p>Informations sur la version et les crdits</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"about-content\">\r\n                  <div className=\"app-info\">\r\n                    <div className=\"app-logo\">\r\n                      <Building size={48} />\r\n                    </div>\r\n                    <h3>Bibliothque v2.0.0</h3>\r\n                    <p>Systme de gestion moderne pour bibliothques</p>\r\n                  </div>\r\n\r\n                  <div className=\"info-cards\">\r\n                    <div className=\"info-card\">\r\n                      <h4>Dvelopp par</h4>\r\n                      <p>Votre quipe de dveloppement</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"info-card\">\r\n                      <h4>Technologies utilises</h4>\r\n                      <div className=\"tech-list\">\r\n                        <span>Electron</span>\r\n                        <span>React</span>\r\n                        <span>TypeScript</span>\r\n                        <span>SQLite</span>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"info-card\">\r\n                      <h4>Licence</h4>\r\n                      <p>MIT License</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"system-info\">\r\n                    <h4>Informations systme</h4>\r\n                    <div className=\"system-details\">\r\n                      <div className=\"detail-item\">\r\n                        <span>Version de l'application</span>\r\n                        <span>2.0.0</span>\r\n                      </div>\r\n                      <div className=\"detail-item\">\r\n                        <span>Base de donnes</span>\r\n                        <span>SQLite v3.39.0</span>\r\n                      </div>\r\n                      <div className=\"detail-item\">\r\n                        <span>Plateforme</span>\r\n                        <span>Windows/macOS/Linux</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer Actions */}\r\n        <div className=\"settings-footer\">\r\n          <button \r\n            className=\"btn-secondary\"\r\n            onClick={onClose}\r\n            disabled={isLoading}\r\n          >\r\n            Annuler\r\n          </button>\r\n          <button \r\n            className=\"btn-primary\"\r\n            onClick={saveSettings}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <>\r\n                <RefreshCw size={16} className=\"spinning\" />\r\n                Sauvegarde...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Save size={16} />\r\n                Sauvegarder\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Logout Confirmation Modal */}\r\n      {showConfirmLogout && (\r\n        <div className=\"logout-overlay\" onClick={() => setShowConfirmLogout(false)}>\r\n          <div className=\"logout-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"logout-header\">\r\n              <LogOut size={24} />\r\n              <h3>Confirmer la dconnexion</h3>\r\n            </div>\r\n            <p>tes-vous sr de vouloir vous dconnecter ? Toutes les donnes non sauvegardes seront perdues.</p>\r\n            <div className=\"logout-actions\">\r\n              <button \r\n                className=\"btn-secondary\"\r\n                onClick={() => setShowConfirmLogout(false)}\r\n              >\r\n                Annuler\r\n              </button>\r\n              <button \r\n                className=\"btn-danger\"\r\n                onClick={() => {\r\n                  setShowConfirmLogout(false);\r\n                  onLogout();\r\n                }}\r\n              >\r\n                <LogOut size={16} />\r\n                Se dconnecter\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        .settings-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(46, 46, 46, 0.7);\r\n          backdrop-filter: blur(8px);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n        }\r\n        \r\n        .settings-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 24px;\r\n          width: 100%;\r\n          max-width: 1200px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: \r\n            0 24px 48px rgba(62, 92, 73, 0.2),\r\n            0 8px 24px rgba(62, 92, 73, 0.12);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n        \r\n        .modal-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 32px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n        \r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n        \r\n        .modal-title {\r\n          font-size: 24px;\r\n          font-weight: 800;\r\n          margin: 0 0 4px 0;\r\n        }\r\n        \r\n        .modal-subtitle {\r\n          font-size: 14px;\r\n          opacity: 0.9;\r\n          margin: 0;\r\n        }\r\n        \r\n        .close-button {\r\n          background: rgba(243, 238, 217, 0.15);\r\n          border: 1px solid rgba(243, 238, 217, 0.3);\r\n          color: #F3EED9;\r\n          padding: 12px;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n        }\r\n        \r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.25);\r\n        }\r\n        \r\n        .message {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 16px 32px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          border-bottom: 1px solid #E5DCC2;\r\n        }\r\n        \r\n        .message.success {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n        \r\n        .message.error {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n        }\r\n        \r\n        .settings-content {\r\n          flex: 1;\r\n          display: flex;\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .settings-sidebar {\r\n          width: 280px;\r\n          background: #F3EED9;\r\n          border-right: 1px solid #E5DCC2;\r\n          padding: 24px 0;\r\n          display: flex;\r\n          flex-direction: column;\r\n          justify-content: space-between;\r\n        }\r\n        \r\n        .settings-nav {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n          padding: 0 24px;\r\n        }\r\n        \r\n        .nav-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 16px 20px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #4A4A4A;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          font-size: 14px;\r\n          font-weight: 500;\r\n          text-align: left;\r\n        }\r\n        \r\n        .nav-button:hover {\r\n          background: rgba(62, 92, 73, 0.08);\r\n          color: #3E5C49;\r\n        }\r\n        \r\n        .nav-button.active {\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          box-shadow: 0 4px 12px rgba(62, 92, 73, 0.2);\r\n        }\r\n        \r\n        .logout-section {\r\n          padding: 0 24px;\r\n          border-top: 1px solid #E5DCC2;\r\n          padding-top: 24px;\r\n        }\r\n        \r\n        .logout-button {\r\n          width: 100%;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 16px 20px;\r\n          border: none;\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .logout-button:hover {\r\n          background: rgba(194, 87, 27, 0.15);\r\n          color: #A8481A;\r\n        }\r\n        \r\n        .settings-main {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 32px;\r\n        }\r\n        \r\n        .settings-section {\r\n          max-width: 800px;\r\n        }\r\n        \r\n        .section-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          margin-bottom: 32px;\r\n          padding-bottom: 16px;\r\n          border-bottom: 2px solid #E5DCC2;\r\n        }\r\n        \r\n        .section-header h3 {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n        }\r\n        \r\n        .section-header p {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n        }\r\n        \r\n        .form-section {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 24px;\r\n        }\r\n        \r\n        .logo-section {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 24px;\r\n          padding: 24px;\r\n          background: #F3EED9;\r\n          border-radius: 16px;\r\n          border: 1px solid #E5DCC2;\r\n          margin-bottom: 32px;\r\n        }\r\n        \r\n        .logo-preview {\r\n          width: 120px;\r\n          height: 120px;\r\n          border-radius: 16px;\r\n          overflow: hidden;\r\n          border: 2px solid #E5DCC2;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          background: #FFFFFF;\r\n        }\r\n        \r\n        .logo-preview img {\r\n          width: 100%;\r\n          height: 100%;\r\n          object-fit: cover;\r\n        }\r\n        \r\n        .logo-placeholder {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          gap: 8px;\r\n          color: #4A4A4A;\r\n          text-align: center;\r\n        }\r\n        \r\n        .logo-actions {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n        \r\n        .upload-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 16px;\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          border: none;\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          transition: all 0.2s ease;\r\n        }\r\n        \r\n        .upload-button:hover {\r\n          background: #2E453A;\r\n        }\r\n        \r\n        .remove-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 16px;\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n          border: 1px solid rgba(194, 87, 27, 0.2);\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          transition: all 0.2s ease;\r\n        }\r\n        \r\n        .remove-button:hover {\r\n          background: rgba(194, 87, 27, 0.15);\r\n        }\r\n        \r\n        .form-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 20px;\r\n        }\r\n        \r\n        .form-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .form-group.span-full {\r\n          grid-column: 1 / -1;\r\n        }\r\n        \r\n        .form-group label {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .input-wrapper {\r\n          position: relative;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        \r\n        .input-wrapper svg {\r\n          position: absolute;\r\n          left: 16px;\r\n          color: #4A4A4A;\r\n          z-index: 2;\r\n        }\r\n        \r\n        .form-input {\r\n          width: 100%;\r\n          padding: 12px 16px 12px 48px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.2s ease;\r\n        }\r\n        \r\n        .form-input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n        \r\n        .form-textarea {\r\n          width: 100%;\r\n          padding: 12px 16px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.2s ease;\r\n          resize: vertical;\r\n          min-height: 80px;\r\n        }\r\n        \r\n        .form-textarea:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n        \r\n        .backup-status {\r\n          margin-bottom: 32px;\r\n        }\r\n        \r\n        .status-card {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          padding: 20px;\r\n          background: rgba(62, 92, 73, 0.05);\r\n          border: 1px solid rgba(62, 92, 73, 0.1);\r\n          border-radius: 12px;\r\n        }\r\n        \r\n        .status-icon {\r\n          width: 48px;\r\n          height: 48px;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n        \r\n        .status-icon.success {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n        \r\n        .status-content h4 {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 4px 0;\r\n        }\r\n        \r\n        .status-content p {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n        }\r\n        \r\n        .setting-group {\r\n          padding: 20px;\r\n          background: #FEFEFE;\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 12px;\r\n        }\r\n        \r\n        .setting-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 8px;\r\n        }\r\n        \r\n        .setting-header h4 {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n        \r\n        .setting-group p {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n          line-height: 1.4;\r\n        }\r\n        \r\n        .toggle-switch {\r\n          position: relative;\r\n          display: inline-block;\r\n          width: 44px;\r\n          height: 24px;\r\n        }\r\n        \r\n        .toggle-switch input {\r\n          opacity: 0;\r\n          width: 0;\r\n          height: 0;\r\n        }\r\n        \r\n        .toggle-slider {\r\n          position: absolute;\r\n          cursor: pointer;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: #E5DCC2;\r\n          transition: 0.3s;\r\n          border-radius: 24px;\r\n        }\r\n        \r\n        .toggle-slider:before {\r\n          position: absolute;\r\n          content: \"\";\r\n          height: 20px;\r\n          width: 20px;\r\n          left: 2px;\r\n          bottom: 2px;\r\n          background: #FFFFFF;\r\n          transition: 0.3s;\r\n          border-radius: 50%;\r\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        input:checked + .toggle-slider {\r\n          background: #3E5C49;\r\n        }\r\n        \r\n        input:checked + .toggle-slider:before {\r\n          transform: translateX(20px);\r\n        }\r\n        \r\n        .radio-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-top: 12px;\r\n        }\r\n        \r\n        .radio-option {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          cursor: pointer;\r\n        }\r\n        \r\n        .radio-option input {\r\n          margin: 0;\r\n        }\r\n        \r\n        .radio-label {\r\n          font-size: 14px;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .checkbox-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-top: 12px;\r\n        }\r\n        \r\n        .checkbox-option {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          cursor: pointer;\r\n        }\r\n        \r\n        .checkbox-option input {\r\n          margin: 0;\r\n        }\r\n        \r\n        .checkbox-label {\r\n          font-size: 14px;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .sub-setting {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n          margin-top: 16px;\r\n        }\r\n        \r\n        .sub-setting label {\r\n          font-size: 13px;\r\n          font-weight: 500;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .backup-actions {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-top: 24px;\r\n        }\r\n        \r\n        .action-button {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 16px 20px;\r\n          border: none;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          transition: all 0.2s ease;\r\n          text-align: left;\r\n        }\r\n        \r\n        .action-button.primary {\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .action-button.primary:hover:not(:disabled) {\r\n          background: #2E453A;\r\n        }\r\n        \r\n        .action-button.secondary {\r\n          background: #F3EED9;\r\n          color: #4A4A4A;\r\n          border: 1px solid #E5DCC2;\r\n        }\r\n        \r\n        .action-button.secondary:hover:not(:disabled) {\r\n          background: #EAEADC;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .action-button.danger {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n          border: 1px solid rgba(194, 87, 27, 0.2);\r\n        }\r\n        \r\n        .action-button.danger:hover:not(:disabled) {\r\n          background: rgba(194, 87, 27, 0.15);\r\n        }\r\n        \r\n        .action-button:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n        }\r\n        \r\n        .config-content {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 24px;\r\n        }\r\n        \r\n        .config-info-card {\r\n          background: #f8f9fa;\r\n          border: 1px solid #e9ecef;\r\n          border-radius: 12px;\r\n          padding: 24px;\r\n        }\r\n        \r\n        .config-header {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 16px;\r\n          margin-bottom: 20px;\r\n        }\r\n        \r\n        .config-icon {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 48px;\r\n          height: 48px;\r\n          background: linear-gradient(135deg, #4CAF50, #45a049);\r\n          border-radius: 12px;\r\n          color: white;\r\n        }\r\n        \r\n        .config-details h4 {\r\n          margin: 0 0 8px 0;\r\n          font-size: 1.2rem;\r\n          font-weight: 600;\r\n          color: #2d3748;\r\n        }\r\n        \r\n        .config-description {\r\n          margin: 0;\r\n          color: #718096;\r\n          line-height: 1.5;\r\n        }\r\n        \r\n        .config-features {\r\n          margin-bottom: 20px;\r\n        }\r\n        \r\n        .config-features h5 {\r\n          margin: 0 0 12px 0;\r\n          font-size: 1rem;\r\n          font-weight: 600;\r\n          color: #4a5568;\r\n        }\r\n        \r\n        .config-features .feature-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .config-features .feature-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .config-features .feature-icon.active {\r\n          color: #48bb78;\r\n        }\r\n        \r\n        .config-features .feature-icon.disabled {\r\n          color: #cbd5e0;\r\n        }\r\n        \r\n        .config-features .feature-item .disabled {\r\n          color: #a0aec0;\r\n        }\r\n        \r\n        .config-actions {\r\n          border-top: 1px solid #e2e8f0;\r\n          padding-top: 16px;\r\n        }\r\n        \r\n        .action-note {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 12px;\r\n          padding: 12px 16px;\r\n          background: #f7fafc;\r\n          border: 1px solid #e2e8f0;\r\n          border-radius: 8px;\r\n          font-size: 0.9rem;\r\n          color: #4a5568;\r\n        }\r\n        \r\n        .config-stats-card {\r\n          background: white;\r\n          border: 1px solid #e2e8f0;\r\n          border-radius: 12px;\r\n          padding: 24px;\r\n        }\r\n        \r\n        .config-stats-card h5 {\r\n          margin: 0 0 16px 0;\r\n          font-size: 1.1rem;\r\n          font-weight: 600;\r\n          color: #2d3748;\r\n        }\r\n        \r\n        .stats-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 16px;\r\n        }\r\n        \r\n        .stat-item {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 4px;\r\n        }\r\n        \r\n        .stat-label {\r\n          font-size: 0.85rem;\r\n          color: #718096;\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .stat-value {\r\n          font-size: 0.95rem;\r\n          color: #2d3748;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .stat-value.success {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          color: #48bb78;\r\n        }\r\n\r\n        .about-content {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 32px;\r\n        }\r\n        \r\n        .app-info {\r\n          text-align: center;\r\n          padding: 32px;\r\n          background: #F3EED9;\r\n          border-radius: 16px;\r\n          border: 1px solid #E5DCC2;\r\n        }\r\n        \r\n        .app-logo {\r\n          width: 80px;\r\n          height: 80px;\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          border-radius: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          margin: 0 auto 20px;\r\n        }\r\n        \r\n        .app-info h3 {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 8px 0;\r\n        }\r\n        \r\n        .app-info p {\r\n          font-size: 16px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n        }\r\n        \r\n        .info-cards {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n          gap: 20px;\r\n        }\r\n        \r\n        .info-card {\r\n          padding: 20px;\r\n          background: #FFFFFF;\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 12px;\r\n        }\r\n        \r\n        .info-card h4 {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 12px 0;\r\n        }\r\n        \r\n        .info-card p {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0;\r\n        }\r\n        \r\n        .tech-list {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .tech-list span {\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n          padding: 4px 12px;\r\n          border-radius: 16px;\r\n          font-size: 12px;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .system-info {\r\n          padding: 24px;\r\n          background: #FEFEFE;\r\n          border: 1px solid #E5DCC2;\r\n          border-radius: 12px;\r\n        }\r\n        \r\n        .system-info h4 {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0 0 16px 0;\r\n        }\r\n        \r\n        .system-details {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n        \r\n        .detail-item {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          padding: 12px 0;\r\n          border-bottom: 1px solid #F3EED9;\r\n        }\r\n        \r\n        .detail-item:last-child {\r\n          border-bottom: none;\r\n        }\r\n        \r\n        .detail-item span:first-child {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n        }\r\n        \r\n        .detail-item span:last-child {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .settings-footer {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n          padding: 24px 32px;\r\n          border-top: 1px solid #E5DCC2;\r\n          background: #FEFEFE;\r\n        }\r\n        \r\n        .btn-secondary, .btn-primary {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 24px;\r\n          border-radius: 12px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          border: none;\r\n        }\r\n        \r\n        .btn-secondary {\r\n          background: #F3EED9;\r\n          color: #4A4A4A;\r\n          border: 2px solid #E5DCC2;\r\n        }\r\n        \r\n        .btn-secondary:hover:not(:disabled) {\r\n          background: #EAEADC;\r\n          color: #2E2E2E;\r\n        }\r\n        \r\n        .btn-primary {\r\n          background: #3E5C49;\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .btn-primary:hover:not(:disabled) {\r\n          background: #2E453A;\r\n        }\r\n        \r\n        .btn-secondary:disabled,\r\n        .btn-primary:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n        }\r\n        \r\n        .spinning {\r\n          animation: spin 1s linear infinite;\r\n        }\r\n        \r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n        \r\n        /* Logout Modal */\r\n        .logout-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(46, 46, 46, 0.8);\r\n          backdrop-filter: blur(4px);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1001;\r\n          padding: 20px;\r\n        }\r\n        \r\n        .logout-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 16px;\r\n          width: 100%;\r\n          max-width: 400px;\r\n          padding: 24px;\r\n          box-shadow: 0 20px 40px rgba(62, 92, 73, 0.2);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n        \r\n        .logout-header {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          margin-bottom: 16px;\r\n          color: #C2571B;\r\n        }\r\n        \r\n        .logout-header h3 {\r\n          font-size: 18px;\r\n          font-weight: 700;\r\n          margin: 0;\r\n        }\r\n        \r\n        .logout-modal p {\r\n          font-size: 14px;\r\n          color: #4A4A4A;\r\n          margin: 0 0 24px 0;\r\n          line-height: 1.5;\r\n        }\r\n        \r\n        .logout-actions {\r\n          display: flex;\r\n          gap: 12px;\r\n          justify-content: flex-end;\r\n        }\r\n        \r\n        .btn-danger {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 12px 20px;\r\n          background: #C2571B;\r\n          color: #F3EED9;\r\n          border: none;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n        }\r\n        \r\n        .btn-danger:hover {\r\n          background: #A8481A;\r\n        }\r\n        \r\n        /* Responsive Design */\r\n        @media (max-width: 1024px) {\r\n          .settings-content {\r\n            flex-direction: column;\r\n          }\r\n          \r\n          .settings-sidebar {\r\n            width: 100%;\r\n            flex-direction: row;\r\n            justify-content: space-between;\r\n            padding: 16px 24px;\r\n            border-right: none;\r\n            border-bottom: 1px solid #E5DCC2;\r\n          }\r\n          \r\n          .settings-nav {\r\n            flex-direction: row;\r\n            gap: 12px;\r\n            padding: 0;\r\n            overflow-x: auto;\r\n          }\r\n          \r\n          .nav-button {\r\n            white-space: nowrap;\r\n            min-width: 120px;\r\n            justify-content: center;\r\n          }\r\n          \r\n          .logout-section {\r\n            border-top: none;\r\n            border-left: 1px solid #E5DCC2;\r\n            padding-top: 0;\r\n            padding-left: 24px;\r\n          }\r\n          \r\n          .logout-button {\r\n            width: auto;\r\n            min-width: 140px;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 768px) {\r\n          .settings-modal {\r\n            margin: 12px;\r\n            border-radius: 20px;\r\n            max-height: calc(100vh - 24px);\r\n          }\r\n          \r\n          .modal-header {\r\n            padding: 20px;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n            text-align: center;\r\n          }\r\n          \r\n          .settings-main {\r\n            padding: 20px;\r\n          }\r\n          \r\n          .form-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n          \r\n          .logo-section {\r\n            flex-direction: column;\r\n            text-align: center;\r\n          }\r\n          \r\n          .info-cards {\r\n            grid-template-columns: 1fr;\r\n          }\r\n          \r\n          .settings-footer {\r\n            padding: 16px 20px;\r\n            flex-direction: column-reverse;\r\n          }\r\n          \r\n          .btn-secondary,\r\n          .btn-primary {\r\n            width: 100%;\r\n            justify-content: center;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .settings-sidebar {\r\n            flex-direction: column;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .settings-nav {\r\n            flex-direction: column;\r\n          }\r\n          \r\n          .logout-section {\r\n            border-left: none;\r\n            border-top: 1px solid #E5DCC2;\r\n            padding-left: 0;\r\n            padding-top: 16px;\r\n          }\r\n          \r\n          .backup-actions {\r\n            gap: 8px;\r\n          }\r\n          \r\n          .action-button {\r\n            padding: 12px 16px;\r\n            font-size: 13px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { \r\n  Home, \r\n  Book, \r\n  BookOpen, \r\n  Plus, \r\n  BarChart3,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Clock,\r\n  GraduationCap,\r\n  Briefcase,\r\n  TrendingUp,\r\n  Star,\r\n  Zap,\r\n  Heart,\r\n  Info,\r\n  Users,\r\n  History,\r\n  Settings,\r\n  HardDrive,\r\n  User,\r\n  LogOut\r\n} from 'lucide-react';\r\nimport { Stats } from '../../types';\r\nimport { MicroButton } from './MicroInteractions';\r\nimport { UnifiedUser, UnifiedInstitution } from '../types/UnifiedTypes';\r\n\r\ninterface SidebarProps {\r\n  currentView: string;\r\n  onNavigate: (view: 'dashboard' | 'documents' | 'borrowed' | 'add-document' | 'borrowers' | 'history' | 'app-settings' | 'user-profile' | 'donation' | 'about') => void;\r\n  onLogout?: () => void;\r\n  stats: Stats;\r\n  currentUser: UnifiedUser | null;\r\n  currentInstitution: UnifiedInstitution | null;\r\n}\r\n\r\n// Types pour les items de menu\r\ninterface BaseMenuItem {\r\n  id: string;\r\n  label: string;\r\n  icon: any;\r\n  description: string;\r\n  gradient: string;\r\n}\r\n\r\ninterface MenuItem extends BaseMenuItem {\r\n  count?: number;\r\n  badge?: boolean;\r\n  urgent?: boolean;\r\n  accent?: boolean;\r\n  highlight?: boolean;\r\n  support?: boolean;\r\n}\r\n\r\nexport const Sidebar: React.FC<SidebarProps> = ({ currentView, onNavigate, onLogout, stats, currentUser, currentInstitution }) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(false);\r\n\r\n  const menuItems: MenuItem[] = [\r\n    { \r\n      id: 'dashboard', \r\n      label: 'Tableau de bord', \r\n      icon: Home,\r\n      description: 'Vue d\\'ensemble et statistiques',\r\n      gradient: 'linear-gradient(135deg, #3E5C49 0%, #2E453A 100%)'\r\n    },\r\n    { \r\n      id: 'documents', \r\n      label: 'Ma Collection', \r\n      icon: Book,\r\n      description: 'Parcourir tous les documents',\r\n      count: stats.totalDocuments,\r\n      gradient: 'linear-gradient(135deg, #3E5C49 0%, #4A6B57 100%)'\r\n    },\r\n    { \r\n      id: 'borrowed', \r\n      label: 'Emprunts Actifs', \r\n      icon: BookOpen,\r\n      description: 'Documents actuellement emprunts',\r\n      count: stats.borrowedDocuments,\r\n      badge: stats.borrowedDocuments > 0,\r\n      urgent: stats.overdueDocuments > 0,\r\n      gradient: 'linear-gradient(135deg, #C2571B 0%, #A8481A 100%)'\r\n    }\r\n  ];\r\n\r\n  const actionItems: MenuItem[] = [\r\n    { \r\n      id: 'add-document', \r\n      label: 'Nouveau Document', \r\n      icon: Plus,\r\n      description: 'Ajouter  la collection',\r\n      accent: true,\r\n      gradient: 'linear-gradient(135deg, #C2571B 0%, #E65100 100%)',\r\n      highlight: true\r\n    },\r\n    { \r\n      id: 'borrowers', \r\n      label: 'Gestion Emprunteurs', \r\n      icon: Users,\r\n      description: 'Grer les utilisateurs',\r\n      count: stats.totalBorrowers,\r\n      badge: stats.totalBorrowers > 0,\r\n      gradient: 'linear-gradient(135deg, #6E6E6E 0%, #5A5A5A 100%)'\r\n    }\r\n  ];\r\n\r\n  const reportItems: MenuItem[] = [\r\n    { \r\n      id: 'history', \r\n      label: 'Historique Complet', \r\n      icon: History,\r\n      description: 'Tous les emprunts et retours',\r\n      gradient: 'linear-gradient(135deg, #607D8B 0%, #455A64 100%)'\r\n    }\r\n  ];\r\n\r\n  const supportItems: MenuItem[] = [\r\n    {\r\n      id: 'app-settings',\r\n      label: 'Paramtres',\r\n      icon: Settings,\r\n      description: 'Configuration de l\\'application',\r\n      gradient: 'linear-gradient(135deg, #6366F1 0%, #4F46E5 100%)'\r\n    },\r\n    {\r\n      id: 'backup-manager',\r\n      label: 'Sauvegardes',\r\n      icon: HardDrive,\r\n      description: 'Grer les sauvegardes de donnes',\r\n      gradient: 'linear-gradient(135deg, #0891B2 0%, #0E7490 100%)'\r\n    },\r\n    {\r\n      id: 'donation',\r\n      label: 'Soutenir le projet',\r\n      icon: Heart,\r\n      description: 'Faire une donation',\r\n      gradient: 'linear-gradient(135deg, #E91E63 0%, #C2185B 100%)',\r\n      support: true\r\n    },\r\n    {\r\n      id: 'about',\r\n      label: ' propos',\r\n      icon: Info,\r\n      description: 'Dveloppeur & crdits',\r\n      gradient: 'linear-gradient(135deg, #607D8B 0%, #455A64 100%)'\r\n    }\r\n  ];\r\n\r\n  const quickStats = [\r\n    {\r\n      label: 'Collection',\r\n      value: stats.totalDocuments,\r\n      icon: Book,\r\n      color: '#3E5C49',\r\n      trend: '+2 ce mois'\r\n    },\r\n    {\r\n      label: 'Disponibles',\r\n      value: stats.availableDocuments,\r\n      icon: BookOpen,\r\n      color: '#3E5C49',\r\n      percentage: stats.totalDocuments > 0 ? Math.round((stats.availableDocuments / stats.totalDocuments) * 100) : 0\r\n    },\r\n    {\r\n      label: 'Emprunts',\r\n      value: stats.borrowedDocuments,\r\n      icon: BarChart3,\r\n      color: '#C2571B',\r\n      percentage: stats.totalDocuments > 0 ? Math.round((stats.borrowedDocuments / stats.totalDocuments) * 100) : 0\r\n    },\r\n    {\r\n      label: 'En retard',\r\n      value: stats.overdueDocuments,\r\n      icon: Clock,\r\n      color: '#DC2626',\r\n      urgent: stats.overdueDocuments > 0\r\n    }\r\n  ];\r\n\r\n  const userStats = [\r\n    {\r\n      label: 'tudiants',\r\n      value: stats.totalStudents,\r\n      icon: GraduationCap,\r\n      color: '#3E5C49'\r\n    },\r\n    {\r\n      label: 'Personnel',\r\n      value: stats.totalStaff,\r\n      icon: Briefcase,\r\n      color: '#C2571B'\r\n    }\r\n  ];\r\n\r\n  const getPopularityScore = () => {\r\n    if (stats.totalDocuments === 0) return 0;\r\n    return Math.round((stats.borrowedDocuments / stats.totalDocuments) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className={`sidebar ${isCollapsed ? 'collapsed' : ''}`}>\r\n      {/* Enhanced Header */}\r\n      <div className=\"sidebar-header\">\r\n        <div className=\"sidebar-toggle\">\r\n          <button \r\n            className=\"toggle-button\"\r\n            onClick={() => setIsCollapsed(!isCollapsed)}\r\n            title={isCollapsed ? 'Dvelopper le menu' : 'Rduire le menu'}\r\n          >\r\n            {isCollapsed ? <ChevronRight size={18} /> : <ChevronLeft size={18} />}\r\n          </button>\r\n        </div>\r\n        \r\n        {!isCollapsed && (\r\n          <div className=\"sidebar-brand\">\r\n            <div className=\"brand-logo\">\r\n              <Book size={24} />\r\n            </div>\r\n            <div className=\"brand-text\">\r\n              <h2 className=\"brand-title\">Bibliothque</h2>\r\n              <p className=\"brand-subtitle\">Systme de gestion moderne</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* User Profile Section */}\r\n      {currentUser && (\r\n        <div className=\"user-profile-section\">\r\n          <div className=\"user-profile\">\r\n            <div className=\"user-avatar\" onClick={() => onNavigate('user-profile')} title=\"Voir le profil utilisateur\">\r\n              <span className=\"avatar-text\">\r\n                {currentUser.firstName?.charAt(0)?.toUpperCase() || currentUser.email?.charAt(0)?.toUpperCase() || 'U'}\r\n              </span>\r\n            </div>\r\n            {!isCollapsed && (\r\n              <>\r\n                <div className=\"user-info\">\r\n                  <div className=\"user-name\">\r\n                    {currentUser.firstName ? `${currentUser.firstName} ${currentUser.lastName || ''}`.trim() : currentUser.email}\r\n                  </div>\r\n                  <div className=\"user-role\">{currentUser.role || 'Utilisateur'}</div>\r\n                  {currentInstitution && (\r\n                    <div className=\"user-institution\">{currentInstitution.name}</div>\r\n                  )}\r\n                </div>\r\n                <div className=\"user-actions\">\r\n                  <button \r\n                    className=\"user-settings-btn\"\r\n                    onClick={() => onNavigate('user-profile')}\r\n                    title=\"Modifier le profil\"\r\n                  >\r\n                    <User size={16} />\r\n                  </button>\r\n                  {onLogout && (\r\n                    <button \r\n                      className=\"user-logout-btn\"\r\n                      onClick={onLogout}\r\n                      title=\"Se dconnecter\"\r\n                    >\r\n                      <LogOut size={16} />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"sidebar-content\">\r\n        {/* Main Navigation */}\r\n        <nav className=\"sidebar-nav\">\r\n          <div className=\"nav-section\">\r\n            {!isCollapsed && <h3 className=\"nav-title\">Principal</h3>}\r\n            <ul className=\"nav-list\">\r\n              {menuItems.map((item) => (\r\n                <li key={item.id} className=\"nav-item\">\r\n                  <button\r\n                    className={`nav-button ${currentView === item.id ? 'active' : ''} ${item.accent ? 'accent' : ''} ${item.urgent ? 'urgent' : ''} ${item.highlight ? 'highlight' : ''}`}\r\n                    onClick={() => onNavigate(item.id as any)}\r\n                    title={isCollapsed ? item.label : ''}\r\n                    style={{\r\n                      '--item-gradient': item.gradient\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    <div className=\"nav-icon\">\r\n                      <item.icon size={20} />\r\n                    </div>\r\n                    \r\n                    {!isCollapsed && (\r\n                      <>\r\n                        <div className=\"nav-content\">\r\n                          <span className=\"nav-label\">{item.label}</span>\r\n                          <span className=\"nav-description\">{item.description}</span>\r\n                        </div>\r\n                        \r\n                        {item.count !== undefined && item.count > 0 && (\r\n                          <div className={`nav-count ${item.badge ? 'badge' : ''} ${item.urgent ? 'urgent' : ''}`}>\r\n                            {item.count}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {item.highlight && (\r\n                          <div className=\"nav-highlight\">\r\n                            <Zap size={14} />\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    \r\n                    {isCollapsed && item.badge && stats.borrowedDocuments > 0 && (\r\n                      <div className={`nav-indicator ${item.urgent ? 'urgent' : ''}`}></div>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Actions Section */}\r\n          <div className=\"nav-section\">\r\n            {!isCollapsed && <h3 className=\"nav-title\">Actions</h3>}\r\n            <ul className=\"nav-list\">\r\n              {actionItems.map((item) => (\r\n                <li key={item.id} className=\"nav-item\">\r\n                  <button\r\n                    className={`nav-button ${currentView === item.id ? 'active' : ''} ${item.accent ? 'accent' : ''} ${item.highlight ? 'highlight' : ''}`}\r\n                    onClick={() => onNavigate(item.id as any)}\r\n                    title={isCollapsed ? item.label : ''}\r\n                    style={{\r\n                      '--item-gradient': item.gradient\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    <div className=\"nav-icon\">\r\n                      <item.icon size={20} />\r\n                    </div>\r\n                    \r\n                    {!isCollapsed && (\r\n                      <>\r\n                        <div className=\"nav-content\">\r\n                          <span className=\"nav-label\">{item.label}</span>\r\n                          <span className=\"nav-description\">{item.description}</span>\r\n                        </div>\r\n                        \r\n                        {item.count !== undefined && item.count > 0 && (\r\n                          <div className={`nav-count ${item.badge ? 'badge' : ''}`}>\r\n                            {item.count}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {item.highlight && (\r\n                          <div className=\"nav-highlight\">\r\n                            <Zap size={14} />\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Reports Section */}\r\n          <div className=\"nav-section\">\r\n            {!isCollapsed && <h3 className=\"nav-title\">Rapports</h3>}\r\n            <ul className=\"nav-list\">\r\n              {reportItems.map((item) => (\r\n                <li key={item.id} className=\"nav-item\">\r\n                  <button\r\n                    className={`nav-button ${currentView === item.id ? 'active' : ''}`}\r\n                    onClick={() => onNavigate(item.id as any)}\r\n                    title={isCollapsed ? item.label : ''}\r\n                    style={{\r\n                      '--item-gradient': item.gradient\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    <div className=\"nav-icon\">\r\n                      <item.icon size={20} />\r\n                    </div>\r\n                    \r\n                    {!isCollapsed && (\r\n                      <div className=\"nav-content\">\r\n                        <span className=\"nav-label\">{item.label}</span>\r\n                        <span className=\"nav-description\">{item.description}</span>\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          {/* Support Section */}\r\n          <div className=\"nav-section\">\r\n            {!isCollapsed && <h3 className=\"nav-title\">Communaut</h3>}\r\n            <ul className=\"nav-list\">\r\n              {supportItems.map((item) => (\r\n                <li key={item.id} className=\"nav-item\">\r\n                  <button\r\n                    className={`nav-button ${currentView === item.id ? 'active' : ''} ${item.support ? 'support' : ''}`}\r\n                    onClick={() => onNavigate(item.id as any)}\r\n                    title={isCollapsed ? item.label : ''}\r\n                    style={{\r\n                      '--item-gradient': item.gradient\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    <div className=\"nav-icon\">\r\n                      <item.icon size={20} />\r\n                    </div>\r\n                    \r\n                    {!isCollapsed && (\r\n                      <div className=\"nav-content\">\r\n                        <span className=\"nav-label\">{item.label}</span>\r\n                        <span className=\"nav-description\">{item.description}</span>\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </nav>\r\n        \r\n        {!isCollapsed && (\r\n          <>\r\n            {/* Collection Statistics */}\r\n            <div className=\"stats-section\">\r\n              <div className=\"stats-header\">\r\n                <h3 className=\"stats-title\">Statistiques de collection</h3>\r\n                <div className=\"popularity-score\">\r\n                  <TrendingUp size={14} />\r\n                  <span>{getPopularityScore()}% popularit</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"stats-grid\">\r\n                {quickStats.map((stat, index) => (\r\n                  <div key={index} className={`stat-card ${stat.urgent ? 'urgent' : ''}`}>\r\n                    <div className=\"stat-icon\" style={{ color: stat.color }}>\r\n                      <stat.icon size={16} />\r\n                    </div>\r\n                    <div className=\"stat-content\">\r\n                      <div className=\"stat-value\">{stat.value}</div>\r\n                      <div className=\"stat-label\">{stat.label}</div>\r\n                      {stat.trend && (\r\n                        <div className=\"stat-trend\">{stat.trend}</div>\r\n                      )}\r\n                      {stat.percentage !== undefined && (\r\n                        <div className=\"stat-percentage\">{stat.percentage}%</div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Users Overview */}\r\n            <div className=\"stats-section\">\r\n              <h3 className=\"stats-title\">Utilisateurs</h3>\r\n              <div className=\"users-stats\">\r\n                {userStats.map((stat, index) => (\r\n                  <div key={index} className=\"user-stat\">\r\n                    <div className=\"user-stat-icon\" style={{ color: stat.color }}>\r\n                      <stat.icon size={18} />\r\n                    </div>\r\n                    <div className=\"user-stat-content\">\r\n                      <div className=\"user-stat-value\">{stat.value}</div>\r\n                      <div className=\"user-stat-label\">{stat.label}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              <div className=\"total-users\">\r\n                <span className=\"total-label\">Total des utilisateurs</span>\r\n                <span className=\"total-value\">{stats.totalBorrowers}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Activity Indicator */}\r\n            <div className=\"activity-section\">\r\n              <div className=\"activity-header\">\r\n                <h3 className=\"stats-title\">Activit rcente</h3>\r\n                <div className=\"activity-pulse\"></div>\r\n              </div>\r\n              <div className=\"activity-summary\">\r\n                <div className=\"activity-item\">\r\n                  <div className=\"activity-dot available\"></div>\r\n                  <span>{stats.availableDocuments} documents prts  emprunter</span>\r\n                </div>\r\n                <div className=\"activity-item\">\r\n                  <div className=\"activity-dot borrowed\"></div>\r\n                  <span>{stats.borrowedDocuments} emprunts en cours</span>\r\n                </div>\r\n                {stats.overdueDocuments > 0 && (\r\n                  <div className=\"activity-item urgent\">\r\n                    <div className=\"activity-dot overdue\"></div>\r\n                    <span>{stats.overdueDocuments} document(s) en retard</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n      \r\n      <style>{`\r\n        .sidebar {\r\n          width: 300px;\r\n          background: linear-gradient(180deg, #3E5C49 0%, #2E453A 100%);\r\n          display: flex;\r\n          flex-direction: column;\r\n          position: relative;\r\n          transition: width 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          border-right: 1px solid rgba(46, 69, 58, 0.3);\r\n          box-shadow: 4px 0 16px rgba(62, 92, 73, 0.1);\r\n        }\r\n        \r\n        .sidebar.collapsed {\r\n          width: 72px;\r\n        }\r\n        \r\n        .sidebar::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: \r\n            radial-gradient(circle at 20% 80%, rgba(243, 238, 217, 0.03) 0%, transparent 50%),\r\n            radial-gradient(circle at 80% 20%, rgba(194, 87, 27, 0.02) 0%, transparent 50%);\r\n          pointer-events: none;\r\n        }\r\n        \r\n        .sidebar-header {\r\n          padding: 24px 20px;\r\n          border-bottom: 1px solid rgba(243, 238, 217, 0.1);\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .sidebar-toggle {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          margin-bottom: 16px;\r\n        }\r\n        \r\n        .toggle-button {\r\n          width: 40px;\r\n          height: 40px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          backdrop-filter: blur(10px);\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .toggle-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n          transform: scale(1.05);\r\n        }\r\n        \r\n        .sidebar-brand {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          opacity: 1;\r\n          transition: opacity 0.2s ease;\r\n        }\r\n        \r\n        .collapsed .sidebar-brand {\r\n          opacity: 0;\r\n          pointer-events: none;\r\n        }\r\n        \r\n        .brand-logo {\r\n          width: 48px;\r\n          height: 48px;\r\n          background: rgba(243, 238, 217, 0.15);\r\n          border-radius: 14px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #F3EED9;\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .brand-title {\r\n          font-size: 20px;\r\n          font-weight: 800;\r\n          color: #F3EED9;\r\n          margin: 0 0 4px 0;\r\n          letter-spacing: -0.3px;\r\n        }\r\n        \r\n        .brand-subtitle {\r\n          font-size: 13px;\r\n          color: rgba(243, 238, 217, 0.7);\r\n          margin: 0;\r\n          line-height: 1.3;\r\n        }\r\n        \r\n        .sidebar-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 8px 20px 20px;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .collapsed .sidebar-content {\r\n          padding: 8px 12px 20px;\r\n        }\r\n        \r\n        .nav-section {\r\n          margin-bottom: 32px;\r\n        }\r\n        \r\n        .nav-title {\r\n          font-size: 11px;\r\n          font-weight: 700;\r\n          text-transform: uppercase;\r\n          letter-spacing: 1px;\r\n          color: rgba(243, 238, 217, 0.6);\r\n          margin-bottom: 16px;\r\n          margin-top: 0;\r\n          padding: 0 4px;\r\n        }\r\n        \r\n        .nav-list {\r\n          list-style: none;\r\n          padding: 0;\r\n          margin: 0;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .nav-item {\r\n          width: 100%;\r\n        }\r\n        \r\n        .nav-button {\r\n          width: 100%;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 16px;\r\n          padding: 16px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #F3EED9;\r\n          cursor: pointer;\r\n          border-radius: 16px;\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          font-size: 14px;\r\n          position: relative;\r\n          text-align: left;\r\n          overflow: hidden;\r\n          border: 1px solid transparent;\r\n        }\r\n        \r\n        .collapsed .nav-button {\r\n          justify-content: center;\r\n          padding: 16px 12px;\r\n        }\r\n        \r\n        .nav-button::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(243, 238, 217, 0.08);\r\n          border-radius: 16px;\r\n          transform: scaleX(0);\r\n          transform-origin: left;\r\n          transition: transform 0.3s ease;\r\n        }\r\n        \r\n        .nav-button:hover::before {\r\n          transform: scaleX(1);\r\n        }\r\n        \r\n        .nav-button:hover {\r\n          color: #FFFFFF;\r\n          transform: translateX(4px);\r\n          border-color: rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .collapsed .nav-button:hover {\r\n          transform: scale(1.05);\r\n        }\r\n        \r\n        .nav-button.active {\r\n          background: var(--item-gradient, rgba(243, 238, 217, 0.15));\r\n          color: #FFFFFF;\r\n          box-shadow: \r\n            0 8px 24px rgba(0, 0, 0, 0.15),\r\n            0 4px 12px rgba(62, 92, 73, 0.2);\r\n          border-color: rgba(243, 238, 217, 0.3);\r\n        }\r\n        \r\n        .nav-button.active::before {\r\n          transform: scaleX(1);\r\n          background: rgba(243, 238, 217, 0.1);\r\n        }\r\n        \r\n        .nav-button.highlight {\r\n          background: var(--item-gradient);\r\n          animation: pulse-highlight 3s ease-in-out infinite;\r\n        }\r\n        \r\n        .nav-button.highlight:hover {\r\n          background: linear-gradient(135deg, #A8481A 0%, #D84315 100%);\r\n          transform: translateX(4px) translateY(-2px);\r\n          box-shadow: 0 12px 32px rgba(194, 87, 27, 0.4);\r\n        }\r\n        \r\n        .nav-button.support {\r\n          position: relative;\r\n        }\r\n        \r\n        .nav-button.support::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: 8px;\r\n          right: 8px;\r\n          font-size: 12px;\r\n          color: #E91E63;\r\n          animation: heartbeat 2s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes heartbeat {\r\n          0%, 100% {\r\n            transform: scale(1);\r\n            opacity: 0.8;\r\n          }\r\n          50% {\r\n            transform: scale(1.2);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        @keyframes pulse-highlight {\r\n          0%, 100% {\r\n            box-shadow: 0 4px 16px rgba(194, 87, 27, 0.3);\r\n          }\r\n          50% {\r\n            box-shadow: 0 8px 24px rgba(194, 87, 27, 0.5);\r\n          }\r\n        }\r\n        \r\n        .nav-button.urgent {\r\n          position: relative;\r\n        }\r\n        \r\n        .nav-button.urgent::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: 12px;\r\n          right: 12px;\r\n          width: 8px;\r\n          height: 8px;\r\n          background: #DC2626;\r\n          border-radius: 50%;\r\n          animation: pulse-urgent 2s infinite;\r\n        }\r\n        \r\n        @keyframes pulse-urgent {\r\n          0%, 100% {\r\n            opacity: 1;\r\n            transform: scale(1);\r\n          }\r\n          50% {\r\n            opacity: 0.7;\r\n            transform: scale(1.2);\r\n          }\r\n        }\r\n        \r\n        .nav-icon {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 24px;\r\n          height: 24px;\r\n          flex-shrink: 0;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .nav-content {\r\n          flex: 1;\r\n          display: flex;\r\n          flex-direction: column;\r\n          min-width: 0;\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n        \r\n        .nav-label {\r\n          font-weight: 700;\r\n          line-height: 1.2;\r\n          margin-bottom: 3px;\r\n          font-size: 15px;\r\n        }\r\n        \r\n        .nav-description {\r\n          font-size: 12px;\r\n          opacity: 0.8;\r\n          line-height: 1.2;\r\n        }\r\n        \r\n        .nav-count {\r\n          background: rgba(243, 238, 217, 0.2);\r\n          color: #F3EED9;\r\n          font-size: 12px;\r\n          font-weight: 700;\r\n          padding: 4px 8px;\r\n          border-radius: 10px;\r\n          min-width: 20px;\r\n          text-align: center;\r\n          flex-shrink: 0;\r\n          position: relative;\r\n          z-index: 1;\r\n          border: 1px solid rgba(243, 238, 217, 0.3);\r\n        }\r\n        \r\n        .nav-count.badge {\r\n          background: #C2571B;\r\n          color: #FFFFFF;\r\n          animation: pulse-badge 2s infinite;\r\n          border-color: rgba(255, 255, 255, 0.3);\r\n        }\r\n        \r\n        .nav-count.urgent {\r\n          background: #DC2626;\r\n          color: #FFFFFF;\r\n          animation: pulse-urgent 1.5s infinite;\r\n          border-color: rgba(255, 255, 255, 0.3);\r\n        }\r\n        \r\n        @keyframes pulse-badge {\r\n          0%, 100% {\r\n            opacity: 1;\r\n            transform: scale(1);\r\n          }\r\n          50% {\r\n            opacity: 0.8;\r\n            transform: scale(1.05);\r\n          }\r\n        }\r\n        \r\n        .nav-highlight {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 28px;\r\n          height: 28px;\r\n          background: rgba(255, 255, 255, 0.2);\r\n          border-radius: 50%;\r\n          color: #F3EED9;\r\n          animation: sparkle 2s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes sparkle {\r\n          0%, 100% {\r\n            opacity: 0.7;\r\n            transform: rotate(0deg) scale(1);\r\n          }\r\n          50% {\r\n            opacity: 1;\r\n            transform: rotate(180deg) scale(1.1);\r\n          }\r\n        }\r\n        \r\n        .nav-indicator {\r\n          width: 10px;\r\n          height: 10px;\r\n          background: #C2571B;\r\n          border-radius: 50%;\r\n          position: absolute;\r\n          top: 12px;\r\n          right: 12px;\r\n          animation: pulse-badge 2s infinite;\r\n          border: 2px solid rgba(243, 238, 217, 0.3);\r\n        }\r\n        \r\n        .nav-indicator.urgent {\r\n          background: #DC2626;\r\n          animation: pulse-urgent 1.5s infinite;\r\n        }\r\n        \r\n        .stats-section {\r\n          margin-bottom: 24px;\r\n          padding-top: 20px;\r\n          border-top: 1px solid rgba(243, 238, 217, 0.1);\r\n          position: relative;\r\n          isolation: isolate;\r\n        }\r\n        \r\n        .stats-section:first-of-type {\r\n          border-top: none;\r\n          padding-top: 0;\r\n        }\r\n        \r\n        .stats-header {\r\n          display: flex !important;\r\n          align-items: center !important;\r\n          justify-content: space-between !important;\r\n          margin-bottom: 16px !important;\r\n          position: relative !important;\r\n          z-index: 10 !important;\r\n        }\r\n        \r\n        .stats-title {\r\n          font-size: 11px !important;\r\n          font-weight: 700 !important;\r\n          text-transform: uppercase !important;\r\n          letter-spacing: 1px !important;\r\n          color: rgba(243, 238, 217, 0.6) !important;\r\n          margin: 0 !important;\r\n          font-family: inherit !important;\r\n        }\r\n        \r\n        .popularity-score {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 4px;\r\n          font-size: 10px;\r\n          color: rgba(243, 238, 217, 0.8);\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .stats-grid {\r\n          display: grid !important;\r\n          grid-template-columns: 1fr 1fr !important;\r\n          grid-template-rows: auto auto !important;\r\n          gap: 12px !important;\r\n          width: 100% !important;\r\n          max-width: none !important;\r\n        }\r\n        \r\n        .stat-card {\r\n          background: rgba(243, 238, 217, 0.08) !important;\r\n          border-radius: 12px !important;\r\n          padding: 14px 12px !important;\r\n          display: flex !important;\r\n          align-items: center !important;\r\n          gap: 12px !important;\r\n          transition: all 0.2s ease !important;\r\n          border: 1px solid rgba(243, 238, 217, 0.1) !important;\r\n          position: relative !important;\r\n          overflow: hidden !important;\r\n          isolation: isolate !important;\r\n          min-height: 60px !important;\r\n          width: 100% !important;\r\n          box-sizing: border-box !important;\r\n        }\r\n        \r\n        .stat-card::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(135deg, rgba(243, 238, 217, 0.05) 0%, transparent 100%);\r\n          opacity: 0;\r\n          transition: opacity 0.2s ease;\r\n        }\r\n        \r\n        .stat-card:hover {\r\n          background: rgba(243, 238, 217, 0.12);\r\n          transform: translateY(-1px);\r\n        }\r\n        \r\n        .stat-card:hover::before {\r\n          opacity: 1;\r\n        }\r\n        \r\n        .stat-card.urgent {\r\n          background: rgba(220, 38, 38, 0.15);\r\n          border-color: rgba(220, 38, 38, 0.3);\r\n          animation: pulse-card 3s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes pulse-card {\r\n          0%, 100% {\r\n            background: rgba(220, 38, 38, 0.15);\r\n          }\r\n          50% {\r\n            background: rgba(220, 38, 38, 0.2);\r\n          }\r\n        }\r\n        \r\n        .stat-icon {\r\n          opacity: 0.9;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .stat-content {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n        \r\n        .stat-value {\r\n          font-size: 18px !important;\r\n          font-weight: 800 !important;\r\n          line-height: 1.2 !important;\r\n          color: #F3EED9 !important;\r\n          margin-bottom: 2px !important;\r\n          font-family: inherit !important;\r\n        }\r\n        \r\n        .stat-label {\r\n          font-size: 10px !important;\r\n          color: rgba(243, 238, 217, 0.7) !important;\r\n          line-height: 1.2 !important;\r\n          text-transform: uppercase !important;\r\n          letter-spacing: 0.5px !important;\r\n          font-weight: 600 !important;\r\n          font-family: inherit !important;\r\n        }\r\n        \r\n        .stat-trend {\r\n          font-size: 9px;\r\n          color: #4CAF50;\r\n          font-weight: 600;\r\n          margin-top: 2px;\r\n        }\r\n        \r\n        .stat-percentage {\r\n          font-size: 9px;\r\n          color: rgba(243, 238, 217, 0.8);\r\n          font-weight: 600;\r\n          margin-top: 2px;\r\n        }\r\n        \r\n        .users-stats {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-bottom: 16px;\r\n        }\r\n        \r\n        .user-stat {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          background: rgba(243, 238, 217, 0.06);\r\n          border-radius: 10px;\r\n          padding: 12px;\r\n          border: 1px solid rgba(243, 238, 217, 0.1);\r\n        }\r\n        \r\n        .user-stat-icon {\r\n          opacity: 0.9;\r\n        }\r\n        \r\n        .user-stat-content {\r\n          flex: 1;\r\n        }\r\n        \r\n        .user-stat-value {\r\n          font-size: 16px;\r\n          font-weight: 700;\r\n          color: #F3EED9;\r\n          line-height: 1.2;\r\n        }\r\n        \r\n        .user-stat-label {\r\n          font-size: 11px;\r\n          color: rgba(243, 238, 217, 0.7);\r\n          font-weight: 500;\r\n        }\r\n        \r\n        .total-users {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          padding: 12px 16px;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border-radius: 12px;\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .total-label {\r\n          font-size: 12px;\r\n          color: rgba(243, 238, 217, 0.8);\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .total-value {\r\n          font-size: 16px;\r\n          font-weight: 800;\r\n          color: #F3EED9;\r\n        }\r\n        \r\n        .activity-section {\r\n          margin-top: auto;\r\n        }\r\n        \r\n        .activity-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          margin-bottom: 16px;\r\n        }\r\n        \r\n        .activity-pulse {\r\n          width: 8px;\r\n          height: 8px;\r\n          background: #4CAF50;\r\n          border-radius: 50%;\r\n          animation: pulse-activity 2s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes pulse-activity {\r\n          0%, 100% {\r\n            opacity: 1;\r\n            transform: scale(1);\r\n          }\r\n          50% {\r\n            opacity: 0.6;\r\n            transform: scale(1.3);\r\n          }\r\n        }\r\n        \r\n        .activity-summary {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 8px;\r\n        }\r\n        \r\n        .activity-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          font-size: 11px;\r\n          color: rgba(243, 238, 217, 0.8);\r\n          line-height: 1.3;\r\n        }\r\n        \r\n        .activity-item.urgent {\r\n          color: #FFCDD2;\r\n        }\r\n        \r\n        .activity-dot {\r\n          width: 6px;\r\n          height: 6px;\r\n          border-radius: 50%;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .activity-dot.available {\r\n          background: #4CAF50;\r\n        }\r\n        \r\n        .activity-dot.borrowed {\r\n          background: #FF9800;\r\n        }\r\n        \r\n        .activity-dot.overdue {\r\n          background: #F44336;\r\n          animation: pulse-urgent 1.5s infinite;\r\n        }\r\n        \r\n        /* Enhanced scrollbar */\r\n        .sidebar-content::-webkit-scrollbar {\r\n          width: 4px;\r\n        }\r\n        \r\n        .sidebar-content::-webkit-scrollbar-track {\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border-radius: 2px;\r\n        }\r\n        \r\n        .sidebar-content::-webkit-scrollbar-thumb {\r\n          background: rgba(243, 238, 217, 0.3);\r\n          border-radius: 2px;\r\n        }\r\n        \r\n        .sidebar-content::-webkit-scrollbar-thumb:hover {\r\n          background: rgba(243, 238, 217, 0.5);\r\n        }\r\n        \r\n        /* Force consistent 2x2 grid layout for statistics */\r\n        @media (min-width: 769px) {\r\n          .stats-grid {\r\n            display: grid !important;\r\n            grid-template-columns: 1fr 1fr !important;\r\n            grid-template-rows: auto auto !important;\r\n            grid-auto-rows: auto !important;\r\n            gap: 12px !important;\r\n            align-items: stretch !important;\r\n          }\r\n          \r\n          .stat-card {\r\n            min-height: 60px !important;\r\n            max-height: none !important;\r\n            flex: none !important;\r\n          }\r\n        }\r\n\r\n        /* Responsive Design */\r\n        @media (max-width: 768px) {\r\n          .sidebar {\r\n            width: 100%;\r\n            height: auto;\r\n            flex-direction: row;\r\n            border-right: none;\r\n            border-bottom: 1px solid rgba(46, 69, 58, 0.3);\r\n            overflow-x: auto;\r\n            background: linear-gradient(90deg, #3E5C49 0%, #2E453A 100%);\r\n          }\r\n          \r\n          .sidebar.collapsed {\r\n            width: 100%;\r\n          }\r\n          \r\n          .sidebar-header {\r\n            display: none;\r\n          }\r\n          \r\n          .sidebar-content {\r\n            flex: 1;\r\n            padding: 16px 20px;\r\n            overflow-x: auto;\r\n            display: flex;\r\n            gap: 20px;\r\n            overflow-y: visible;\r\n          }\r\n          \r\n          .nav-section {\r\n            margin-bottom: 0;\r\n            flex-shrink: 0;\r\n          }\r\n          \r\n          .nav-list {\r\n            flex-direction: row;\r\n            gap: 12px;\r\n          }\r\n          \r\n          .nav-button {\r\n            flex-direction: column;\r\n            gap: 6px;\r\n            padding: 12px 16px;\r\n            min-width: 80px;\r\n            white-space: nowrap;\r\n            border-radius: 12px;\r\n          }\r\n          \r\n          .nav-content {\r\n            align-items: center;\r\n            text-align: center;\r\n          }\r\n          \r\n          .nav-label {\r\n            font-size: 12px;\r\n          }\r\n          \r\n          .nav-description {\r\n            display: none;\r\n          }\r\n          \r\n          .nav-count {\r\n            position: absolute;\r\n            top: 8px;\r\n            right: 8px;\r\n            font-size: 10px;\r\n            padding: 2px 6px;\r\n            min-width: 16px;\r\n          }\r\n          \r\n          .stats-section,\r\n          .activity-section {\r\n            display: none;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .sidebar-content {\r\n            padding: 12px 16px;\r\n            gap: 16px;\r\n          }\r\n          \r\n          .nav-button {\r\n            min-width: 70px;\r\n            padding: 10px 12px;\r\n          }\r\n          \r\n          .nav-label {\r\n            font-size: 11px;\r\n          }\r\n          \r\n          .nav-count {\r\n            font-size: 9px;\r\n            padding: 1px 4px;\r\n          }\r\n        }\r\n        \r\n        /* Performance optimizations */\r\n        .nav-button {\r\n          contain: layout style paint;\r\n        }\r\n        \r\n        .stat-card {\r\n          contain: layout style paint;\r\n        }\r\n        \r\n        /* Accessibility improvements */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .nav-button,\r\n          .stat-card,\r\n          .toggle-button,\r\n          .activity-pulse,\r\n          .nav-highlight {\r\n            transition: none;\r\n            animation: none;\r\n          }\r\n          \r\n          .nav-button:hover {\r\n            transform: none;\r\n          }\r\n        }\r\n        \r\n        /* High contrast mode */\r\n        @media (prefers-contrast: high) {\r\n          .nav-button {\r\n            border: 2px solid rgba(243, 238, 217, 0.5);\r\n          }\r\n          \r\n          .nav-button.active {\r\n            border-color: #F3EED9;\r\n          }\r\n          \r\n          .stat-card {\r\n            border-width: 2px;\r\n          }\r\n        }\r\n      `}</style>\r\n      \r\n      {/* Emergency Alert for Overdue Books */}\r\n      {!isCollapsed && stats.overdueDocuments > 0 && (\r\n        <div className=\"emergency-alert\">\r\n          <div className=\"alert-icon\">\r\n            <Clock size={16} />\r\n          </div>\r\n          <div className=\"alert-content\">\r\n            <div className=\"alert-title\">Action requise</div>\r\n            <div className=\"alert-message\">\r\n              {stats.overdueDocuments} document(s) en retard\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <style>{`\r\n        .emergency-alert {\r\n          margin: 16px 20px;\r\n          background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);\r\n          color: #FFFFFF;\r\n          padding: 16px;\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          animation: pulse-alert 3s ease-in-out infinite;\r\n          border: 1px solid rgba(255, 255, 255, 0.2);\r\n          box-shadow: 0 4px 16px rgba(220, 38, 38, 0.3);\r\n        }\r\n        \r\n        @keyframes pulse-alert {\r\n          0%, 100% {\r\n            box-shadow: 0 4px 16px rgba(220, 38, 38, 0.3);\r\n          }\r\n          50% {\r\n            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.5);\r\n          }\r\n        }\r\n        \r\n        .alert-icon {\r\n          width: 32px;\r\n          height: 32px;\r\n          background: rgba(255, 255, 255, 0.2);\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .alert-content {\r\n          flex: 1;\r\n        }\r\n        \r\n        .alert-title {\r\n          font-size: 12px;\r\n          font-weight: 700;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n          margin-bottom: 2px;\r\n          opacity: 0.9;\r\n        }\r\n        \r\n        .alert-message {\r\n          font-size: 13px;\r\n          font-weight: 600;\r\n          line-height: 1.3;\r\n        }\r\n\r\n        /* User Profile Section */\r\n        .user-profile-section {\r\n          padding: 16px 20px;\r\n          border-bottom: 1px solid rgba(243, 238, 217, 0.1);\r\n          position: relative;\r\n          z-index: 1;\r\n        }\r\n\r\n        .user-profile {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          background: rgba(243, 238, 217, 0.08);\r\n          border-radius: 12px;\r\n          padding: 12px;\r\n          border: 1px solid rgba(243, 238, 217, 0.15);\r\n          transition: all 0.2s ease;\r\n        }\r\n\r\n        .user-profile:hover {\r\n          background: rgba(243, 238, 217, 0.12);\r\n          border-color: rgba(243, 238, 217, 0.25);\r\n        }\r\n\r\n        .user-avatar {\r\n          width: 36px;\r\n          height: 36px;\r\n          border-radius: 10px;\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-shrink: 0;\r\n          box-shadow: 0 4px 12px rgba(194, 87, 27, 0.3);\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          border: 2px solid transparent;\r\n        }\r\n\r\n        .user-avatar:hover {\r\n          border-color: rgba(243, 238, 217, 0.3);\r\n          transform: scale(1.05);\r\n          box-shadow: 0 6px 16px rgba(194, 87, 27, 0.4);\r\n        }\r\n\r\n        .avatar-text {\r\n          color: #F3EED9;\r\n          font-weight: 700;\r\n          font-size: 14px;\r\n          text-transform: uppercase;\r\n        }\r\n\r\n        .user-info {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .user-name {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #F3EED9;\r\n          margin-bottom: 2px;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        .user-role {\r\n          font-size: 11px;\r\n          color: rgba(243, 238, 217, 0.7);\r\n          font-weight: 500;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n          margin-bottom: 2px;\r\n        }\r\n\r\n        .user-institution {\r\n          font-size: 10px;\r\n          color: rgba(243, 238, 217, 0.6);\r\n          font-weight: 500;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        .user-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .user-settings-btn,\r\n        .user-logout-btn {\r\n          width: 30px;\r\n          height: 30px;\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n          background: rgba(243, 238, 217, 0.15);\r\n          color: #F3EED9;\r\n          border-radius: 8px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .user-settings-btn:hover {\r\n          background: rgba(243, 238, 217, 0.25);\r\n          border-color: rgba(243, 238, 217, 0.4);\r\n          color: #F3EED9;\r\n          transform: scale(1.05);\r\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n        }\r\n\r\n        .user-logout-btn:hover {\r\n          background: rgba(220, 38, 38, 0.2);\r\n          border-color: rgba(220, 38, 38, 0.4);\r\n          color: #FFB3B3;\r\n          transform: scale(1.05);\r\n          box-shadow: 0 2px 8px rgba(220, 38, 38, 0.2);\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport { \r\n  Search, \r\n  Filter, \r\n  X, \r\n  Book, \r\n  User, \r\n  Calendar,\r\n  Tag,\r\n  BookOpen,\r\n  Star,\r\n  Clock,\r\n  TrendingUp,\r\n  Zap\r\n} from 'lucide-react';\r\n\r\ninterface SmartSearchProps {\r\n  onSearch: (query: string, filters: SearchFilters) => void;\r\n  data?: any[];\r\n  placeholder?: string;\r\n  className?: string;\r\n}\r\n\r\ninterface SearchFilters {\r\n  type: 'all' | 'documents' | 'borrowers' | 'history';\r\n  category?: string;\r\n  author?: string;\r\n  year?: string;\r\n  status?: 'available' | 'borrowed' | 'overdue';\r\n  dateRange?: {\r\n    start: string;\r\n    end: string;\r\n  };\r\n}\r\n\r\ninterface SearchSuggestion {\r\n  id: string;\r\n  text: string;\r\n  type: 'document' | 'author' | 'category' | 'borrower' | 'quick-action';\r\n  icon: any;\r\n  description?: string;\r\n  action?: () => void;\r\n}\r\n\r\nexport const SmartSearch: React.FC<SmartSearchProps> = ({ \r\n  onSearch, \r\n  data = [], \r\n  placeholder = \"Rechercher dans la bibliothque...\",\r\n  className = \"\"\r\n}) => {\r\n  const [query, setQuery] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [filters, setFilters] = useState<SearchFilters>({ type: 'all' });\r\n  const [suggestions, setSuggestions] = useState<SearchSuggestion[]>([]);\r\n  const [selectedSuggestion, setSelectedSuggestion] = useState(-1);\r\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\r\n  \r\n  const searchRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Generate smart suggestions based on query\r\n  useEffect(() => {\r\n    if (query.length === 0) {\r\n      setSuggestions(generateQuickActions());\r\n      return;\r\n    }\r\n\r\n    if (query.length < 2) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n\r\n    const newSuggestions: SearchSuggestion[] = [];\r\n\r\n    // Search in documents\r\n    const documentMatches = data.filter(item => \r\n      item.titre?.toLowerCase().includes(query.toLowerCase()) ||\r\n      item.auteur?.toLowerCase().includes(query.toLowerCase())\r\n    ).slice(0, 3);\r\n\r\n    documentMatches.forEach(doc => {\r\n      newSuggestions.push({\r\n        id: `doc-${doc.id}`,\r\n        text: doc.titre,\r\n        type: 'document',\r\n        icon: Book,\r\n        description: `par ${doc.auteur}  ${doc.descripteurs}`\r\n      });\r\n    });\r\n\r\n    // Add category suggestions\r\n    const categoryMatches = ['Fiction', 'Sciences', 'Histoire', 'Philosophie', 'Art']\r\n      .filter(cat => cat.toLowerCase().includes(query.toLowerCase()))\r\n      .slice(0, 2);\r\n\r\n    categoryMatches.forEach(cat => {\r\n      newSuggestions.push({\r\n        id: `cat-${cat}`,\r\n        text: cat,\r\n        type: 'category',\r\n        icon: Tag,\r\n        description: 'Catgorie'\r\n      });\r\n    });\r\n\r\n    // Add author suggestions\r\n    const authorMatches = Array.from(new Set(data.map(item => item.auteur)))\r\n      .filter(author => author?.toLowerCase().includes(query.toLowerCase()))\r\n      .slice(0, 2);\r\n\r\n    authorMatches.forEach(author => {\r\n      newSuggestions.push({\r\n        id: `author-${author}`,\r\n        text: author,\r\n        type: 'author',\r\n        icon: Star,\r\n        description: 'Auteur'\r\n      });\r\n    });\r\n\r\n    setSuggestions(newSuggestions);\r\n  }, [query, data]);\r\n\r\n  const generateQuickActions = (): SearchSuggestion[] => [\r\n    {\r\n      id: 'quick-available',\r\n      text: 'Documents disponibles',\r\n      type: 'quick-action',\r\n      icon: BookOpen,\r\n      description: 'Voir tous les livres disponibles',\r\n      action: () => handleQuickSearch('status:available')\r\n    },\r\n    {\r\n      id: 'quick-recent',\r\n      text: 'Ajouts rcents',\r\n      type: 'quick-action',\r\n      icon: TrendingUp,\r\n      description: 'Documents ajouts rcemment',\r\n      action: () => handleQuickSearch('recent')\r\n    },\r\n    {\r\n      id: 'quick-popular',\r\n      text: 'Plus emprunts',\r\n      type: 'quick-action',\r\n      icon: Zap,\r\n      description: 'Les livres les plus populaires',\r\n      action: () => handleQuickSearch('popular')\r\n    },\r\n    {\r\n      id: 'quick-overdue',\r\n      text: 'Retards',\r\n      type: 'quick-action',\r\n      icon: Clock,\r\n      description: 'Documents en retard',\r\n      action: () => handleQuickSearch('status:overdue')\r\n    }\r\n  ];\r\n\r\n  const handleQuickSearch = (searchType: string) => {\r\n    setQuery(searchType);\r\n    handleSearch(searchType);\r\n    setIsExpanded(false);\r\n  };\r\n\r\n  const handleSearch = (searchQuery: string = query) => {\r\n    if (searchQuery.trim()) {\r\n      // Add to recent searches\r\n      const newRecentSearches = [\r\n        searchQuery,\r\n        ...recentSearches.filter(s => s !== searchQuery)\r\n      ].slice(0, 5);\r\n      setRecentSearches(newRecentSearches);\r\n    }\r\n    \r\n    onSearch(searchQuery, filters);\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion: SearchSuggestion) => {\r\n    if (suggestion.action) {\r\n      suggestion.action();\r\n    } else {\r\n      setQuery(suggestion.text);\r\n      handleSearch(suggestion.text);\r\n    }\r\n    setIsExpanded(false);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (!isExpanded) return;\r\n\r\n    switch (e.key) {\r\n      case 'ArrowDown':\r\n        e.preventDefault();\r\n        setSelectedSuggestion(prev => \r\n          prev < suggestions.length - 1 ? prev + 1 : prev\r\n        );\r\n        break;\r\n      case 'ArrowUp':\r\n        e.preventDefault();\r\n        setSelectedSuggestion(prev => prev > 0 ? prev - 1 : -1);\r\n        break;\r\n      case 'Enter':\r\n        e.preventDefault();\r\n        if (selectedSuggestion >= 0) {\r\n          handleSuggestionClick(suggestions[selectedSuggestion]);\r\n        } else {\r\n          handleSearch();\r\n          setIsExpanded(false);\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        setIsExpanded(false);\r\n        setSelectedSuggestion(-1);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setQuery('');\r\n    setSuggestions(generateQuickActions());\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  // Click outside handler\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\r\n        setIsExpanded(false);\r\n        setSelectedSuggestion(-1);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`smart-search ${isExpanded ? 'expanded' : ''} ${className}`} ref={searchRef}>\r\n      <div className=\"search-container\">\r\n        <div className=\"search-input-wrapper\">\r\n          <Search className=\"search-icon\" size={20} />\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            onFocus={() => setIsExpanded(true)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder={placeholder}\r\n            className=\"search-input\"\r\n          />\r\n          {query && (\r\n            <button className=\"clear-button\" onClick={clearSearch}>\r\n              <X size={16} />\r\n            </button>\r\n          )}\r\n          <button \r\n            className={`filter-button ${showFilters ? 'active' : ''}`}\r\n            onClick={() => setShowFilters(!showFilters)}\r\n          >\r\n            <Filter size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Advanced Filters */}\r\n        {showFilters && (\r\n          <div className=\"filters-panel\">\r\n            <div className=\"filter-row\">\r\n              <label>Type:</label>\r\n              <select \r\n                value={filters.type} \r\n                onChange={(e) => setFilters(prev => ({ \r\n                  ...prev, \r\n                  type: e.target.value as any \r\n                }))}\r\n              >\r\n                <option value=\"all\">Tout</option>\r\n                <option value=\"documents\">Documents</option>\r\n                <option value=\"borrowers\">Emprunteurs</option>\r\n                <option value=\"history\">Historique</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"filter-row\">\r\n              <label>Statut:</label>\r\n              <select \r\n                value={filters.status || ''} \r\n                onChange={(e) => setFilters(prev => ({ \r\n                  ...prev, \r\n                  status: e.target.value as any || undefined \r\n                }))}\r\n              >\r\n                <option value=\"\">Tous</option>\r\n                <option value=\"available\">Disponible</option>\r\n                <option value=\"borrowed\">Emprunt</option>\r\n                <option value=\"overdue\">En retard</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Search Suggestions */}\r\n        {isExpanded && (\r\n          <div className=\"suggestions-panel\">\r\n            {suggestions.length > 0 && (\r\n              <div className=\"suggestions-section\">\r\n                <div className=\"suggestions-header\">\r\n                  {query ? 'Suggestions' : 'Actions rapides'}\r\n                </div>\r\n                {suggestions.map((suggestion, index) => (\r\n                  <div\r\n                    key={suggestion.id}\r\n                    className={`suggestion-item ${index === selectedSuggestion ? 'selected' : ''}`}\r\n                    onClick={() => handleSuggestionClick(suggestion)}\r\n                  >\r\n                    <div className=\"suggestion-icon\">\r\n                      <suggestion.icon size={18} />\r\n                    </div>\r\n                    <div className=\"suggestion-content\">\r\n                      <div className=\"suggestion-text\">{suggestion.text}</div>\r\n                      {suggestion.description && (\r\n                        <div className=\"suggestion-description\">{suggestion.description}</div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"suggestion-type\">{suggestion.type}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Recent Searches */}\r\n            {recentSearches.length > 0 && !query && (\r\n              <div className=\"suggestions-section\">\r\n                <div className=\"suggestions-header\">Recherches rcentes</div>\r\n                {recentSearches.map((search, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"suggestion-item recent\"\r\n                    onClick={() => {\r\n                      setQuery(search);\r\n                      handleSearch(search);\r\n                      setIsExpanded(false);\r\n                    }}\r\n                  >\r\n                    <div className=\"suggestion-icon\">\r\n                      <Clock size={16} />\r\n                    </div>\r\n                    <div className=\"suggestion-content\">\r\n                      <div className=\"suggestion-text\">{search}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .smart-search {\r\n          position: relative;\r\n          width: 100%;\r\n          max-width: 600px;\r\n          margin: 0 auto;\r\n        }\r\n\r\n        .search-container {\r\n          position: relative;\r\n          background: rgba(255, 255, 255, 0.95);\r\n          border-radius: 16px;\r\n          border: 1px solid rgba(229, 220, 194, 0.4);\r\n          backdrop-filter: blur(10px);\r\n          transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          overflow: hidden;\r\n        }\r\n\r\n        .smart-search.expanded .search-container {\r\n          box-shadow: \r\n            0 20px 40px rgba(62, 92, 73, 0.15),\r\n            0 8px 16px rgba(62, 92, 73, 0.08);\r\n          border-color: #3E5C49;\r\n        }\r\n\r\n        .search-input-wrapper {\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 16px 20px;\r\n          gap: 12px;\r\n        }\r\n\r\n        .search-icon {\r\n          color: #6B7280;\r\n          transition: color 0.2s ease;\r\n        }\r\n\r\n        .smart-search.expanded .search-icon {\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .search-input {\r\n          flex: 1;\r\n          border: none;\r\n          outline: none;\r\n          background: transparent;\r\n          font-size: 16px;\r\n          color: #1F2937;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .search-input::placeholder {\r\n          color: #9CA3AF;\r\n        }\r\n\r\n        .clear-button, .filter-button {\r\n          padding: 8px;\r\n          border: none;\r\n          background: rgba(107, 114, 128, 0.1);\r\n          border-radius: 8px;\r\n          color: #6B7280;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .clear-button:hover, .filter-button:hover {\r\n          background: rgba(107, 114, 128, 0.2);\r\n          color: #374151;\r\n        }\r\n\r\n        .filter-button.active {\r\n          background: #3E5C49;\r\n          color: white;\r\n        }\r\n\r\n        .filters-panel {\r\n          padding: 16px 20px;\r\n          border-top: 1px solid rgba(229, 220, 194, 0.4);\r\n          background: rgba(248, 246, 240, 0.5);\r\n          display: flex;\r\n          gap: 20px;\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .filter-row {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n\r\n        .filter-row label {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #374151;\r\n          min-width: 60px;\r\n        }\r\n\r\n        .filter-row select {\r\n          padding: 6px 12px;\r\n          border: 1px solid rgba(229, 220, 194, 0.6);\r\n          border-radius: 8px;\r\n          background: white;\r\n          font-size: 14px;\r\n          color: #374151;\r\n          outline: none;\r\n          transition: border-color 0.2s ease;\r\n        }\r\n\r\n        .filter-row select:focus {\r\n          border-color: #3E5C49;\r\n        }\r\n\r\n        .suggestions-panel {\r\n          border-top: 1px solid rgba(229, 220, 194, 0.4);\r\n          max-height: 400px;\r\n          overflow-y: auto;\r\n        }\r\n\r\n        .suggestions-section {\r\n          padding: 8px 0;\r\n        }\r\n\r\n        .suggestions-header {\r\n          padding: 12px 20px 8px;\r\n          font-size: 12px;\r\n          font-weight: 700;\r\n          color: #6B7280;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n        }\r\n\r\n        .suggestion-item {\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 12px 20px;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          gap: 12px;\r\n        }\r\n\r\n        .suggestion-item:hover,\r\n        .suggestion-item.selected {\r\n          background: rgba(62, 92, 73, 0.08);\r\n        }\r\n\r\n        .suggestion-item.recent {\r\n          opacity: 0.8;\r\n        }\r\n\r\n        .suggestion-icon {\r\n          width: 36px;\r\n          height: 36px;\r\n          background: rgba(62, 92, 73, 0.1);\r\n          border-radius: 10px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #3E5C49;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .suggestion-content {\r\n          flex: 1;\r\n        }\r\n\r\n        .suggestion-text {\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          color: #1F2937;\r\n          margin-bottom: 2px;\r\n        }\r\n\r\n        .suggestion-description {\r\n          font-size: 13px;\r\n          color: #6B7280;\r\n        }\r\n\r\n        .suggestion-type {\r\n          font-size: 11px;\r\n          color: #9CA3AF;\r\n          text-transform: uppercase;\r\n          font-weight: 600;\r\n          letter-spacing: 0.5px;\r\n          background: rgba(156, 163, 175, 0.1);\r\n          padding: 4px 8px;\r\n          border-radius: 6px;\r\n        }\r\n\r\n        /* Responsive Design */\r\n        @media (max-width: 768px) {\r\n          .search-input-wrapper {\r\n            padding: 14px 16px;\r\n          }\r\n\r\n          .search-input {\r\n            font-size: 16px; /* Prevents zoom on iOS */\r\n          }\r\n\r\n          .filters-panel {\r\n            flex-direction: column;\r\n            gap: 12px;\r\n          }\r\n\r\n          .filter-row {\r\n            justify-content: space-between;\r\n          }\r\n\r\n          .filter-row label {\r\n            min-width: auto;\r\n          }\r\n        }\r\n\r\n        /* High contrast mode */\r\n        @media (prefers-contrast: high) {\r\n          .search-container {\r\n            border: 2px solid #000;\r\n            background: #fff;\r\n          }\r\n\r\n          .suggestion-item:hover,\r\n          .suggestion-item.selected {\r\n            background: #000;\r\n            color: #fff;\r\n          }\r\n        }\r\n\r\n        /* Reduced motion */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .search-container,\r\n          .suggestion-item,\r\n          .clear-button,\r\n          .filter-button {\r\n            transition: none;\r\n          }\r\n        }\r\n\r\n        /* Dark mode considerations */\r\n        @media (prefers-color-scheme: dark) {\r\n          .search-container {\r\n            background: rgba(31, 41, 55, 0.95);\r\n            border-color: rgba(75, 85, 99, 0.4);\r\n          }\r\n\r\n          .search-input {\r\n            color: #F3F4F6;\r\n          }\r\n\r\n          .search-input::placeholder {\r\n            color: #6B7280;\r\n          }\r\n\r\n          .filters-panel {\r\n            background: rgba(17, 24, 39, 0.5);\r\n          }\r\n\r\n          .suggestion-text {\r\n            color: #F3F4F6;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { Minus, Square, X, BookOpen, RefreshCw } from 'lucide-react';\r\n\r\ninterface TitleBarProps {\r\n  onRefresh?: () => void;\r\n  isAuthenticated?: boolean;\r\n}\r\n\r\nexport const TitleBar: React.FC<TitleBarProps> = ({ onRefresh, isAuthenticated = false }) => {\r\n  const handleMinimize = () => {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.minimizeWindow) {\r\n        window.electronAPI.minimizeWindow();\r\n      } else {\r\n        console.warn('electronAPI.minimizeWindow non disponible');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la minimisation:', error);\r\n    }\r\n  };\r\n\r\n  const handleMaximize = () => {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.maximizeWindow) {\r\n        window.electronAPI.maximizeWindow();\r\n      } else {\r\n        console.warn('electronAPI.maximizeWindow non disponible');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la maximisation:', error);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.closeWindow) {\r\n        window.electronAPI.closeWindow();\r\n      } else {\r\n        console.warn('electronAPI.closeWindow non disponible');\r\n        // Fallback pour fermer la fentre\r\n        if (window.close) {\r\n          window.close();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la fermeture:', error);\r\n    }\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    try {\r\n      if (onRefresh) {\r\n        onRefresh();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors du rafrachissement:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"titlebar\">\r\n      <div className=\"titlebar-content\">\r\n        <div className=\"titlebar-left\">\r\n          <div className=\"app-logo\">\r\n            <BookOpen size={18} />\r\n          </div>\r\n          <span className=\"app-title\">Bibliothque</span>\r\n          <div className=\"title-separator\"></div>\r\n          <span className=\"app-subtitle\">Gestion moderne de collection</span>\r\n        </div>\r\n        \r\n        <div className=\"titlebar-center\">\r\n          {/* Search bar could go here in future */}\r\n        </div>\r\n        \r\n        <div className=\"titlebar-controls\">\r\n          {isAuthenticated && onRefresh && (\r\n            <button className=\"control-button refresh\" onClick={handleRefresh} title=\"Rafrachir\">\r\n              <RefreshCw size={12} />\r\n            </button>\r\n          )}\r\n          <button className=\"control-button minimize\" onClick={handleMinimize} title=\"Rduire\">\r\n            <Minus size={12} />\r\n          </button>\r\n          <button className=\"control-button maximize\" onClick={handleMaximize} title=\"Agrandir\">\r\n            <Square size={10} />\r\n          </button>\r\n          <button className=\"control-button close\" onClick={handleClose} title=\"Fermer\">\r\n            <X size={12} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <style>{`\r\n        .titlebar {\r\n          height: 48px;\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          border-bottom: 1px solid rgba(46, 69, 58, 0.2);\r\n          -webkit-app-region: drag;\r\n          position: relative;\r\n          z-index: 1000;\r\n        }\r\n        \r\n        .titlebar::after {\r\n          content: '';\r\n          position: absolute;\r\n          bottom: 0;\r\n          left: 0;\r\n          right: 0;\r\n          height: 1px;\r\n          background: linear-gradient(90deg, transparent, rgba(243, 238, 217, 0.3), transparent);\r\n        }\r\n        \r\n        .titlebar-content {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          height: 100%;\r\n          padding: 0 8px 0 16px;\r\n          position: relative;\r\n        }\r\n        \r\n        .titlebar-left {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n        \r\n        .app-logo {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          width: 32px;\r\n          height: 32px;\r\n          background: rgba(243, 238, 217, 0.15);\r\n          border-radius: 8px;\r\n          color: #F3EED9;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .app-title {\r\n          font-size: 14px;\r\n          font-weight: 700;\r\n          color: #F3EED9;\r\n          letter-spacing: -0.2px;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .title-separator {\r\n          width: 1px;\r\n          height: 16px;\r\n          background: rgba(243, 238, 217, 0.3);\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .app-subtitle {\r\n          font-size: 12px;\r\n          font-weight: 400;\r\n          color: rgba(243, 238, 217, 0.8);\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n        \r\n        .titlebar-center {\r\n          flex: 2;\r\n          display: flex;\r\n          justify-content: center;\r\n          margin: 0 16px;\r\n        }\r\n        \r\n        .titlebar-controls {\r\n          display: flex;\r\n          align-items: center;\r\n          -webkit-app-region: no-drag;\r\n          flex-shrink: 0;\r\n        }\r\n        \r\n        .control-button {\r\n          width: 44px;\r\n          height: 32px;\r\n          border: none;\r\n          background: transparent;\r\n          color: #F3EED9;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          border-radius: 4px;\r\n          transition: all 0.15s ease;\r\n          opacity: 0.8;\r\n          position: relative;\r\n        }\r\n        \r\n        .control-button::before {\r\n          content: '';\r\n          position: absolute;\r\n          inset: 4px;\r\n          border-radius: 2px;\r\n          background: transparent;\r\n          transition: background 0.15s ease;\r\n        }\r\n        \r\n        .control-button:hover {\r\n          opacity: 1;\r\n        }\r\n        \r\n        .control-button:hover::before {\r\n          background: rgba(243, 238, 217, 0.1);\r\n        }\r\n        \r\n        .control-button:active::before {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n        \r\n        .control-button.close:hover::before {\r\n          background: #E81123;\r\n        }\r\n        \r\n        .control-button.close:hover {\r\n          color: #FFFFFF;\r\n        }\r\n        \r\n        .control-button.close:active::before {\r\n          background: #C50E1F;\r\n        }\r\n\r\n        .control-button.refresh:hover::before {\r\n          background: rgba(139, 195, 74, 0.2);\r\n        }\r\n\r\n        .control-button.refresh:hover {\r\n          color: #8BC34A;\r\n        }\r\n\r\n        .control-button.refresh:active::before {\r\n          background: rgba(139, 195, 74, 0.3);\r\n        }\r\n        \r\n        /* Responsive adjustments */\r\n        @media (max-width: 768px) {\r\n          .app-subtitle {\r\n            display: none;\r\n          }\r\n          \r\n          .title-separator {\r\n            display: none;\r\n          }\r\n          \r\n          .titlebar-content {\r\n            padding: 0 4px 0 12px;\r\n          }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .titlebar-left {\r\n            gap: 8px;\r\n          }\r\n          \r\n          .app-title {\r\n            font-size: 13px;\r\n          }\r\n          \r\n          .control-button {\r\n            width: 40px;\r\n            height: 30px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect, createContext, useContext } from 'react';\r\nimport { \r\n  CheckCircle, \r\n  AlertTriangle, \r\n  XCircle, \r\n  Info, \r\n  X, \r\n  BookOpen,\r\n  Download,\r\n  Upload,\r\n  Zap,\r\n  Bell,\r\n  Star,\r\n  Users,\r\n  Activity\r\n} from 'lucide-react';\r\n\r\ninterface Toast {\r\n  id: string;\r\n  type: 'success' | 'error' | 'warning' | 'info' | 'custom';\r\n  title: string;\r\n  message: string;\r\n  duration?: number;\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n  icon?: any;\r\n  color?: string;\r\n  progress?: number;\r\n  sticky?: boolean;\r\n}\r\n\r\ninterface ToastContextType {\r\n  addToast: (toast: Omit<Toast, 'id'>) => void;\r\n  removeToast: (id: string) => void;\r\n  updateToast: (id: string, updates: Partial<Toast>) => void;\r\n  clearAll: () => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport const useToast = () => {\r\n  const context = useContext(ToastContext);\r\n  if (!context) {\r\n    throw new Error('useToast must be used within a ToastProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ToastProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ToastProvider: React.FC<ToastProviderProps> = ({ children }) => {\r\n  const [toasts, setToasts] = useState<Toast[]>([]);\r\n\r\n  const addToast = (toastData: Omit<Toast, 'id'>) => {\r\n    const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    const toast: Toast = {\r\n      id,\r\n      duration: 5000,\r\n      ...toastData\r\n    };\r\n\r\n    setToasts(prev => [...prev, toast]);\r\n\r\n    // Auto remove if not sticky\r\n    if (!toast.sticky && toast.duration) {\r\n      setTimeout(() => {\r\n        removeToast(id);\r\n      }, toast.duration);\r\n    }\r\n  };\r\n\r\n  const removeToast = (id: string) => {\r\n    setToasts(prev => prev.filter(toast => toast.id !== id));\r\n  };\r\n\r\n  const updateToast = (id: string, updates: Partial<Toast>) => {\r\n    setToasts(prev => prev.map(toast => \r\n      toast.id === id ? { ...toast, ...updates } : toast\r\n    ));\r\n  };\r\n\r\n  const clearAll = () => {\r\n    setToasts([]);\r\n  };\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ addToast, removeToast, updateToast, clearAll }}>\r\n      {children}\r\n      <ToastContainer toasts={toasts} removeToast={removeToast} />\r\n    </ToastContext.Provider>\r\n  );\r\n};\r\n\r\ninterface ToastContainerProps {\r\n  toasts: Toast[];\r\n  removeToast: (id: string) => void;\r\n}\r\n\r\nconst ToastContainer: React.FC<ToastContainerProps> = ({ toasts, removeToast }) => {\r\n  return (\r\n    <div className=\"toast-container\">\r\n      {toasts.map((toast, index) => (\r\n        <ToastItem \r\n          key={toast.id} \r\n          toast={toast} \r\n          onRemove={() => removeToast(toast.id)}\r\n          index={index}\r\n        />\r\n      ))}\r\n      \r\n      <style>{`\r\n        .toast-container {\r\n          position: fixed;\r\n          top: 20px;\r\n          right: 20px;\r\n          z-index: 10000;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          max-width: 420px;\r\n          width: 100%;\r\n          pointer-events: none;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .toast-container {\r\n            top: 80px;\r\n            left: 20px;\r\n            right: 20px;\r\n            max-width: none;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ToastItemProps {\r\n  toast: Toast;\r\n  onRemove: () => void;\r\n  index: number;\r\n}\r\n\r\nconst ToastItem: React.FC<ToastItemProps> = ({ toast, onRemove, index }) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [isRemoving, setIsRemoving] = useState(false);\r\n  const [progress, setProgress] = useState(100);\r\n\r\n  useEffect(() => {\r\n    // Animate in\r\n    setTimeout(() => setIsVisible(true), 50 * index);\r\n  }, [index]);\r\n\r\n  useEffect(() => {\r\n    // Progress bar animation\r\n    if (toast.duration && !toast.sticky) {\r\n      const startTime = Date.now();\r\n      const interval = setInterval(() => {\r\n        const elapsed = Date.now() - startTime;\r\n        const remaining = Math.max(0, (toast.duration! - elapsed) / toast.duration! * 100);\r\n        setProgress(remaining);\r\n        \r\n        if (remaining === 0) {\r\n          clearInterval(interval);\r\n        }\r\n      }, 50);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [toast.duration, toast.sticky]);\r\n\r\n  const handleRemove = () => {\r\n    setIsRemoving(true);\r\n    setTimeout(onRemove, 300);\r\n  };\r\n\r\n  const getIcon = () => {\r\n    if (toast.icon) return toast.icon;\r\n    \r\n    switch (toast.type) {\r\n      case 'success': return CheckCircle;\r\n      case 'error': return XCircle;\r\n      case 'warning': return AlertTriangle;\r\n      case 'info': return Info;\r\n      default: return Info;\r\n    }\r\n  };\r\n\r\n  const getColors = () => {\r\n    if (toast.color) {\r\n      return {\r\n        background: `${toast.color}15`,\r\n        border: `${toast.color}40`,\r\n        accent: toast.color\r\n      };\r\n    }\r\n\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return { background: '#10B98115', border: '#10B98140', accent: '#10B981' };\r\n      case 'error':\r\n        return { background: '#EF444415', border: '#EF444440', accent: '#EF4444' };\r\n      case 'warning':\r\n        return { background: '#F59E0B15', border: '#F59E0B40', accent: '#F59E0B' };\r\n      case 'info':\r\n        return { background: '#3B82F615', border: '#3B82F640', accent: '#3B82F6' };\r\n      default:\r\n        return { background: '#6B728015', border: '#6B728040', accent: '#6B7280' };\r\n    }\r\n  };\r\n\r\n  const Icon = getIcon();\r\n  const colors = getColors();\r\n\r\n  return (\r\n    <div \r\n      className={`toast-item ${isVisible ? 'visible' : ''} ${isRemoving ? 'removing' : ''}`}\r\n      style={{\r\n        '--toast-bg': colors.background,\r\n        '--toast-border': colors.border,\r\n        '--toast-accent': colors.accent\r\n      } as React.CSSProperties}\r\n    >\r\n      <div className=\"toast-content\">\r\n        <div className=\"toast-icon\">\r\n          <Icon size={20} />\r\n        </div>\r\n        \r\n        <div className=\"toast-text\">\r\n          <div className=\"toast-title\">{toast.title}</div>\r\n          <div className=\"toast-message\">{toast.message}</div>\r\n          \r\n          {toast.progress !== undefined && (\r\n            <div className=\"toast-progress-container\">\r\n              <div className=\"toast-progress-label\">\r\n                Progression: {Math.round(toast.progress)}%\r\n              </div>\r\n              <div className=\"toast-progress-bar\">\r\n                <div \r\n                  className=\"toast-progress-fill\"\r\n                  style={{ width: `${toast.progress}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {toast.action && (\r\n          <button \r\n            className=\"toast-action\"\r\n            onClick={toast.action.onClick}\r\n          >\r\n            {toast.action.label}\r\n          </button>\r\n        )}\r\n\r\n        <button className=\"toast-close\" onClick={handleRemove}>\r\n          <X size={16} />\r\n        </button>\r\n      </div>\r\n\r\n      {!toast.sticky && toast.duration && (\r\n        <div className=\"toast-timer\">\r\n          <div \r\n            className=\"toast-timer-fill\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        .toast-item {\r\n          background: var(--toast-bg);\r\n          border: 1px solid var(--toast-border);\r\n          border-radius: 16px;\r\n          backdrop-filter: blur(20px);\r\n          box-shadow: \r\n            0 20px 40px rgba(0, 0, 0, 0.1),\r\n            0 8px 16px rgba(0, 0, 0, 0.05);\r\n          overflow: hidden;\r\n          transform: translateX(100%);\r\n          opacity: 0;\r\n          transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n          pointer-events: auto;\r\n          position: relative;\r\n        }\r\n\r\n        .toast-item.visible {\r\n          transform: translateX(0);\r\n          opacity: 1;\r\n        }\r\n\r\n        .toast-item.removing {\r\n          transform: translateX(100%);\r\n          opacity: 0;\r\n        }\r\n\r\n        .toast-content {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 12px;\r\n          padding: 20px;\r\n          position: relative;\r\n        }\r\n\r\n        .toast-icon {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: var(--toast-accent);\r\n          border-radius: 12px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: white;\r\n          flex-shrink: 0;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .toast-icon::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: -100%;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n          animation: shimmer 2s infinite;\r\n        }\r\n\r\n        @keyframes shimmer {\r\n          0% { left: -100%; }\r\n          100% { left: 100%; }\r\n        }\r\n\r\n        .toast-text {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .toast-title {\r\n          font-size: 16px;\r\n          font-weight: 700;\r\n          color: #1F2937;\r\n          margin-bottom: 4px;\r\n          line-height: 1.2;\r\n        }\r\n\r\n        .toast-message {\r\n          font-size: 14px;\r\n          color: #6B7280;\r\n          line-height: 1.4;\r\n        }\r\n\r\n        .toast-progress-container {\r\n          margin-top: 12px;\r\n        }\r\n\r\n        .toast-progress-label {\r\n          font-size: 12px;\r\n          color: #9CA3AF;\r\n          margin-bottom: 6px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .toast-progress-bar {\r\n          height: 6px;\r\n          background: rgba(0, 0, 0, 0.1);\r\n          border-radius: 3px;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .toast-progress-fill {\r\n          height: 100%;\r\n          background: var(--toast-accent);\r\n          border-radius: inherit;\r\n          transition: width 0.3s ease;\r\n          position: relative;\r\n        }\r\n\r\n        .toast-progress-fill::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);\r\n          animation: progressShimmer 1.5s infinite;\r\n        }\r\n\r\n        @keyframes progressShimmer {\r\n          0% { transform: translateX(-100%); }\r\n          100% { transform: translateX(200%); }\r\n        }\r\n\r\n        .toast-action {\r\n          background: var(--toast-accent);\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 8px;\r\n          font-size: 12px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.2s ease;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .toast-action:hover {\r\n          transform: scale(1.05);\r\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .toast-close {\r\n          background: rgba(0, 0, 0, 0.1);\r\n          border: none;\r\n          border-radius: 8px;\r\n          padding: 8px;\r\n          cursor: pointer;\r\n          color: #6B7280;\r\n          transition: all 0.2s ease;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .toast-close:hover {\r\n          background: rgba(0, 0, 0, 0.2);\r\n          color: #374151;\r\n        }\r\n\r\n        .toast-timer {\r\n          position: absolute;\r\n          bottom: 0;\r\n          left: 0;\r\n          right: 0;\r\n          height: 3px;\r\n          background: rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .toast-timer-fill {\r\n          height: 100%;\r\n          background: var(--toast-accent);\r\n          transition: width 0.1s linear;\r\n        }\r\n\r\n        /* Dark mode */\r\n        @media (prefers-color-scheme: dark) {\r\n          .toast-title {\r\n            color: #F3F4F6;\r\n          }\r\n          \r\n          .toast-message {\r\n            color: #D1D5DB;\r\n          }\r\n          \r\n          .toast-close {\r\n            color: #9CA3AF;\r\n          }\r\n          \r\n          .toast-close:hover {\r\n            color: #F3F4F6;\r\n          }\r\n        }\r\n\r\n        /* High contrast mode */\r\n        @media (prefers-contrast: high) {\r\n          .toast-item {\r\n            border: 2px solid var(--toast-accent);\r\n          }\r\n        }\r\n\r\n        /* Reduced motion */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .toast-item {\r\n            transition: opacity 0.2s ease;\r\n          }\r\n\r\n          .toast-icon::before,\r\n          .toast-progress-fill::after {\r\n            animation: none;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Convenience hooks for common toast types\r\nexport const useQuickToast = () => {\r\n  const { addToast } = useToast();\r\n\r\n  return {\r\n    success: (title: string, message: string, action?: Toast['action']) => \r\n      addToast({ type: 'success', title, message, action }),\r\n    \r\n    error: (title: string, message: string, action?: Toast['action']) => \r\n      addToast({ type: 'error', title, message, action, duration: 8000 }),\r\n    \r\n    warning: (title: string, message: string, action?: Toast['action']) => \r\n      addToast({ type: 'warning', title, message, action, duration: 6000 }),\r\n    \r\n    info: (title: string, message: string, action?: Toast['action']) => \r\n      addToast({ type: 'info', title, message, action }),\r\n\r\n    documentAdded: (title: string) => \r\n      addToast({ \r\n        type: 'custom', \r\n        title: 'Document ajout !', \r\n        message: `\"${title}\" a t ajout  votre collection`,\r\n        icon: BookOpen,\r\n        color: '#10B981'\r\n      }),\r\n\r\n    documentBorrowed: (title: string, borrower: string) => \r\n      addToast({ \r\n        type: 'custom', \r\n        title: 'Document emprunt', \r\n        message: `\"${title}\" emprunt par ${borrower}`,\r\n        icon: Users,\r\n        color: '#F59E0B'\r\n      }),\r\n\r\n    documentReturned: (title: string) => \r\n      addToast({ \r\n        type: 'custom', \r\n        title: 'Document rendu', \r\n        message: `\"${title}\" a t rendu avec succs`,\r\n        icon: CheckCircle,\r\n        color: '#10B981'\r\n      }),\r\n\r\n    syncProgress: (progress: number) => {\r\n      const id = 'sync-progress';\r\n      if (progress === 100) {\r\n        addToast({\r\n          type: 'custom',\r\n          title: 'Synchronisation termine',\r\n          message: 'Toutes vos donnes sont  jour',\r\n          icon: CheckCircle,\r\n          color: '#10B981'\r\n        });\r\n      } else {\r\n        addToast({\r\n          type: 'custom',\r\n          title: 'Synchronisation en cours...',\r\n          message: 'Mise  jour de vos donnes',\r\n          icon: Activity,\r\n          color: '#3B82F6',\r\n          progress,\r\n          sticky: true\r\n        });\r\n      }\r\n    }\r\n  };\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  User, \r\n  X, \r\n  Save, \r\n  Edit3,\r\n  Mail,\r\n  Shield,\r\n  Building,\r\n  Eye,\r\n  EyeOff,\r\n  Lock,\r\n  Check,\r\n  AlertCircle\r\n} from 'lucide-react';\r\nimport { MicroButton, MicroCard } from './MicroInteractions';\r\nimport { useQuickToast } from './ToastSystem';\r\nimport { LocalAuthService } from '../services/LocalAuthService';\r\nimport { UnifiedUser, UnifiedInstitution } from '../types/UnifiedTypes';\r\n\r\ninterface UserProfileProps {\r\n  currentUser: UnifiedUser | null;\r\n  currentInstitution: UnifiedInstitution | null;\r\n  appMode: 'offline' | 'online';\r\n  onClose: () => void;\r\n  onUserUpdate: (user: UnifiedUser) => void;\r\n}\r\n\r\nexport const UserProfile: React.FC<UserProfileProps> = ({ \r\n  currentUser, \r\n  currentInstitution, \r\n  appMode, \r\n  onClose, \r\n  onUserUpdate \r\n}) => {\r\n  const { success, error } = useQuickToast();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showPasswordSection, setShowPasswordSection] = useState(false);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    firstName: currentUser?.firstName || '',\r\n    lastName: currentUser?.lastName || '',\r\n    email: currentUser?.email || '',\r\n    role: currentUser?.role || '',\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  });\r\n\r\n  const [validation, setValidation] = useState({\r\n    currentPasswordValid: false,\r\n    newPasswordValid: false,\r\n    passwordsMatch: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      setFormData({\r\n        firstName: currentUser.firstName || '',\r\n        lastName: currentUser.lastName || '',\r\n        email: currentUser.email || '',\r\n        role: currentUser.role || '',\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      });\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const validatePasswords = () => {\r\n    const currentPasswordValid = formData.currentPassword.length >= 3;\r\n    const newPasswordValid = formData.newPassword.length >= 4;\r\n    const passwordsMatch = formData.newPassword === formData.confirmPassword;\r\n\r\n    setValidation({\r\n      currentPasswordValid,\r\n      newPasswordValid,\r\n      passwordsMatch\r\n    });\r\n\r\n    return currentPasswordValid && newPasswordValid && passwordsMatch;\r\n  };\r\n\r\n  const handleInputChange = (field: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    if (field.includes('Password')) {\r\n      setTimeout(validatePasswords, 100);\r\n    }\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      if (appMode === 'offline') {\r\n        // Mode offline - utiliser LocalAuthService\r\n        const users = LocalAuthService.getUsers();\r\n        const userIndex = users.findIndex(u => u.id === currentUser?.id);\r\n        \r\n        if (userIndex === -1) {\r\n          error('Erreur', 'Utilisateur non trouv');\r\n          return;\r\n        }\r\n\r\n        const updatedUser = {\r\n          ...users[userIndex],\r\n          firstName: formData.firstName,\r\n          lastName: formData.lastName,\r\n          email: formData.email,\r\n          lastModified: new Date().toISOString()\r\n        };\r\n\r\n        // Si changement de mot de passe demand\r\n        if (showPasswordSection && formData.newPassword) {\r\n          if (!validatePasswords()) {\r\n            error('Erreur de validation', 'Veuillez vrifier les mots de passe');\r\n            return;\r\n          }\r\n\r\n          // Vrifier le mot de passe actuel\r\n          if (users[userIndex].password !== formData.currentPassword) {\r\n            error('Mot de passe incorrect', 'Le mot de passe actuel est incorrect');\r\n            return;\r\n          }\r\n\r\n          updatedUser.password = formData.newPassword;\r\n        }\r\n\r\n        users[userIndex] = updatedUser;\r\n        LocalAuthService.saveUsers(users);\r\n\r\n        // Mettre  jour le currentUser dans localStorage aussi\r\n        localStorage.setItem('currentUser', JSON.stringify(updatedUser));\r\n\r\n        // Notifier le parent avec l'utilisateur unifi\r\n        const unifiedUser: UnifiedUser = {\r\n          id: updatedUser.id,\r\n          firstName: updatedUser.firstName,\r\n          lastName: updatedUser.lastName,\r\n          email: updatedUser.email,\r\n          role: updatedUser.role,\r\n          institutionCode: updatedUser.institutionCode,\r\n          lastLogin: updatedUser.lastLogin,\r\n          preferences: updatedUser.preferences\r\n        };\r\n        onUserUpdate(unifiedUser);\r\n      } else {\r\n        // Mode online - utiliser Supabase ( implmenter si ncessaire)\r\n        error('Mode non support', 'La modification du profil en mode online n\\'est pas encore implmente');\r\n        return;\r\n      }\r\n\r\n      success('Profil mis  jour', 'Vos informations ont t sauvegardes avec succs');\r\n      setIsEditing(false);\r\n      setShowPasswordSection(false);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      }));\r\n    } catch (err) {\r\n      error('Erreur de sauvegarde', 'Impossible de sauvegarder les modifications');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRoleLabel = (role: string) => {\r\n    const roleMap: { [key: string]: string } = {\r\n      'admin': 'Administrateur',\r\n      'librarian': 'Bibliothcaire',\r\n      'user': 'Utilisateur',\r\n      'Administrateur': 'Administrateur',\r\n      'Bibliothcaire': 'Bibliothcaire',\r\n      'Utilisateur': 'Utilisateur'\r\n    };\r\n    return roleMap[role] || role;\r\n  };\r\n\r\n  const getInitials = (user: UnifiedUser | null) => {\r\n    if (user?.firstName && user?.lastName) {\r\n      return `${user.firstName.charAt(0)}${user.lastName.charAt(0)}`.toUpperCase();\r\n    }\r\n    if (user?.firstName) {\r\n      return user.firstName.charAt(0).toUpperCase();\r\n    }\r\n    if (user?.email) {\r\n      return user.email.charAt(0).toUpperCase();\r\n    }\r\n    return 'U';\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-profile-overlay\">\r\n      <div className=\"user-profile-modal\">\r\n        {/* Header */}\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-icon\">\r\n              <User size={28} />\r\n            </div>\r\n            <div className=\"header-text\">\r\n              <h2 className=\"modal-title\">Profil utilisateur</h2>\r\n              <p className=\"modal-subtitle\">Grez vos informations personnelles</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          {/* User Avatar Section */}\r\n          <div className=\"user-avatar-section\">\r\n            <div className=\"large-avatar\">\r\n              <span className=\"large-avatar-text\">{getInitials(currentUser)}</span>\r\n            </div>\r\n            <div className=\"user-basic-info\">\r\n              <h3 className=\"user-display-name\">\r\n                {currentUser?.firstName \r\n                  ? `${currentUser.firstName} ${currentUser.lastName || ''}`.trim()\r\n                  : currentUser?.email || 'Utilisateur'\r\n                }\r\n              </h3>\r\n              <div className=\"user-role-badge\">\r\n                <Shield size={14} />\r\n                {getRoleLabel(currentUser?.role || 'user')}\r\n              </div>\r\n              {currentInstitution && (\r\n                <div className=\"user-institution-badge\">\r\n                  <Building size={14} />\r\n                  {currentInstitution.name}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Profile Form */}\r\n          <div className=\"profile-form-section\">\r\n            <div className=\"section-header\">\r\n              <h4 className=\"section-title\">Informations personnelles</h4>\r\n              {!isEditing && (\r\n                <MicroButton\r\n                  variant=\"secondary\"\r\n                  size=\"small\"\r\n                  icon={Edit3}\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  Modifier\r\n                </MicroButton>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-grid\">\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Prnom</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.firstName}\r\n                  onChange={(e) => handleInputChange('firstName', e.target.value)}\r\n                  disabled={!isEditing}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Votre prnom\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Nom</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.lastName}\r\n                  onChange={(e) => handleInputChange('lastName', e.target.value)}\r\n                  disabled={!isEditing}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Votre nom\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group full-width\">\r\n                <label className=\"form-label\">Email</label>\r\n                <div className=\"input-with-icon\">\r\n                  <Mail size={16} className=\"input-icon\" />\r\n                  <input\r\n                    type=\"email\"\r\n                    value={formData.email}\r\n                    onChange={(e) => handleInputChange('email', e.target.value)}\r\n                    disabled={!isEditing}\r\n                    className=\"form-input with-icon\"\r\n                    placeholder=\"votre@email.com\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group full-width\">\r\n                <label className=\"form-label\">Rle</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={getRoleLabel(formData.role)}\r\n                  disabled\r\n                  className=\"form-input disabled\"\r\n                />\r\n                <p className=\"form-help\">Le rle ne peut tre modifi que par un administrateur</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Password Section */}\r\n            {isEditing && (\r\n              <div className=\"password-section\">\r\n                <div className=\"section-header\">\r\n                  <h4 className=\"section-title\">Scurit</h4>\r\n                  <MicroButton\r\n                    variant=\"secondary\"\r\n                    size=\"small\"\r\n                    icon={showPasswordSection ? EyeOff : Eye}\r\n                    onClick={() => setShowPasswordSection(!showPasswordSection)}\r\n                  >\r\n                    {showPasswordSection ? 'Masquer' : 'Changer mot de passe'}\r\n                  </MicroButton>\r\n                </div>\r\n\r\n                {showPasswordSection && (\r\n                  <div className=\"password-form\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Mot de passe actuel</label>\r\n                      <div className=\"input-with-validation\">\r\n                        <input\r\n                          type=\"password\"\r\n                          value={formData.currentPassword}\r\n                          onChange={(e) => handleInputChange('currentPassword', e.target.value)}\r\n                          className={`form-input ${validation.currentPasswordValid ? 'valid' : formData.currentPassword ? 'invalid' : ''}`}\r\n                          placeholder=\"Mot de passe actuel\"\r\n                        />\r\n                        {formData.currentPassword && (\r\n                          <div className=\"validation-icon\">\r\n                            {validation.currentPasswordValid ? \r\n                              <Check size={16} className=\"valid\" /> : \r\n                              <AlertCircle size={16} className=\"invalid\" />\r\n                            }\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Nouveau mot de passe</label>\r\n                      <div className=\"input-with-validation\">\r\n                        <input\r\n                          type=\"password\"\r\n                          value={formData.newPassword}\r\n                          onChange={(e) => handleInputChange('newPassword', e.target.value)}\r\n                          className={`form-input ${validation.newPasswordValid ? 'valid' : formData.newPassword ? 'invalid' : ''}`}\r\n                          placeholder=\"Nouveau mot de passe (min. 4 caractres)\"\r\n                        />\r\n                        {formData.newPassword && (\r\n                          <div className=\"validation-icon\">\r\n                            {validation.newPasswordValid ? \r\n                              <Check size={16} className=\"valid\" /> : \r\n                              <AlertCircle size={16} className=\"invalid\" />\r\n                            }\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Confirmer le mot de passe</label>\r\n                      <div className=\"input-with-validation\">\r\n                        <input\r\n                          type=\"password\"\r\n                          value={formData.confirmPassword}\r\n                          onChange={(e) => handleInputChange('confirmPassword', e.target.value)}\r\n                          className={`form-input ${validation.passwordsMatch && formData.confirmPassword ? 'valid' : formData.confirmPassword ? 'invalid' : ''}`}\r\n                          placeholder=\"Confirmer le nouveau mot de passe\"\r\n                        />\r\n                        {formData.confirmPassword && (\r\n                          <div className=\"validation-icon\">\r\n                            {validation.passwordsMatch ? \r\n                              <Check size={16} className=\"valid\" /> : \r\n                              <AlertCircle size={16} className=\"invalid\" />\r\n                            }\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {isEditing && (\r\n          <div className=\"modal-footer\">\r\n            <MicroButton\r\n              variant=\"secondary\"\r\n              onClick={() => {\r\n                setIsEditing(false);\r\n                setShowPasswordSection(false);\r\n                // Reset form\r\n                setFormData({\r\n                  firstName: currentUser?.firstName || '',\r\n                  lastName: currentUser?.lastName || '',\r\n                  email: currentUser?.email || '',\r\n                  role: currentUser?.role || '',\r\n                  currentPassword: '',\r\n                  newPassword: '',\r\n                  confirmPassword: ''\r\n                });\r\n              }}\r\n            >\r\n              Annuler\r\n            </MicroButton>\r\n            <MicroButton\r\n              variant=\"success\"\r\n              onClick={handleSaveProfile}\r\n              disabled={isLoading}\r\n              icon={Save}\r\n            >\r\n              {isLoading ? 'Sauvegarde...' : 'Sauvegarder'}\r\n            </MicroButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        .user-profile-overlay {\r\n          position: fixed;\r\n          inset: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n          padding: 20px;\r\n          backdrop-filter: blur(8px);\r\n        }\r\n\r\n        .user-profile-modal {\r\n          background: #FFFFFF;\r\n          border-radius: 20px;\r\n          width: 100%;\r\n          max-width: 600px;\r\n          max-height: 90vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\r\n          border: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .modal-header {\r\n          background: linear-gradient(135deg, #3E5C49 0%, #2E453A 100%);\r\n          color: #F3EED9;\r\n          padding: 32px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          position: relative;\r\n        }\r\n\r\n        .header-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n        }\r\n\r\n        .header-icon {\r\n          width: 56px;\r\n          height: 56px;\r\n          background: rgba(243, 238, 217, 0.2);\r\n          border-radius: 16px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          margin: 0 0 4px 0;\r\n        }\r\n\r\n        .modal-subtitle {\r\n          font-size: 14px;\r\n          opacity: 0.8;\r\n          margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n          width: 44px;\r\n          height: 44px;\r\n          border: none;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          color: #F3EED9;\r\n          border-radius: 12px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s ease;\r\n          z-index: 10;\r\n        }\r\n\r\n        .close-button:hover {\r\n          background: rgba(243, 238, 217, 0.2);\r\n        }\r\n\r\n        .modal-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 32px;\r\n        }\r\n\r\n        .user-avatar-section {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 24px;\r\n          margin-bottom: 32px;\r\n          padding: 24px;\r\n          background: rgba(243, 238, 217, 0.1);\r\n          border-radius: 16px;\r\n          border: 1px solid rgba(243, 238, 217, 0.2);\r\n        }\r\n\r\n        .large-avatar {\r\n          width: 80px;\r\n          height: 80px;\r\n          border-radius: 20px;\r\n          background: linear-gradient(135deg, #C2571B 0%, #A8481A 100%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-shrink: 0;\r\n          box-shadow: 0 8px 24px rgba(194, 87, 27, 0.3);\r\n        }\r\n\r\n        .large-avatar-text {\r\n          color: #F3EED9;\r\n          font-weight: 800;\r\n          font-size: 28px;\r\n          text-transform: uppercase;\r\n        }\r\n\r\n        .user-display-name {\r\n          font-size: 24px;\r\n          font-weight: 700;\r\n          color: #2E2E2E;\r\n          margin: 0 0 8px 0;\r\n        }\r\n\r\n        .user-role-badge,\r\n        .user-institution-badge {\r\n          display: inline-flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          padding: 6px 12px;\r\n          border-radius: 20px;\r\n          font-size: 12px;\r\n          font-weight: 600;\r\n          margin: 4px 8px 4px 0;\r\n        }\r\n\r\n        .user-role-badge {\r\n          background: rgba(62, 92, 73, 0.1);\r\n          color: #3E5C49;\r\n        }\r\n\r\n        .user-institution-badge {\r\n          background: rgba(194, 87, 27, 0.1);\r\n          color: #C2571B;\r\n        }\r\n\r\n        .profile-form-section {\r\n          margin-bottom: 24px;\r\n        }\r\n\r\n        .section-header {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .section-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin: 0;\r\n        }\r\n\r\n        .form-grid {\r\n          display: grid;\r\n          grid-template-columns: 1fr 1fr;\r\n          gap: 20px;\r\n        }\r\n\r\n        .form-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n\r\n        .form-group.full-width {\r\n          grid-column: 1 / -1;\r\n        }\r\n\r\n        .form-label {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          color: #2E2E2E;\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .form-input {\r\n          padding: 12px 16px;\r\n          border: 2px solid #E5DCC2;\r\n          border-radius: 8px;\r\n          font-size: 14px;\r\n          background: #FFFFFF;\r\n          color: #2E2E2E;\r\n          transition: all 0.3s ease;\r\n        }\r\n\r\n        .form-input:focus {\r\n          outline: none;\r\n          border-color: #3E5C49;\r\n          box-shadow: 0 0 0 3px rgba(62, 92, 73, 0.1);\r\n        }\r\n\r\n        .form-input:disabled {\r\n          background: #F5F5F5;\r\n          color: #4A4A4A;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        .form-input.disabled {\r\n          background: #F8F8F8;\r\n          border-color: #E0E0E0;\r\n        }\r\n\r\n        .form-input.with-icon {\r\n          padding-left: 44px;\r\n        }\r\n\r\n        .form-input.valid {\r\n          border-color: #10B981;\r\n        }\r\n\r\n        .form-input.invalid {\r\n          border-color: #DC2626;\r\n        }\r\n\r\n        .input-with-icon {\r\n          position: relative;\r\n        }\r\n\r\n        .input-icon {\r\n          position: absolute;\r\n          left: 14px;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n          color: #4A4A4A;\r\n        }\r\n\r\n        .input-with-validation {\r\n          position: relative;\r\n        }\r\n\r\n        .validation-icon {\r\n          position: absolute;\r\n          right: 12px;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n        }\r\n\r\n        .validation-icon .valid {\r\n          color: #10B981;\r\n        }\r\n\r\n        .validation-icon .invalid {\r\n          color: #DC2626;\r\n        }\r\n\r\n        .form-help {\r\n          font-size: 12px;\r\n          color: #4A4A4A;\r\n          margin: 4px 0 0 0;\r\n          font-style: italic;\r\n        }\r\n\r\n        .password-section {\r\n          margin-top: 32px;\r\n          padding-top: 24px;\r\n          border-top: 1px solid rgba(229, 220, 194, 0.3);\r\n        }\r\n\r\n        .password-form {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 16px;\r\n          margin-top: 20px;\r\n        }\r\n\r\n        .modal-footer {\r\n          padding: 24px 32px;\r\n          border-top: 1px solid #E5DCC2;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 16px;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .user-profile-modal {\r\n            margin: 12px;\r\n          }\r\n\r\n          .user-avatar-section {\r\n            flex-direction: column;\r\n            text-align: center;\r\n            gap: 16px;\r\n          }\r\n\r\n          .form-grid {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .modal-content {\r\n            padding: 20px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport { App } from './App';\r\n\r\nconst container = document.getElementById('root');\r\nconst root = createRoot(container!);\r\n\r\nroot.render(<App />);","// src/renderer/services/ConfigService.ts\r\nexport type AppMode = 'offline' | 'online';\r\n\r\nexport interface AppConfig {\r\n  mode: AppMode;\r\n  isConfigured: boolean;\r\n  configuredAt: string;\r\n  version: string;\r\n}\r\n\r\nexport class ConfigService {\r\n  private static readonly CONFIG_KEY = 'bibliotheque_app_config';\r\n  private static readonly DEFAULT_CONFIG: AppConfig = {\r\n    mode: 'offline',\r\n    isConfigured: false,\r\n    configuredAt: '',\r\n    version: '1.0.0'\r\n  };\r\n\r\n  /**\r\n   * Charge la configuration depuis localStorage\r\n   */\r\n  static getConfig(): AppConfig {\r\n    try {\r\n      const stored = localStorage.getItem(this.CONFIG_KEY);\r\n      if (stored) {\r\n        const config = JSON.parse(stored);\r\n        return { ...this.DEFAULT_CONFIG, ...config };\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement de la configuration:', error);\r\n    }\r\n    return this.DEFAULT_CONFIG;\r\n  }\r\n\r\n  /**\r\n   * Sauvegarde la configuration dans localStorage\r\n   */\r\n  static saveConfig(config: Partial<AppConfig>): void {\r\n    try {\r\n      const currentConfig = this.getConfig();\r\n      const newConfig: AppConfig = {\r\n        ...currentConfig,\r\n        ...config,\r\n        configuredAt: new Date().toISOString()\r\n      };\r\n      \r\n      localStorage.setItem(this.CONFIG_KEY, JSON.stringify(newConfig));\r\n      console.log('Configuration sauvegarde:', newConfig);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la sauvegarde de la configuration:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Vrifie si l'application a t configure\r\n   */\r\n  static isConfigured(): boolean {\r\n    return this.getConfig().isConfigured;\r\n  }\r\n\r\n  /**\r\n   * Obtient le mode de fonctionnement actuel\r\n   */\r\n  static getMode(): AppMode {\r\n    return this.getConfig().mode;\r\n  }\r\n\r\n  /**\r\n   * Configure l'application avec le mode choisi\r\n   */\r\n  static configureApp(mode: AppMode): void {\r\n    this.saveConfig({\r\n      mode,\r\n      isConfigured: true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Rinitialise la configuration (pour les tests ou la reconfiguration)\r\n   */\r\n  static resetConfig(): void {\r\n    try {\r\n      localStorage.removeItem(this.CONFIG_KEY);\r\n      console.log('Configuration rinitialise');\r\n    } catch (error) {\r\n      console.error('Erreur lors de la rinitialisation:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Met  jour uniquement le mode sans affecter les autres paramtres\r\n   */\r\n  static updateMode(mode: AppMode): void {\r\n    this.saveConfig({ mode });\r\n  }\r\n\r\n  /**\r\n   * Obtient les informations de configuration pour l'affichage\r\n   */\r\n  static getConfigInfo(): { \r\n    mode: AppMode; \r\n    isConfigured: boolean; \r\n    configuredAt: string; \r\n    displayMode: string \r\n  } {\r\n    const config = this.getConfig();\r\n    return {\r\n      ...config,\r\n      displayMode: config.mode === 'offline' ? 'Hors Ligne' : 'En Ligne'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Valide si le mode est support\r\n   */\r\n  static isModeSupported(mode: AppMode): boolean {\r\n    // Pour cette version, seul le mode offline est support\r\n    return mode === 'offline';\r\n  }\r\n\r\n  /**\r\n   * Obtient la liste des modes disponibles\r\n   */\r\n  static getAvailableModes(): Array<{ value: AppMode; label: string; supported: boolean }> {\r\n    return [\r\n      { value: 'offline', label: 'Hors Ligne', supported: true },\r\n      { value: 'online', label: 'En Ligne', supported: false }\r\n    ];\r\n  }\r\n}","// src/renderer/services/LocalAuthService.ts\r\n// Service pour grer l'authentification et les tablissements locaux\r\n\r\ninterface LocalUser {\r\n  id: string;\r\n  email: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  role: string;\r\n  institutionCode: string;\r\n  password: string; // Hash en production\r\n  lastLogin?: string;\r\n  preferences?: {\r\n    rememberMe: boolean;\r\n    autoLogin: boolean;\r\n    theme: string;\r\n  };\r\n}\r\n\r\ninterface LocalInstitution {\r\n  id: string;\r\n  code: string;\r\n  name: string;\r\n  address: string;\r\n  city: string;\r\n  country: string;\r\n  phone: string;\r\n  email: string;\r\n  website: string;\r\n  logo: string;\r\n  description: string;\r\n  type: string;\r\n  adminEmail: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface AppSettings {\r\n  requireAppPassword: boolean;\r\n  appPassword?: string;\r\n  lastUser?: string;\r\n  autoLogin: boolean;\r\n  rememberLastUser: boolean;\r\n}\r\n\r\nexport class LocalAuthService {\r\n  private static readonly USERS_KEY = 'local_users';\r\n  private static readonly INSTITUTIONS_KEY = 'local_institutions';\r\n  private static readonly SETTINGS_KEY = 'app_settings';\r\n  private static readonly LAST_LOGIN_KEY = 'last_login_info';\r\n\r\n  // === GESTION DES PARAMTRES DE L'APPLICATION ===\r\n  \r\n  static getAppSettings(): AppSettings {\r\n    const settings = localStorage.getItem(this.SETTINGS_KEY);\r\n    return settings ? JSON.parse(settings) : {\r\n      requireAppPassword: false,\r\n      autoLogin: false,\r\n      rememberLastUser: true\r\n    };\r\n  }\r\n\r\n  static saveAppSettings(settings: AppSettings): void {\r\n    localStorage.setItem(this.SETTINGS_KEY, JSON.stringify(settings));\r\n  }\r\n\r\n  static setAppPassword(password: string): void {\r\n    const settings = this.getAppSettings();\r\n    settings.requireAppPassword = true;\r\n    settings.appPassword = password; // En production, il faut hasher\r\n    this.saveAppSettings(settings);\r\n  }\r\n\r\n  static verifyAppPassword(password: string): boolean {\r\n    const settings = this.getAppSettings();\r\n    return !settings.requireAppPassword || settings.appPassword === password;\r\n  }\r\n\r\n  static clearAppPassword(): void {\r\n    const settings = this.getAppSettings();\r\n    settings.requireAppPassword = false;\r\n    delete settings.appPassword;\r\n    this.saveAppSettings(settings);\r\n  }\r\n\r\n  // === GESTION DES UTILISATEURS LOCAUX ===\r\n\r\n  static getUsers(): LocalUser[] {\r\n    const users = localStorage.getItem(this.USERS_KEY);\r\n    return users ? JSON.parse(users) : [];\r\n  }\r\n\r\n  static saveUsers(users: LocalUser[]): void {\r\n    localStorage.setItem(this.USERS_KEY, JSON.stringify(users));\r\n  }\r\n\r\n  static addUser(user: Omit<LocalUser, 'id'>): LocalUser {\r\n    const users = this.getUsers();\r\n    const newUser: LocalUser = {\r\n      ...user,\r\n      id: Date.now().toString(),\r\n      lastLogin: new Date().toISOString()\r\n    };\r\n    \r\n    // Vrifier si l'utilisateur existe dj\r\n    const existingUserIndex = users.findIndex(u => u.email === user.email);\r\n    if (existingUserIndex !== -1) {\r\n      users[existingUserIndex] = newUser;\r\n    } else {\r\n      users.push(newUser);\r\n    }\r\n    \r\n    this.saveUsers(users);\r\n    return newUser;\r\n  }\r\n\r\n  static findUser(email: string, password: string, institutionCode: string): LocalUser | null {\r\n    const users = this.getUsers();\r\n    return users.find(u => \r\n      u.email === email && \r\n      u.password === password && \r\n      u.institutionCode === institutionCode\r\n    ) || null;\r\n  }\r\n\r\n  static updateUserLastLogin(userId: string): void {\r\n    const users = this.getUsers();\r\n    const userIndex = users.findIndex(u => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      users[userIndex].lastLogin = new Date().toISOString();\r\n      this.saveUsers(users);\r\n    }\r\n  }\r\n\r\n  static updateUserPreferences(userId: string, preferences: Partial<LocalUser['preferences']>): void {\r\n    const users = this.getUsers();\r\n    const userIndex = users.findIndex(u => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      users[userIndex].preferences = { \r\n        rememberMe: false,\r\n        autoLogin: false,\r\n        theme: 'light',\r\n        ...users[userIndex].preferences, \r\n        ...preferences \r\n      };\r\n      this.saveUsers(users);\r\n    }\r\n  }\r\n\r\n  // === GESTION DES TABLISSEMENTS LOCAUX ===\r\n\r\n  static getInstitutions(): LocalInstitution[] {\r\n    const institutions = localStorage.getItem(this.INSTITUTIONS_KEY);\r\n    return institutions ? JSON.parse(institutions) : [];\r\n  }\r\n\r\n  static saveInstitutions(institutions: LocalInstitution[]): void {\r\n    localStorage.setItem(this.INSTITUTIONS_KEY, JSON.stringify(institutions));\r\n  }\r\n\r\n  static createInstitution(institutionData: Omit<LocalInstitution, 'id' | 'code' | 'created_at'>): LocalInstitution {\r\n    const institutions = this.getInstitutions();\r\n    \r\n    // Gnrer un code unique\r\n    let code: string;\r\n    do {\r\n      code = this.generateInstitutionCode();\r\n    } while (institutions.some(inst => inst.code === code));\r\n\r\n    const newInstitution: LocalInstitution = {\r\n      ...institutionData,\r\n      id: Date.now().toString(),\r\n      code,\r\n      created_at: new Date().toISOString()\r\n    };\r\n\r\n    institutions.push(newInstitution);\r\n    this.saveInstitutions(institutions);\r\n    \r\n    return newInstitution;\r\n  }\r\n\r\n  static findInstitutionByCode(code: string): LocalInstitution | null {\r\n    const institutions = this.getInstitutions();\r\n    return institutions.find(inst => inst.code === code) || null;\r\n  }\r\n\r\n  static getAllValidCodes(): string[] {\r\n    const institutions = this.getInstitutions();\r\n    const institutionCodes = institutions.map(inst => inst.code);\r\n    \r\n    // Ajouter les codes par dfaut\r\n    const defaultCodes = ['BIBLIO2024', 'OFFLINE', 'LOCAL', 'TEST'];\r\n    \r\n    return [...defaultCodes, ...institutionCodes];\r\n  }\r\n\r\n  private static generateInstitutionCode(): string {\r\n    // Gnre un code de 8 caractres alphanumriques\r\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n    let result = '';\r\n    for (let i = 0; i < 8; i++) {\r\n      result += chars.charAt(Math.floor(Math.random() * chars.length));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // === GESTION DE LA DERNIRE CONNEXION ===\r\n\r\n  static saveLastLoginInfo(email: string, institutionCode: string, rememberPassword: boolean = false, password?: string): void {\r\n    const settings = this.getAppSettings();\r\n    if (settings.rememberLastUser) {\r\n      const info: any = {\r\n        email,\r\n        institutionCode,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      if (rememberPassword && password) {\r\n        info.password = password; // En production, il faut hasher\r\n      }\r\n      \r\n      localStorage.setItem(this.LAST_LOGIN_KEY, JSON.stringify(info));\r\n    }\r\n  }\r\n\r\n  static getLastLoginInfo(): { email: string; institutionCode: string; password?: string; timestamp: string } | null {\r\n    const info = localStorage.getItem(this.LAST_LOGIN_KEY);\r\n    return info ? JSON.parse(info) : null;\r\n  }\r\n\r\n  static clearLastLoginInfo(): void {\r\n    localStorage.removeItem(this.LAST_LOGIN_KEY);\r\n  }\r\n\r\n  // === UTILISATEURS PAR DFAUT ===\r\n\r\n  static getDefaultUsers(): Array<{email: string; password: string; role: string}> {\r\n    return [\r\n      { email: 'admin@local', password: 'admin', role: 'Administrateur' },\r\n      { email: 'bibliothecaire@local', password: 'biblio', role: 'Bibliothcaire' },\r\n      { email: 'test@local', password: 'test', role: 'Utilisateur' }\r\n    ];\r\n  }\r\n\r\n  static isDefaultUser(email: string, password: string): boolean {\r\n    return this.getDefaultUsers().some(u => u.email === email && u.password === password);\r\n  }\r\n\r\n  // === MTHODES D'AUTHENTIFICATION ===\r\n\r\n  static authenticate(email: string, password: string, institutionCode: string): { success: boolean; user?: LocalUser; message?: string } {\r\n    // Vrifier si le code d'tablissement est valide\r\n    const validCodes = this.getAllValidCodes();\r\n    if (!validCodes.includes(institutionCode.toUpperCase())) {\r\n      return { success: false, message: 'Code d\\'tablissement invalide' };\r\n    }\r\n\r\n    // Chercher un utilisateur local d'abord\r\n    const localUser = this.findUser(email, password, institutionCode);\r\n    if (localUser) {\r\n      this.updateUserLastLogin(localUser.id);\r\n      return { success: true, user: localUser };\r\n    }\r\n\r\n    // Vrifier les utilisateurs par dfaut\r\n    if (this.isDefaultUser(email, password) || password === 'demo') {\r\n      // Crer/mettre  jour l'utilisateur par dfaut\r\n      const defaultUser = this.addUser({\r\n        email,\r\n        password,\r\n        firstName: email.split('@')[0].charAt(0).toUpperCase() + email.split('@')[0].slice(1),\r\n        lastName: 'Local',\r\n        role: email.includes('admin') ? 'admin' : email.includes('bibliothecaire') ? 'librarian' : 'user',\r\n        institutionCode,\r\n        preferences: {\r\n          rememberMe: false,\r\n          autoLogin: false,\r\n          theme: 'light'\r\n        }\r\n      });\r\n      \r\n      return { success: true, user: defaultUser };\r\n    }\r\n\r\n    return { success: false, message: 'Identifiants invalides' };\r\n  }\r\n\r\n  // === NETTOYAGE ===\r\n\r\n  static clearAllData(): void {\r\n    localStorage.removeItem(this.USERS_KEY);\r\n    localStorage.removeItem(this.INSTITUTIONS_KEY);\r\n    localStorage.removeItem(this.SETTINGS_KEY);\r\n    localStorage.removeItem(this.LAST_LOGIN_KEY);\r\n  }\r\n}","// Service Supabase pour le renderer (frontend) - Sans dpendances Node.js\r\n\r\nexport interface Institution {\r\n  id: string;\r\n  code: string;\r\n  name: string;\r\n  address: string;\r\n  city: string;\r\n  country: string;\r\n  phone: string;\r\n  email: string;\r\n  website: string;\r\n  logo: string;\r\n  description: string;\r\n  type: 'school' | 'university' | 'library' | 'other';\r\n  director?: string;\r\n  capacity?: number;\r\n  established_year?: string;\r\n  status: 'active' | 'inactive' | 'suspended';\r\n  subscription_plan: 'basic' | 'premium' | 'enterprise';\r\n  max_books: number;\r\n  max_users: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  email?: string;\r\n  role?: 'super_admin' | 'admin' | 'librarian' | 'user';\r\n  institution_id?: string;\r\n  avatar_url?: string;\r\n  phone?: string;\r\n  is_active?: boolean;\r\n  last_login?: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface SupabaseConfig {\r\n  url: string;\r\n  key: string;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  success: boolean;\r\n  user?: User;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\n// Service Supabase simplifi pour le renderer - utilise principalement l'authentification locale\r\nexport class SupabaseRendererService {\r\n  private currentUser: User | null = null;\r\n  private currentInstitution: Institution | null = null;\r\n  private supabaseUrl: string = '';\r\n  private supabaseKey: string = '';\r\n\r\n  constructor() {\r\n    // Rcuprer la configuration Supabase depuis les variables d'environnement via Electron\r\n    this.loadSupabaseConfig();\r\n  }\r\n\r\n  private async loadSupabaseConfig() {\r\n    try {\r\n      // Essayer de rcuprer la config via IPC Electron\r\n      if (window.electronAPI && window.electronAPI.getSupabaseConfig) {\r\n        const config = await window.electronAPI.getSupabaseConfig();\r\n        if (config) {\r\n          this.supabaseUrl = config.url || '';\r\n          this.supabaseKey = config.key || '';\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log('Configuration Supabase non disponible, mode local activ');\r\n    }\r\n  }\r\n\r\n  private async callSupabaseAPI(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    if (!this.supabaseUrl || !this.supabaseKey) {\r\n      throw new Error('Configuration Supabase manquante');\r\n    }\r\n\r\n    const url = `${this.supabaseUrl}/auth/v1${endpoint}`;\r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'apikey': this.supabaseKey,\r\n        'Authorization': `Bearer ${this.supabaseKey}`,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.text();\r\n      throw new Error(`Erreur API Supabase: ${error}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Mthodes d'authentification - utilise Supabase API si disponible, sinon authentification locale\r\n  async signIn(email: string, password: string): Promise<AuthResponse> {\r\n    try {\r\n      // Essayer l'authentification Supabase en premier\r\n      if (this.supabaseUrl && this.supabaseKey) {\r\n        console.log('Tentative d\\'authentification Supabase...');\r\n        \r\n        const result = await this.callSupabaseAPI('/token?grant_type=password', {\r\n          method: 'POST',\r\n          body: JSON.stringify({\r\n            email,\r\n            password\r\n          })\r\n        });\r\n\r\n        if (result.access_token && result.user) {\r\n          // Crer l'utilisateur au format de l'application\r\n          const user: User = {\r\n            id: result.user.id,\r\n            firstName: result.user.user_metadata?.first_name || result.user.user_metadata?.firstName || 'Utilisateur',\r\n            lastName: result.user.user_metadata?.last_name || result.user.user_metadata?.lastName || 'Supabase',\r\n            email: result.user.email,\r\n            role: result.user.user_metadata?.role || 'user'\r\n          };\r\n          \r\n          this.currentUser = user;\r\n          console.log('Authentification Supabase russie:', user);\r\n          \r\n          return {\r\n            success: true,\r\n            user,\r\n            message: 'Connexion Supabase russie'\r\n          };\r\n        }\r\n      }\r\n    } catch (supabaseError: any) {\r\n      console.log('chec authentification Supabase:', supabaseError.message);\r\n      // Continuer vers l'authentification locale\r\n    }\r\n\r\n    try {\r\n      // Authentification locale de fallback - simule une connexion russie\r\n      console.log('Utilisation de l\\'authentification locale de fallback...');\r\n      const user: User = {\r\n        id: Date.now().toString(),\r\n        firstName: 'Administrateur',\r\n        lastName: 'Local',\r\n        email: email\r\n      };\r\n      \r\n      this.currentUser = user;\r\n      return {\r\n        success: true,\r\n        user,\r\n        message: 'Connexion locale russie'\r\n      };\r\n    } catch (error) {\r\n      console.error('Sign in failed:', error);\r\n      return { success: false, error: 'chec de l\\'authentification' };\r\n    }\r\n  }\r\n\r\n  async signOut(): Promise<void> {\r\n    try {\r\n      this.currentUser = null;\r\n      this.currentInstitution = null;\r\n    } catch (error) {\r\n      console.error('Sign out failed:', error);\r\n    }\r\n  }\r\n\r\n  async signUp(email: string, password: string, userData: {\r\n    firstName: string;\r\n    lastName: string;\r\n    institutionCode: string;\r\n  }): Promise<AuthResponse> {\r\n    try {\r\n      // Authentification locale simplifie\r\n      const user: User = {\r\n        id: Date.now().toString(),\r\n        firstName: userData.firstName,\r\n        lastName: userData.lastName,\r\n        email: email\r\n      };\r\n      \r\n      this.currentUser = user;\r\n      return {\r\n        success: true,\r\n        user,\r\n        message: 'Registration successful'\r\n      };\r\n    } catch (error) {\r\n      console.error('Sign up failed:', error);\r\n      return { success: false, error: 'Registration failed' };\r\n    }\r\n  }\r\n\r\n  async register(userData: { firstName: string; lastName: string; institutionCode: string; role?: string }): Promise<AuthResponse> {\r\n    try {\r\n      // Utilise l'authentification locale\r\n      const user: User = {\r\n        id: Date.now().toString(),\r\n        firstName: userData.firstName,\r\n        lastName: userData.lastName\r\n      };\r\n      \r\n      this.currentUser = user;\r\n      return {\r\n        success: true,\r\n        user,\r\n        message: 'Registration successful'\r\n      };\r\n    } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      return {\r\n        success: false,\r\n        message: 'Registration failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Document management methods\r\n  async getDocuments(): Promise<any[]> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getDocuments) {\r\n        return await window.electronAPI.getDocuments();\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error getting documents:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async addDocument(document: any): Promise<any> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.addDocument) {\r\n        return await window.electronAPI.addDocument(document);\r\n      }\r\n      throw new Error('Add document API not available');\r\n    } catch (error) {\r\n      console.error('Error adding document:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async deleteDocument(id: string): Promise<boolean> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.deleteDocument) {\r\n        return await window.electronAPI.deleteDocument(parseInt(id, 10));\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error deleting document:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Author and category methods\r\n  async getAuthors(): Promise<any[]> { // Returns Author[] interface objects\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getAuthors) {\r\n        return await window.electronAPI.getAuthors();\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error getting authors:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getCategories(): Promise<any[]> { // Returns Category[] interface objects\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getCategories) {\r\n        return await window.electronAPI.getCategories();\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error getting categories:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Institution management - utilise des donnes locales simplifies\r\n  async createInstitution(institutionData: any): Promise<any> {\r\n    try {\r\n      // Crer une institution locale\r\n      const institution: Institution = {\r\n        id: Date.now().toString(),\r\n        code: institutionData.code || Math.random().toString(36).substr(2, 8).toUpperCase(),\r\n        name: institutionData.name || 'Mon Institution',\r\n        address: institutionData.address || '',\r\n        city: institutionData.city || '',\r\n        country: institutionData.country || '',\r\n        phone: institutionData.phone || '',\r\n        email: institutionData.email || '',\r\n        website: institutionData.website || '',\r\n        logo: institutionData.logo || '',\r\n        description: institutionData.description || '',\r\n        type: institutionData.type || 'library',\r\n        status: 'active',\r\n        subscription_plan: 'basic',\r\n        max_books: 1000,\r\n        max_users: 100,\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      };\r\n      \r\n      this.currentInstitution = institution;\r\n      return {\r\n        success: true,\r\n        institution,\r\n        code: institution.code\r\n      };\r\n    } catch (error) {\r\n      console.error('Error creating institution:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async switchInstitution(institutionCode: string): Promise<boolean> {\r\n    try {\r\n      // Simulation locale - toujours russir pour simplifier\r\n      if (this.currentInstitution) {\r\n        return true;\r\n      }\r\n      \r\n      // Crer une institution par dfaut si aucune n'existe\r\n      const institution: Institution = {\r\n        id: '1',\r\n        code: institutionCode,\r\n        name: 'Institution par dfaut',\r\n        address: '',\r\n        city: '',\r\n        country: '',\r\n        phone: '',\r\n        email: '',\r\n        website: '',\r\n        logo: '',\r\n        description: '',\r\n        type: 'library',\r\n        status: 'active',\r\n        subscription_plan: 'basic',\r\n        max_books: 1000,\r\n        max_users: 100,\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      };\r\n      \r\n      this.currentInstitution = institution;\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error switching institution:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Borrowing system methods\r\n  async borrowDocument(borrowData: any): Promise<any> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.borrowDocument) {\r\n        return await window.electronAPI.borrowDocument(\r\n          parseInt(borrowData.documentId, 10),\r\n          parseInt(borrowData.borrowerId, 10), \r\n          borrowData.expectedReturnDate\r\n        );\r\n      }\r\n      throw new Error('Borrow document API not available');\r\n    } catch (error) {\r\n      console.error('Error borrowing document:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async returnDocument(borrowId: string): Promise<boolean> {\r\n    // Use returnBook method from preload - convert string ID to number if needed\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.returnBook) {\r\n        const borrowIdNum = typeof borrowId === 'string' ? parseInt(borrowId, 10) : borrowId;\r\n        return await window.electronAPI.returnBook(borrowIdNum);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error returning document:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async returnBook(borrowId: string, notes?: string): Promise<boolean> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.returnBook) {\r\n        const borrowIdNum = typeof borrowId === 'string' ? parseInt(borrowId, 10) : borrowId;\r\n        return await window.electronAPI.returnBook(borrowIdNum, notes);\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error returning book:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Additional methods needed by the application\r\n  async getBorrowers(): Promise<any[]> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getBorrowers) {\r\n        return await window.electronAPI.getBorrowers();\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error getting borrowers:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async addBorrower(borrowerData: any): Promise<any> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.addBorrower) {\r\n        return await window.electronAPI.addBorrower(borrowerData);\r\n      }\r\n      throw new Error('Add borrower API not available');\r\n    } catch (error) {\r\n      console.error('Error adding borrower:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getBorrowedDocuments(): Promise<any[]> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getBorrowedDocuments) {\r\n        return await window.electronAPI.getBorrowedDocuments();\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error getting borrowed documents:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getStats(): Promise<any> {\r\n    try {\r\n      if (window.electronAPI && window.electronAPI.getStats) {\r\n        return await window.electronAPI.getStats();\r\n      }\r\n      return {\r\n        totalDocuments: 0,\r\n        borrowedDocuments: 0,\r\n        availableDocuments: 0,\r\n        totalAuthors: 0,\r\n        totalCategories: 0,\r\n        totalBorrowers: 0,\r\n        totalStudents: 0,\r\n        totalStaff: 0,\r\n        overdueDocuments: 0\r\n      };\r\n    } catch (error) {\r\n      console.error('Error getting stats:', error);\r\n      return {\r\n        totalDocuments: 0,\r\n        borrowedDocuments: 0,\r\n        availableDocuments: 0,\r\n        totalAuthors: 0,\r\n        totalCategories: 0,\r\n        totalBorrowers: 0,\r\n        totalStudents: 0,\r\n        totalStaff: 0,\r\n        overdueDocuments: 0\r\n      };\r\n    }\r\n  }\r\n\r\n  // Getters\r\n  getCurrentUser(): User | null {\r\n    return this.currentUser;\r\n  }\r\n\r\n  getCurrentInstitution(): Institution | null {\r\n    return this.currentInstitution;\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!this.currentUser;\r\n  }\r\n\r\n  isReady(): boolean {\r\n    return true; // Always ready for local operations\r\n  }\r\n\r\n  // Utility methods\r\n  async refreshAuth(): Promise<void> {\r\n    // No-op for local authentication\r\n  }\r\n\r\n  onAuthStateChange(callback: (user: User | null) => void): () => void {\r\n    // For local authentication, we don't have real-time auth changes\r\n    return () => {};\r\n  }\r\n}\r\n\r\n// Instance singleton pour le renderer\r\nexport const supabaseRenderer = new SupabaseRendererService();\r\nexport default supabaseRenderer;\r\n\r\n// No additional type exports needed - types are already exported above","// Types unifis pour les modes offline et online\r\n\r\nexport interface UnifiedUser {\r\n  id?: string | number;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  email: string;\r\n  role: string;\r\n  institutionCode?: string;\r\n  password?: string; // Seulement pour le mode offline\r\n  lastLogin?: string;\r\n  preferences?: {\r\n    rememberMe: boolean;\r\n    autoLogin: boolean;\r\n    theme: string;\r\n  };\r\n}\r\n\r\nexport interface UnifiedInstitution {\r\n  id?: string;\r\n  code?: string;\r\n  name: string;\r\n  address?: string;\r\n  city?: string;\r\n  country?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  website?: string;\r\n  logo?: string;\r\n  description?: string;\r\n}\r\n\r\n// Fonctions utilitaires pour convertir entre les types\r\nexport const convertToUnifiedUser = (user: any, mode: 'offline' | 'online'): UnifiedUser => {\r\n  if (mode === 'offline') {\r\n    // Utilisateur de LocalAuthService\r\n    return {\r\n      id: user.id,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      email: user.email,\r\n      role: user.role,\r\n      institutionCode: user.institutionCode,\r\n      password: user.password,\r\n      lastLogin: user.lastLogin,\r\n      preferences: user.preferences\r\n    };\r\n  } else {\r\n    // Utilisateur Supabase\r\n    return {\r\n      id: user.id,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      email: user.email,\r\n      role: user.role,\r\n      institutionCode: user.institutionCode,\r\n      lastLogin: user.lastLogin\r\n    };\r\n  }\r\n};\r\n\r\nexport const convertToUnifiedInstitution = (institution: any, mode: 'offline' | 'online'): UnifiedInstitution => {\r\n  if (mode === 'offline') {\r\n    // Institution de LocalAuthService\r\n    return {\r\n      id: institution.id,\r\n      code: institution.code,\r\n      name: institution.name,\r\n      address: institution.address,\r\n      city: institution.city,\r\n      country: institution.country,\r\n      phone: institution.phone,\r\n      email: institution.email,\r\n      website: institution.website,\r\n      logo: institution.logo,\r\n      description: institution.description\r\n    };\r\n  } else {\r\n    // Institution Supabase\r\n    return {\r\n      id: institution.id,\r\n      code: institution.code,\r\n      name: institution.name,\r\n      address: institution.address,\r\n      city: institution.city,\r\n      country: institution.country,\r\n      phone: institution.phone,\r\n      email: institution.email,\r\n      website: institution.website,\r\n      logo: institution.logo,\r\n      description: institution.description\r\n    };\r\n  }\r\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = global[\"webpackChunkbibliotheque_app\"] = global[\"webpackChunkbibliotheque_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors\"], () => (__webpack_require__(\"./src/renderer/index.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}